
import{a as S}from"./_oschunk-QTWMLN5H.js";import{a as C}from"./_oschunk-D53D4XS7.js";import{a as R}from"./_oschunk-5A2KL2WI.js";import{a as X,b as Z,d as v,l as $,n as W,o as M,p as B,q as G}from"./_oschunk-Y33Q5322.js";import{a as q,f as y,l as k,m as N,r as h}from"./_oschunk-E2QDXWUM.js";import{a as V}from"./_oschunk-LWAJOBKB.js";import{a as E}from"./_oschunk-CJQD3QEZ.js";import{e as I}from"./_oschunk-4T4POR5S.js";import{S as p,a as o,c as U,i as b,o as w,t as F}from"./_oschunk-344SHXOK.js";var r=p;{let l=class l extends r.Controller.BaseViewController{constructor(e,t,i){super(e,t,i);var c=this.controller;this.clientActionProxies={},this.dataFetchDependenciesOriginal={},this.dataFetchDependentsGraph={},this.shouldSendClientVarsToDataSources=!1}get sendResetPasswordEmail$ServerAction(){return this.hasOwnProperty("_sendResetPasswordEmail$ServerAction")||(this._sendResetPasswordEmail$ServerAction=function(e,t,i){var c=this.controller;return r.Logger.startActiveSpan("SendResetPasswordEmail",function(s){return s&&(s.setAttribute("code.function","SendResetPasswordEmail"),s.setAttribute("outsystems.function.key","82e5273e-87b6-4b68-8444-51cff0af2c32"),s.setAttribute("outsystems.function.owner.name","ZXingLibDemo"),s.setAttribute("outsystems.function.owner.key","61918b7a-e496-4b63-992b-b83299b21e43"),s.setAttribute("outsystems.function.type","SCREEN_SERVICE_SERVER_ACTION_CALL")),r.Flow.tryFinally(function(){var n={ApplicationName:r.DataConversion.ServerDataConverter.to(e,r.DataTypes.DataTypes.Text),CustomerEmail:r.DataConversion.ServerDataConverter.to(t,r.DataTypes.DataTypes.Email)};return c.callServerAction("SendResetPasswordEmail","screenservices/ZXingLibDemo/Common/RecoverPasswordRequest/ActionSendResetPasswordEmail","ZQ3JIWE5Y0g+GWpXfIJc8A",n,c.callContext(i),void 0,void 0,!1).then(function(u){var d=new(c.constructor.getVariableGroupType("ZXingLibDemo.Common.RecoverPasswordRequest$ActionSendResetPasswordEmail"));return d.successOut=r.DataConversion.ServerDataConverter.from(u.Success,r.DataTypes.DataTypes.Boolean),d})},function(){s&&s.end()})},0)}),this._sendResetPasswordEmail$ServerAction}set sendResetPasswordEmail$ServerAction(e){this._sendResetPasswordEmail$ServerAction=e}get dataFetchActionNames(){return this.hasOwnProperty("_dataFetchActionNames")||(this._dataFetchActionNames=[]),this._dataFetchActionNames}set dataFetchActionNames(e){this._dataFetchActionNames=e}get _resetPasswordOnClick$Action(){return this.hasOwnProperty("__resetPasswordOnClick$Action")||(this.__resetPasswordOnClick$Action=function(e){var t=this.model,i=this.controller,c=this.idService;return r.Logger.startActiveSpan("ResetPasswordOnClick",function(s){return s&&(s.setAttribute("code.function","ResetPasswordOnClick"),s.setAttribute("outsystems.function.key","3aad2e06-92b3-4cc7-8b61-e9d6e85af93b"),s.setAttribute("outsystems.function.owner.name","ZXingLibDemo"),s.setAttribute("outsystems.function.owner.key","61918b7a-e496-4b63-992b-b83299b21e43"),s.setAttribute("outsystems.function.type","CLIENT_SCREEN_ACTION")),r.Flow.tryFinally(function(){i.ensureControllerAlive("ResetPasswordOnClick"),e=i.callContext(e);var n=new r.DataTypes.VariableHolder;return r.Flow.executeAsyncFlow(function(){return r.Flow.executeSequence(function(){if(t.widgets.get(c.getId("RecoverPasswordForm")).validAttr)return t.variables.isExecutingVar=!0,t.flush(),i.sendResetPasswordEmail$ServerAction(r.BuiltinFunctions.getAppName(),t.variables.emailVar,e).then(function(u){n.value=u}).then(function(){if(n.value.successOut)return t.variables.isExecutingVar=!1,r.Flow.returnAsync(r.Navigation.navigateTo(r.Navigation.generateScreenURL("ZXingLibDemo","RecoverPasswordReset",{Email:r.DataConversion.ServerDataConverter.to(t.variables.emailVar,r.DataTypes.DataTypes.Email)}),r.Transitions.createTransition(r.Transitions.TransitionAnimation.Default),e,!0));r.FeedbackMessageService.showFeedbackMessage("An error has occured. Please try again later.",3),t.variables.isExecutingVar=!1})})})},function(){s&&s.end()})},1)}),this.__resetPasswordOnClick$Action}set _resetPasswordOnClick$Action(e){this.__resetPasswordOnClick$Action=e}resetPasswordOnClick$Action(e){var t=this.controller;return r.Logger.startActiveSpan("ResetPasswordOnClick__proxy",function(i){return i&&(i.setAttribute("code.function","ResetPasswordOnClick"),i.setAttribute("outsystems.function.key","3aad2e06-92b3-4cc7-8b61-e9d6e85af93b"),i.setAttribute("outsystems.function.owner.name","ZXingLibDemo"),i.setAttribute("outsystems.function.owner.key","61918b7a-e496-4b63-992b-b83299b21e43"),i.setAttribute("outsystems.function.type","CLIENT_SCREEN_ACTION")),r.Flow.tryFinally(function(){return t.safeExecuteClientAction(t._resetPasswordOnClick$Action,e)},function(){i&&i.end()})},0)}get onInitializeEventHandler(){return this.hasOwnProperty("_onInitializeEventHandler")||(this._onInitializeEventHandler=null),this._onInitializeEventHandler}set onInitializeEventHandler(e){this._onInitializeEventHandler=e}get onReadyEventHandler(){return this.hasOwnProperty("_onReadyEventHandler")||(this._onReadyEventHandler=null),this._onReadyEventHandler}set onReadyEventHandler(e){this._onReadyEventHandler=e}get onRenderEventHandler(){return this.hasOwnProperty("_onRenderEventHandler")||(this._onRenderEventHandler=null),this._onRenderEventHandler}set onRenderEventHandler(e){this._onRenderEventHandler=e}get onDestroyEventHandler(){return this.hasOwnProperty("_onDestroyEventHandler")||(this._onDestroyEventHandler=null),this._onDestroyEventHandler}set onDestroyEventHandler(e){this._onDestroyEventHandler=e}get onParametersChangedEventHandler(){return this.hasOwnProperty("_onParametersChangedEventHandler")||(this._onParametersChangedEventHandler=null),this._onParametersChangedEventHandler}set onParametersChangedEventHandler(e){this._onParametersChangedEventHandler=e}get onSyncStartEventHandler(){return this.hasOwnProperty("_onSyncStartEventHandler")||(this._onSyncStartEventHandler=null),this._onSyncStartEventHandler}set onSyncStartEventHandler(e){this._onSyncStartEventHandler=e}get onSyncCompleteEventHandler(){return this.hasOwnProperty("_onSyncCompleteEventHandler")||(this._onSyncCompleteEventHandler=null),this._onSyncCompleteEventHandler}set onSyncCompleteEventHandler(e){this._onSyncCompleteEventHandler=e}get onSyncErrorEventHandler(){return this.hasOwnProperty("_onSyncErrorEventHandler")||(this._onSyncErrorEventHandler=null),this._onSyncErrorEventHandler}set onSyncErrorEventHandler(e){this._onSyncErrorEventHandler=e}get handleError(){return this.hasOwnProperty("_handleError")||(this._handleError=function(e){return E.default.handleError(e,this.callContext())}),this._handleError}set handleError(e){this._handleError=e}static checkPermissions(){}getDefaultTimeout(){return I.defaultTimeout}};o(l,"ControllerInner");let f=l;D=f,D.registerVariableGroupType("ZXingLibDemo.Common.RecoverPasswordRequest$ActionSendResetPasswordEmail",[{name:"Success",attrName:"successOut",mandatory:!1,dataType:r.DataTypes.DataTypes.Boolean,defaultValue:o(function(){return!1},"defaultValue")}])}var D,O=new r.Controller.ControllerFactory(D,V);var a=U(q());var g=p,H=class H extends g.DataTypes.GenericRecord{static attributesToDeclare(){return[this.attr("IsExecuting","isExecutingVar","IsExecuting",!0,!1,g.DataTypes.DataTypes.Boolean,function(){return!1},!1),this.attr("Email","emailVar","Email",!0,!1,g.DataTypes.DataTypes.Email,function(){return""},!1)].concat(g.DataTypes.GenericRecord.attributesToDeclare.call(this))}};o(H,"VariablesRecord");var P=H;P.init();var L=class L extends g.Model.BaseWidgetRecordMap{static getWidgetsType(){return{RecoverPasswordForm:g.Model.ValidationWidgetRecord,Input_Email:g.Model.ValidationWidgetRecord}}};o(L,"WidgetsRecord");var A=L,T=class T extends g.Model.BaseViewModel{static getVariablesRecordConstructor(){return P}static getWidgetsRecordConstructor(){return A}static get hasValidationWidgets(){return!0}setInputs(l){}};o(T,"Model");var _=T;_._hasValidationWidgetsValue=void 0;var x=new g.Model.ModelFactory(_);var z=o(function(){var f=N(function(l){var m=l.model,e=l.controller,t=l.controller.idService,i=e.validationService,c=e.callContext(),s={props:l,validateWidget:o(function(d){l.validateWidget(l,d)},"validateWidget")},n=m,u=k();return(0,a.createElement)("div",l.rootNodeProperties,(0,a.createElement)(S,{getOwnerSpan:o(function(){return u.getChildSpan("render")},"getOwnerSpan"),getOwnerDisposeSpan:o(function(){return u.getChildSpan("destroy")},"getOwnerDisposeSpan"),inputs:{},events:{_handleError:o(function(d){e.handleError(d)},"_handleError")},_validationProps:{validationService:i},_idProps:{service:t,uuid:"0",alias:"1"},_widgetRecordProvider:n,placeholders:{content:new y.PlaceholderContent(function(){return[(0,a.createElement)(v,{align:0,animate:!1,style:"login-screen",visible:!0,_idProps:{service:t,uuid:"1"},_widgetRecordProvider:n},(0,a.createElement)($,{_validationProps:{validationService:i},style:"login-form",_idProps:{service:t,name:"RecoverPasswordForm"},_widgetRecordProvider:n},(0,a.createElement)(v,{align:0,animate:!1,extendedProperties:{style:"text-align: center;"},style:"login-logo",visible:!0,_idProps:{service:t,uuid:"3"},_widgetRecordProvider:n},(0,a.createElement)(v,{align:0,animate:!1,extendedProperties:{style:"text-align: center;"},visible:!0,_idProps:{service:t,uuid:"4"},_widgetRecordProvider:n},(0,a.createElement)(W,{extendedProperties:{alt:"",style:"height: 100px;"},image:w.VersionedURL.getVersionedUrl("img/ZXingLibDemo.Logo.png"),type:0,_idProps:{service:t,uuid:"5"},_widgetRecordProvider:n})),(0,a.createElement)(X,{extendedProperties:{className:"margin-top-base text-neutral-8"},tag:"h5",_idProps:{service:t,uuid:"6"},_widgetRecordProvider:n},"Forgot your password?"),(0,a.createElement)(v,{align:0,animate:!1,style:"margin-top-s",visible:!0,_idProps:{service:t,uuid:"7"},_widgetRecordProvider:n},(0,a.createElement)(v,{align:0,animate:!1,visible:!0,_idProps:{service:t,uuid:"8"},_widgetRecordProvider:n},"Don't worry, we'll send you an email with instructions."))),(0,a.createElement)(v,{align:0,animate:!1,style:"login-inputs margin-top-m",visible:!0,_idProps:{service:t,uuid:"9"},_widgetRecordProvider:n},(0,a.createElement)(R,{getOwnerSpan:o(function(){return u.getChildSpan("render")},"getOwnerSpan"),getOwnerDisposeSpan:o(function(){return u.getChildSpan("destroy")},"getOwnerDisposeSpan"),inputs:{},events:{_handleError:o(function(d){e.handleError(d)},"_handleError")},_validationProps:{validationService:i,validationParentId:t.getId("RecoverPasswordForm")},_idProps:{service:t,uuid:"10",alias:"2"},_widgetRecordProvider:n,placeholders:{label:new y.PlaceholderContent(function(){return[(0,a.createElement)(B,{gridProperties:{classes:"OSFillParent"},mandatory:!0,targetWidget:"Input_Email",_idProps:{service:t,uuid:"11"},_widgetRecordProvider:n},"Email")]}),input:new y.PlaceholderContent(function(){return[(0,a.createElement)(M,{_validationProps:{validationService:i,validationParentId:t.getId("RecoverPasswordForm")},enabled:!0,extendedProperties:{tabIndex:"1"},gridProperties:{classes:"OSFillParent"},inputType:7,mandatory:!0,maxLength:250,style:"form-control",variable:m.createVariable(F.DataTypes.Email,m.variables.emailVar,function(d){m.variables.emailVar=d}),_idProps:{service:t,name:"Input_Email"},_widgetRecordProvider:n})]})},_dependencies:[h(m.variables.emailVar)]})),(0,a.createElement)(v,{align:0,animate:!1,style:"login-button margin-top-l",visible:!0,_idProps:{service:t,uuid:"13"},_widgetRecordProvider:n},(0,a.createElement)(C,{getOwnerSpan:o(function(){return u.getChildSpan("render")},"getOwnerSpan"),getOwnerDisposeSpan:o(function(){return u.getChildSpan("destroy")},"getOwnerDisposeSpan"),inputs:{ExtendedClass:"full-width",IsLoading:m.variables.isExecutingVar},events:{_handleError:o(function(d){e.handleError(d)},"_handleError")},_validationProps:{validationService:i,validationParentId:t.getId("RecoverPasswordForm")},_idProps:{service:t,uuid:"14",alias:"3"},_widgetRecordProvider:n,placeholders:{button:new y.PlaceholderContent(function(){return[(0,a.createElement)(Z,{enabled:!0,extendedProperties:{tabIndex:"2"},gridProperties:{classes:"OSFillParent"},isDefault:!0,onClick:o(function(){return s.validateWidget(t.getId("RecoverPasswordForm")),Promise.resolve().then(function(){var d=typeof c!="undefined"&&c!==null?c.clone():e.callContext().clone();return e.resetPasswordOnClick$Action(e.callContext(d))})},"onClick"),style:"btn btn-primary",visible:!0,_idProps:{service:t,uuid:"15"},_widgetRecordProvider:n},(0,a.createElement)(v,{align:0,animate:!1,style:"osui-btn-loading__spinner-animation",visible:!0,_idProps:{service:t,uuid:"16"},_widgetRecordProvider:n}),"Reset password")]})},_dependencies:[]})),(0,a.createElement)(v,{align:0,animate:!1,extendedProperties:{style:"text-align: center;"},style:"margin-top-m",visible:!0,_idProps:{service:t,uuid:"17"},_widgetRecordProvider:n},"Not in the right place?",(0,a.createElement)(G,{enabled:!0,extendedProperties:{tabIndex:"3","aria-label":"Go to login page"},gridProperties:{classes:"ThemeGrid_MarginGutter"},transition:b.createTransition(b.TransitionAnimation.Default),url:w.generateScreenURL("ZXingLibDemo","Login",{}),visible:!0,_idProps:{service:t,uuid:"18"},_widgetRecordProvider:n},"Go to login."))))]})},_dependencies:[h(m.variables.isExecutingVar),h(m.variables.emailVar)]}))},{topLevelComponent:!0,getAttributes:o(function(){return{codeFunction:"RecoverPasswordRequest",functionKey:"3fea9ba6-0c6b-4fe7-ab2e-65022a9839c0",functionOwnerName:"ZXingLibDemo",functionOwnerKey:"61918b7a-e496-4b63-992b-b83299b21e43",screen:""}},"getAttributes"),displayName:"Common.RecoverPasswordRequest",modelFactory:x,controllerFactory:O,getTitle:o(function(l){var m=l.model,e=l.controller,t=l.controller.idService,i=e.validationService,c=e.callContext(),s={props:l,validateWidget:o(function(n){l.validateWidget(l,n)},"validateWidget")};return"Recover password"},"getTitle")});return f.getCssDependencies=function(){return["css/OutSystemsUI.OutSystemsUI.css","css/ZXingLibDemo.ZXingLibDemo.css","css/ZXingLibDemo.ZXingLibDemo.extra.css","css/OutSystemsReactWidgets.css"]},f.getJsDependencies=function(){return[]},f.getBlocks=function(){return[S,R,C]},f},"componentFactory"),J=z();export{O as controllerModule,x as modelModule,J as viewModule,E as webFlowControllerModule};
