
import{a as F}from"./_oschunk-QTWMLN5H.js";import{a as H}from"./_oschunk-YJNOLBDX.js";import{a as k}from"./_oschunk-D53D4XS7.js";import{a as w}from"./_oschunk-5A2KL2WI.js";import{G as R,a as q,b as j,d as m,f as J,l as Y,m as x,n as Q,o as D,p as T,q as I,t as ee}from"./_oschunk-Y33Q5322.js";import{a as ie,f as p,l as z,m as G,q as K,r as f}from"./_oschunk-E2QDXWUM.js";import{a as B}from"./_oschunk-LWAJOBKB.js";import{a as V}from"./_oschunk-CJQD3QEZ.js";import{d as A,e as P}from"./_oschunk-4T4POR5S.js";import{S as h,a,c as re,i as C,o as O,t as L,u as U}from"./_oschunk-344SHXOK.js";var n=h;{let c=class c extends n.Controller.BaseViewController{constructor(t,e,i){super(t,e,i);var v=this.controller;this.clientActionProxies={},this.dataFetchDependenciesOriginal={},this.dataFetchDependentsGraph={},this.shouldSendClientVarsToDataSources=!1}get dataFetchActionNames(){return this.hasOwnProperty("_dataFetchActionNames")||(this._dataFetchActionNames=[]),this._dataFetchActionNames}set dataFetchActionNames(t){this._dataFetchActionNames=t}get _onTogglePasswordVisibility$Action(){return this.hasOwnProperty("__onTogglePasswordVisibility$Action")||(this.__onTogglePasswordVisibility$Action=function(t){var e=this.model,i=this.controller,v=this.idService;return n.Logger.startActiveSpan("OnTogglePasswordVisibility",function(d){d&&(d.setAttribute("code.function","OnTogglePasswordVisibility"),d.setAttribute("outsystems.function.key","26c085d1-acb2-40e4-8d40-9d907dc2e86d"),d.setAttribute("outsystems.function.owner.name","ZXingLibDemo"),d.setAttribute("outsystems.function.owner.key","61918b7a-e496-4b63-992b-b83299b21e43"),d.setAttribute("outsystems.function.type","CLIENT_SCREEN_ACTION"));try{i.ensureControllerAlive("OnTogglePasswordVisibility"),t=i.callContext(t);var r=new n.DataTypes.VariableHolder;e.variables.isPasswordVisibleVar=!e.variables.isPasswordVisibleVar,r.value=R.showPassword$Action("",t)}finally{d&&d.end()}},1)}),this.__onTogglePasswordVisibility$Action}set _onTogglePasswordVisibility$Action(t){this.__onTogglePasswordVisibility$Action=t}get _loginOnClick$Action(){return this.hasOwnProperty("__loginOnClick$Action")||(this.__loginOnClick$Action=function(t){var e=this.model,i=this.controller,v=this.idService;return n.Logger.startActiveSpan("LoginOnClick",function(d){return d&&(d.setAttribute("code.function","LoginOnClick"),d.setAttribute("outsystems.function.key","fb636e0c-5502-414e-8a4e-7a424b00b5b4"),d.setAttribute("outsystems.function.owner.name","ZXingLibDemo"),d.setAttribute("outsystems.function.owner.key","61918b7a-e496-4b63-992b-b83299b21e43"),d.setAttribute("outsystems.function.type","CLIENT_SCREEN_ACTION")),n.Flow.tryFinally(function(){i.ensureControllerAlive("LoginOnClick"),t=i.callContext(t);var r=new n.DataTypes.VariableHolder(new n.DataTypes.ErrorHandlerOutputType),u=new n.DataTypes.VariableHolder,s=new n.DataTypes.VariableHolder;return n.Flow.executeAsyncFlow(function(){return n.Flow.executeSequence(function(){if(e.widgets.get(v.getId("LoginForm")).validAttr)return e.variables.isExecutingVar=!0,R.feedbackMessageClose$Action(t),e.flush(),P.doLogin$Action(e.variables.userEmailVar,e.variables.passwordVar,t).then(function(_){u.value=_}).then(function(){s.value=P.checkZXingLibDemoRole$Action(t)}).then(function(){if(s.value.hasRoleOut){if(u.value.successOut)return n.Flow.returnAsync(n.Navigation.navigateTo(n.Navigation.generateScreenURL(A.getLastURL()===""?n.BuiltinFunctions.getOwnerURLPath():A.getLastURL(),{}),n.Transitions.createTransition(n.Transitions.TransitionAnimation.Fade),t,!0));e.variables.passwordVar="",e.variables.isExecutingVar=!1,n.FeedbackMessageService.showFeedbackMessage(u.value.errorMessageOut,3)}else e.variables.passwordVar="",e.variables.isExecutingVar=!1,n.FeedbackMessageService.showFeedbackMessage("No permission.",3)})})}).catch(function(_){if(n.Logger.debug("Login.LoginOnClick",n.Exceptions.getMessage(_)),!n.Exceptions.isSystem(_))return n.Logger.error(null,_,null,null,1),r.value.exceptionMessageAttr=n.Exceptions.getMessage(_),n.Logger.startActiveSpan("AllExceptions",function(y){return y&&(y.setAttribute("code.function","AllExceptions"),y.setAttribute("outsystems.function.key","afe930a8-feb9-4864-971c-54a89221df8a"),y.setAttribute("outsystems.function.owner.name","ZXingLibDemo"),y.setAttribute("outsystems.function.owner.key","61918b7a-e496-4b63-992b-b83299b21e43"),y.setAttribute("outsystems.function.type","CLIENT_EXCEPTION_HANDLER")),n.Flow.tryFinally(function(){return n.Flow.executeAsyncFlow(function(){return e.variables.passwordVar="",e.variables.isExecutingVar=!1,n.FeedbackMessageService.showFeedbackMessage(r.value.exceptionMessageAttr,3),n.Flow.returnAsync()})},function(){y&&y.end()})},1);throw _})},function(){d&&d.end()})},1)}),this.__loginOnClick$Action}set _loginOnClick$Action(t){this.__loginOnClick$Action=t}onTogglePasswordVisibility$Action(t){var e=this.controller;return n.Logger.startActiveSpan("OnTogglePasswordVisibility__proxy",function(i){i&&(i.setAttribute("code.function","OnTogglePasswordVisibility"),i.setAttribute("outsystems.function.key","26c085d1-acb2-40e4-8d40-9d907dc2e86d"),i.setAttribute("outsystems.function.owner.name","ZXingLibDemo"),i.setAttribute("outsystems.function.owner.key","61918b7a-e496-4b63-992b-b83299b21e43"),i.setAttribute("outsystems.function.type","CLIENT_SCREEN_ACTION"));try{return e.safeExecuteClientAction(e._onTogglePasswordVisibility$Action,t)}finally{i&&i.end()}},0)}loginOnClick$Action(t){var e=this.controller;return n.Logger.startActiveSpan("LoginOnClick__proxy",function(i){return i&&(i.setAttribute("code.function","LoginOnClick"),i.setAttribute("outsystems.function.key","fb636e0c-5502-414e-8a4e-7a424b00b5b4"),i.setAttribute("outsystems.function.owner.name","ZXingLibDemo"),i.setAttribute("outsystems.function.owner.key","61918b7a-e496-4b63-992b-b83299b21e43"),i.setAttribute("outsystems.function.type","CLIENT_SCREEN_ACTION")),n.Flow.tryFinally(function(){return e.safeExecuteClientAction(e._loginOnClick$Action,t)},function(){i&&i.end()})},0)}get onInitializeEventHandler(){return this.hasOwnProperty("_onInitializeEventHandler")||(this._onInitializeEventHandler=null),this._onInitializeEventHandler}set onInitializeEventHandler(t){this._onInitializeEventHandler=t}get onReadyEventHandler(){return this.hasOwnProperty("_onReadyEventHandler")||(this._onReadyEventHandler=null),this._onReadyEventHandler}set onReadyEventHandler(t){this._onReadyEventHandler=t}get onRenderEventHandler(){return this.hasOwnProperty("_onRenderEventHandler")||(this._onRenderEventHandler=null),this._onRenderEventHandler}set onRenderEventHandler(t){this._onRenderEventHandler=t}get onDestroyEventHandler(){return this.hasOwnProperty("_onDestroyEventHandler")||(this._onDestroyEventHandler=null),this._onDestroyEventHandler}set onDestroyEventHandler(t){this._onDestroyEventHandler=t}get onParametersChangedEventHandler(){return this.hasOwnProperty("_onParametersChangedEventHandler")||(this._onParametersChangedEventHandler=null),this._onParametersChangedEventHandler}set onParametersChangedEventHandler(t){this._onParametersChangedEventHandler=t}get onSyncStartEventHandler(){return this.hasOwnProperty("_onSyncStartEventHandler")||(this._onSyncStartEventHandler=null),this._onSyncStartEventHandler}set onSyncStartEventHandler(t){this._onSyncStartEventHandler=t}get onSyncCompleteEventHandler(){return this.hasOwnProperty("_onSyncCompleteEventHandler")||(this._onSyncCompleteEventHandler=null),this._onSyncCompleteEventHandler}set onSyncCompleteEventHandler(t){this._onSyncCompleteEventHandler=t}get onSyncErrorEventHandler(){return this.hasOwnProperty("_onSyncErrorEventHandler")||(this._onSyncErrorEventHandler=null),this._onSyncErrorEventHandler}set onSyncErrorEventHandler(t){this._onSyncErrorEventHandler=t}get handleError(){return this.hasOwnProperty("_handleError")||(this._handleError=function(t){return V.default.handleError(t,this.callContext())}),this._handleError}set handleError(t){this._handleError=t}static checkPermissions(){}getDefaultTimeout(){return P.defaultTimeout}};a(c,"ControllerInner");let b=c;te=b}var te,$=new n.Controller.ControllerFactory(te,B);var o=re(ie());var g=h,W=class W extends g.DataTypes.GenericRecord{static attributesToDeclare(){return[this.attr("UserEmail","userEmailVar","UserEmail",!0,!1,g.DataTypes.DataTypes.Text,function(){return""},!1),this.attr("Password","passwordVar","Password",!0,!1,g.DataTypes.DataTypes.Text,function(){return""},!1),this.attr("IsExecuting","isExecutingVar","IsExecuting",!0,!1,g.DataTypes.DataTypes.Boolean,function(){return!1},!1),this.attr("IsPasswordVisible","isPasswordVisibleVar","IsPasswordVisible",!0,!1,g.DataTypes.DataTypes.Boolean,function(){return!1},!1)].concat(g.DataTypes.GenericRecord.attributesToDeclare.call(this))}};a(W,"VariablesRecord");var S=W;S.init();var X=class X extends g.Model.BaseWidgetRecordMap{static getWidgetsType(){return{LoginForm:g.Model.ValidationWidgetRecord,Input_Username:g.Model.ValidationWidgetRecord,Input_Password:g.Model.ValidationWidgetRecord}}};a(X,"WidgetsRecord");var M=X,Z=class Z extends g.Model.BaseViewModel{static getVariablesRecordConstructor(){return S}static getWidgetsRecordConstructor(){return M}static get hasValidationWidgets(){return!0}setInputs(c){}};a(Z,"Model");var E=Z;E._hasValidationWidgetsValue=void 0;var N=new g.Model.ModelFactory(E);var ne=a(function(){var b=G(function(c){var l=c.model,t=c.controller,e=c.controller.idService,i=t.validationService,v=t.callContext(),d={props:c,validateWidget:a(function(s){c.validateWidget(c,s)},"validateWidget")},r=l,u=z();return(0,o.createElement)("div",c.rootNodeProperties,(0,o.createElement)(F,{getOwnerSpan:a(function(){return u.getChildSpan("render")},"getOwnerSpan"),getOwnerDisposeSpan:a(function(){return u.getChildSpan("destroy")},"getOwnerDisposeSpan"),inputs:{},events:{_handleError:a(function(s){t.handleError(s)},"_handleError")},_validationProps:{validationService:i},_idProps:{service:e,uuid:"0",alias:"1"},_widgetRecordProvider:r,placeholders:{content:new p.PlaceholderContent(function(){return[(0,o.createElement)(m,{align:0,animate:!1,style:"login-screen",visible:!0,_idProps:{service:e,uuid:"1"},_widgetRecordProvider:r},(0,o.createElement)(Y,{_validationProps:{validationService:i},style:"login-form",_idProps:{service:e,name:"LoginForm"},_widgetRecordProvider:r},(0,o.createElement)(m,{align:0,animate:!1,extendedProperties:{style:"text-align: center;"},style:"login-logo",visible:!0,_idProps:{service:e,uuid:"3"},_widgetRecordProvider:r},(0,o.createElement)(m,{align:0,animate:!1,extendedProperties:{style:"text-align: center;"},visible:!0,_idProps:{service:e,uuid:"4"},_widgetRecordProvider:r},(0,o.createElement)(Q,{extendedProperties:{alt:"",style:"height: 100px;"},image:O.VersionedURL.getVersionedUrl("img/ZXingLibDemo.Logo.png"),type:0,_idProps:{service:e,uuid:"5"},_widgetRecordProvider:r})),(0,o.createElement)(q,{extendedProperties:{className:"margin-top-base"},tag:"h1",_idProps:{service:e,uuid:"6"},_widgetRecordProvider:r},(0,o.createElement)(J,{style:"heading5 text-neutral-8",value:l.getCachedValue(e.getId("fm5_YjxcK025dT1H7+DVeg.Value"),function(){return U.getAppName()}),_idProps:{service:e,uuid:"7"},_widgetRecordProvider:r}))),(0,o.createElement)(m,{align:0,animate:!1,style:"login-inputs margin-top-m",visible:!0,_idProps:{service:e,uuid:"8"},_widgetRecordProvider:r},(0,o.createElement)(m,{align:0,animate:!1,visible:!0,_idProps:{service:e,uuid:"9"},_widgetRecordProvider:r},(0,o.createElement)(w,{getOwnerSpan:a(function(){return u.getChildSpan("render")},"getOwnerSpan"),getOwnerDisposeSpan:a(function(){return u.getChildSpan("destroy")},"getOwnerDisposeSpan"),inputs:{},events:{_handleError:a(function(s){t.handleError(s)},"_handleError")},_validationProps:{validationService:i,validationParentId:e.getId("LoginForm")},_idProps:{service:e,uuid:"10",alias:"2"},_widgetRecordProvider:r,placeholders:{label:new p.PlaceholderContent(function(){return[(0,o.createElement)(T,{gridProperties:{classes:"OSFillParent"},mandatory:!0,targetWidget:"Input_Username",_idProps:{service:e,uuid:"11"},_widgetRecordProvider:r},"Email")]}),input:new p.PlaceholderContent(function(){return[(0,o.createElement)(D,{_validationProps:{validationService:i,validationParentId:e.getId("LoginForm")},enabled:!0,extendedProperties:{tabIndex:"1"},gridProperties:{classes:"OSFillParent"},inputType:0,mandatory:!0,maxLength:250,style:"form-control",variable:l.createVariable(L.DataTypes.Text,l.variables.userEmailVar,function(s){l.variables.userEmailVar=s}),_idProps:{service:e,name:"Input_Username"},_widgetRecordProvider:r})]})},_dependencies:[f(l.variables.userEmailVar)]})),(0,o.createElement)(m,{align:0,animate:!1,style:"margin-top-base password-input",visible:!0,_idProps:{service:e,uuid:"13"},_widgetRecordProvider:r},(0,o.createElement)(w,{getOwnerSpan:a(function(){return u.getChildSpan("render")},"getOwnerSpan"),getOwnerDisposeSpan:a(function(){return u.getChildSpan("destroy")},"getOwnerDisposeSpan"),inputs:{},events:{_handleError:a(function(s){t.handleError(s)},"_handleError")},_validationProps:{validationService:i,validationParentId:e.getId("LoginForm")},_idProps:{service:e,uuid:"14",alias:"3"},_widgetRecordProvider:r,placeholders:{label:new p.PlaceholderContent(function(){return[(0,o.createElement)(T,{gridProperties:{classes:"OSFillParent"},mandatory:!0,targetWidget:"Input_Password",_idProps:{service:e,uuid:"15"},_widgetRecordProvider:r},"Password")]}),input:new p.PlaceholderContent(function(){return[(0,o.createElement)(H,{getOwnerSpan:a(function(){return u.getChildSpan("render")},"getOwnerSpan"),getOwnerDisposeSpan:a(function(){return u.getChildSpan("destroy")},"getOwnerDisposeSpan"),inputs:{AlignIconRight:!0},events:{_handleError:a(function(s){t.handleError(s)},"_handleError")},_validationProps:{validationService:i,validationParentId:e.getId("LoginForm")},_idProps:{service:e,uuid:"16",alias:"4"},_widgetRecordProvider:r,placeholders:{icon:new p.PlaceholderContent(function(){return[(0,o.createElement)(I,{enabled:!0,onClick:a(function(){var s=typeof v!="undefined"&&v!==null?v.clone():t.callContext().clone();t.onTogglePasswordVisibility$Action(t.callContext(s))},"onClick"),visible:!0,_idProps:{service:e,uuid:"17"},_widgetRecordProvider:r},K(l.variables.isPasswordVisibleVar,!1,this,function(){return[(0,o.createElement)(x,{icon:"eye-slash",iconSize:0,style:"icon",visible:!0,_idProps:{service:e,uuid:"18"},_widgetRecordProvider:r})]},function(){return[(0,o.createElement)(x,{icon:"eye",iconSize:0,style:"icon",visible:!0,_idProps:{service:e,uuid:"19"},_widgetRecordProvider:r})]}))]}),input:new p.PlaceholderContent(function(){return[(0,o.createElement)(D,{_validationProps:{validationService:i,validationParentId:e.getId("LoginForm")},enabled:!0,extendedProperties:{tabIndex:"2",style:"padding-bottom: 0px; padding-left: 0px; padding-right: var(--space-xl); padding-top: 0px;"},gridProperties:{classes:"OSFillParent"},inputType:1,mandatory:!0,maxLength:0,style:"form-control login-password",variable:l.createVariable(L.DataTypes.Text,l.variables.passwordVar,function(s){l.variables.passwordVar=s}),_idProps:{service:e,name:"Input_Password"},_widgetRecordProvider:r})]})},_dependencies:[f(l.variables.passwordVar),f(l.variables.isPasswordVisibleVar)]})]})},_dependencies:[f(l.variables.passwordVar),f(l.variables.isPasswordVisibleVar)]})),(0,o.createElement)(m,{align:0,animate:!1,style:"margin-top-l",visible:!0,_idProps:{service:e,uuid:"21"},_widgetRecordProvider:r},(0,o.createElement)(m,{align:0,animate:!1,extendedProperties:{style:"text-align: right;"},visible:!0,_idProps:{service:e,uuid:"22"},_widgetRecordProvider:r},(0,o.createElement)(I,{enabled:!0,extendedProperties:{tabIndex:"3","aria-label":"Forgot password? Click here to recover it"},transition:C.createTransition(C.TransitionAnimation.Default),url:O.generateScreenURL("ZXingLibDemo","RecoverPasswordRequest",{}),visible:!0,_idProps:{service:e,uuid:"23"},_widgetRecordProvider:r},(0,o.createElement)(ee,{extendedProperties:{"aria-label":"Forgot your password? Click here to recover it"},text:["Forgot your password?"],_idProps:{service:e,uuid:"24"},_widgetRecordProvider:r}))))),(0,o.createElement)(m,{align:0,animate:!1,style:"login-button margin-top-l",visible:!0,_idProps:{service:e,uuid:"25"},_widgetRecordProvider:r},(0,o.createElement)(k,{getOwnerSpan:a(function(){return u.getChildSpan("render")},"getOwnerSpan"),getOwnerDisposeSpan:a(function(){return u.getChildSpan("destroy")},"getOwnerDisposeSpan"),inputs:{ExtendedClass:"full-width",IsLoading:l.variables.isExecutingVar},events:{_handleError:a(function(s){t.handleError(s)},"_handleError")},_validationProps:{validationService:i,validationParentId:e.getId("LoginForm")},_idProps:{service:e,uuid:"26",alias:"5"},_widgetRecordProvider:r,placeholders:{button:new p.PlaceholderContent(function(){return[(0,o.createElement)(j,{enabled:!0,extendedProperties:{tabIndex:"4"},gridProperties:{classes:"OSFillParent"},isDefault:!0,onClick:a(function(){return d.validateWidget(e.getId("LoginForm")),Promise.resolve().then(function(){var s=typeof v!="undefined"&&v!==null?v.clone():t.callContext().clone();return t.loginOnClick$Action(t.callContext(s))})},"onClick"),style:"btn btn-primary",visible:!0,_idProps:{service:e,uuid:"27"},_widgetRecordProvider:r},(0,o.createElement)(m,{align:0,animate:!1,style:"osui-btn-loading__spinner-animation",visible:!0,_idProps:{service:e,uuid:"28"},_widgetRecordProvider:r}),"Log in")]})},_dependencies:[]}))))]})},_dependencies:[f(l.variables.isExecutingVar),f(l.variables.passwordVar),f(l.variables.isPasswordVisibleVar),f(l.variables.userEmailVar)]}))},{topLevelComponent:!0,getAttributes:a(function(){return{codeFunction:"Login",functionKey:"aa6a2f48-0824-4f02-bbe3-20b08d067bf1",functionOwnerName:"ZXingLibDemo",functionOwnerKey:"61918b7a-e496-4b63-992b-b83299b21e43",screen:""}},"getAttributes"),displayName:"Common.Login",modelFactory:N,controllerFactory:$,getTitle:a(function(c){var l=c.model,t=c.controller,e=c.controller.idService,i=t.validationService,v=t.callContext(),d={props:c,validateWidget:a(function(r){c.validateWidget(c,r)},"validateWidget")};return"Log in"},"getTitle")});return b.getCssDependencies=function(){return["css/OutSystemsUI.OutSystemsUI.css","css/ZXingLibDemo.ZXingLibDemo.css","css/ZXingLibDemo.ZXingLibDemo.extra.css","css/OutSystemsReactWidgets.css"]},b.getJsDependencies=function(){return[]},b.getBlocks=function(){return[F,w,H,k]},b},"componentFactory"),oe=ne();export{$ as controllerModule,N as modelModule,oe as viewModule,V as webFlowControllerModule};
