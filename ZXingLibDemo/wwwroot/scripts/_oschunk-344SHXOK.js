
var N2=Object.create;var Tc=Object.defineProperty,D2=Object.defineProperties,L2=Object.getOwnPropertyDescriptor,x2=Object.getOwnPropertyDescriptors,U2=Object.getOwnPropertyNames,ZC=Object.getOwnPropertySymbols,M2=Object.getPrototypeOf,eR=Object.prototype.hasOwnProperty,k2=Object.prototype.propertyIsEnumerable;var QC=(n,e,t)=>e in n?Tc(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Rt=(n,e)=>{for(var t in e||(e={}))eR.call(e,t)&&QC(n,t,e[t]);if(ZC)for(var t of ZC(e))k2.call(e,t)&&QC(n,t,e[t]);return n},os=(n,e)=>D2(n,x2(e)),o=(n,e)=>Tc(n,"name",{value:e,configurable:!0}),as=(n=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(n,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):n)(function(n){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var ide=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),F2=(n,e)=>{for(var t in e)Tc(n,t,{get:e[t],enumerable:!0})},$2=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of U2(e))!eR.call(n,i)&&i!==t&&Tc(n,i,{get:()=>e[i],enumerable:!(r=L2(e,i))||r.enumerable});return n};var sde=(n,e,t)=>(t=n!=null?N2(M2(n)):{},$2(e||!n||!n.__esModule?Tc(t,"default",{value:n,enumerable:!0}):t,n));var pt=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{u(t.next(l))}catch(c){i(c)}},a=l=>{try{u(t.throw(l))}catch(c){i(c)}},u=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,a);u((t=t.apply(n,e)).next())});var rde={};F2(rde,{Application:()=>yae,ApplicationInfo:()=>mne,Authentication:()=>Ore,Authorization:()=>Jie,BuiltinFunctions:()=>YA,ClientVariables:()=>Xce,Communication:()=>Gie,CommunicationHeaders:()=>Mie,Controller:()=>kae,DataConversion:()=>xoe,DataTypes:()=>Kie,DebuggerAPI:()=>Jce,DebuggerBase:()=>Yce,Entities:()=>jae,ErrorHandling:()=>Nre,ErrorScreen:()=>tue,EventDispatcher:()=>iae,Exceptions:()=>Qte,FeedbackMessageService:()=>Lre,Flow:()=>$ne,Format:()=>Uie,GenericTypeCache:()=>nI,IndexedDBSerializer:()=>uue,IndexedDBUtils:()=>qoe,Injector:()=>pe,Interfaces:()=>nue,JSONUtils:()=>$oe,LanguageResources:()=>rue,LightImmutable:()=>Die,LocaleService:()=>tle,Logger:()=>Rx,MappingWithDefaultService:()=>Gce,Model:()=>aue,NativeHelper:()=>qne,Navigation:()=>_re,ObjectExtensions:()=>Iue,Performance:()=>tae,Public:()=>Oae,RequireManager:()=>nae,ScreenStateCache:()=>Hue,ScriptsManager:()=>Kue,ServiceNames:()=>X,SettingsNames:()=>yS,StorageProvider:()=>wne,StringUtils:()=>Wce,SystemActions:()=>jce,SystemStructures:()=>Vue,TableInfoUtils:()=>Voe,TransitionAnimation:()=>ane,Transitions:()=>dne,UrlUtils:()=>jne,Validation:()=>Nae,Version:()=>LF,VersionDefinition:()=>Zte,WebSQLSerializer:()=>Vae,WebSQLUtils:()=>mue,WidgetNaming:()=>Pae,runPostInitialization:()=>ole,runPreInitialization:()=>sle,settingsUpdatedHandler:()=>nde,useAuthConfigsManager:()=>lle,useBaseApplication:()=>Xle,useSettingsManager:()=>dle,useVersionsManager:()=>fle});var Rr;(function(n){n.WebHttpClientForNative="WebHttpClientForNative",n.NoInstrumentationFactoryLogs="NoInstrumentationFactoryLogs",n.WriteLogsOnConsoles="WriteLogsOnConsoles",n.ServiceWorkerTraces="ServiceWorkerTraces",n.EnableOTLV2TraceFormat="EnableOTLV2TraceFormat",n.ReadAuthConfigsFromSettings="ReadAuthConfigsFromSettings"})(Rr||(Rr={}));var B2={ServiceWorkerTraces:"true",EnableOTLV2TraceFormat:"true"},V2={};function H2(){if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;throw new Error("unable to locate global object")}o(H2,"getGlobalScope");var j2="ft-",tR=H2().sessionStorage,W2=new Map,Jv=class Jv{static getGuard(e,t){var r;return(r=t[e])!==null&&r!==void 0?r:()=>({value:"inherit"})}static readValue(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tR;var r;return(r=t==null?void 0:t.getItem(this.getFeatureKey(e)))!==null&&r!==void 0?r:void 0}static isEnabled(e){let{featuresStorage:t=tR,cache:r=W2,defaultValues:i=B2,guards:s=V2,logMethod:a=console.warn}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var u;let l=r.get(e);if(l!==void 0)return l;let c=this.getGuard(e,s)();if(c.value!=="inherit"){let p=c.value==="forceTrue";return a(`FeaturesManager: Experimental flag "${e}" is forced to value "${p}"${c.reason?`: ${c.reason}`:"."}`),r.set(e,p),p}let d=i[e],f=(u=this.readValue(e,t))!==null&&u!==void 0?u:d,h=(f==null?void 0:f.toLowerCase())==="true";return h!==((d==null?void 0:d.toLowerCase())==="true")&&a(`FeaturesManager: Experimental flag "${e}" is overridden with value "${f}"`),r.set(e,h),h}};o(Jv,"FeaturesManager");var or=Jv;or.getFeatureKey=n=>`${j2}${n}`;function Be(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})}o(Be,"__awaiter");function te(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}o(te,"__classPrivateFieldGet");function ze(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}o(ze,"__classPrivateFieldSet");var f0=class f0 extends Error{constructor(e,t,r,i,s){super(e),this.errorCode=t,this.status=r?`${r}`:"",this.response=i,this.category=s}};o(f0,"CommunicationError");var Fn=f0,Ve;(function(n){n.Communication_Default="OS-CLRT-60900",n.Communication_Bad_Request="OS-CLRT-60901",n.Communication_Unauthorized="OS-CLRT-60902",n.Communication_Forbidden="OS-CLRT-60903",n.Communication_Not_Found="OS-CLRT-60904",n.Communication_Timeout="OS-CLRT-60905",n.Communication_Internal_Server_Error="OS-CLRT-60906",n.Communication_Unavailable="OS-CLRT-60907",n.Communication_Aborted="OS-CLRT-60908"})(Ve||(Ve={}));var G2={400:Ve.Communication_Bad_Request,401:Ve.Communication_Unauthorized,403:Ve.Communication_Forbidden,404:Ve.Communication_Not_Found,408:Ve.Communication_Timeout,500:Ve.Communication_Internal_Server_Error,503:Ve.Communication_Unavailable},Zf=o(n=>{var e;return(e=G2[`${n}`])!==null&&e!==void 0?e:Ve.Communication_Default},"mapErrorCodeFromStatusCode"),z2="traceparent",q2="tracestate",K2="baggage",Y2=512,X2=["code.function","outsystems.function.key","outsystems.function.type","outsystems.runtime.screen","outsystems.otel.access.visibility"];function GR(){return Be(this,arguments,void 0,function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return(function*(){if(!e)return n;let t=yield e();return t?J2(t,n):n})()})}o(GR,"addTraceHeaders");function J2(n,e){let t=Object.assign(Object.assign({},e),{[z2]:Z2(n)});if(n.attributes){let r=Q2(n.attributes),i=r.length>Y2?K2:q2;t[i]=r}return t}o(J2,"insertTraceHeader");function Z2(n){return`00-${n.traceId}-${n.spanId}-${n.sampled?"01":"00"}`}o(Z2,"buildTraceHeader");function Q2(n){return X2.map(e=>n[e]?`${e}=${n[e]}`:void 0).filter(e=>e!==void 0).join(",")}o(Q2,"buildTraceState");var by;(function(n){n.FormUrlEncoded="application/x-www-form-urlencoded",n.Json="application/json"})(by||(by={}));var nn=by,Sy;(function(n){n[n.Unknown=0]="Unknown",n[n.Timeout=1]="Timeout",n[n.Unauthorized=2]="Unauthorized",n[n.Aborted=3]="Aborted"})(Sy||(Sy={}));var us=Sy,nR=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function e$(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}o(e$,"getDefaultExportFromCjs");function t$(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=o(function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)},"a");t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:o(function(){return n[r]},"get")})}),t}o(t$,"getAugmentedNamespace");var Ta=TypeError,n$={},r$=Object.freeze({__proto__:null,default:n$}),i$=t$(r$),i0=typeof Map=="function"&&Map.prototype,Zv=Object.getOwnPropertyDescriptor&&i0?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Sf=i0&&Zv&&typeof Zv.get=="function"?Zv.get:null,rR=i0&&Map.prototype.forEach,s0=typeof Set=="function"&&Set.prototype,Qv=Object.getOwnPropertyDescriptor&&s0?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Af=s0&&Qv&&typeof Qv.get=="function"?Qv.get:null,iR=s0&&Set.prototype.forEach,s$=typeof WeakMap=="function"&&WeakMap.prototype,Oc=s$?WeakMap.prototype.has:null,o$=typeof WeakSet=="function"&&WeakSet.prototype,Pc=o$?WeakSet.prototype.has:null,a$=typeof WeakRef=="function"&&WeakRef.prototype,sR=a$?WeakRef.prototype.deref:null,u$=Boolean.prototype.valueOf,c$=Object.prototype.toString,l$=Function.prototype.toString,d$=String.prototype.match,o0=String.prototype.slice,ls=String.prototype.replace,f$=String.prototype.toUpperCase,oR=String.prototype.toLowerCase,zR=RegExp.prototype.test,aR=Array.prototype.concat,qr=Array.prototype.join,h$=Array.prototype.slice,uR=Math.floor,Ay=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ey=Object.getOwnPropertySymbols,Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ma=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Nc=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ma||!0)?Symbol.toStringTag:null,qR=Object.prototype.propertyIsEnumerable,cR=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function lR(n,e){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||zR.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var r=n<0?-uR(-n):uR(n);if(r!==n){var i=String(r),s=o0.call(e,i.length+1);return ls.call(i,t,"$&_")+"."+ls.call(ls.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ls.call(e,t,"$&_")}o(lR,"addNumericSeparator");var Cy=i$,dR=Cy.custom,fR=XR(dR)?dR:null,KR={__proto__:null,double:'"',single:"'"},g$={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Qf=o(function n(e,t,r,i){var s=t||{};if(hi(s,"quoteStyle")&&!hi(KR,s.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(hi(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=hi(s,"customInspect")?s.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(hi(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(hi(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var u=s.numericSeparator;if(typeof e=="undefined")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return ZR(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return u?lR(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return u?lR(e,c):c}var d=typeof s.depth=="undefined"?5:s.depth;if(typeof r=="undefined"&&(r=0),r>=d&&d>0&&typeof e=="object")return Ry(e)?"[Array]":"[Object]";var f=D$(s,r);if(typeof i=="undefined")i=[];else if(JR(i,e)>=0)return"[Circular]";function h(oe,S,K){if(S&&(i=h$.call(i),i.push(S)),K){var U={depth:s.depth};return hi(s,"quoteStyle")&&(U.quoteStyle=s.quoteStyle),n(oe,U,r+1,i)}return n(oe,s,r+1,i)}if(o(h,"inspect"),typeof e=="function"&&!hR(e)){var g=b$(e),p=df(e,h);return"[Function"+(g?": "+g:" (anonymous)")+"]"+(p.length>0?" { "+qr.call(p,", ")+" }":"")}if(XR(e)){var m=ma?ls.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Iy.call(e);return typeof e=="object"&&!ma?bc(m):m}if(O$(e)){for(var w="<"+oR.call(String(e.nodeName)),E=e.attributes||[],_=0;_<E.length;_++)w+=" "+E[_].name+"="+YR(p$(E[_].value),"double",s);return w+=">",e.childNodes&&e.childNodes.length&&(w+="..."),w+="</"+oR.call(String(e.nodeName))+">",w}if(Ry(e)){if(e.length===0)return"[]";var T=df(e,h);return f&&!N$(T)?"["+Oy(T,f)+"]":"[ "+qr.call(T,", ")+" ]"}if(v$(e)){var R=df(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!qR.call(e,"cause")?"{ ["+String(e)+"] "+qr.call(aR.call("[cause]: "+h(e.cause),R),", ")+" }":R.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+qr.call(R,", ")+" }"}if(typeof e=="object"&&a){if(fR&&typeof e[fR]=="function"&&Cy)return Cy(e,{depth:d-r});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(S$(e)){var D=[];return rR&&rR.call(e,function(oe,S){D.push(h(S,e,!0)+" => "+h(oe,e))}),gR("Map",Sf.call(e),D,f)}if(C$(e)){var B=[];return iR&&iR.call(e,function(oe){B.push(h(oe,e))}),gR("Set",Af.call(e),B,f)}if(A$(e))return ty("WeakMap");if(R$(e))return ty("WeakSet");if(I$(e))return ty("WeakRef");if(_$(e))return bc(h(Number(e)));if(E$(e))return bc(h(Ay.call(e)));if(w$(e))return bc(u$.call(e));if(y$(e))return bc(h(String(e)));if(typeof window!="undefined"&&e===window)return"{ [object Window] }";if(typeof globalThis!="undefined"&&e===globalThis||typeof nR!="undefined"&&e===nR)return"{ [object globalThis] }";if(!m$(e)&&!hR(e)){var z=df(e,h),j=cR?cR(e)===Object.prototype:e instanceof Object||e.constructor===Object,Y=e instanceof Object?"":"null prototype",q=!j&&Nc&&Object(e)===e&&Nc in e?o0.call(hs(e),8,-1):Y?"Object":"",P=j||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",Z=P+(q||Y?"["+qr.call(aR.call([],q||[],Y||[]),": ")+"] ":"");return z.length===0?Z+"{}":f?Z+"{"+Oy(z,f)+"}":Z+"{ "+qr.call(z,", ")+" }"}return String(e)},"inspect_");function YR(n,e,t){var r=t.quoteStyle||e,i=KR[r];return i+n+i}o(YR,"wrapQuotes");function p$(n){return ls.call(String(n),/"/g,"&quot;")}o(p$,"quote");function uo(n){return!Nc||!(typeof n=="object"&&(Nc in n||typeof n[Nc]!="undefined"))}o(uo,"canTrustToString");function Ry(n){return hs(n)==="[object Array]"&&uo(n)}o(Ry,"isArray$3");function m$(n){return hs(n)==="[object Date]"&&uo(n)}o(m$,"isDate");function hR(n){return hs(n)==="[object RegExp]"&&uo(n)}o(hR,"isRegExp$1");function v$(n){return hs(n)==="[object Error]"&&uo(n)}o(v$,"isError");function y$(n){return hs(n)==="[object String]"&&uo(n)}o(y$,"isString");function _$(n){return hs(n)==="[object Number]"&&uo(n)}o(_$,"isNumber");function w$(n){return hs(n)==="[object Boolean]"&&uo(n)}o(w$,"isBoolean");function XR(n){if(ma)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!Iy)return!1;try{return Iy.call(n),!0}catch(e){}return!1}o(XR,"isSymbol");function E$(n){if(!n||typeof n!="object"||!Ay)return!1;try{return Ay.call(n),!0}catch(e){}return!1}o(E$,"isBigInt");var T$=Object.prototype.hasOwnProperty||function(n){return n in this};function hi(n,e){return T$.call(n,e)}o(hi,"has$3");function hs(n){return c$.call(n)}o(hs,"toStr");function b$(n){if(n.name)return n.name;var e=d$.call(l$.call(n),/^function\s*([\w$]+)/);return e?e[1]:null}o(b$,"nameOf");function JR(n,e){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1}o(JR,"indexOf");function S$(n){if(!Sf||!n||typeof n!="object")return!1;try{Sf.call(n);try{Af.call(n)}catch(e){return!0}return n instanceof Map}catch(e){}return!1}o(S$,"isMap");function A$(n){if(!Oc||!n||typeof n!="object")return!1;try{Oc.call(n,Oc);try{Pc.call(n,Pc)}catch(e){return!0}return n instanceof WeakMap}catch(e){}return!1}o(A$,"isWeakMap");function I$(n){if(!sR||!n||typeof n!="object")return!1;try{return sR.call(n),!0}catch(e){}return!1}o(I$,"isWeakRef");function C$(n){if(!Af||!n||typeof n!="object")return!1;try{Af.call(n);try{Sf.call(n)}catch(e){return!0}return n instanceof Set}catch(e){}return!1}o(C$,"isSet");function R$(n){if(!Pc||!n||typeof n!="object")return!1;try{Pc.call(n,Pc);try{Oc.call(n,Oc)}catch(e){return!0}return n instanceof WeakSet}catch(e){}return!1}o(R$,"isWeakSet");function O$(n){return!n||typeof n!="object"?!1:typeof HTMLElement!="undefined"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}o(O$,"isElement");function ZR(n,e){if(n.length>e.maxStringLength){var t=n.length-e.maxStringLength,r="... "+t+" more character"+(t>1?"s":"");return ZR(o0.call(n,0,e.maxStringLength),e)+r}var i=g$[e.quoteStyle||"single"];i.lastIndex=0;var s=ls.call(ls.call(n,i,"\\$1"),/[\x00-\x1f]/g,P$);return YR(s,"single",e)}o(ZR,"inspectString");function P$(n){var e=n.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+f$.call(e.toString(16))}o(P$,"lowbyte");function bc(n){return"Object("+n+")"}o(bc,"markBoxed");function ty(n){return n+" { ? }"}o(ty,"weakCollectionOf");function gR(n,e,t,r){var i=r?Oy(t,r):qr.call(t,", ");return n+" ("+e+") {"+i+"}"}o(gR,"collectionOf");function N$(n){for(var e=0;e<n.length;e++)if(JR(n[e],`
`)>=0)return!1;return!0}o(N$,"singleLineValues");function D$(n,e){var t;if(n.indent==="	")t="	";else if(typeof n.indent=="number"&&n.indent>0)t=qr.call(Array(n.indent+1)," ");else return null;return{base:t,prev:qr.call(Array(e+1),t)}}o(D$,"getIndent");function Oy(n,e){if(n.length===0)return"";var t=`
`+e.prev+e.base;return t+qr.call(n,","+t)+`
`+e.prev}o(Oy,"indentedJoin");function df(n,e){var t=Ry(n),r=[];if(t){r.length=n.length;for(var i=0;i<n.length;i++)r[i]=hi(n,i)?e(n[i],n):""}var s=typeof ey=="function"?ey(n):[],a;if(ma){a={};for(var u=0;u<s.length;u++)a["$"+s[u]]=s[u]}for(var l in n)hi(n,l)&&(t&&String(Number(l))===l&&l<n.length||ma&&a["$"+l]instanceof Symbol||(zR.call(/[^\w$]/,l)?r.push(e(l,n)+": "+e(n[l],n)):r.push(l+": "+e(n[l],n))));if(typeof ey=="function")for(var c=0;c<s.length;c++)qR.call(n,s[c])&&r.push("["+e(s[c])+"]: "+e(n[s[c]],n));return r}o(df,"arrObjKeys");var L$=Qf,x$=Ta,eh=o(function(n,e,t){for(var r=n,i;(i=r.next)!=null;r=i)if(i.key===e)return r.next=i.next,t||(i.next=n.next,n.next=i),i},"listGetNode"),U$=o(function(n,e){if(n){var t=eh(n,e);return t&&t.value}},"listGet"),M$=o(function(n,e,t){var r=eh(n,e);r?r.value=t:n.next={key:e,next:n.next,value:t}},"listSet"),k$=o(function(n,e){return n?!!eh(n,e):!1},"listHas"),F$=o(function(n,e){if(n)return eh(n,e,!0)},"listDelete"),$$=o(function(){var e,t={assert:o(function(r){if(!t.has(r))throw new x$("Side channel does not contain "+L$(r))},"assert"),delete:o(function(r){var i=e&&e.next,s=F$(e,r);return s&&i&&i===s&&(e=void 0),!!s},"delete"),get:o(function(r){return U$(e,r)},"get"),has:o(function(r){return k$(e,r)},"has"),set:o(function(r,i){e||(e={next:void 0}),M$(e,r,i)},"set")};return t},"getSideChannelList"),QR=Object,B$=Error,V$=EvalError,H$=RangeError,j$=ReferenceError,W$=SyntaxError,G$=URIError,z$=Math.abs,q$=Math.floor,K$=Math.max,Y$=Math.min,X$=Math.pow,J$=Math.round,Z$=Number.isNaN||o(function(e){return e!==e},"isNaN"),Q$=Z$,eB=o(function(e){return Q$(e)||e===0?e:e<0?-1:1},"sign"),tB=Object.getOwnPropertyDescriptor,hf=tB;if(hf)try{hf([],"length")}catch(n){hf=null}var e1=hf,gf=Object.defineProperty||!1;if(gf)try{gf({},"a",{value:1})}catch(n){gf=!1}var nB=gf,ny,pR;function rB(){return pR||(pR=1,ny=o(function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var u=Object.getOwnPropertyDescriptor(e,t);if(u.value!==i||u.enumerable!==!0)return!1}return!0},"hasSymbols")),ny}o(rB,"requireShams");var ry,mR;function iB(){if(mR)return ry;mR=1;var n=typeof Symbol!="undefined"&&Symbol,e=rB();return ry=o(function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},"hasNativeSymbols"),ry}o(iB,"requireHasSymbols");var iy,vR;function t1(){return vR||(vR=1,iy=typeof Reflect!="undefined"&&Reflect.getPrototypeOf||null),iy}o(t1,"requireReflect_getPrototypeOf");var sy,yR;function n1(){if(yR)return sy;yR=1;var n=QR;return sy=n.getPrototypeOf||null,sy}o(n1,"requireObject_getPrototypeOf");var oy,_R;function sB(){if(_R)return oy;_R=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=o(function(l,c){for(var d=[],f=0;f<l.length;f+=1)d[f]=l[f];for(var h=0;h<c.length;h+=1)d[h+l.length]=c[h];return d},"concatty"),s=o(function(l,c){for(var d=[],f=c,h=0;f<l.length;f+=1,h+=1)d[h]=l[f];return d},"slicy"),a=o(function(u,l){for(var c="",d=0;d<u.length;d+=1)c+=u[d],d+1<u.length&&(c+=l);return c},"joiny");return oy=o(function(l){var c=this;if(typeof c!="function"||e.apply(c)!==r)throw new TypeError(n+c);for(var d=s(arguments,1),f,h=o(function(){if(this instanceof f){var E=c.apply(this,i(d,arguments));return Object(E)===E?E:this}return c.apply(l,i(d,arguments))},"binder"),g=t(0,c.length-d.length),p=[],m=0;m<g;m++)p[m]="$"+m;if(f=Function("binder","return function ("+a(p,",")+"){ return binder.apply(this,arguments); }")(h),c.prototype){var w=o(function(){},"Empty");w.prototype=c.prototype,f.prototype=new w,w.prototype=null}return f},"bind"),oy}o(sB,"requireImplementation");var ay,wR;function th(){if(wR)return ay;wR=1;var n=sB();return ay=Function.prototype.bind||n,ay}o(th,"requireFunctionBind");var uy,ER;function a0(){return ER||(ER=1,uy=Function.prototype.call),uy}o(a0,"requireFunctionCall");var cy,TR;function r1(){return TR||(TR=1,cy=Function.prototype.apply),cy}o(r1,"requireFunctionApply");var oB=typeof Reflect!="undefined"&&Reflect&&Reflect.apply,aB=th(),uB=r1(),cB=a0(),lB=oB,dB=lB||aB.call(cB,uB),fB=th(),hB=Ta,gB=a0(),pB=dB,i1=o(function(e){if(e.length<1||typeof e[0]!="function")throw new hB("a function is required");return pB(fB,gB,e)},"callBindBasic"),ly,bR;function mB(){if(bR)return ly;bR=1;var n=i1,e=e1,t;try{t=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return ly=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?o(function(u){return s(u==null?u:i(u))},"getDunder"):!1,ly}o(mB,"requireGet");var dy,SR;function vB(){if(SR)return dy;SR=1;var n=t1(),e=n1(),t=mB();return dy=n?o(function(i){return n(i)},"getProto"):e?o(function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)},"getProto"):t?o(function(i){return t(i)},"getProto"):null,dy}o(vB,"requireGetProto");var fy,AR;function yB(){if(AR)return fy;AR=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=th();return fy=t.call(n,e),fy}o(yB,"requireHasown");var Ge,_B=QR,wB=B$,EB=V$,TB=H$,bB=j$,va=W$,fa=Ta,SB=G$,AB=z$,IB=q$,CB=K$,RB=Y$,OB=X$,PB=J$,NB=eB,s1=Function,hy=o(function(n){try{return s1('"use strict"; return ('+n+").constructor;")()}catch(e){}},"getEvalledConstructor"),Hc=e1,DB=nB,gy=o(function(){throw new fa},"throwTypeError"),LB=Hc?(function(){try{return arguments.callee,gy}catch(n){try{return Hc(arguments,"callee").get}catch(e){return gy}}})():gy,aa=iB()(),en=vB(),xB=n1(),UB=t1(),o1=r1(),Gc=a0(),ca={},MB=typeof Uint8Array=="undefined"||!en?Ge:en(Uint8Array),so={__proto__:null,"%AggregateError%":typeof AggregateError=="undefined"?Ge:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?Ge:ArrayBuffer,"%ArrayIteratorPrototype%":aa&&en?en([][Symbol.iterator]()):Ge,"%AsyncFromSyncIteratorPrototype%":Ge,"%AsyncFunction%":ca,"%AsyncGenerator%":ca,"%AsyncGeneratorFunction%":ca,"%AsyncIteratorPrototype%":ca,"%Atomics%":typeof Atomics=="undefined"?Ge:Atomics,"%BigInt%":typeof BigInt=="undefined"?Ge:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?Ge:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?Ge:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?Ge:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":wB,"%eval%":eval,"%EvalError%":EB,"%Float16Array%":typeof Float16Array=="undefined"?Ge:Float16Array,"%Float32Array%":typeof Float32Array=="undefined"?Ge:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?Ge:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?Ge:FinalizationRegistry,"%Function%":s1,"%GeneratorFunction%":ca,"%Int8Array%":typeof Int8Array=="undefined"?Ge:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?Ge:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?Ge:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":aa&&en?en(en([][Symbol.iterator]())):Ge,"%JSON%":typeof JSON=="object"?JSON:Ge,"%Map%":typeof Map=="undefined"?Ge:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!aa||!en?Ge:en(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":_B,"%Object.getOwnPropertyDescriptor%":Hc,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?Ge:Promise,"%Proxy%":typeof Proxy=="undefined"?Ge:Proxy,"%RangeError%":TB,"%ReferenceError%":bB,"%Reflect%":typeof Reflect=="undefined"?Ge:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?Ge:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!aa||!en?Ge:en(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?Ge:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":aa&&en?en(""[Symbol.iterator]()):Ge,"%Symbol%":aa?Symbol:Ge,"%SyntaxError%":va,"%ThrowTypeError%":LB,"%TypedArray%":MB,"%TypeError%":fa,"%Uint8Array%":typeof Uint8Array=="undefined"?Ge:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?Ge:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?Ge:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?Ge:Uint32Array,"%URIError%":SB,"%WeakMap%":typeof WeakMap=="undefined"?Ge:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?Ge:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?Ge:WeakSet,"%Function.prototype.call%":Gc,"%Function.prototype.apply%":o1,"%Object.defineProperty%":DB,"%Object.getPrototypeOf%":xB,"%Math.abs%":AB,"%Math.floor%":IB,"%Math.max%":CB,"%Math.min%":RB,"%Math.pow%":OB,"%Math.round%":PB,"%Math.sign%":NB,"%Reflect.getPrototypeOf%":UB};if(en)try{null.error}catch(n){IR=en(en(n)),so["%Error.prototype%"]=IR}var IR,kB=o(function n(e){var t;if(e==="%AsyncFunction%")t=hy("async function () {}");else if(e==="%GeneratorFunction%")t=hy("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=hy("async function* () {}");else if(e==="%AsyncGenerator%"){var r=n("%AsyncGeneratorFunction%");r&&(t=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=n("%AsyncGenerator%");i&&en&&(t=en(i.prototype))}return so[e]=t,t},"doEval"),CR={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},zc=th(),If=yB(),FB=zc.call(Gc,Array.prototype.concat),$B=zc.call(o1,Array.prototype.splice),RR=zc.call(Gc,String.prototype.replace),Cf=zc.call(Gc,String.prototype.slice),BB=zc.call(Gc,RegExp.prototype.exec),VB=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,HB=/\\(\\)?/g,jB=o(function(e){var t=Cf(e,0,1),r=Cf(e,-1);if(t==="%"&&r!=="%")throw new va("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&t!=="%")throw new va("invalid intrinsic syntax, expected opening `%`");var i=[];return RR(e,VB,function(s,a,u,l){i[i.length]=u?RR(l,HB,"$1"):a||s}),i},"stringToPath"),WB=o(function(e,t){var r=e,i;if(If(CR,r)&&(i=CR[r],r="%"+i[0]+"%"),If(so,r)){var s=so[r];if(s===ca&&(s=kB(r)),typeof s=="undefined"&&!t)throw new fa("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new va("intrinsic "+e+" does not exist!")},"getBaseIntrinsic"),u0=o(function(e,t){if(typeof e!="string"||e.length===0)throw new fa("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new fa('"allowMissing" argument must be a boolean');if(BB(/^%?[^%]*%?$/,e)===null)throw new va("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=jB(e),i=r.length>0?r[0]:"",s=WB("%"+i+"%",t),a=s.name,u=s.value,l=!1,c=s.alias;c&&(i=c[0],$B(r,FB([0,1],c)));for(var d=1,f=!0;d<r.length;d+=1){var h=r[d],g=Cf(h,0,1),p=Cf(h,-1);if((g==='"'||g==="'"||g==="`"||p==='"'||p==="'"||p==="`")&&g!==p)throw new va("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(l=!0),i+="."+h,a="%"+i+"%",If(so,a))u=so[a];else if(u!=null){if(!(h in u)){if(!t)throw new fa("base intrinsic for "+e+" exists, but the property is not available.");return}if(Hc&&d+1>=r.length){var m=Hc(u,h);f=!!m,f&&"get"in m&&!("originalValue"in m.get)?u=m.get:u=u[h]}else f=If(u,h),u=u[h];f&&!l&&(so[a]=u)}}return u},"GetIntrinsic"),a1=u0,u1=i1,GB=u1([a1("%String.prototype.indexOf%")]),c1=o(function(e,t){var r=a1(e,!!t);return typeof r=="function"&&GB(e,".prototype.")>-1?u1([r]):r},"callBoundIntrinsic"),zB=u0,qc=c1,qB=Qf,KB=Ta,OR=zB("%Map%",!0),YB=qc("Map.prototype.get",!0),XB=qc("Map.prototype.set",!0),JB=qc("Map.prototype.has",!0),ZB=qc("Map.prototype.delete",!0),QB=qc("Map.prototype.size",!0),l1=!!OR&&o(function(){var e,t={assert:o(function(r){if(!t.has(r))throw new KB("Side channel does not contain "+qB(r))},"assert"),delete:o(function(r){if(e){var i=ZB(e,r);return QB(e)===0&&(e=void 0),i}return!1},"delete"),get:o(function(r){if(e)return YB(e,r)},"get"),has:o(function(r){return e?JB(e,r):!1},"has"),set:o(function(r,i){e||(e=new OR),XB(e,r,i)},"set")};return t},"getSideChannelMap"),eV=u0,nh=c1,tV=Qf,ff=l1,nV=Ta,ua=eV("%WeakMap%",!0),rV=nh("WeakMap.prototype.get",!0),iV=nh("WeakMap.prototype.set",!0),sV=nh("WeakMap.prototype.has",!0),oV=nh("WeakMap.prototype.delete",!0),aV=ua?o(function(){var e,t,r={assert:o(function(i){if(!r.has(i))throw new nV("Side channel does not contain "+tV(i))},"assert"),delete:o(function(i){if(ua&&i&&(typeof i=="object"||typeof i=="function")){if(e)return oV(e,i)}else if(ff&&t)return t.delete(i);return!1},"delete"),get:o(function(i){return ua&&i&&(typeof i=="object"||typeof i=="function")&&e?rV(e,i):t&&t.get(i)},"get"),has:o(function(i){return ua&&i&&(typeof i=="object"||typeof i=="function")&&e?sV(e,i):!!t&&t.has(i)},"has"),set:o(function(i,s){ua&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new ua),iV(e,i,s)):ff&&(t||(t=ff()),t.set(i,s))},"set")};return r},"getSideChannelWeakMap"):ff,uV=Ta,cV=Qf,lV=$$,dV=l1,fV=aV,hV=fV||dV||lV,gV=o(function(){var e,t={assert:o(function(r){if(!t.has(r))throw new uV("Side channel does not contain "+cV(r))},"assert"),delete:o(function(r){return!!e&&e.delete(r)},"delete"),get:o(function(r){return e&&e.get(r)},"get"),has:o(function(r){return!!e&&e.has(r)},"has"),set:o(function(r,i){e||(e=hV()),e.set(r,i)},"set")};return t},"getSideChannel"),pV=String.prototype.replace,mV=/%20/g,py={RFC1738:"RFC1738",RFC3986:"RFC3986"},c0={default:py.RFC3986,formatters:{RFC1738:o(function(n){return pV.call(n,mV,"+")},"RFC1738"),RFC3986:o(function(n){return String(n)},"RFC3986")},RFC1738:py.RFC1738,RFC3986:py.RFC3986},vV=c0,my=Object.prototype.hasOwnProperty,to=Array.isArray,Gr=(function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),yV=o(function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(to(r)){for(var i=[],s=0;s<r.length;++s)typeof r[s]!="undefined"&&i.push(r[s]);t.obj[t.prop]=i}}},"compactQueue"),d1=o(function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},i=0;i<e.length;++i)typeof e[i]!="undefined"&&(r[i]=e[i]);return r},"arrayToObject"),_V=o(function n(e,t,r){if(!t)return e;if(typeof t!="object"&&typeof t!="function"){if(to(e))e.push(t);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!my.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var i=e;return to(e)&&!to(t)&&(i=d1(e,r)),to(e)&&to(t)?(t.forEach(function(s,a){if(my.call(e,a)){var u=e[a];u&&typeof u=="object"&&s&&typeof s=="object"?e[a]=n(u,s,r):e.push(s)}else e[a]=s}),e):Object.keys(t).reduce(function(s,a){var u=t[a];return my.call(s,a)?s[a]=n(s[a],u,r):s[a]=u,s},i)},"merge"),wV=o(function(e,t){return Object.keys(t).reduce(function(r,i){return r[i]=t[i],r},e)},"assignSingleSource"),EV=o(function(n,e,t){var r=n.replace(/\+/g," ");if(t==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(i){return r}},"decode"),vy=1024,TV=o(function(e,t,r,i,s){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),r==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(g){return"%26%23"+parseInt(g.slice(2),16)+"%3B"});for(var u="",l=0;l<a.length;l+=vy){for(var c=a.length>=vy?a.slice(l,l+vy):a,d=[],f=0;f<c.length;++f){var h=c.charCodeAt(f);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||s===vV.RFC1738&&(h===40||h===41)){d[d.length]=c.charAt(f);continue}if(h<128){d[d.length]=Gr[h];continue}if(h<2048){d[d.length]=Gr[192|h>>6]+Gr[128|h&63];continue}if(h<55296||h>=57344){d[d.length]=Gr[224|h>>12]+Gr[128|h>>6&63]+Gr[128|h&63];continue}f+=1,h=65536+((h&1023)<<10|c.charCodeAt(f)&1023),d[d.length]=Gr[240|h>>18]+Gr[128|h>>12&63]+Gr[128|h>>6&63]+Gr[128|h&63]}u+=d.join("")}return u},"encode"),bV=o(function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var s=t[i],a=s.obj[s.prop],u=Object.keys(a),l=0;l<u.length;++l){var c=u[l],d=a[c];typeof d=="object"&&d!==null&&r.indexOf(d)===-1&&(t.push({obj:a,prop:c}),r.push(d))}return yV(t),e},"compact"),SV=o(function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},"isRegExp"),AV=o(function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},"isBuffer"),IV=o(function(e,t){return[].concat(e,t)},"combine"),CV=o(function(e,t){if(to(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(t(e[i]));return r}return t(e)},"maybeMap"),f1={arrayToObject:d1,assign:wV,combine:IV,compact:bV,decode:EV,encode:TV,isBuffer:AV,isRegExp:SV,maybeMap:CV,merge:_V},h1=gV,pf=f1,Dc=c0,RV=Object.prototype.hasOwnProperty,g1={brackets:o(function(e){return e+"[]"},"brackets"),comma:"comma",indices:o(function(e,t){return e+"["+t+"]"},"indices"),repeat:o(function(e){return e},"repeat")},zr=Array.isArray,OV=Array.prototype.push,p1=o(function(n,e){OV.apply(n,zr(e)?e:[e])},"pushToArray"),PV=Date.prototype.toISOString,PR=Dc.default,Gt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:pf.encode,encodeValuesOnly:!1,filter:void 0,format:PR,formatter:Dc.formatters[PR],indices:!1,serializeDate:o(function(e){return PV.call(e)},"serializeDate"),skipNulls:!1,strictNullHandling:!1},NV=o(function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},"isNonNullishPrimitive"),yy={},DV=o(function n(e,t,r,i,s,a,u,l,c,d,f,h,g,p,m,w,E,_){for(var T=e,R=_,D=0,B=!1;(R=R.get(yy))!==void 0&&!B;){var z=R.get(e);if(D+=1,typeof z!="undefined"){if(z===D)throw new RangeError("Cyclic object value");B=!0}typeof R.get(yy)=="undefined"&&(D=0)}if(typeof d=="function"?T=d(t,T):T instanceof Date?T=g(T):r==="comma"&&zr(T)&&(T=pf.maybeMap(T,function(de){return de instanceof Date?g(de):de})),T===null){if(a)return c&&!w?c(t,Gt.encoder,E,"key",p):t;T=""}if(NV(T)||pf.isBuffer(T)){if(c){var j=w?t:c(t,Gt.encoder,E,"key",p);return[m(j)+"="+m(c(T,Gt.encoder,E,"value",p))]}return[m(t)+"="+m(String(T))]}var Y=[];if(typeof T=="undefined")return Y;var q;if(r==="comma"&&zr(T))w&&c&&(T=pf.maybeMap(T,c)),q=[{value:T.length>0?T.join(",")||null:void 0}];else if(zr(d))q=d;else{var P=Object.keys(T);q=f?P.sort(f):P}var Z=l?String(t).replace(/\./g,"%2E"):String(t),oe=i&&zr(T)&&T.length===1?Z+"[]":Z;if(s&&zr(T)&&T.length===0)return oe+"[]";for(var S=0;S<q.length;++S){var K=q[S],U=typeof K=="object"&&K&&typeof K.value!="undefined"?K.value:T[K];if(!(u&&U===null)){var Oe=h&&l?String(K).replace(/\./g,"%2E"):String(K),Ye=zr(T)?typeof r=="function"?r(oe,Oe):oe:oe+(h?"."+Oe:"["+Oe+"]");_.set(e,D);var Xe=h1();Xe.set(yy,_),p1(Y,n(U,Ye,r,i,s,a,u,l,r==="comma"&&w&&zr(T)?null:c,d,f,h,g,p,m,w,E,Xe))}}return Y},"stringify"),LV=o(function(e){if(!e)return Gt;if(typeof e.allowEmptyArrays!="undefined"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys!="undefined"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder!="undefined"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Gt.charset;if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Dc.default;if(typeof e.format!="undefined"){if(!RV.call(Dc.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=Dc.formatters[r],s=Gt.filter;(typeof e.filter=="function"||zr(e.filter))&&(s=e.filter);var a;if(e.arrayFormat in g1?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=Gt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=typeof e.allowDots=="undefined"?e.encodeDotInKeys===!0?!0:Gt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Gt.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Gt.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Gt.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter=="undefined"?Gt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Gt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Gt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Gt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Gt.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Gt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Gt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Gt.strictNullHandling}},"normalizeStringifyOptions"),xV=o(function(n,e){var t=n,r=LV(e),i,s;typeof r.filter=="function"?(s=r.filter,t=s("",t)):zr(r.filter)&&(s=r.filter,i=s);var a=[];if(typeof t!="object"||t===null)return"";var u=g1[r.arrayFormat],l=u==="comma"&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);for(var c=h1(),d=0;d<i.length;++d){var f=i[d],h=t[f];r.skipNulls&&h===null||p1(a,DV(h,f,u,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}var g=a.join(r.delimiter),p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),g.length>0?p+g:""},"stringify_1"),oo=f1,Py=Object.prototype.hasOwnProperty,NR=Array.isArray,xt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:oo.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},UV=o(function(n){return n.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},"interpretNumericEntities"),m1=o(function(n,e,t){if(n&&typeof n=="string"&&e.comma&&n.indexOf(",")>-1)return n.split(",");if(e.throwOnLimitExceeded&&t>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return n},"parseArrayValue"),MV="utf8=%26%2310003%3B",kV="utf8=%E2%9C%93",FV=o(function(e,t){var r={__proto__:null},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=t.parameterLimit===1/0?void 0:t.parameterLimit,a=i.split(t.delimiter,t.throwOnLimitExceeded?s+1:s);if(t.throwOnLimitExceeded&&a.length>s)throw new RangeError("Parameter limit exceeded. Only "+s+" parameter"+(s===1?"":"s")+" allowed.");var u=-1,l,c=t.charset;if(t.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===kV?c="utf-8":a[l]===MV&&(c="iso-8859-1"),u=l,l=a.length);for(l=0;l<a.length;++l)if(l!==u){var d=a[l],f=d.indexOf("]="),h=f===-1?d.indexOf("="):f+1,g,p;h===-1?(g=t.decoder(d,xt.decoder,c,"key"),p=t.strictNullHandling?null:""):(g=t.decoder(d.slice(0,h),xt.decoder,c,"key"),p=oo.maybeMap(m1(d.slice(h+1),t,NR(r[g])?r[g].length:0),function(w){return t.decoder(w,xt.decoder,c,"value")})),p&&t.interpretNumericEntities&&c==="iso-8859-1"&&(p=UV(String(p))),d.indexOf("[]=")>-1&&(p=NR(p)?[p]:p);var m=Py.call(r,g);m&&t.duplicates==="combine"?r[g]=oo.combine(r[g],p):(!m||t.duplicates==="last")&&(r[g]=p)}return r},"parseQueryStringValues"),$V=o(function(n,e,t,r){var i=0;if(n.length>0&&n[n.length-1]==="[]"){var s=n.slice(0,-1).join("");i=Array.isArray(e)&&e[s]?e[s].length:0}for(var a=r?e:m1(e,t,i),u=n.length-1;u>=0;--u){var l,c=n[u];if(c==="[]"&&t.parseArrays)l=t.allowEmptyArrays&&(a===""||t.strictNullHandling&&a===null)?[]:oo.combine([],a);else{l=t.plainObjects?{__proto__:null}:{};var d=c.charAt(0)==="["&&c.charAt(c.length-1)==="]"?c.slice(1,-1):c,f=t.decodeDotInKeys?d.replace(/%2E/g,"."):d,h=parseInt(f,10);!t.parseArrays&&f===""?l={0:a}:!isNaN(h)&&c!==f&&String(h)===f&&h>=0&&t.parseArrays&&h<=t.arrayLimit?(l=[],l[h]=a):f!=="__proto__"&&(l[f]=a)}a=l}return a},"parseObject"),BV=o(function(e,t,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,u=/(\[[^[\]]*])/g,l=r.depth>0&&a.exec(s),c=l?s.slice(0,l.index):s,d=[];if(c){if(!r.plainObjects&&Py.call(Object.prototype,c)&&!r.allowPrototypes)return;d.push(c)}for(var f=0;r.depth>0&&(l=u.exec(s))!==null&&f<r.depth;){if(f+=1,!r.plainObjects&&Py.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;d.push(l[1])}if(l){if(r.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");d.push("["+s.slice(l.index)+"]")}return $V(d,t,r,i)}},"parseQueryStringKeys"),VV=o(function(e){if(!e)return xt;if(typeof e.allowEmptyArrays!="undefined"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys!="undefined"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder!="undefined"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded!="undefined"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var t=typeof e.charset=="undefined"?xt.charset:e.charset,r=typeof e.duplicates=="undefined"?xt.duplicates:e.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots=="undefined"?e.decodeDotInKeys===!0?!0:xt.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:xt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:xt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:xt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:xt.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:xt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:xt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:xt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:xt.decoder,delimiter:typeof e.delimiter=="string"||oo.isRegExp(e.delimiter)?e.delimiter:xt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:xt.depth,duplicates:r,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:xt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:xt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:xt.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:xt.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:xt.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},"normalizeParseOptions"),HV=o(function(n,e){var t=VV(e);if(n===""||n===null||typeof n=="undefined")return t.plainObjects?{__proto__:null}:{};for(var r=typeof n=="string"?FV(n,t):n,i=t.plainObjects?{__proto__:null}:{},s=Object.keys(r),a=0;a<s.length;++a){var u=s[a],l=BV(u,r[u],t,typeof n=="string");i=oo.merge(i,l,t)}return t.allowSparse===!0?i:oo.compact(i)},"parse$1"),jV=xV,WV=HV,GV=c0,zV={formats:GV,parse:WV,stringify:jV},v1=e$(zV),y1=o(n=>{let{payload:e,headers:t}=n;return!!(e&&!(t!=null&&t["content-type"]))},"missingContentType"),qV=o((n,e)=>{let t=e==null?void 0:e["content-type"];return t?t.toLowerCase().includes(nn.FormUrlEncoded.toLowerCase())?nn.FormUrlEncoded:t.toLowerCase().includes(nn.Json.toLowerCase())?nn.Json:void 0:n},"getEffectiveContentType"),l0=o(n=>{let{payload:e,contentType:t}=n;return t===nn.FormUrlEncoded?v1.stringify(e):t===nn.Json?JSON.stringify(e):e},"stringifyPayload"),KV=o(n=>[...n].reduce((e,t)=>{let[r,i]=t;return e[r]=i,e},{}),"objectFromEntries"),d0=o(n=>{let{responseHeaders:e,localeHeader:t,currentLocale:r,setLocale:i}=n,s=t.toLowerCase(),a=Object.keys(e).find(l=>l.toLowerCase()===s),u=a?e[a]:void 0;u&&r&&u!==r&&(i==null||i(u))},"updateLocale"),Ny=o(n=>n==null?void 0:n.replace("outsystems://","https://"),"replaceNativeRequestProtocol"),Rf=o((n,e,t)=>{var r;let i;try{n&&(i=JSON.parse(n))}catch(s){(r=e==null?void 0:e.clientError)===null||r===void 0||r.call(e,{error:s,category:t,clientMessage:`Could not parse response: ${n}`,internalMessage:"Could not parse response."})}return i},"tryParseResponse"),YV=o((n,e)=>{if(!e)return n;let t=v1.stringify(e);if(t){let r=n.includes("?")?"&":"?";return`${n}${r}${t}`}return n},"appendQueryStringParams");function XV(){if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;throw new Error("unable to locate global object")}o(XV,"getGlobalScope");function ha(n,e,t){return Be(this,void 0,void 0,function*(){return n!=null&&n.startActiveClientSpan?n.startActiveClientSpan(e,r=>Be(this,void 0,void 0,function*(){try{return yield t()}finally{r==null||r.end()}})):t()})}o(ha,"doWithSpan");var DR="os-auth-retry",_1=o(n=>{let{fetchClient:e,getToken:t,retryOnUnauthorizedResponse:r=!0}=n,i=e;return t&&(i=o((s,a)=>Be(void 0,void 0,void 0,function*(){yield JV({config:a,getToken:t});let u=yield e(s,a);return r&&(u.ok||(u=yield ZV({response:u,fetchClient:e,config:Object.assign({},a),getToken:t}))),u}),"result")),i},"injectAuthInterceptors"),JV=o(n=>Be(void 0,[n],void 0,function(e){let{config:t={},getToken:r}=e;return(function*(){var i;let s=yield r();return s&&(t.headers=Object.assign(Object.assign({},(i=t.headers)!==null&&i!==void 0?i:{}),{Authorization:s})),t})()}),"setAccessTokenInRequestHeaders"),ZV=o(n=>Be(void 0,[n],void 0,function(e){let{response:t,fetchClient:r,config:i={},getToken:s}=e;return(function*(){var a;if(t.status!==401||t.headers.get(DR)==="true")return t;let u=yield s(!0);return u?(i.headers=Object.assign(Object.assign({},(a=i.headers)!==null&&a!==void 0?a:{}),{Authorization:u,[DR]:"true"}),r(t.url,i)):t})()}),"retryOnUnauthorized"),_y,wy,Ot,Lc,Of,Pf,xc,Uc,Mc,Nf,Yn,Dy,Ey,Ly,xy,Df,Ty,Lf,Uy,LR,My,xR,QV="",w1=1e4,e3="",cs="FetchHttpClient",UR=o(n=>Be(void 0,void 0,void 0,function*(){let e=yield n.text();return e===""?void 0:JSON.parse(e)}),"readResponseJson");(_y=AbortSignal.timeout)!==null&&_y!==void 0||(AbortSignal.timeout=o(function(e){let t=new AbortController;return setTimeout(()=>t.abort(),e),t.signal},"timeout"));(wy=AbortSignal.any)!==null&&wy!==void 0||(AbortSignal.any=o(function(e){let t=new AbortController;function r(){t.abort(),i()}o(r,"abort");function i(){for(let s of e)s.removeEventListener("abort",r)}o(i,"clean");for(let s of e)if(s.aborted){t.abort(s.reason);break}else s.addEventListener("abort",r);return t.signal},"any"));var ga,vi=(ga=class{constructor(){let{baseUrl:e=QV,headers:t={},localeHeader:r=e3,getLocale:i,setLocale:s,fetchClient:a=XV().fetch,logger:u,loadTrace:l,getToken:c=o(()=>Promise.resolve(void 0),"getToken")}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ot.add(this),Lc.set(this,void 0),Of.set(this,void 0),Pf.set(this,void 0),xc.set(this,void 0),Uc.set(this,void 0),Mc.set(this,void 0),Nf.set(this,void 0),Yn.set(this,void 0),ze(this,Of,e,"f"),ze(this,Pf,t,"f"),ze(this,xc,r,"f"),ze(this,Uc,i,"f"),ze(this,Mc,s,"f"),ze(this,Yn,u,"f"),ze(this,Nf,l,"f"),ze(this,Lc,this.addAuthInterceptors(a,c),"f")}addAuthInterceptors(e,t){return _1({fetchClient:e,getToken:t})}post(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,payload:s,params:a,headers:u,contentType:l=nn.FormUrlEncoded,timeout:c,timeoutHandler:d,useLocaleInfo:f=!1,baseURL:h,abortCommand:g,userCancelController:p=new AbortController,responseHandler:m}=t;return(function*(){var w,E,_,T,R,D,B;(E=(w=te(r,Yn,"f"))===null||w===void 0?void 0:w.setActiveSpanAsNonAggregable)===null||E===void 0||E.call(w);let z=f?(_=te(r,Uc,"f"))===null||_===void 0?void 0:_.call(r):void 0,[j,Y]=te(r,Ot,"m",Dy).call(r,i,h,a);g&&(g.onAbort=()=>{p.abort()});try{(R=(T=te(r,Yn,"f"))===null||T===void 0?void 0:T.debug)===null||R===void 0||R.call(T,{category:cs,message:`POST ${Y}`});let q=qV(l,u),P={body:s?l0({payload:s,contentType:q}):void 0,headers:yield te(r,Ot,"m",My).call(r,u,z,y1({payload:s,headers:u})?l:void 0),method:"POST",signal:AbortSignal.any([p.signal,AbortSignal.timeout(c?c*1e3:w1)])},Z=o(()=>Be(r,void 0,void 0,function*(){return te(this,Lc,"f").call(this,j,P)}),"fetch"),oe=yield ha(te(r,Yn,"f"),"POST",Z);if(!oe.ok)throw yield te(r,Ot,"m",Uy).call(r,oe,i,"POST",d,p);let S=yield UR(oe);if(te(r,Ot,"m",xy).call(r,oe,f,z),typeof m=="function")try{let K={};oe.headers.forEach((U,Oe)=>K[Oe]=U),m({data:S,responseHeaders:K})}catch(K){(B=(D=te(r,Yn,"f"))===null||D===void 0?void 0:D.error)===null||B===void 0||B.call(D,{category:cs,message:`Handler Error: POST ${Y}`,errorCode:Ve.Communication_Default,error:K})}return S}catch(q){if(te(r,Ot,"m",Df).call(r,q))return;throw q instanceof Fn?q:yield te(r,Ot,"m",Lf).call(r,q,i,"POST",d)}})()})}get(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,params:s,headers:a,useLocaleInfo:u,timeout:l,timeoutHandler:c,responseType:d="json",baseURL:f}=t;return(function*(){try{let h=yield te(r,Ot,"m",Ly).call(r,{url:i,params:s,headers:a,useLocaleInfo:u,timeout:l,timeoutHandler:c,baseURL:f});return d==="blob"?yield h.blob():d==="json"?yield UR(h):Promise.resolve()}catch(h){if(te(r,Ot,"m",Df).call(r,h))return;throw h instanceof Fn?h:yield te(r,Ot,"m",Lf).call(r,h,i,"GET",c)}})()})}getResponseUrl(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,params:s,headers:a,useLocaleInfo:u,timeout:l,timeoutHandler:c,baseURL:d}=t;return(function*(){return(yield te(r,Ot,"m",Ly).call(r,{url:i,params:s,headers:a,useLocaleInfo:u,timeout:l,timeoutHandler:c,baseURL:d})).url})()})}},o(ga,"FetchHttpClient"),ga);Lc=new WeakMap,Of=new WeakMap,Pf=new WeakMap,xc=new WeakMap,Uc=new WeakMap,Mc=new WeakMap,Nf=new WeakMap,Yn=new WeakMap,Ot=new WeakSet,Dy=o(function(e,t,r){var i;let s=(i=Ny(e))!==null&&i!==void 0?i:"",a=Ny(t||te(this,Of,"f")),u=a&&!e.includes("://")?`${a.replace(/\/$/,"")}/${e.replace(/^\/+/,"")}`:s;return[YV(u,r),s]},"_FetchHttpClient_composeUrl"),Ey=o(function(e,t){return Be(this,void 0,void 0,function*(){e===us.Timeout&&t&&(yield t())})},"_FetchHttpClient_handleFetchTimeout"),Ly=o(function(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,params:s,headers:a,useLocaleInfo:u=!1,timeout:l,timeoutHandler:c,baseURL:d}=t;return(function*(){var f,h,g,p,m;(h=(f=te(r,Yn,"f"))===null||f===void 0?void 0:f.setActiveSpanAsNonAggregable)===null||h===void 0||h.call(f);let w=u?(g=te(r,Uc,"f"))===null||g===void 0?void 0:g.call(r):void 0,[E,_]=te(r,Ot,"m",Dy).call(r,i,d,s);try{(m=(p=te(r,Yn,"f"))===null||p===void 0?void 0:p.debug)===null||m===void 0||m.call(p,{category:cs,message:`GET ${_}`});let T={headers:yield te(r,Ot,"m",My).call(r,a,w),signal:AbortSignal.timeout(l?l*1e3:w1)},R=o(()=>Be(r,void 0,void 0,function*(){return te(this,Lc,"f").call(this,E,T)}),"fetch"),D=yield ha(te(r,Yn,"f"),"GET",R);if(!D.ok)throw yield te(r,Ot,"m",Uy).call(r,D,i,"GET",c);return te(r,Ot,"m",xy).call(r,D,u,w),D}catch(T){throw T instanceof Fn||te(r,Ot,"m",Df).call(r,T)?T:yield te(r,Ot,"m",Lf).call(r,T,i,"GET",c)}})()})},"_FetchHttpClient_getResponse"),xy=o(function(e,t,r){t&&te(this,Mc,"f")&&(e!=null&&e.headers)&&d0({responseHeaders:KV(e.headers.entries()),localeHeader:te(this,xc,"f"),currentLocale:r,setLocale:te(this,Mc,"f")})},"_FetchHttpClient_updateLocale"),Df=o(function(e){return e instanceof TypeError&&(e.message==="NetworkError when attempting to fetch resource."||e.message==="Load failed.")},"_FetchHttpClient_cancelledOnNavigation"),Ty=o(function(e,t,r){return(e==null?void 0:e.name)==="TimeoutError"||(e==null?void 0:e.name)==="AbortError"&&!(t!=null&&t.signal.aborted)||r===408?us.Timeout:r===401?us.Unauthorized:(e==null?void 0:e.name)==="AbortError"&&(t==null?void 0:t.signal.aborted)===!0?us.Aborted:us.Unknown},"_FetchHttpClient_parseError"),Lf=o(function(e,t,r,i){return Be(this,void 0,void 0,function*(){var s,a;let u=te(this,Ot,"m",Ty).call(this,e);yield te(this,Ot,"m",Ey).call(this,u,i);let l=Ve.Communication_Default;return u===us.Timeout?l=Ve.Communication_Timeout:u===us.Unauthorized?l=Ve.Communication_Unauthorized:u===us.Aborted&&(l=Ve.Communication_Aborted),(a=(s=te(this,Yn,"f"))===null||s===void 0?void 0:s.error)===null||a===void 0||a.call(s,{category:cs,message:`${r} ${t} - ${e.message}`,errorCode:l,error:e}),new Fn(`${r} ${t} - ${e.message}`,l,void 0,void 0,cs)})},"_FetchHttpClient_processFetchError"),Uy=o(function(e,t,r,i,s){return Be(this,void 0,void 0,function*(){var a,u,l;let c=te(this,Ot,"m",Ty).call(this,void 0,s,e.status);yield te(this,Ot,"m",Ey).call(this,c,i);let d=Zf((a=e.status)!==null&&a!==void 0?a:""),f=yield te(this,Ot,"m",LR).call(this,e);return(l=(u=te(this,Yn,"f"))===null||u===void 0?void 0:u.error)===null||l===void 0||l.call(u,{category:cs,message:`${r} ${t} - ${e.status} ${e.statusText}`,errorCode:d,error:new Error(`Fetch ${r} Error - ${e.status} ${e.statusText}`)}),new Fn(`${r} ${t} - ${e.status} ${e.statusText}`,d,e.status,f,cs)})},"_FetchHttpClient_processResponseError"),LR=o(function(e){return Be(this,void 0,void 0,function*(){try{let t=/application\/.*json/i,r=e.headers.get("content-type");return r&&t.test(r)?yield e.json():yield e.text()}catch(t){return}})},"_FetchHttpClient_parseResponseData"),My=o(function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;var i;let s=Object.assign(Object.assign(Object.assign(Object.assign({},te(this,Pf,"f")),e),t?{[te(this,xc,"f")]:t}:{}),e!=null&&e["content-type"]||r?{"content-type":(i=e==null?void 0:e["content-type"])!==null&&i!==void 0?i:r}:{});return r&&(s["content-type"]=r),te(this,Ot,"m",xR).call(this,s)},"_FetchHttpClient_buildHeaders"),xR=o(function(e){return Be(this,void 0,void 0,function*(){var t,r;try{return yield GR(e,()=>{var i;return(i=te(this,Nf,"f"))===null||i===void 0?void 0:i.call(this)})}catch(i){(r=(t=te(this,Yn,"f"))===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,{category:cs,message:"Error loading trace information",errorCode:Ve.Communication_Default,error:i})}return e})},"_FetchHttpClient_insertTraceHeaders");var h0=class h0 extends vi{addAuthInterceptors(e,t){return _1({fetchClient:e,getToken:t,retryOnUnauthorizedResponse:!1})}};o(h0,"LoggerHttpClient");var xf=h0,t3=o((n,e,t)=>{try{return r3(n,e,t)}catch(r){return i3(n,e,t)}},"buildUrl"),n3=o(n=>{try{return new URL(n),!0}catch(e){return!1}},"isUrlValid"),r3=o((n,e,t)=>{let r=n3(e!=null?e:"")?new URL(n,e):new URL(n);return Object.entries(t!=null?t:{}).forEach(i=>{let[s,a]=i;r.searchParams.append(s,a!=null?a:"")}),r.toString()},"buildAbsoluteUrl"),i3=o((n,e,t)=>{let r=`${e||""}/${n}${t?"?":""}`,i="";return Object.entries(t!=null?t:{}).forEach(s=>{let[a,u]=s;i+=`${i?"&":""}${a}=${encodeURIComponent(u)}`}),`${r}${i}`.replace(/\/+/g,"/")},"buildRelativeUrl"),pi,kc,Uf,Fc,tn,$c,Mf,kf,Ff,MR,mf,kR,FR,s3="",ar="NativeHttpClient",o3="",g0=class g0{constructor(e){let{baseUrl:t=s3,headers:r={},localeHeader:i=o3,getLocale:s,setLocale:a,httpClientInstance:u,logger:l,loadTrace:c,getToken:d}=e;pi.add(this),kc.set(this,void 0),Uf.set(this,void 0),Fc.set(this,void 0),tn.set(this,void 0),$c.set(this,void 0),Mf.set(this,void 0),kf.set(this,void 0),Ff.set(this,void 0),ze(this,kc,i,"f"),ze(this,Uf,s,"f"),ze(this,Fc,a,"f"),ze(this,tn,l,"f"),this.httpClientInstance=u,ze(this,kf,t,"f"),ze(this,Ff,r,"f"),ze(this,Mf,c,"f"),ze(this,$c,d!=null?d:()=>Promise.resolve(void 0),"f")}post(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,payload:s,params:a,headers:u,contentType:l=nn.FormUrlEncoded,timeout:c,timeoutHandler:d,useLocaleInfo:f,baseURL:h,abortCommand:g,responseHandler:p}=t;return(function*(){var m,w,E;let _=l0({payload:s,contentType:l}),T=o(()=>te(r,pi,"m",mf).call(r,{method:"POST",url:i,params:a,baseURL:h,headers:u,timeout:c,timeoutHandler:d,useLocaleInfo:f,contentType:l,payload:_,abortControler:g}),"fetch"),R=yield ha(te(r,tn,"f"),"POST",T),D=Rf(R.responseText,te(r,tn,"f"),ar);if(typeof p=="function")try{p({data:D,responseHeaders:(m=R.responseHeaders)!==null&&m!==void 0?m:{}})}catch(B){(E=(w=te(r,tn,"f"))===null||w===void 0?void 0:w.error)===null||E===void 0||E.call(w,{category:ar,message:`Handler Error: Post ${R.responseUrl}`,errorCode:Ve.Communication_Default,error:B})}return D})()})}get(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,params:s,headers:a,responseType:u="json",useLocaleInfo:l,timeout:c,timeoutHandler:d,baseURL:f}=t;return(function*(){let h=u==="blob",g=o(()=>te(r,pi,"m",mf).call(r,{method:"GET",url:i,params:s,baseURL:f,headers:a,timeout:c,timeoutHandler:d,useLocaleInfo:l,responseType:h?"blob":void 0}),"fetch"),p=yield ha(te(r,tn,"f"),"GET",g);return h?p.response:u!=="none"?Rf(p.responseText,te(r,tn,"f"),ar):void 0})()})}getResponseUrl(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,params:s,headers:a,useLocaleInfo:u,timeout:l,timeoutHandler:c,baseURL:d}=t;return(function*(){var f,h;let g=o(()=>te(r,pi,"m",mf).call(r,{method:"GET",url:i,params:s,baseURL:d,headers:a,timeout:l,timeoutHandler:c,useLocaleInfo:u}),"fetch"),p=yield ha(te(r,tn,"f"),"GET",g);if(!p.responseUrl){let m=new Error("Successful request came without a response URL");throw(h=(f=te(r,tn,"f"))===null||f===void 0?void 0:f.error)===null||h===void 0||h.call(f,{error:m,category:ar,message:"Successful request came without a response URL",errorCode:Ve.Communication_Default}),m}return p.responseUrl})()})}};o(g0,"NativeHttpClient");var $f=g0;kc=new WeakMap,Uf=new WeakMap,Fc=new WeakMap,tn=new WeakMap,$c=new WeakMap,Mf=new WeakMap,kf=new WeakMap,Ff=new WeakMap,pi=new WeakSet,MR=o(function(e,t,r,i,s){return Be(this,void 0,void 0,function*(){var a,u,l,c,d,f,h,g;if(t.status===401&&!r){if(yield te(this,$c,"f").call(this,!0))return s();{let m=new Error("Unable to retrieve an authorization token");throw(u=(a=te(this,tn,"f"))===null||a===void 0?void 0:a.error)===null||u===void 0||u.call(a,{error:m,category:ar,message:`${e} ${i}`,errorCode:Ve.Communication_Unauthorized}),m}}else{let p=(d=(c=(l=t.status)===null||l===void 0?void 0:l.toString)===null||c===void 0?void 0:c.call(l))!==null&&d!==void 0?d:"",m=Zf(p),w=new Fn((f=t.responseText)!==null&&f!==void 0?f:"Network Error",m,p,Rf(t.responseText,te(this,tn,"f"),ar),ar);throw(g=(h=te(this,tn,"f"))===null||h===void 0?void 0:h.error)===null||g===void 0||g.call(h,{error:w,category:ar,message:`${e} ${i}`,errorCode:m}),w}})},"_NativeHttpClient_onErrorHandler"),mf=o(function n(e){return Be(this,void 0,void 0,function*(){var t,r,i;(r=(t=te(this,tn,"f"))===null||t===void 0?void 0:t.setActiveSpanAsNonAggregable)===null||r===void 0||r.call(t);let{method:s,url:a,params:u,baseURL:l,payload:c,headers:d,useLocaleInfo:f,timeout:h,timeoutHandler:g,isRetry:p,contentType:m,responseType:w}=e,E=t3(a,l!=null?l:te(this,kf,"f"),u),_=f?(i=te(this,Uf,"f"))===null||i===void 0?void 0:i.call(this):void 0,T=yield te(this,pi,"m",kR).call(this,{headers:d,locale:_,contentType:m});return new Promise((R,D)=>{var B,z;let j=this.httpClientInstance.createRequest(s,E);j.onError=Y=>Be(this,void 0,void 0,function*(){try{let q=yield te(this,pi,"m",MR).call(this,s,Y,!!p,E,()=>te(this,pi,"m",n).call(this,Object.assign(Object.assign({},e),{isRetry:!0})));R(q)}catch(q){D(q)}}),j.onTimeout=()=>{var Y,q;try{g==null||g()}catch(Z){D(Z)}let P=new Error(`Request timed out: ${E}`);(q=(Y=te(this,tn,"f"))===null||Y===void 0?void 0:Y.error)===null||q===void 0||q.call(Y,{category:ar,message:`POST ${E}`,errorCode:Ve.Communication_Timeout,error:P}),D(P)},j.onSuccess=Y=>{f&&te(this,Fc,"f")&&Y.responseHeaders&&d0({responseHeaders:Y.responseHeaders,localeHeader:te(this,kc,"f"),currentLocale:_,setLocale:te(this,Fc,"f")}),R(Y)},j.onAbort=()=>{var Y,q;let P=new Error(`Request was aborted: ${E}`);(q=(Y=te(this,tn,"f"))===null||Y===void 0?void 0:Y.error)===null||q===void 0||q.call(Y,{category:ar,message:`POST ${E}`,errorCode:Ve.Communication_Aborted,error:P}),D(P)},Object.entries(T).forEach(Y=>{let[q,P]=Y;j.setHeader(q,P)}),h&&j.setTimeout(h*1e3),c&&j.setBody(c),w==="blob"&&(j.responseType="blob"),(z=(B=te(this,tn,"f"))===null||B===void 0?void 0:B.debug)===null||z===void 0||z.call(B,{category:ar,message:`${s} ${a}`}),e.abortControler&&(e.abortControler.onAbort=()=>{j.abort()}),j.send()})})},"_NativeHttpClient_executeRequest"),kR=o(function(e){return Be(this,arguments,void 0,function(t){var r=this;let{headers:i,locale:s,contentType:a}=t;return(function*(){var u;let l=Object.assign(Object.assign(Object.assign({},(u=te(r,Ff,"f"))!==null&&u!==void 0?u:{}),i),s?{[te(r,kc,"f")]:s}:{});a&&!l["content-type"]&&(l["content-type"]=a);let c=yield te(r,$c,"f").call(r);return c&&(l.authorization=c),yield te(r,pi,"m",FR).call(r,l)})()})},"_NativeHttpClient_buildHeaders"),FR=o(function(e){return Be(this,void 0,void 0,function*(){var t,r;try{return yield GR(e,()=>{var i;return(i=te(this,Mf,"f"))===null||i===void 0?void 0:i.call(this)})}catch(i){(r=(t=te(this,tn,"f"))===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,{category:ar,message:"Error loading trace information",errorCode:Ve.Communication_Default,error:i})}return e})},"_NativeHttpClient_insertTraceHeaders");var p0=class p0 extends Error{constructor(e,t){let r=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=r}};o(p0,"HttpError");var fs=p0,m0=class m0 extends Error{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"A timeout occurred.",t=new.target.prototype;super(e),this.__proto__=t}};o(m0,"TimeoutError");var jc=m0,v0=class v0 extends Error{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"An abort occurred.",t=new.target.prototype;super(e),this.__proto__=t}};o(v0,"AbortError");var Xn=v0,y0=class y0 extends Error{constructor(e,t){let r=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=r}};o(y0,"UnsupportedTransportError");var ky=y0,_0=class _0 extends Error{constructor(e,t){let r=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=r}};o(_0,"DisabledTransportError");var Fy=_0,w0=class w0 extends Error{constructor(e,t){let r=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=r}};o(w0,"FailedToStartTransportError");var $y=w0,E0=class E0 extends Error{constructor(e){let t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}};o(E0,"FailedToNegotiateWithServerError");var By=E0,T0=class T0 extends Error{constructor(e,t){let r=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=r}};o(T0,"AggregateErrors");var Vy=T0,b0=class b0{constructor(e,t,r){this.statusCode=e,this.statusText=t,this.content=r}};o(b0,"HttpResponse");var Bf=b0,S0=class S0{get(e,t){return this.send(os(Rt({},t),{method:"GET",url:e}))}post(e,t){return this.send(os(Rt({},t),{method:"POST",url:e}))}delete(e,t){return this.send(os(Rt({},t),{method:"DELETE",url:e}))}getCookieString(e){return""}};o(S0,"HttpClient");var ya=S0,Q;(function(n){n[n.Trace=0]="Trace",n[n.Debug=1]="Debug",n[n.Information=2]="Information",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Critical=5]="Critical",n[n.None=6]="None"})(Q||(Q={}));var A0=class A0{constructor(){}log(e,t){}};o(A0,"NullLogger");var ao=A0;ao.instance=new ao;var a3="7.0.12",I0=class I0{static isRequired(e,t){if(e==null)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,r){if(!(e in t))throw new Error(`Unknown ${r} value: ${e}.`)}};o(I0,"Arg");var Bt=I0,C0=class C0{static get isBrowser(){return typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return typeof self=="object"&&"importScripts"in self}static get isReactNative(){return typeof window=="object"&&typeof window.document=="undefined"}static get isNode(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}};o(C0,"Platform");var $t=C0;function Wc(n,e){let t="";return Kc(n)?(t=`Binary data of length ${n.byteLength}`,e&&(t+=`. Content: '${u3(n)}'`)):typeof n=="string"&&(t=`String data of length ${n.length}`,e&&(t+=`. Content: '${n}'`)),t}o(Wc,"getDataDetail");function u3(n){let e=new Uint8Array(n),t="";return e.forEach(r=>{let i=r<16?"0":"";t+=`0x${i}${r.toString(16)} `}),t.substr(0,t.length-1)}o(u3,"formatArrayBuffer");function Kc(n){return n&&typeof ArrayBuffer!="undefined"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}o(Kc,"isArrayBuffer");function E1(n,e,t,r,i,s){return pt(this,null,function*(){let a={},[u,l]=wa();a[u]=l,n.log(Q.Trace,`(${e} transport) sending data. ${Wc(i,s.logMessageContent)}.`);let c=Kc(i)?"arraybuffer":"text",d=yield t.post(r,{content:i,headers:Rt(Rt({},a),s.headers),responseType:c,timeout:s.timeout,withCredentials:s.withCredentials});n.log(Q.Trace,`(${e} transport) request complete. Response status: ${d.statusCode}.`)})}o(E1,"sendMessage");function c3(n){return n===void 0?new _a(Q.Information):n===null?ao.instance:n.log!==void 0?n:new _a(n)}o(c3,"createLogger");var R0=class R0{constructor(e,t){this._subject=e,this._observer=t}dispose(){let e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(t=>{})}};o(R0,"SubjectSubscription");var Hy=R0,O0=class O0{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){let r=`[${new Date().toISOString()}] ${Q[e]}: ${t}`;switch(e){case Q.Critical:case Q.Error:this.out.error(r);break;case Q.Warning:this.out.warn(r);break;case Q.Information:this.out.info(r);break;default:this.out.log(r);break}}}};o(O0,"ConsoleLogger");var _a=O0;function wa(){let n="X-SignalR-User-Agent";return $t.isNode&&(n="User-Agent"),[n,l3(a3,d3(),h3(),f3())]}o(wa,"getUserAgentHeader");function l3(n,e,t,r){let i="Microsoft SignalR/",s=n.split(".");return i+=`${s[0]}.${s[1]}`,i+=` (${n}; `,e&&e!==""?i+=`${e}; `:i+="Unknown OS; ",i+=`${t}`,r?i+=`; ${r}`:i+="; Unknown Runtime Version",i+=")",i}o(l3,"constructUserAgent");function d3(){if($t.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}o(d3,"getOsName");function f3(){if($t.isNode)return process.versions.node}o(f3,"getRuntimeVersion");function h3(){return $t.isNode?"NodeJS":"Browser"}o(h3,"getRuntime");function $R(n){return n.stack?n.stack:n.message?n.message:`${n}`}o($R,"getErrorString");function g3(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("could not find global")}o(g3,"getGlobalThis");var P0=class P0 extends ya{constructor(e){if(super(),this._logger=e,typeof fetch=="undefined"){let t=typeof __webpack_require__=="function"?__non_webpack_require__:as;this._jar=new(t("tough-cookie")).CookieJar,this._fetchType=t("node-fetch"),this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(g3());if(typeof AbortController=="undefined"){let t=typeof __webpack_require__=="function"?__non_webpack_require__:as;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}send(e){return pt(this,null,function*(){if(e.abortSignal&&e.abortSignal.aborted)throw new Xn;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");let t=new this._abortControllerType,r;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),r=new Xn});let i=null;if(e.timeout){let l=e.timeout;i=setTimeout(()=>{t.abort(),this._logger.log(Q.Warning,"Timeout from HTTP request."),r=new jc},l)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},Kc(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let s;try{s=yield this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:Rt({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(l){throw r||(this._logger.log(Q.Warning,`Error from HTTP request. ${l}.`),l)}finally{i&&clearTimeout(i),e.abortSignal&&(e.abortSignal.onabort=null)}if(!s.ok){let l=yield BR(s,"text");throw new fs(l||s.statusText,s.status)}let u=yield BR(s,e.responseType);return new Bf(s.status,s.statusText,u)})}getCookieString(e){let t="";return $t.isNode&&this._jar&&this._jar.getCookies(e,(r,i)=>t=i.join("; ")),t}};o(P0,"FetchHttpClient");var jy=P0;function BR(n,e){let t;switch(e){case"arraybuffer":t=n.arrayBuffer();break;case"text":t=n.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:t=n.text();break}return t}o(BR,"deserializeContent");var N0=class N0 extends ya{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Xn):e.method?e.url?new Promise((t,r)=>{let i=new XMLHttpRequest;i.open(e.method,e.url,!0),i.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(Kc(e.content)?i.setRequestHeader("Content-Type","application/octet-stream"):i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let s=e.headers;s&&Object.keys(s).forEach(a=>{i.setRequestHeader(a,s[a])}),e.responseType&&(i.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),r(new Xn)}),e.timeout&&(i.timeout=e.timeout),i.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),i.status>=200&&i.status<300?t(new Bf(i.status,i.statusText,i.response||i.responseText)):r(new fs(i.response||i.responseText||i.statusText,i.status))},i.onerror=()=>{this._logger.log(Q.Warning,`Error from HTTP request. ${i.status}: ${i.statusText}.`),r(new fs(i.statusText,i.status))},i.ontimeout=()=>{this._logger.log(Q.Warning,"Timeout from HTTP request."),r(new jc)},i.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}};o(N0,"XhrHttpClient");var Wy=N0,D0=class D0 extends ya{constructor(e){if(super(),typeof fetch!="undefined"||$t.isNode)this._httpClient=new jy(e);else if(typeof XMLHttpRequest!="undefined")this._httpClient=new Wy(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Xn):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}};o(D0,"DefaultHttpClient");var Gy=D0,da=class da{static write(e){return`${e}${da.RecordSeparator}`}static parse(e){if(e[e.length-1]!==da.RecordSeparator)throw new Error("Message is incomplete.");let t=e.split(da.RecordSeparator);return t.pop(),t}};o(da,"TextMessageFormat");var Or=da;Or.RecordSeparatorCode=30;Or.RecordSeparator=String.fromCharCode(Or.RecordSeparatorCode);var L0=class L0{writeHandshakeRequest(e){return Or.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,r;if(Kc(e)){let u=new Uint8Array(e),l=u.indexOf(Or.RecordSeparatorCode);if(l===-1)throw new Error("Message is incomplete.");let c=l+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(u.slice(0,c))),r=u.byteLength>c?u.slice(c).buffer:null}else{let u=e,l=u.indexOf(Or.RecordSeparator);if(l===-1)throw new Error("Message is incomplete.");let c=l+1;t=u.substring(0,c),r=u.length>c?u.substring(c):null}let i=Or.parse(t),s=JSON.parse(i[0]);if(s.type)throw new Error("Expected a handshake response from the server.");return[r,s]}};o(L0,"HandshakeProtocol");var zy=L0,St;(function(n){n[n.Invocation=1]="Invocation",n[n.StreamItem=2]="StreamItem",n[n.Completion=3]="Completion",n[n.StreamInvocation=4]="StreamInvocation",n[n.CancelInvocation=5]="CancelInvocation",n[n.Ping=6]="Ping",n[n.Close=7]="Close"})(St||(St={}));var x0=class x0{constructor(){this.observers=[]}next(e){for(let t of this.observers)t.next(e)}error(e){for(let t of this.observers)t.error&&t.error(e)}complete(){for(let e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new Hy(this,e)}};o(x0,"Subject");var qy=x0,p3=30*1e3,m3=15*1e3,Nt;(function(n){n.Disconnected="Disconnected",n.Connecting="Connecting",n.Connected="Connected",n.Disconnecting="Disconnecting",n.Reconnecting="Reconnecting"})(Nt||(Nt={}));var Xf=class Xf{constructor(e,t,r,i){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Q.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Bt.isRequired(e,"connection"),Bt.isRequired(t,"logger"),Bt.isRequired(r,"protocol"),this.serverTimeoutInMilliseconds=p3,this.keepAliveIntervalInMilliseconds=m3,this._logger=t,this._protocol=r,this.connection=e,this._reconnectPolicy=i,this._handshakeProtocol=new zy,this.connection.onreceive=s=>this._processIncomingData(s),this.connection.onclose=s=>this._connectionClosed(s),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Nt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:St.Ping})}static create(e,t,r,i){return new Xf(e,t,r,i)}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==Nt.Disconnected&&this._connectionState!==Nt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){return pt(this,null,function*(){if(this._connectionState!==Nt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Nt.Connecting,this._logger.log(Q.Debug,"Starting HubConnection.");try{yield this._startInternal(),$t.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Nt.Connected,this._connectionStarted=!0,this._logger.log(Q.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=Nt.Disconnected,this._logger.log(Q.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}})}_startInternal(){return pt(this,null,function*(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let e=new Promise((t,r)=>{this._handshakeResolver=t,this._handshakeRejecter=r});yield this.connection.start(this._protocol.transferFormat);try{let t={protocol:this._protocol.name,version:this._protocol.version};if(this._logger.log(Q.Debug,"Sending handshake request."),yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(t)),this._logger.log(Q.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),yield e,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.inherentKeepAlive||(yield this._sendMessage(this._cachedPingMessage))}catch(t){throw this._logger.log(Q.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),yield this.connection.stop(t),t}})}stop(){return pt(this,null,function*(){let e=this._startPromise;this._stopPromise=this._stopInternal(),yield this._stopPromise;try{yield e}catch(t){}})}_stopInternal(e){return this._connectionState===Nt.Disconnected?(this._logger.log(Q.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve()):this._connectionState===Nt.Disconnecting?(this._logger.log(Q.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState=Nt.Disconnecting,this._logger.log(Q.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Q.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Xn("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))}stream(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];let[s,a]=this._replaceStreamingParams(r),u=this._createStreamInvocation(e,r,a),l,c=new qy;return c.cancelCallback=()=>{let d=this._createCancelInvocation(u.invocationId);return delete this._callbacks[u.invocationId],l.then(()=>this._sendWithProtocol(d))},this._callbacks[u.invocationId]=(d,f)=>{if(f){c.error(f);return}else d&&(d.type===St.Completion?d.error?c.error(new Error(d.error)):c.complete():c.next(d.item))},l=this._sendWithProtocol(u).catch(d=>{c.error(d),delete this._callbacks[u.invocationId]}),this._launchStreams(s,l),c}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._sendMessage(this._protocol.writeMessage(e))}send(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];let[s,a]=this._replaceStreamingParams(r),u=this._sendWithProtocol(this._createInvocation(e,r,!0,a));return this._launchStreams(s,u),u}invoke(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];let[s,a]=this._replaceStreamingParams(r),u=this._createInvocation(e,r,!1,a);return new Promise((c,d)=>{this._callbacks[u.invocationId]=(h,g)=>{if(g){d(g);return}else h&&(h.type===St.Completion?h.error?d(new Error(h.error)):c(h.result):d(new Error(`Unexpected message type: ${h.type}`)))};let f=this._sendWithProtocol(u).catch(h=>{d(h),delete this._callbacks[u.invocationId]});this._launchStreams(s,f)})}on(e,t){!e||!t||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(t)===-1&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();let r=this._methods[e];if(r)if(t){let i=r.indexOf(t);i!==-1&&(r.splice(i,1),r.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){let t=this._protocol.parseMessages(e,this._logger);for(let r of t)switch(r.type){case St.Invocation:this._invokeClientMethod(r);break;case St.StreamItem:case St.Completion:{let i=this._callbacks[r.invocationId];if(i){r.type===St.Completion&&delete this._callbacks[r.invocationId];try{i(r)}catch(s){this._logger.log(Q.Error,`Stream callback threw error: ${$R(s)}`)}}break}case St.Ping:break;case St.Close:{this._logger.log(Q.Information,"Close message received from server.");let i=r.error?new Error("Server returned an error on close: "+r.error):void 0;r.allowReconnect===!0?this.connection.stop(i):this._stopPromise=this._stopInternal(i);break}default:this._logger.log(Q.Warning,`Invalid message type: ${r.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,r;try{[r,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(i){let s="Error parsing handshake response: "+i;this._logger.log(Q.Error,s);let a=new Error(s);throw this._handshakeRejecter(a),a}if(t.error){let i="Server returned handshake error: "+t.error;this._logger.log(Q.Error,i);let s=new Error(i);throw this._handshakeRejecter(s),s}else this._logger.log(Q.Debug,"Server handshake complete.");return this._handshakeResolver(),r}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(()=>pt(this,null,function*(){if(this._connectionState===Nt.Connected)try{yield this._sendMessage(this._cachedPingMessage)}catch(t){this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(e){return pt(this,null,function*(){let t=e.target.toLowerCase(),r=this._methods[t];if(!r){this._logger.log(Q.Warning,`No client method with the name '${t}' found.`),e.invocationId&&(this._logger.log(Q.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),yield this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}let i=r.slice(),s=!!e.invocationId,a,u,l;for(let c of i)try{let d=a;a=yield c.apply(this,e.arguments),s&&a&&d&&(this._logger.log(Q.Error,`Multiple results provided for '${t}'. Sending error to server.`),l=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),u=void 0}catch(d){u=d,this._logger.log(Q.Error,`A callback for the method '${t}' threw error '${d}'.`)}l?yield this._sendWithProtocol(l):s?(u?l=this._createCompletionMessage(e.invocationId,`${u}`,null):a!==void 0?l=this._createCompletionMessage(e.invocationId,null,a):(this._logger.log(Q.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),l=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),yield this._sendWithProtocol(l)):a&&this._logger.log(Q.Error,`Result given for '${t}' method but server is not expecting a result.`)})}_connectionClosed(e){this._logger.log(Q.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Xn("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Nt.Disconnecting?this._completeClose(e):this._connectionState===Nt.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===Nt.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=Nt.Disconnected,this._connectionStarted=!1,$t.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(Q.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}_reconnect(e){return pt(this,null,function*(){let t=Date.now(),r=0,i=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),s=this._getNextRetryDelay(r++,0,i);if(s===null){this._logger.log(Q.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=Nt.Reconnecting,e?this._logger.log(Q.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(Q.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(a=>a.apply(this,[e]))}catch(a){this._logger.log(Q.Error,`An onreconnecting callback called with error '${e}' threw error '${a}'.`)}if(this._connectionState!==Nt.Reconnecting){this._logger.log(Q.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;s!==null;){if(this._logger.log(Q.Information,`Reconnect attempt number ${r} will start in ${s} ms.`),yield new Promise(a=>{this._reconnectDelayHandle=setTimeout(a,s)}),this._reconnectDelayHandle=void 0,this._connectionState!==Nt.Reconnecting){this._logger.log(Q.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(yield this._startInternal(),this._connectionState=Nt.Connected,this._logger.log(Q.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(a=>a.apply(this,[this.connection.connectionId]))}catch(a){this._logger.log(Q.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${a}'.`)}return}catch(a){if(this._logger.log(Q.Information,`Reconnect attempt failed because of error '${a}'.`),this._connectionState!==Nt.Reconnecting){this._logger.log(Q.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===Nt.Disconnecting&&this._completeClose();return}i=a instanceof Error?a:new Error(a.toString()),s=this._getNextRetryDelay(r++,Date.now()-t,i)}}this._logger.log(Q.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${r} failed attempts. Connection disconnecting.`),this._completeClose()})}_getNextRetryDelay(e,t,r){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:r})}catch(i){return this._logger.log(Q.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${i}'.`),null}}_cancelCallbacksWithError(e){let t=this._callbacks;this._callbacks={},Object.keys(t).forEach(r=>{let i=t[r];try{i(null,e)}catch(s){this._logger.log(Q.Error,`Stream 'error' callback called with '${e}' threw error: ${$R(s)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,r,i){if(r)return i.length!==0?{arguments:t,streamIds:i,target:e,type:St.Invocation}:{arguments:t,target:e,type:St.Invocation};{let s=this._invocationId;return this._invocationId++,i.length!==0?{arguments:t,invocationId:s.toString(),streamIds:i,target:e,type:St.Invocation}:{arguments:t,invocationId:s.toString(),target:e,type:St.Invocation}}}_launchStreams(e,t){if(e.length!==0){t||(t=Promise.resolve());for(let r in e)e[r].subscribe({complete:o(()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(r)))},"complete"),error:o(i=>{let s;i instanceof Error?s=i.message:i&&i.toString?s=i.toString():s="Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(r,s)))},"error"),next:o(i=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(r,i)))},"next")})}}_replaceStreamingParams(e){let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(this._isObservable(s)){let a=this._invocationId;this._invocationId++,t[a]=s,r.push(a.toString()),e.splice(i,1)}}return[t,r]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,t,r){let i=this._invocationId;return this._invocationId++,r.length!==0?{arguments:t,invocationId:i.toString(),streamIds:r,target:e,type:St.StreamInvocation}:{arguments:t,invocationId:i.toString(),target:e,type:St.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:St.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:St.StreamItem}}_createCompletionMessage(e,t,r){return t?{error:t,invocationId:e,type:St.Completion}:{invocationId:e,result:r,type:St.Completion}}};o(Xf,"HubConnection");var Ky=Xf,v3=[0,2e3,1e4,3e4,null],U0=class U0{constructor(e){this._retryDelays=e!==void 0?[...e,null]:v3}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}};o(U0,"DefaultReconnectPolicy");var Vf=U0,M0=class M0{};o(M0,"HeaderNames");var mi=M0;mi.Authorization="Authorization";mi.Cookie="Cookie";var k0=class k0 extends ya{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}send(e){return pt(this,null,function*(){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=yield this._accessTokenFactory()),this._setAuthorizationHeader(e);let r=yield this._innerClient.send(e);return t&&r.statusCode===401&&this._accessTokenFactory?(this._accessToken=yield this._accessTokenFactory(),this._setAuthorizationHeader(e),yield this._innerClient.send(e)):r})}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[mi.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[mi.Authorization]&&delete e.headers[mi.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}};o(k0,"AccessTokenHttpClient");var Yy=k0,Qt;(function(n){n[n.None=0]="None",n[n.WebSockets=1]="WebSockets",n[n.ServerSentEvents=2]="ServerSentEvents",n[n.LongPolling=4]="LongPolling"})(Qt||(Qt={}));var yn;(function(n){n[n.Text=1]="Text",n[n.Binary=2]="Binary"})(yn||(yn={}));var pa,y3=(pa=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}},o(pa,"AbortController"),pa),F0=class F0{constructor(e,t,r){this._httpClient=e,this._logger=t,this._pollAbort=new y3,this._options=r,this._running=!1,this.onreceive=null,this.onclose=null}get pollAborted(){return this._pollAbort.aborted}connect(e,t){return pt(this,null,function*(){if(Bt.isRequired(e,"url"),Bt.isRequired(t,"transferFormat"),Bt.isIn(t,yn,"transferFormat"),this._url=e,this._logger.log(Q.Trace,"(LongPolling transport) Connecting."),t===yn.Binary&&typeof XMLHttpRequest!="undefined"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[r,i]=wa(),s=Rt({[r]:i},this._options.headers),a={abortSignal:this._pollAbort.signal,headers:s,timeout:1e5,withCredentials:this._options.withCredentials};t===yn.Binary&&(a.responseType="arraybuffer");let u=`${e}&_=${Date.now()}`;this._logger.log(Q.Trace,`(LongPolling transport) polling: ${u}.`);let l=yield this._httpClient.get(u,a);l.statusCode!==200?(this._logger.log(Q.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new fs(l.statusText||"",l.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,a)})}_poll(e,t){return pt(this,null,function*(){try{for(;this._running;)try{let r=`${e}&_=${Date.now()}`;this._logger.log(Q.Trace,`(LongPolling transport) polling: ${r}.`);let i=yield this._httpClient.get(r,t);i.statusCode===204?(this._logger.log(Q.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):i.statusCode!==200?(this._logger.log(Q.Error,`(LongPolling transport) Unexpected response code: ${i.statusCode}.`),this._closeError=new fs(i.statusText||"",i.statusCode),this._running=!1):i.content?(this._logger.log(Q.Trace,`(LongPolling transport) data received. ${Wc(i.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(i.content)):this._logger.log(Q.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(r){this._running?r instanceof jc?this._logger.log(Q.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=r,this._running=!1):this._logger.log(Q.Trace,`(LongPolling transport) Poll errored after shutdown: ${r.message}`)}}finally{this._logger.log(Q.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}})}send(e){return pt(this,null,function*(){return this._running?E1(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return pt(this,null,function*(){this._logger.log(Q.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{yield this._receiving,this._logger.log(Q.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let e={},[t,r]=wa();e[t]=r;let i={headers:Rt(Rt({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials};yield this._httpClient.delete(this._url,i),this._logger.log(Q.Trace,"(LongPolling transport) DELETE request sent.")}finally{this._logger.log(Q.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}})}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(Q.Trace,e),this.onclose(this._closeError)}}};o(F0,"LongPollingTransport");var Hf=F0,$0=class $0{constructor(e,t,r,i){this._httpClient=e,this._accessToken=t,this._logger=r,this._options=i,this.onreceive=null,this.onclose=null}connect(e,t){return pt(this,null,function*(){return Bt.isRequired(e,"url"),Bt.isRequired(t,"transferFormat"),Bt.isIn(t,yn,"transferFormat"),this._logger.log(Q.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((r,i)=>{let s=!1;if(t!==yn.Text){i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let a;if($t.isBrowser||$t.isWebWorker)a=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{let u=this._httpClient.getCookieString(e),l={};l.Cookie=u;let[c,d]=wa();l[c]=d,a=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:Rt(Rt({},l),this._options.headers)})}try{a.onmessage=u=>{if(this.onreceive)try{this._logger.log(Q.Trace,`(SSE transport) data received. ${Wc(u.data,this._options.logMessageContent)}.`),this.onreceive(u.data)}catch(l){this._close(l);return}},a.onerror=u=>{s?this._close():i(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},a.onopen=()=>{this._logger.log(Q.Information,`SSE connected to ${this._url}`),this._eventSource=a,s=!0,r()}}catch(u){i(u);return}})})}send(e){return pt(this,null,function*(){return this._eventSource?E1(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}};o($0,"ServerSentEventsTransport");var Xy=$0,B0=class B0{constructor(e,t,r,i,s,a){this._logger=r,this._accessTokenFactory=t,this._logMessageContent=i,this._webSocketConstructor=s,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=a}connect(e,t){return pt(this,null,function*(){Bt.isRequired(e,"url"),Bt.isRequired(t,"transferFormat"),Bt.isIn(t,yn,"transferFormat"),this._logger.log(Q.Trace,"(WebSockets transport) Connecting.");let r;return this._accessTokenFactory&&(r=yield this._accessTokenFactory()),new Promise((i,s)=>{e=e.replace(/^http/,"ws");let a,u=this._httpClient.getCookieString(e),l=!1;if($t.isNode||$t.isReactNative){let c={},[d,f]=wa();c[d]=f,r&&(c[mi.Authorization]=`Bearer ${r}`),u&&(c[mi.Cookie]=u),a=new this._webSocketConstructor(e,void 0,{headers:Rt(Rt({},c),this._headers)})}else r&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(r)}`);a||(a=new this._webSocketConstructor(e)),t===yn.Binary&&(a.binaryType="arraybuffer"),a.onopen=c=>{this._logger.log(Q.Information,`WebSocket connected to ${e}.`),this._webSocket=a,l=!0,i()},a.onerror=c=>{let d=null;typeof ErrorEvent!="undefined"&&c instanceof ErrorEvent?d=c.error:d="There was an error with the transport",this._logger.log(Q.Information,`(WebSockets transport) ${d}.`)},a.onmessage=c=>{if(this._logger.log(Q.Trace,`(WebSockets transport) data received. ${Wc(c.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(c.data)}catch(d){this._close(d);return}},a.onclose=c=>{if(l)this._close(c);else{let d=null;typeof ErrorEvent!="undefined"&&c instanceof ErrorEvent?d=c.error:d="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",s(new Error(d))}}})})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Q.Trace,`(WebSockets transport) sending data. ${Wc(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Q.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}};o(B0,"WebSocketTransport");var Jy=B0,VR=100,V0=class V0{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Bt.isRequired(e,"url"),this._logger=c3(t.logger),this.baseUrl=this._resolveUrl(e),t=t||{},t.logMessageContent=t.logMessageContent===void 0?!1:t.logMessageContent,typeof t.withCredentials=="boolean"||t.withCredentials===void 0)t.withCredentials=t.withCredentials===void 0?!0:t.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.timeout=t.timeout===void 0?100*1e3:t.timeout;let r=null,i=null;if($t.isNode&&typeof as!="undefined"){let s=typeof __webpack_require__=="function"?__non_webpack_require__:as;r=s("ws"),i=s("eventsource")}!$t.isNode&&typeof WebSocket!="undefined"&&!t.WebSocket?t.WebSocket=WebSocket:$t.isNode&&!t.WebSocket&&r&&(t.WebSocket=r),!$t.isNode&&typeof EventSource!="undefined"&&!t.EventSource?t.EventSource=EventSource:$t.isNode&&!t.EventSource&&typeof i!="undefined"&&(t.EventSource=i),this._httpClient=new Yy(t.httpClient||new Gy(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}start(e){return pt(this,null,function*(){if(e=e||yn.Binary,Bt.isIn(e,yn,"transferFormat"),this._logger.log(Q.Debug,`Starting connection with transfer format '${yn[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),yield this._startInternalPromise,this._connectionState==="Disconnecting"){let t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Q.Error,t),yield this._stopPromise,Promise.reject(new Xn(t))}else if(this._connectionState!=="Connected"){let t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Q.Error,t),Promise.reject(new Xn(t))}this._connectionStarted=!0})}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Qy(this.transport)),this._sendQueue.send(e))}stop(e){return pt(this,null,function*(){if(this._connectionState==="Disconnected")return this._logger.log(Q.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(Q.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(t=>{this._stopPromiseResolver=t}),yield this._stopInternal(e),yield this._stopPromise})}_stopInternal(e){return pt(this,null,function*(){this._stopError=e;try{yield this._startInternalPromise}catch(t){}if(this.transport){try{yield this.transport.stop()}catch(t){this._logger.log(Q.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Q.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})}_startInternal(e){return pt(this,null,function*(){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Qt.WebSockets)this.transport=this._constructTransport(Qt.WebSockets),yield this._startTransport(t,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let r=null,i=0;do{if(r=yield this._getNegotiationResponse(t),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Xn("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(r.url&&(t=r.url),r.accessToken){let s=r.accessToken;this._accessTokenFactory=()=>s,this._httpClient._accessToken=s,this._httpClient._accessTokenFactory=void 0}i++}while(r.url&&i<VR);if(i===VR&&r.url)throw new Error("Negotiate redirection limit exceeded.");yield this._createTransport(t,this._options.transport,r,e)}this.transport instanceof Hf&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(Q.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(r){return this._logger.log(Q.Error,"Failed to start the connection: "+r),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(r)}})}_getNegotiationResponse(e){return pt(this,null,function*(){let t={},[r,i]=wa();t[r]=i;let s=this._resolveNegotiateUrl(e);this._logger.log(Q.Debug,`Sending negotiation request: ${s}.`);try{let a=yield this._httpClient.post(s,{content:"",headers:Rt(Rt({},t),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(a.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${a.statusCode}'`));let u=JSON.parse(a.content);return(!u.negotiateVersion||u.negotiateVersion<1)&&(u.connectionToken=u.connectionId),u}catch(a){let u="Failed to complete negotiation with the server: "+a;return a instanceof fs&&a.statusCode===404&&(u=u+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Q.Error,u),Promise.reject(new By(u))}})}_createConnectUrl(e,t){return t?e+(e.indexOf("?")===-1?"?":"&")+`id=${t}`:e}_createTransport(e,t,r,i){return pt(this,null,function*(){let s=this._createConnectUrl(e,r.connectionToken);if(this._isITransport(t)){this._logger.log(Q.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,yield this._startTransport(s,i),this.connectionId=r.connectionId;return}let a=[],u=r.availableTransports||[],l=r;for(let c of u){let d=this._resolveTransportOrError(c,t,i);if(d instanceof Error)a.push(`${c.transport} failed:`),a.push(d);else if(this._isITransport(d)){if(this.transport=d,!l){try{l=yield this._getNegotiationResponse(e)}catch(f){return Promise.reject(f)}s=this._createConnectUrl(e,l.connectionToken)}try{yield this._startTransport(s,i),this.connectionId=l.connectionId;return}catch(f){if(this._logger.log(Q.Error,`Failed to start the transport '${c.transport}': ${f}`),l=void 0,a.push(new $y(`${c.transport} failed: ${f}`,Qt[c.transport])),this._connectionState!=="Connecting"){let h="Failed to select transport before stop() was called.";return this._logger.log(Q.Debug,h),Promise.reject(new Xn(h))}}}}return a.length>0?Promise.reject(new Vy(`Unable to connect to the server with any of the available transports. ${a.join(" ")}`,a)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))})}_constructTransport(e){switch(e){case Qt.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Jy(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Qt.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Xy(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Qt.LongPolling:return new Hf(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.transport.onclose=r=>this._stopConnection(r),this.transport.connect(e,t)}_resolveTransportOrError(e,t,r){let i=Qt[e.transport];if(i==null)return this._logger.log(Q.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(_3(t,i))if(e.transferFormats.map(a=>yn[a]).indexOf(r)>=0){if(i===Qt.WebSockets&&!this._options.WebSocket||i===Qt.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Q.Debug,`Skipping transport '${Qt[i]}' because it is not supported in your environment.'`),new ky(`'${Qt[i]}' is not supported in your environment.`,i);this._logger.log(Q.Debug,`Selecting transport '${Qt[i]}'.`);try{return this._constructTransport(i)}catch(a){return a}}else return this._logger.log(Q.Debug,`Skipping transport '${Qt[i]}' because it does not support the requested transfer format '${yn[r]}'.`),new Error(`'${Qt[i]}' does not support ${yn[r]}.`);else return this._logger.log(Q.Debug,`Skipping transport '${Qt[i]}' because it was disabled by the client.`),new Fy(`'${Qt[i]}' is disabled by the client.`,i)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(Q.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(Q.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(Q.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(Q.Error,`Connection disconnected with error '${e}'.`):this._logger.log(Q.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(t=>{this._logger.log(Q.Error,`TransportSendQueue.stop() threw error '${t}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(Q.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!$t.isBrowser)throw new Error(`Cannot resolve '${e}'.`);let t=window.document.createElement("a");return t.href=e,this._logger.log(Q.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){let t=e.indexOf("?"),r=e.substring(0,t===-1?e.length:t);return r[r.length-1]!=="/"&&(r+="/"),r+="negotiate",r+=t===-1?"":e.substring(t),r.indexOf("negotiateVersion")===-1&&(r+=t===-1?"?":"&",r+="negotiateVersion="+this._negotiateVersion),r}};o(V0,"HttpConnection");var Zy=V0;function _3(n,e){return!n||(e&n)!==0}o(_3,"transportMatches");var Jf=class Jf{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new la,this._transportResult=new la,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new la),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}_sendLoop(){return pt(this,null,function*(){for(;;){if(yield this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new la;let e=this._transportResult;this._transportResult=void 0;let t=typeof this._buffer[0]=="string"?this._buffer.join(""):Jf._concatBuffers(this._buffer);this._buffer.length=0;try{yield this._transport.send(t),e.resolve()}catch(r){e.reject(r)}}})}static _concatBuffers(e){let t=e.map(s=>s.byteLength).reduce((s,a)=>s+a),r=new Uint8Array(t),i=0;for(let s of e)r.set(new Uint8Array(s),i),i+=s.byteLength;return r.buffer}};o(Jf,"TransportSendQueue");var Qy=Jf,H0=class H0{constructor(){this.promise=new Promise((e,t)=>[this._resolver,this._rejecter]=[e,t])}resolve(){this._resolver()}reject(e){this._rejecter(e)}};o(H0,"PromiseSource");var la=H0,w3="json",j0=class j0{constructor(){this.name=w3,this.version=1,this.transferFormat=yn.Text}parseMessages(e,t){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];t===null&&(t=ao.instance);let r=Or.parse(e),i=[];for(let s of r){let a=JSON.parse(s);if(typeof a.type!="number")throw new Error("Invalid payload.");switch(a.type){case St.Invocation:this._isInvocationMessage(a);break;case St.StreamItem:this._isStreamItemMessage(a);break;case St.Completion:this._isCompletionMessage(a);break;case St.Ping:break;case St.Close:break;default:t.log(Q.Information,"Unknown message type '"+a.type+"' ignored.");continue}i.push(a)}return i}writeMessage(e){return Or.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_assertNotEmptyString(e,t){if(typeof e!="string"||e==="")throw new Error(t)}};o(j0,"JsonHubProtocol");var e0=j0,E3={trace:Q.Trace,debug:Q.Debug,info:Q.Information,information:Q.Information,warn:Q.Warning,warning:Q.Warning,error:Q.Error,critical:Q.Critical,none:Q.None};function T3(n){let e=E3[n.toLowerCase()];if(typeof e!="undefined")return e;throw new Error(`Unknown log level: ${n}`)}o(T3,"parseLogLevel");var W0=class W0{configureLogging(e){if(Bt.isRequired(e,"logging"),b3(e))this.logger=e;else if(typeof e=="string"){let t=T3(e);this.logger=new _a(t)}else this.logger=new _a(e);return this}withUrl(e,t){return Bt.isRequired(e,"url"),Bt.isNotEmpty(e,"url"),this.url=e,typeof t=="object"?this.httpConnectionOptions=Rt(Rt({},this.httpConnectionOptions),t):this.httpConnectionOptions=os(Rt({},this.httpConnectionOptions),{transport:t}),this}withHubProtocol(e){return Bt.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Vf(e):this.reconnectPolicy=e:this.reconnectPolicy=new Vf,this}build(){let e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let t=new Zy(this.url,e);return Ky.create(t,this.logger||ao.instance,this.protocol||new e0,this.reconnectPolicy)}};o(W0,"HubConnectionBuilder");var jf=W0;function b3(n){return n.log!==void 0}o(b3,"isLogger");function S3(n){return Be(this,void 0,void 0,function*(){var e;return n&&(e=yield n())!==null&&e!==void 0?e:""})}o(S3,"ensureTokenString");var A3=o(n=>{let{builder:e=new jf,hubEndpoint:t,appUrl:r,logger:i,getToken:s}=n;if(!r)throw new Error("The AppUrl and HubEndpoint must be defined in order to use SignalR communications");let a=e.withUrl(new URL(t,r).href,{accessTokenFactory:o(()=>Be(void 0,void 0,void 0,function*(){return(yield S3(s)).replace("Bearer ","")}),"accessTokenFactory")}).withAutomaticReconnect();return i&&a.configureLogging({log:o((u,l)=>{var c,d;switch(u){case Q.Information:case Q.Trace:case Q.Debug:case Q.Warning:(c=i.debug)===null||c===void 0||c.call(i,{category:"SignalRHttpClient",message:`HubConnection ${l}`});break;case Q.Error:case Q.Critical:(d=i.error)===null||d===void 0||d.call(i,{category:"SignalRHttpClient",message:`Handler Error: HubConnection ${l}`,errorCode:Ve.Communication_Default,error:new Error(l)});break}},"log")}),a.build()},"createHubConnection"),t0,Sc,vf,Ac,gi,Ic,yf,T1,I3="moduleservices/debugger/requestshub",C3="",no="SignalRHttpClient",G0=class G0{constructor(e){let{appUrl:t,localeHeader:r=C3,getLocale:i,setLocale:s,logger:a,getToken:u}=e;t0.add(this),Sc.set(this,void 0),vf.set(this,void 0),Ac.set(this,void 0),gi.set(this,void 0),Ic.set(this,void 0),yf.set(this,void 0),ze(this,Ic,Ny(t),"f"),ze(this,Sc,r,"f"),ze(this,vf,i,"f"),ze(this,Ac,s,"f"),ze(this,gi,a,"f"),ze(this,yf,u,"f")}executeRequest(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,payload:s,headers:a,contentType:u=nn.FormUrlEncoded,useLocaleInfo:l=!1,abortCommand:c,responseHandler:d,hubConnectionBuilder:f=new jf}=t;return(function*(){var h,g,p,m,w,E,_,T,R,D,B,z,j,Y;c&&(c.onAbort=()=>{q=!0});let q=!1;(g=(h=te(r,gi,"f"))===null||h===void 0?void 0:h.setActiveSpanAsNonAggregable)===null||g===void 0||g.call(h);let P=A3({builder:f,hubEndpoint:I3,appUrl:te(r,Ic,"f"),logger:te(r,gi,"f"),getToken:te(r,yf,"f")}),Z=l?(p=te(r,vf,"f"))===null||p===void 0?void 0:p.call(r):void 0,oe=Object.assign(Object.assign(Object.assign({},a),Z?{[te(r,Sc,"f")]:Z}:{}),y1({payload:s,headers:a})?{"content-type":u}:{});try{let S=s?l0({payload:s,contentType:u}):void 0;yield P.start();let K=yield P.invoke("ExecuteRequest",new URL(i,te(r,Ic,"f")).pathname,S,oe);yield P.stop(),(w=(m=te(r,gi,"f"))===null||m===void 0?void 0:m.debug)===null||w===void 0||w.call(m,{category:no,message:`ExecuteRequest ${i}`});let U=Rf(K==null?void 0:K.ResponseBody,te(r,gi,"f"),no);if(!(K!=null&&K.ResponseStatusCode)||K.ResponseStatusCode<200||K.ResponseStatusCode>299){let Oe=(T=(_=(E=K==null?void 0:K.ResponseStatusCode)===null||E===void 0?void 0:E.toString)===null||_===void 0?void 0:_.call(E))!==null&&T!==void 0?T:"",Ye=Zf(Oe);throw new Fn((D=(R=U==null?void 0:U.exception)===null||R===void 0?void 0:R.message)!==null&&D!==void 0?D:"Network Error",(z=(B=U==null?void 0:U.exception)===null||B===void 0?void 0:B.errorCode)!==null&&z!==void 0?z:Ye,Oe,U,no)}if(q)throw new Fn("Client Aborted",Ve.Communication_Aborted,U,no);if(l&&te(r,Ac,"f")&&(K!=null&&K.ResponseHeaders)&&d0({responseHeaders:K.ResponseHeaders,localeHeader:te(r,Sc,"f"),currentLocale:Z,setLocale:te(r,Ac,"f")}),typeof d=="function")try{d({data:U,responseHeaders:K==null?void 0:K.ResponseHeaders})}catch(Oe){(Y=(j=te(r,gi,"f"))===null||j===void 0?void 0:j.error)===null||Y===void 0||Y.call(j,{category:no,message:`ExecuteRequest ${i}`,errorCode:Ve.Communication_Default,error:Oe})}return U}catch(S){throw yield P==null?void 0:P.stop(),te(r,t0,"m",T1).call(r,S,i)}})()})}};o(G0,"SignalRClient");var n0=G0;Sc=new WeakMap,vf=new WeakMap,Ac=new WeakMap,gi=new WeakMap,Ic=new WeakMap,yf=new WeakMap,t0=new WeakSet,T1=o(function(e,t){var r,i,s,a;let u=Ve.Communication_Default,l;return e instanceof Fn?(u=Zf((r=e.status)!==null&&r!==void 0?r:""),l=e):l=new Fn(`ExecuteRequest ${t}`,u,void 0,void 0,no),(s=(i=te(this,gi,"f"))===null||i===void 0?void 0:i.error)===null||s===void 0||s.call(i,{category:no,message:`ExecuteRequest ${t} - ${(a=e==null?void 0:e.message)!==null&&a!==void 0?a:""}`,errorCode:u,error:e}),l},"_SignalRClient_processError");var _f,Cc,wf,R3=o(n=>{let{appUrl:e,localeHeader:t,getLocale:r,setLocale:i,logger:s,getToken:a}=n;return new n0({appUrl:e,localeHeader:t,getLocale:r,setLocale:i,logger:s,getToken:a})},"createSignalRInstance"),z0=class z0{constructor(e){let{appUrl:t,localeHeader:r,getLocale:i,setLocale:s,logger:a,getToken:u,signalRClientInstance:l=R3({appUrl:t,localeHeader:r,getLocale:i,setLocale:s,logger:a,getToken:u}),alternateHttpClientInstance:c}=e;_f.set(this,void 0),Cc.set(this,void 0),wf.set(this,void 0),ze(this,_f,l,"f"),ze(this,Cc,c,"f"),ze(this,wf,a,"f")}post(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,payload:s,headers:a,contentType:u,timeout:l,timeoutHandler:c,useLocaleInfo:d,abortCommand:f,responseHandler:h}=t;return(function*(){let g=o(()=>te(r,_f,"f").executeRequest({url:i,payload:s,headers:a,contentType:u,useLocaleInfo:d,timeout:l,timeoutHandler:c,abortCommand:f,responseHandler:h}),"fetch");return ha(te(r,wf,"f"),"POST",g)})()})}get(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,params:s,headers:a,responseType:u,useLocaleInfo:l,timeout:c,timeoutHandler:d,baseURL:f}=t;return(function*(){return te(r,Cc,"f").get({url:i,params:s,headers:a,responseType:u,useLocaleInfo:l,timeout:c,timeoutHandler:d,baseURL:f})})()})}getResponseUrl(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,params:s,headers:a,useLocaleInfo:u,timeout:l,timeoutHandler:c,baseURL:d}=t;return(function*(){return te(r,Cc,"f").getResponseUrl({url:i,params:s,headers:a,useLocaleInfo:u,timeout:l,timeoutHandler:c,baseURL:d})})()})}};o(z0,"DebuggerHttpClient");var Wf=z0;_f=new WeakMap,Cc=new WeakMap,wf=new WeakMap;var ds,ro,Bc,Vc,Gf,zf,io,qf,HR,jR,WR,Ef,O3="HttpClientWithHealthCheck",P3=1800,N3="ping",D3=30,q0=class q0{constructor(e){let{isHealthy:t=!1,healthCheckIntervalInSeconds:r=P3,healthCheckEndpoint:i=N3,healingTimeoutDelayInSeconds:s=D3,healthCheckNeededPathFilter:a,logger:u}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ds.add(this),ro.set(this,void 0),Bc.set(this,void 0),Vc.set(this,void 0),Gf.set(this,void 0),zf.set(this,void 0),io.set(this,void 0),qf.set(this,void 0),ze(this,ro,e,"f"),ze(this,Bc,r*1e3,"f"),ze(this,Vc,i,"f"),ze(this,Gf,s,"f"),ze(this,zf,a,"f"),t&&ze(this,io,Date.now(),"f"),ze(this,qf,u,"f")}setHealthCheckInterval(e){ze(this,Bc,e*1e3,"f")}post(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,payload:s,params:a,headers:u,contentType:l,timeout:c,timeoutHandler:d,useLocaleInfo:f,baseURL:h,abortCommand:g,responseHandler:p}=t;return(function*(){return te(r,ds,"m",Ef).call(r,m=>te(r,ro,"f").post({url:i,payload:s,params:a,headers:u,contentType:l,timeout:m,timeoutHandler:d,useLocaleInfo:f,baseURL:h,abortCommand:g,responseHandler:p}),i,h,c)})()})}get(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,params:s,headers:a,useLocaleInfo:u,timeout:l,timeoutHandler:c,responseType:d,baseURL:f}=t;return(function*(){return te(r,ds,"m",Ef).call(r,h=>te(r,ro,"f").get({url:i,params:s,headers:a,useLocaleInfo:u,timeout:h,timeoutHandler:c,responseType:d,baseURL:f}),i,f,l)})()})}getResponseUrl(e){return Be(this,arguments,void 0,function(t){var r=this;let{url:i,params:s,headers:a,useLocaleInfo:u,timeout:l,timeoutHandler:c,baseURL:d}=t;return(function*(){return te(r,ds,"m",Ef).call(r,f=>te(r,ro,"f").getResponseUrl({url:i,params:s,headers:a,useLocaleInfo:u,timeout:f,timeoutHandler:c,baseURL:d}),i,d,l)})()})}};o(q0,"HttpClientWithHealthCheck");var Ea=q0;ro=new WeakMap,Bc=new WeakMap,Vc=new WeakMap,Gf=new WeakMap,zf=new WeakMap,io=new WeakMap,qf=new WeakMap,ds=new WeakSet,HR=o(function(e,t){var r,i;let s=(i=(r=te(this,zf,"f"))===null||r===void 0?void 0:r.isPathAcceptable(e,t))!==null&&i!==void 0?i:!0,a=!te(this,io,"f")||Date.now()-te(this,io,"f")>te(this,Bc,"f");return s&&a},"_HttpClientWithHealthCheck_needsHealthCheck"),jR=o(function(){return Be(this,void 0,void 0,function*(){var e,t;(t=(e=te(this,qf,"f"))===null||e===void 0?void 0:e.debug)===null||t===void 0||t.call(e,{category:O3,message:`Checking healthiness at ${te(this,Vc,"f")}`});try{return yield te(this,ro,"f").get({url:te(this,Vc,"f"),timeout:2}),ze(this,io,Date.now(),"f"),!0}catch(r){return!1}})},"_HttpClientWithHealthCheck_isHealthy"),WR=o(function(e,t,r){return Be(this,void 0,void 0,function*(){return r===void 0||(te(this,ds,"m",HR).call(this,e,t)?yield te(this,ds,"m",jR).call(this):!0)?r:r+te(this,Gf,"f")})},"_HttpClientWithHealthCheck_getEffectiveTimeout"),Ef=o(function(e,t,r,i){return Be(this,void 0,void 0,function*(){let s=yield te(this,ds,"m",WR).call(this,t,r,i);try{return yield e(s)}finally{ze(this,io,Date.now(),"f")}})},"_HttpClientWithHealthCheck_doWithHealthManagement");var K0=class K0{abort(){var e;(e=this.onAbort)===null||e===void 0||e.call(this)}};o(K0,"AbortRequest");var Kf=K0;function b1(n){return n.errorCode===Ve.Communication_Timeout||n.errorCode===Ve.Communication_Unavailable||n.errorCode===Ve.Communication_Internal_Server_Error||n.errorCode===Ve.Communication_Aborted}o(b1,"isNetworkOrServerError");var Tf,Rc,bf,r0,Y0=class Y0{constructor(){let{acceptionRules:e=[],rejectionRules:t=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Tf.add(this),Rc.set(this,void 0),bf.set(this,void 0),ze(this,Rc,e,"f"),ze(this,bf,t,"f")}isPathAcceptable(e,t){let r=(t?`${t}/${e}`:e).replace(/\/+/g,"/"),i=te(this,Rc,"f").length===0||te(this,Rc,"f").some(a=>te(this,Tf,"m",r0).call(this,a,r)),s=te(this,bf,"f").some(a=>te(this,Tf,"m",r0).call(this,a,r));return i&&!s}};o(Y0,"PathFilter");var Yf=Y0;Rc=new WeakMap,bf=new WeakMap,Tf=new WeakSet,r0=o(function(e,t){return e instanceof RegExp?e.test(t):e?t.startsWith(e):!1},"_PathFilter_isMatch");var X0;function dn(n,e,t){return(e=L3(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}o(dn,"_defineProperty2");function L3(n){var e=x3(n,"string");return typeof e=="symbol"?e:e+""}o(L3,"_toPropertyKey");function x3(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}o(x3,"_toPrimitive");function ge(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})}o(ge,"__awaiter$3");function O(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}o(O,"__classPrivateFieldGet");function ye(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}o(ye,"__classPrivateFieldSet");var U3=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},mo="1.9.0",S1=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function M3(n){var e=new Set([n]),t=new Set,r=n.match(S1);if(!r)return function(){return!1};var i={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(i.prerelease!=null)return o(function(l){return l===n},"isExactmatch");function s(u){return t.add(u),!1}o(s,"_reject");function a(u){return e.add(u),!0}return o(a,"_accept"),o(function(l){if(e.has(l))return!0;if(t.has(l))return!1;var c=l.match(S1);if(!c)return s(l);var d={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return d.prerelease!=null||i.major!==d.major?s(l):i.major===0?i.minor===d.minor&&i.patch<=d.patch?a(l):s(l):i.minor<=d.minor?a(l):s(l)},"isCompatible")}o(M3,"_makeCompatibilityCheck");var k3=M3(mo),F3=mo.split(".")[0],vl=Symbol.for("opentelemetry.js.api."+F3),yl=U3;function Sl(n,e,t,r){var i;r===void 0&&(r=!1);var s=yl[vl]=(i=yl[vl])!==null&&i!==void 0?i:{version:mo};if(!r&&s[n]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+n);return t.error(a.stack||a.message),!1}if(s.version!==mo){var a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+n+" does not match previously registered API v"+mo);return t.error(a.stack||a.message),!1}return s[n]=e,t.debug("@opentelemetry/api: Registered a global for "+n+" v"+mo+"."),!0}o(Sl,"registerGlobal");function wo(n){var e,t,r=(e=yl[vl])===null||e===void 0?void 0:e.version;if(!(!r||!k3(r)))return(t=yl[vl])===null||t===void 0?void 0:t[n]}o(wo,"getGlobal");function Al(n,e){e.debug("@opentelemetry/api: Unregistering a global for "+n+" v"+mo+".");var t=yl[vl];t&&delete t[n]}o(Al,"unregisterGlobal");var $3=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},B3=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},V3=(function(){function n(e){this._namespace=e.namespace||"DiagComponentLogger"}return o(n,"DiagComponentLogger"),n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Yc("debug",this._namespace,e)},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Yc("error",this._namespace,e)},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Yc("info",this._namespace,e)},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Yc("warn",this._namespace,e)},n.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Yc("verbose",this._namespace,e)},n})();function Yc(n,e,t){var r=wo("diag");if(r)return t.unshift(e),r[n].apply(r,B3([],$3(t),!1))}o(Yc,"logProxy");var kt;(function(n){n[n.NONE=0]="NONE",n[n.ERROR=30]="ERROR",n[n.WARN=50]="WARN",n[n.INFO=60]="INFO",n[n.DEBUG=70]="DEBUG",n[n.VERBOSE=80]="VERBOSE",n[n.ALL=9999]="ALL"})(kt||(kt={}));function H3(n,e){n<kt.NONE?n=kt.NONE:n>kt.ALL&&(n=kt.ALL),e=e||{};function t(r,i){var s=e[r];return typeof s=="function"&&n>=i?s.bind(e):function(){}}return o(t,"_filterFunc"),{error:t("error",kt.ERROR),warn:t("warn",kt.WARN),info:t("info",kt.INFO),debug:t("debug",kt.DEBUG),verbose:t("verbose",kt.VERBOSE)}}o(H3,"createLogLevelDiagLogger");var j3=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},W3=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},G3="diag",Zr=(function(){function n(){function e(i){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var u=wo("diag");if(u)return u[i].apply(u,W3([],j3(s),!1))}}o(e,"_logProxy");var t=this,r=o(function(i,s){var a,u,l;if(s===void 0&&(s={logLevel:kt.INFO}),i===t){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error((a=c.stack)!==null&&a!==void 0?a:c.message),!1}typeof s=="number"&&(s={logLevel:s});var d=wo("diag"),f=H3((u=s.logLevel)!==null&&u!==void 0?u:kt.INFO,i);if(d&&!s.suppressOverrideMessage){var h=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+h),f.warn("Current logger will overwrite one already registered from "+h)}return Sl("diag",f,t,!0)},"setLogger");t.setLogger=r,t.disable=function(){Al(G3,t)},t.createComponentLogger=function(i){return new V3(i)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return o(n,"DiagAPI"),n.instance=function(){return this._instance||(this._instance=new n),this._instance},n})(),z3=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},q3=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:o(function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K3=(function(){function n(e){this._entries=e?new Map(e):new Map}return o(n,"BaggageImpl"),n.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},n.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=z3(e,2),r=t[0],i=t[1];return[r,i]})},n.prototype.setEntry=function(e,t){var r=new n(this._entries);return r._entries.set(e,t),r},n.prototype.removeEntry=function(e){var t=new n(this._entries);return t._entries.delete(e),t},n.prototype.removeEntries=function(){for(var e,t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=new n(this._entries);try{for(var a=q3(r),u=a.next();!u.done;u=a.next()){var l=u.value;s._entries.delete(l)}}catch(c){e={error:c}}finally{try{u&&!u.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return s},n.prototype.clear=function(){return new n},n})(),Y3=Symbol("BaggageEntryMetadata"),X3=Zr.instance();function J3(n){return n===void 0&&(n={}),new K3(new Map(Object.entries(n)))}o(J3,"createBaggage");function Z3(n){return typeof n!="string"&&(X3.error("Cannot create baggage metadata from unknown type: "+typeof n),n=""),{__TYPE__:Y3,toString:o(function(){return n},"toString")}}o(Z3,"baggageEntryMetadataFromString");function Pw(n){return Symbol.for(n)}o(Pw,"createContextKey");var Q3=(function(){function n(e){var t=this;t._currentContext=e?new Map(e):new Map,t.getValue=function(r){return t._currentContext.get(r)},t.setValue=function(r,i){var s=new n(t._currentContext);return s._currentContext.set(r,i),s},t.deleteValue=function(r){var i=new n(t._currentContext);return i._currentContext.delete(r),i}}return o(n,"BaseContext"),n})(),wi=new Q3,Eo=(function(){var n=o(function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)},"extendStatics");return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}o(r,"__"),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),eH=(function(){function n(){}return o(n,"NoopMeter"),n.prototype.createGauge=function(e,t){return lH},n.prototype.createHistogram=function(e,t){return dH},n.prototype.createCounter=function(e,t){return cH},n.prototype.createUpDownCounter=function(e,t){return fH},n.prototype.createObservableGauge=function(e,t){return gH},n.prototype.createObservableCounter=function(e,t){return hH},n.prototype.createObservableUpDownCounter=function(e,t){return pH},n.prototype.addBatchObservableCallback=function(e,t){},n.prototype.removeBatchObservableCallback=function(e){},n})(),yg=(function(){function n(){}return o(n,"NoopMetric"),n})(),tH=(function(n){Eo(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return o(e,"NoopCounterMetric"),e.prototype.add=function(t,r){},e})(yg),nH=(function(n){Eo(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return o(e,"NoopUpDownCounterMetric"),e.prototype.add=function(t,r){},e})(yg),rH=(function(n){Eo(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return o(e,"NoopGaugeMetric"),e.prototype.record=function(t,r){},e})(yg),iH=(function(n){Eo(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return o(e,"NoopHistogramMetric"),e.prototype.record=function(t,r){},e})(yg),Nw=(function(){function n(){}return o(n,"NoopObservableMetric"),n.prototype.addCallback=function(e){},n.prototype.removeCallback=function(e){},n})(),sH=(function(n){Eo(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return o(e,"NoopObservableCounterMetric"),e})(Nw),oH=(function(n){Eo(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return o(e,"NoopObservableGaugeMetric"),e})(Nw),aH=(function(n){Eo(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return o(e,"NoopObservableUpDownCounterMetric"),e})(Nw),uH=new eH,cH=new tH,lH=new rH,dH=new iH,fH=new nH,hH=new sH,gH=new oH,pH=new aH,mH={get:o(function(n,e){if(n!=null)return n[e]},"get"),keys:o(function(n){return n==null?[]:Object.keys(n)},"keys")},vH={set:o(function(n,e,t){n!=null&&(n[e]=t)},"set")},yH=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},_H=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},wH=(function(){function n(){}return o(n,"NoopContextManager"),n.prototype.active=function(){return wi},n.prototype.with=function(e,t,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return t.call.apply(t,_H([r],yH(i),!1))},n.prototype.bind=function(e,t){return t},n.prototype.enable=function(){return this},n.prototype.disable=function(){return this},n})(),EH=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},TH=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},J0="context",bH=new wH,_g=(function(){function n(){}return o(n,"ContextAPI"),n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalContextManager=function(e){return Sl(J0,e,Zr.instance())},n.prototype.active=function(){return this._getContextManager().active()},n.prototype.with=function(e,t,r){for(var i,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return(i=this._getContextManager()).with.apply(i,TH([e,t,r],EH(s),!1))},n.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},n.prototype._getContextManager=function(){return wo(J0)||bH},n.prototype.disable=function(){this._getContextManager().disable(),Al(J0,Zr.instance())},n})(),Ii;(function(n){n[n.NONE=0]="NONE",n[n.SAMPLED=1]="SAMPLED"})(Ii||(Ii={}));var xO="0000000000000000",UO="00000000000000000000000000000000",MO={traceId:UO,spanId:xO,traceFlags:Ii.NONE},gl=(function(){function n(e){e===void 0&&(e=MO),this._spanContext=e}return o(n,"NonRecordingSpan"),n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(e,t){return this},n.prototype.setAttributes=function(e){return this},n.prototype.addEvent=function(e,t){return this},n.prototype.addLink=function(e){return this},n.prototype.addLinks=function(e){return this},n.prototype.setStatus=function(e){return this},n.prototype.updateName=function(e){return this},n.prototype.end=function(e){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(e,t){},n})(),Dw=Pw("OpenTelemetry Context Key SPAN");function Lw(n){return n.getValue(Dw)||void 0}o(Lw,"getSpan");function SH(){return Lw(_g.getInstance().active())}o(SH,"getActiveSpan");function xw(n,e){return n.setValue(Dw,e)}o(xw,"setSpan");function AH(n){return n.deleteValue(Dw)}o(AH,"deleteSpan");function IH(n,e){return xw(n,new gl(e))}o(IH,"setSpanContext");function kO(n){var e;return(e=Lw(n))===null||e===void 0?void 0:e.spanContext()}o(kO,"getSpanContext");var CH=/^([0-9a-f]{32})$/i,RH=/^[0-9a-f]{16}$/i;function FO(n){return CH.test(n)&&n!==UO}o(FO,"isValidTraceId");function OH(n){return RH.test(n)&&n!==xO}o(OH,"isValidSpanId");function wg(n){return FO(n.traceId)&&OH(n.spanId)}o(wg,"isSpanContextValid");function PH(n){return new gl(n)}o(PH,"wrapSpanContext");var Z0=_g.getInstance(),$O=(function(){function n(){}return o(n,"NoopTracer"),n.prototype.startSpan=function(e,t,r){r===void 0&&(r=Z0.active());var i=!!(t!=null&&t.root);if(i)return new gl;var s=r&&kO(r);return NH(s)&&wg(s)?new gl(s):new gl},n.prototype.startActiveSpan=function(e,t,r,i){var s,a,u;if(!(arguments.length<2)){arguments.length===2?u=t:arguments.length===3?(s=t,u=r):(s=t,a=r,u=i);var l=a!=null?a:Z0.active(),c=this.startSpan(e,s,l),d=xw(l,c);return Z0.with(d,u,void 0,c)}},n})();function NH(n){return typeof n=="object"&&typeof n.spanId=="string"&&typeof n.traceId=="string"&&typeof n.traceFlags=="number"}o(NH,"isSpanContext");var DH=new $O,LH=(function(){function n(e,t,r,i){this._provider=e,this.name=t,this.version=r,this.options=i}return o(n,"ProxyTracer"),n.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},n.prototype.startActiveSpan=function(e,t,r,i){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},n.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):DH},n})(),xH=(function(){function n(){}return o(n,"NoopTracerProvider"),n.prototype.getTracer=function(e,t,r){return new $O},n})(),UH=new xH,A1=(function(){function n(){}return o(n,"ProxyTracerProvider"),n.prototype.getTracer=function(e,t,r){var i;return(i=this.getDelegateTracer(e,t,r))!==null&&i!==void 0?i:new LH(this,e,t,r)},n.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:UH},n.prototype.setDelegate=function(e){this._delegate=e},n.prototype.getDelegateTracer=function(e,t,r){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,t,r)},n})(),Mh;(function(n){n[n.NOT_RECORD=0]="NOT_RECORD",n[n.RECORD=1]="RECORD",n[n.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Mh||(Mh={}));var kh;(function(n){n[n.INTERNAL=0]="INTERNAL",n[n.SERVER=1]="SERVER",n[n.CLIENT=2]="CLIENT",n[n.PRODUCER=3]="PRODUCER",n[n.CONSUMER=4]="CONSUMER"})(kh||(kh={}));var _l;(function(n){n[n.UNSET=0]="UNSET",n[n.OK=1]="OK",n[n.ERROR=2]="ERROR"})(_l||(_l={}));var Hn=_g.getInstance(),ot=Zr.instance(),MH=(function(){function n(){}return o(n,"NoopMeterProvider"),n.prototype.getMeter=function(e,t,r){return uH},n})(),kH=new MH,Q0="metrics",FH=(function(){function n(){}return o(n,"MetricsAPI"),n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalMeterProvider=function(e){return Sl(Q0,e,Zr.instance())},n.prototype.getMeterProvider=function(){return wo(Q0)||kH},n.prototype.getMeter=function(e,t,r){return this.getMeterProvider().getMeter(e,t,r)},n.prototype.disable=function(){Al(Q0,Zr.instance())},n})(),$H=FH.getInstance(),BH=(function(){function n(){}return o(n,"NoopTextMapPropagator"),n.prototype.inject=function(e,t){},n.prototype.extract=function(e,t){return e},n.prototype.fields=function(){return[]},n})(),Uw=Pw("OpenTelemetry Baggage Key");function BO(n){return n.getValue(Uw)||void 0}o(BO,"getBaggage");function VH(){return BO(_g.getInstance().active())}o(VH,"getActiveBaggage");function HH(n,e){return n.setValue(Uw,e)}o(HH,"setBaggage");function jH(n){return n.deleteValue(Uw)}o(jH,"deleteBaggage");var e_="propagation",WH=new BH,GH=(function(){function n(){this.createBaggage=J3,this.getBaggage=BO,this.getActiveBaggage=VH,this.setBaggage=HH,this.deleteBaggage=jH}return o(n,"PropagationAPI"),n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalPropagator=function(e){return Sl(e_,e,Zr.instance())},n.prototype.inject=function(e,t,r){return r===void 0&&(r=vH),this._getGlobalPropagator().inject(e,t,r)},n.prototype.extract=function(e,t,r){return r===void 0&&(r=mH),this._getGlobalPropagator().extract(e,t,r)},n.prototype.fields=function(){return this._getGlobalPropagator().fields()},n.prototype.disable=function(){Al(e_,Zr.instance())},n.prototype._getGlobalPropagator=function(){return wo(e_)||WH},n})(),Ei=GH.getInstance(),t_="trace",zH=(function(){function n(){this._proxyTracerProvider=new A1,this.wrapSpanContext=PH,this.isSpanContextValid=wg,this.deleteSpan=AH,this.getSpan=Lw,this.getActiveSpan=SH,this.getSpanContext=kO,this.setSpan=xw,this.setSpanContext=IH}return o(n,"TraceAPI"),n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalTracerProvider=function(e){var t=Sl(t_,this._proxyTracerProvider,Zr.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},n.prototype.getTracerProvider=function(){return wo(t_)||this._proxyTracerProvider},n.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},n.prototype.disable=function(){Al(t_,Zr.instance()),this._proxyTracerProvider=new A1},n})(),Nn=zH.getInstance(),VO=Pw("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function qH(n){return n.setValue(VO,!0)}o(qH,"suppressTracing");function Mw(n){return n.getValue(VO)===!0}o(Mw,"isTracingSuppressed");var KH="=",A_=";",I_=",",n_="baggage",YH=180,XH=4096,JH=8192,ZH=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s};function QH(n){return n.reduce(function(e,t){var r=""+e+(e!==""?I_:"")+t;return r.length>JH?e:r},"")}o(QH,"serializeKeyPairs");function e4(n){return n.getAllEntries().map(function(e){var t=ZH(e,2),r=t[0],i=t[1],s=encodeURIComponent(r)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(s+=A_+i.metadata.toString()),s})}o(e4,"getKeyPairs");function t4(n){var e=n.split(A_);if(!(e.length<=0)){var t=e.shift();if(t){var r=t.indexOf(KH);if(!(r<=0)){var i=decodeURIComponent(t.substring(0,r).trim()),s=decodeURIComponent(t.substring(r+1).trim()),a;return e.length>0&&(a=Z3(e.join(A_))),{key:i,value:s,metadata:a}}}}}o(t4,"parsePairKeyValue");var n4=(function(){function n(){}return o(n,"W3CBaggagePropagator"),n.prototype.inject=function(e,t,r){var i=Ei.getBaggage(e);if(!(!i||Mw(e))){var s=e4(i).filter(function(u){return u.length<=XH}).slice(0,YH),a=QH(s);a.length>0&&r.set(t,n_,a)}},n.prototype.extract=function(e,t,r){var i=r.get(t,n_),s=Array.isArray(i)?i.join(I_):i;if(!s)return e;var a={};if(s.length===0)return e;var u=s.split(I_);return u.forEach(function(l){var c=t4(l);if(c){var d={value:c.value};c.metadata&&(d.metadata=c.metadata),a[c.key]=d}}),Object.entries(a).length===0?e:Ei.setBaggage(e,Ei.createBaggage(a))},n.prototype.fields=function(){return[n_]},n})(),HO=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:o(function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r4=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s};function uh(n){var e,t,r={};if(typeof n!="object"||n==null)return r;try{for(var i=HO(Object.entries(n)),s=i.next();!s.done;s=i.next()){var a=r4(s.value,2),u=a[0],l=a[1];if(!i4(u)){ot.warn("Invalid attribute key: "+u);continue}if(!jO(l)){ot.warn("Invalid attribute value set for key: "+u);continue}Array.isArray(l)?r[u]=l.slice():r[u]=l}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r}o(uh,"sanitizeAttributes");function i4(n){return typeof n=="string"&&n.length>0}o(i4,"isAttributeKey");function jO(n){return n==null?!0:Array.isArray(n)?s4(n):WO(n)}o(jO,"isAttributeValue");function s4(n){var e,t,r;try{for(var i=HO(n),s=i.next();!s.done;s=i.next()){var a=s.value;if(a!=null){if(!r){if(WO(a)){r=typeof a;continue}return!1}if(typeof a!==r)return!1}}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return!0}o(s4,"isHomogeneousAttributeValueArray");function WO(n){switch(typeof n){case"number":case"boolean":case"string":return!0}return!1}o(WO,"isValidPrimitiveAttributeValue");function o4(){return function(n){ot.error(a4(n))}}o(o4,"loggingErrorHandler");function a4(n){return typeof n=="string"?n:JSON.stringify(u4(n))}o(a4,"stringifyException");function u4(n){for(var e={},t=n;t!==null;)Object.getOwnPropertyNames(t).forEach(function(r){if(!e[r]){var i=t[r];i&&(e[r]=String(i))}}),t=Object.getPrototypeOf(t);return e}o(u4,"flattenException");var c4=o4();function Fh(n){try{c4(n)}catch(e){}}o(Fh,"globalErrorHandler");var Jr;(function(n){n.AlwaysOff="always_off",n.AlwaysOn="always_on",n.ParentBasedAlwaysOff="parentbased_always_off",n.ParentBasedAlwaysOn="parentbased_always_on",n.ParentBasedTraceIdRatio="parentbased_traceidratio",n.TraceIdRatio="traceidratio"})(Jr||(Jr={}));var l4=",",d4=["OTEL_SDK_DISABLED"];function f4(n){return d4.indexOf(n)>-1}o(f4,"isEnvVarABoolean");var h4=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function g4(n){return h4.indexOf(n)>-1}o(g4,"isEnvVarANumber");var p4=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function m4(n){return p4.indexOf(n)>-1}o(m4,"isEnvVarAList");var ch=1/0,lh=128,v4=128,y4=128,GO={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:kt.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:ch,OTEL_ATTRIBUTE_COUNT_LIMIT:lh,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:ch,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:lh,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:ch,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:lh,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:v4,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:y4,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Jr.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function _4(n,e,t){if(typeof t[n]!="undefined"){var r=String(t[n]);e[n]=r.toLowerCase()==="true"}}o(_4,"parseBoolean");function w4(n,e,t,r,i){if(r===void 0&&(r=-1/0),i===void 0&&(i=1/0),typeof t[n]!="undefined"){var s=Number(t[n]);isNaN(s)||(s<r?e[n]=r:s>i?e[n]=i:e[n]=s)}}o(w4,"parseNumber");function E4(n,e,t,r){r===void 0&&(r=l4);var i=t[n];typeof i=="string"&&(e[n]=i.split(r).map(function(s){return s.trim()}))}o(E4,"parseStringList");var T4={ALL:kt.ALL,VERBOSE:kt.VERBOSE,DEBUG:kt.DEBUG,INFO:kt.INFO,WARN:kt.WARN,ERROR:kt.ERROR,NONE:kt.NONE};function b4(n,e,t){var r=t[n];if(typeof r=="string"){var i=T4[r.toUpperCase()];i!=null&&(e[n]=i)}}o(b4,"setLogLevelFromEnv");function zO(n){var e={};for(var t in GO){var r=t;switch(r){case"OTEL_LOG_LEVEL":b4(r,e,n);break;default:if(f4(r))_4(r,e,n);else if(g4(r))w4(r,e,n);else if(m4(r))E4(r,e,n);else{var i=n[r];typeof i!="undefined"&&i!==null&&(e[r]=String(i))}}}return e}o(zO,"parseEnvironment");var qO=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};function za(){var n=zO(qO);return Object.assign({},GO,n)}o(za,"getEnv");function S4(){return zO(qO)}o(S4,"getEnvWithoutDefaults");var Wa=performance,A4="1.26.0",I4="exception.type",C4="exception.message",R4="exception.stacktrace",r_=I4,i_=C4,O4=R4,P4="process.runtime.name",N4="service.name",D4="telemetry.sdk.name",L4="telemetry.sdk.language",x4="telemetry.sdk.version",U4=P4,M4=N4,C_=D4,R_=L4,O_=x4,k4="webjs",F4=k4,ba,s_=(ba={},ba[C_]="opentelemetry",ba[U4]="browser",ba[R_]=F4,ba[O_]=A4,ba);var KO=9,$4=6,B4=Math.pow(10,$4),$h=Math.pow(10,KO);function Fa(n){var e=n/1e3,t=Math.trunc(e),r=Math.round(n%1e3*B4);return[t,r]}o(Fa,"millisToHrTime$1");function YO(){var n=Wa.timeOrigin;if(typeof n!="number"){var e=Wa;n=e.timing&&e.timing.fetchStart}return n}o(YO,"getTimeOrigin$1");function XO(n){var e=Fa(YO()),t=Fa(typeof n=="number"?n:Wa.now());return ZO(e,t)}o(XO,"hrTime$1");function V4(n,e){var t=e[0]-n[0],r=e[1]-n[1];return r<0&&(t-=1,r+=$h),[t,r]}o(V4,"hrTimeDuration");function H4(n){var e=KO,t=""+"0".repeat(e)+n[1]+"Z",r=t.substr(t.length-e-1),i=new Date(n[0]*1e3).toISOString();return i.replace("000Z",r)}o(H4,"hrTimeToTimeStamp");function j4(n){return n[0]*$h+n[1]}o(j4,"hrTimeToNanoseconds$1");function JO(n){return Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"}o(JO,"isTimeInputHrTime$1");function I1(n){return JO(n)||typeof n=="number"||n instanceof Date}o(I1,"isTimeInput");function ZO(n,e){var t=[n[0]+e[0],n[1]+e[1]];return t[1]>=$h&&(t[1]-=$h,t[0]+=1),t}o(ZO,"addHrTimes$1");var P_;(function(n){n[n.SUCCESS=0]="SUCCESS",n[n.FAILED=1]="FAILED"})(P_||(P_={}));var W4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:o(function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G4=(function(){function n(e){e===void 0&&(e={});var t;this._propagators=(t=e.propagators)!==null&&t!==void 0?t:[],this._fields=Array.from(new Set(this._propagators.map(function(r){return typeof r.fields=="function"?r.fields():[]}).reduce(function(r,i){return r.concat(i)},[])))}return o(n,"CompositePropagator"),n.prototype.inject=function(e,t,r){var i,s;try{for(var a=W4(this._propagators),u=a.next();!u.done;u=a.next()){var l=u.value;try{l.inject(e,t,r)}catch(c){ot.warn("Failed to inject with "+l.constructor.name+". Err: "+c.message)}}}catch(c){i={error:c}}finally{try{u&&!u.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}},n.prototype.extract=function(e,t,r){return this._propagators.reduce(function(i,s){try{return s.extract(i,t,r)}catch(a){ot.warn("Failed to inject with "+s.constructor.name+". Err: "+a.message)}return i},e)},n.prototype.fields=function(){return this._fields.slice()},n})(),N_="[_0-9a-z-*/]",z4="[a-z]"+N_+"{0,255}",q4="[a-z0-9]"+N_+"{0,240}@[a-z]"+N_+"{0,13}",K4=new RegExp("^(?:"+z4+"|"+q4+")$"),Y4=/^[ -~]{0,255}[!-~]$/,X4=/,|=/;function J4(n){return K4.test(n)}o(J4,"validateKey");function Z4(n){return Y4.test(n)&&!X4.test(n)}o(Z4,"validateValue");var C1=32,Q4=512,R1=",",O1="=",ej=(function(){function n(e){this._internalState=new Map,e&&this._parse(e)}return o(n,"TraceState"),n.prototype.set=function(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r},n.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},n.prototype.get=function(e){return this._internalState.get(e)},n.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,r){return t.push(r+O1+e.get(r)),t},[]).join(R1)},n.prototype._parse=function(e){e.length>Q4||(this._internalState=e.split(R1).reverse().reduce(function(t,r){var i=r.trim(),s=i.indexOf(O1);if(s!==-1){var a=i.slice(0,s),u=i.slice(s+1,r.length);J4(a)&&Z4(u)&&t.set(a,u)}return t},new Map),this._internalState.size>C1&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,C1))))},n.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},n.prototype._clone=function(){var e=new n;return e._internalState=new Map(this._internalState),e},n})(),o_="traceparent",a_="tracestate",tj="00",nj="(?!ff)[\\da-f]{2}",rj="(?![0]{32})[\\da-f]{32}",ij="(?![0]{16})[\\da-f]{16}",sj="[\\da-f]{2}",oj=new RegExp("^\\s?("+nj+")-("+rj+")-("+ij+")-("+sj+")(-.*)?\\s?$");function aj(n){var e=oj.exec(n);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}o(aj,"parseTraceParent");var uj=(function(){function n(){}return o(n,"W3CTraceContextPropagator"),n.prototype.inject=function(e,t,r){var i=Nn.getSpanContext(e);if(!(!i||Mw(e)||!wg(i))){var s=tj+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||Ii.NONE).toString(16);r.set(t,o_,s),i.traceState&&r.set(t,a_,i.traceState.serialize())}},n.prototype.extract=function(e,t,r){var i=r.get(t,o_);if(!i)return e;var s=Array.isArray(i)?i[0]:i;if(typeof s!="string")return e;var a=aj(s);if(!a)return e;a.isRemote=!0;var u=r.get(t,a_);if(u){var l=Array.isArray(u)?u.join(","):u;a.traceState=new ej(typeof l=="string"?l:void 0)}return Nn.setSpanContext(e,a)},n.prototype.fields=function(){return[o_,a_]},n})(),cj="[object Object]",lj="[object Null]",dj="[object Undefined]",fj=Function.prototype,QO=fj.toString,hj=QO.call(Object),gj=pj(Object.getPrototypeOf,Object),eP=Object.prototype,tP=eP.hasOwnProperty,go=Symbol?Symbol.toStringTag:void 0,nP=eP.toString;function pj(n,e){return function(t){return n(e(t))}}o(pj,"overArg$3");function P1(n){if(!mj(n)||vj(n)!==cj)return!1;var e=gj(n);if(e===null)return!0;var t=tP.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&QO.call(t)===hj}o(P1,"isPlainObject");function mj(n){return n!=null&&typeof n=="object"}o(mj,"isObjectLike$6");function vj(n){return n==null?n===void 0?dj:lj:go&&go in Object(n)?yj(n):_j(n)}o(vj,"baseGetTag$6");function yj(n){var e=tP.call(n,go),t=n[go],r=!1;try{n[go]=void 0,r=!0}catch(s){}var i=nP.call(n);return r&&(e?n[go]=t:delete n[go]),i}o(yj,"getRawTag$2");function _j(n){return nP.call(n)}o(_j,"objectToString$2");var wj=20;function Ej(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=n.shift(),r=new WeakMap;n.length>0;)t=rP(t,n.shift(),0,r);return t}o(Ej,"merge");function u_(n){return Bh(n)?n.slice():n}o(u_,"takeValue");function rP(n,e,t,r){t===void 0&&(t=0);var i;if(!(t>wj)){if(t++,dh(n)||dh(e)||iP(e))i=u_(e);else if(Bh(n)){if(i=n.slice(),Bh(e))for(var s=0,a=e.length;s<a;s++)i.push(u_(e[s]));else if(Xc(e))for(var u=Object.keys(e),s=0,a=u.length;s<a;s++){var l=u[s];i[l]=u_(e[l])}}else if(Xc(n))if(Xc(e)){if(!Tj(n,e))return e;i=Object.assign({},n);for(var u=Object.keys(e),s=0,a=u.length;s<a;s++){var l=u[s],c=e[l];if(dh(c))typeof c=="undefined"?delete i[l]:i[l]=c;else{var d=i[l],f=c;if(N1(n,l,r)||N1(e,l,r))delete i[l];else{if(Xc(d)&&Xc(f)){var h=r.get(d)||[],g=r.get(f)||[];h.push({obj:n,key:l}),g.push({obj:e,key:l}),r.set(d,h),r.set(f,g)}i[l]=rP(i[l],c,t,r)}}}}else i=e;return i}}o(rP,"mergeTwoObjects");function N1(n,e,t){for(var r=t.get(n[e])||[],i=0,s=r.length;i<s;i++){var a=r[i];if(a.key===e&&a.obj===n)return!0}return!1}o(N1,"wasObjectReferenced");function Bh(n){return Array.isArray(n)}o(Bh,"isArray$9");function iP(n){return typeof n=="function"}o(iP,"isFunction$4");function Xc(n){return!dh(n)&&!Bh(n)&&!iP(n)&&typeof n=="object"}o(Xc,"isObject$6");function dh(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="undefined"||n instanceof Date||n instanceof RegExp||n===null}o(dh,"isPrimitive");function Tj(n,e){return!(!P1(n)||!P1(e))}o(Tj,"shouldMerge");var bj=(function(){function n(){var e=this;this._promise=new Promise(function(t,r){e._resolve=t,e._reject=r})}return o(n,"Deferred"),Object.defineProperty(n.prototype,"promise",{get:o(function(){return this._promise},"get"),enumerable:!1,configurable:!0}),n.prototype.resolve=function(e){this._resolve(e)},n.prototype.reject=function(e){this._reject(e)},n})(),Sj=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},Aj=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},Ij=(function(){function n(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new bj}return o(n,"BindOnceFuture"),Object.defineProperty(n.prototype,"isCalled",{get:o(function(){return this._isCalled},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"promise",{get:o(function(){return this._deferred.promise},"get"),enumerable:!1,configurable:!0}),n.prototype.call=function(){for(var e,t=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,Aj([this._that],Sj(r),!1))).then(function(s){return t._deferred.resolve(s)},function(s){return t._deferred.reject(s)})}catch(s){this._deferred.reject(s)}}return this._deferred.promise},n})(),iE=class iE{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:XO();this.instant=e}static toISOString(e){return H4(e.instant)}static toNanoSeconds(e){return j4(e.instant)}};o(iE,"Instant");var Nr=iE,$a=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function kw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}o(kw,"getDefaultExportFromCjs");var sP={exports:{}},c_={exports:{}},D1;function Cj(){return D1||(D1=1,(function(n,e){(function(t,r){n.exports=r()})($a,function(){function t(m){return!isNaN(parseFloat(m))&&isFinite(m)}o(t,"_isNumber");function r(m){return m.charAt(0).toUpperCase()+m.substring(1)}o(r,"_capitalize");function i(m){return function(){return this[m]}}o(i,"_getter");var s=["isConstructor","isEval","isNative","isToplevel"],a=["columnNumber","lineNumber"],u=["fileName","functionName","source"],l=["args"],c=["evalOrigin"],d=s.concat(a,u,l,c);function f(m){if(m)for(var w=0;w<d.length;w++)m[d[w]]!==void 0&&this["set"+r(d[w])](m[d[w]])}o(f,"StackFrame"),f.prototype={getArgs:o(function(){return this.args},"getArgs"),setArgs:o(function(m){if(Object.prototype.toString.call(m)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=m},"setArgs"),getEvalOrigin:o(function(){return this.evalOrigin},"getEvalOrigin"),setEvalOrigin:o(function(m){if(m instanceof f)this.evalOrigin=m;else if(m instanceof Object)this.evalOrigin=new f(m);else throw new TypeError("Eval Origin must be an Object or StackFrame")},"setEvalOrigin"),toString:o(function(){var m=this.getFileName()||"",w=this.getLineNumber()||"",E=this.getColumnNumber()||"",_=this.getFunctionName()||"";return this.getIsEval()?m?"[eval] ("+m+":"+w+":"+E+")":"[eval]:"+w+":"+E:_?_+" ("+m+":"+w+":"+E+")":m+":"+w+":"+E},"toString")},f.fromString=o(function(w){var E=w.indexOf("("),_=w.lastIndexOf(")"),T=w.substring(0,E),R=w.substring(E+1,_).split(","),D=w.substring(_+1);if(D.indexOf("@")===0)var B=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(D,""),z=B[1],j=B[2],Y=B[3];return new f({functionName:T,args:R||void 0,fileName:z,lineNumber:j||void 0,columnNumber:Y||void 0})},"StackFrame$$fromString");for(var h=0;h<s.length;h++)f.prototype["get"+r(s[h])]=i(s[h]),f.prototype["set"+r(s[h])]=(function(m){return function(w){this[m]=!!w}})(s[h]);for(var g=0;g<a.length;g++)f.prototype["get"+r(a[g])]=i(a[g]),f.prototype["set"+r(a[g])]=(function(m){return function(w){if(!t(w))throw new TypeError(m+" must be a Number");this[m]=Number(w)}})(a[g]);for(var p=0;p<u.length;p++)f.prototype["get"+r(u[p])]=i(u[p]),f.prototype["set"+r(u[p])]=(function(m){return function(w){this[m]=String(w)}})(u[p]);return f})})(c_)),c_.exports}o(Cj,"requireStackframe");(function(n,e){(function(t,r){n.exports=r(Cj())})($a,o(function(r){var i=/(^|@)\S+:\d+/,s=/^\s*at .*(\S+:\d+|\(native\))/m,a=/^(eval@)?(\[native code])?$/;return{parse:o(function(l){if(typeof l.stacktrace!="undefined"||typeof l["opera#sourceloc"]!="undefined")return this.parseOpera(l);if(l.stack&&l.stack.match(s))return this.parseV8OrIE(l);if(l.stack)return this.parseFFOrSafari(l);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:o(function(l){if(l.indexOf(":")===-1)return[l];var c=/(.+?)(?::(\d+))?(?::(\d+))?$/,d=c.exec(l.replace(/[()]/g,""));return[d[1],d[2]||void 0,d[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:o(function(l){var c=l.stack.split(`
`).filter(function(d){return!!d.match(s)},this);return c.map(function(d){d.indexOf("(eval ")>-1&&(d=d.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var f=d.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),h=f.match(/ (\(.+\)$)/);f=h?f.replace(h[0],""):f;var g=this.extractLocation(h?h[1]:f),p=h&&f||void 0,m=["eval","<anonymous>"].indexOf(g[0])>-1?void 0:g[0];return new r({functionName:p,fileName:m,lineNumber:g[1],columnNumber:g[2],source:d})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:o(function(l){var c=l.stack.split(`
`).filter(function(d){return!d.match(a)},this);return c.map(function(d){if(d.indexOf(" > eval")>-1&&(d=d.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),d.indexOf("@")===-1&&d.indexOf(":")===-1)return new r({functionName:d});var f=/((.*".+"[^@]*)?[^@]*)(?:@)/,h=d.match(f),g=h&&h[1]?h[1]:void 0,p=this.extractLocation(d.replace(f,""));return new r({functionName:g,fileName:p[0],lineNumber:p[1],columnNumber:p[2],source:d})},this)},"ErrorStackParser$$parseFFOrSafari"),parseOpera:o(function(l){return!l.stacktrace||l.message.indexOf(`
`)>-1&&l.message.split(`
`).length>l.stacktrace.split(`
`).length?this.parseOpera9(l):l.stack?this.parseOpera11(l):this.parseOpera10(l)},"ErrorStackParser$$parseOpera"),parseOpera9:o(function(l){for(var c=/Line (\d+).*script (?:in )?(\S+)/i,d=l.message.split(`
`),f=[],h=2,g=d.length;h<g;h+=2){var p=c.exec(d[h]);p&&f.push(new r({fileName:p[2],lineNumber:p[1],source:d[h]}))}return f},"ErrorStackParser$$parseOpera9"),parseOpera10:o(function(l){for(var c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,d=l.stacktrace.split(`
`),f=[],h=0,g=d.length;h<g;h+=2){var p=c.exec(d[h]);p&&f.push(new r({functionName:p[3]||void 0,fileName:p[2],lineNumber:p[1],source:d[h]}))}return f},"ErrorStackParser$$parseOpera10"),parseOpera11:o(function(l){var c=l.stack.split(`
`).filter(function(d){return!!d.match(i)&&!d.match(/^Error created at/)},this);return c.map(function(d){var f=d.split("@"),h=this.extractLocation(f.pop()),g=f.shift()||"",p=g.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,m;g.match(/\(([^)]*)\)/)&&(m=g.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var w=m===void 0||m==="[arguments not available]"?void 0:m.split(",");return new r({functionName:p,args:w,fileName:h[0],lineNumber:h[1],columnNumber:h[2],source:d})},this)},"ErrorStackParser$$parseOpera11")}},"ErrorStackParser"))})(sP);var Rj=sP.exports,Oj=kw(Rj),fh,oP,sE=class sE{constructor(e){this.name=e.name,this.message=e.message,e.stack&&(this.stack=O(fh,fh,"m",oP).call(fh,e))}};o(sE,"ErrorRecord");var Vh=sE;fh=Vh,oP=o(function(e){let t=Oj.parse(e),r=e,i=r!=null&&r.extraStack?`ExtraStack: ${r.extraStack}`:"",s=t.map(a=>a.source).join(`
`);return`${e.name}: ${e.message}
${s}
${i}`},"_ErrorRecord_sanitizeErrorStack");var oE=class oE{constructor(e){let{type:t,category:r,message:i,error:s,visibility:a,timestamp:u=new Nr,span:l,errorCode:c,attributes:d}=e;this.type=t,this.category=r,this.message=i,s&&(this.error=new Vh(s)),this.visibility=a,this.timestamp=u,this.span=l,this.errorCode=c,this.attributes=d}};o(oE,"Log");var Ba=oE,pl,Va,L1,aP,uP,x1=5,Pj=10,aE=class aE{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Map;pl.add(this),Va.set(this,void 0),ye(this,Va,e,"f")}closeCircuit(e){O(this,Va,"f").delete(e)}run(e,t){return ge(this,void 0,void 0,function*(){let r=O(this,Va,"f").get(e);return r===void 0?O(this,pl,"m",aP).call(this,e,t):r.iterationsUntilRetry>0?(r.iterationsUntilRetry--,2):O(this,pl,"m",uP).call(this,e,r,t)})}};o(aE,"CircuitBreakerRunner");var D_=aE;Va=new WeakMap,pl=new WeakSet,L1=o(function(e){O(this,Va,"f").set(e,{retriesFailed:0,iterationsUntilRetry:x1})},"_CircuitBreakerRunner_openCircuit"),aP=o(function(e,t){return ge(this,void 0,void 0,function*(){try{return yield t(),0}catch(r){return O(this,pl,"m",L1).call(this,e),console.debug(`Circuit breaker ${e} was opened: ${r}`),1}})},"_CircuitBreakerRunner_runClosedCircuit"),uP=o(function(e,t,r){return ge(this,void 0,void 0,function*(){try{return yield r(),this.closeCircuit(e),console.debug(`Circuit breaker ${e} was closed`),0}catch(i){return t.retriesFailed++,t.iterationsUntilRetry=Math.min(t.retriesFailed*x1,Pj),1}})},"_CircuitBreakerRunner_runOpenedCircuit");var Nj=new Error("request for lock canceled"),Dj=o(function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},"__awaiter$2"),uE=class uE{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nj;this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((r,i)=>{let s={resolve:r,reject:i,weight:e,priority:t},a=cP(this._queue,u=>t<=u.priority);a===-1&&e<=this._value?this._dispatchItem(s):this._queue.splice(a+1,0,s)})}runExclusive(e){return Dj(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return(function*(){let[a,u]=yield r.acquire(i,s);try{return yield t(a)}finally{u()}})()})}waitForUnlock(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(r=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),Lj(this._weightedWaiters[e-1],{resolve:r,priority:t})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){let t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let e=this._value;e>0;e--){let t=this._weightedWaiters[e-1];t&&(t.forEach(r=>r.resolve()),this._weightedWaiters[e-1]=[])}else{let e=this._queue[0].priority;for(let t=this._value;t>0;t--){let r=this._weightedWaiters[t-1];if(!r)continue;let i=r.findIndex(s=>s.priority<=e);(i===-1?r:r.splice(0,i)).forEach(s=>s.resolve())}}}_couldLockImmediately(e,t){return(this._queue.length===0||this._queue[0].priority<t)&&e<=this._value}};o(uE,"Semaphore");var L_=uE;function Lj(n,e){let t=cP(n,r=>e.priority<=r.priority);n.splice(t+1,0,e)}o(Lj,"insertSorted");function cP(n,e){for(let t=n.length-1;t>=0;t--)if(e(n[t]))return t;return-1}o(cP,"findIndexFromEnd");var xj=o(function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},"__awaiter$1"),cE=class cE{constructor(e){this._semaphore=new L_(1,e)}acquire(){return xj(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(function*(){let[,r]=yield e._semaphore.acquire(1,t);return r})()})}runExclusive(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._semaphore.runExclusive(()=>e(),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};o(cE,"Mutex");var Hh=cE,_s;(function(n){n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Trace=5]="Trace"})(_s||(_s={}));var Uj={Debug:_s.Debug,Info:_s.Info,Warning:_s.Warning,Error:_s.Error,Trace:_s.Trace},Je=_s,lE=class lE{constructor(e,t,r,i){this.logId=e,this.log=t,this.logType=r,this.transportId=i}};o(lE,"LogRecord");var x_=lE,lP="logger-offline-db",Mj="logs",kj="spans",Fj="byLogType",dP="byTransportId",$j="byAggregateSignature",Bj="byParentId",Vj="logType",fP="transportId",Hj="aggregateSignature",jj="parentId",Wj=o((n,e)=>e.some(t=>n instanceof t),"instanceOfAny"),U1,M1;function Gj(){return U1||(U1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}o(Gj,"getIdbProxyableTypes");function zj(){return M1||(M1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}o(zj,"getCursorAdvanceMethods");var hP=new WeakMap,U_=new WeakMap,gP=new WeakMap,l_=new WeakMap,Fw=new WeakMap;function qj(n){let e=new Promise((t,r)=>{let i=o(()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},"unlisten"),s=o(()=>{t(Es(n.result)),i()},"success"),a=o(()=>{r(n.error),i()},"error");n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&hP.set(t,n)}).catch(()=>{}),Fw.set(e,n),e}o(qj,"promisifyRequest");function Kj(n){if(U_.has(n))return;let e=new Promise((t,r)=>{let i=o(()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},"unlisten"),s=o(()=>{t(),i()},"complete"),a=o(()=>{r(n.error||new DOMException("AbortError","AbortError")),i()},"error");n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});U_.set(n,e)}o(Kj,"cacheDonePromiseForTransaction");var M_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return U_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Es(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Yj(n){M_=n(M_)}o(Yj,"replaceTraps");function Xj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];let s=n.call(d_(this),e,...r);return gP.set(s,e.sort?e.sort():[e]),Es(s)}:zj().includes(n)?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(d_(this),t),Es(hP.get(this))}:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Es(n.apply(d_(this),t))}}o(Xj,"wrapFunction");function Jj(n){return typeof n=="function"?Xj(n):(n instanceof IDBTransaction&&Kj(n),Wj(n,Gj())?new Proxy(n,M_):n)}o(Jj,"transformCachableValue");function Es(n){if(n instanceof IDBRequest)return qj(n);if(l_.has(n))return l_.get(n);let e=Jj(n);return e!==n&&(l_.set(n,e),Fw.set(e,n)),e}o(Es,"wrap$1");var d_=o(n=>Fw.get(n),"unwrap$1");function Zj(n,e){let{blocked:t,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=indexedDB.open(n,e),u=Es(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Es(a.result),l.oldVersion,l.newVersion,Es(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),u.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),u}o(Zj,"openDB");var Qj=["get","getKey","getAll","getAllKeys","count"],eW=["put","add","delete","clear"],f_=new Map;function k1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(f_.get(e))return f_.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=eW.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Qj.includes(t)))return;let s=o(function(u){return pt(this,arguments,function*(a){let l=this.transaction(a,i?"readwrite":"readonly"),c=l.store;for(var d=arguments.length,f=new Array(d>1?d-1:0),h=1;h<d;h++)f[h-1]=arguments[h];return r&&(c=c.index(f.shift())),(yield Promise.all([c[t](...f),i&&l.done]))[0]})},"method");return f_.set(e,s),s}o(k1,"getMethod");Yj(n=>os(Rt({},n),{get:o((e,t,r)=>k1(e,t)||n.get(e,t,r),"get"),has:o((e,t)=>!!k1(e,t)||n.has(e,t),"has")}));var Ia,hh,ln,el,gh,ph,jh,k_,F_,tl=100,F1="next",tW="prev",dE=class dE{constructor(e){let{dbName:t,tableName:r,version:i,indices:s,cursorToRecord:a,propertyKey:u}=e;Ia.add(this),hh.set(this,void 0),ln.set(this,void 0),el.set(this,void 0),gh.set(this,void 0),ph.set(this,void 0),jh.set(this,void 0),ye(this,hh,t,"f"),ye(this,ln,r,"f"),ye(this,gh,i,"f"),ye(this,ph,s,"f"),ye(this,jh,a,"f"),ye(this,el,u,"f")}open(){return ge(this,void 0,void 0,function*(){let e=O(this,ln,"f"),t=O(this,ph,"f"),r={keyPath:O(this,el,"f"),autoIncrement:!O(this,el,"f")};return Zj(O(this,hh,"f"),O(this,gh,"f"),{upgrade(i,s){if(s<1){let a=i.createObjectStore(e,r);for(let u of t)a.createIndex(u.name,u.field)}}})})}getAll(){return ge(this,arguments,void 0,function(){var e=this;let{maxRecords:t=tl,sortAsc:r=!0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){let i=yield e.open();try{let a=i.transaction(O(e,ln,"f")).objectStore(O(e,ln,"f"));return yield O(e,Ia,"m",k_).call(e,yield a.openCursor(null,r?F1:tW),t)}finally{i.close()}})()})}getByIndex(e,t){return ge(this,arguments,void 0,function(r,i){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tl,u=arguments.length>3?arguments[3]:void 0;return(function*(){let l=yield s.open();try{let d=l.transaction(O(s,ln,"f")).objectStore(O(s,ln,"f"));return yield O(s,Ia,"m",k_).call(s,yield d.index(r).openCursor(i),a,u)}finally{l.close()}})()})}put(e){return ge(this,void 0,void 0,function*(){let t=yield this.open();try{let i=t.transaction(O(this,ln,"f"),"readwrite").objectStore(O(this,ln,"f"));for(let s of e)yield i.put(s)}finally{t.close()}})}count(){return ge(this,void 0,void 0,function*(){let e=yield this.open();try{return yield e.count(O(this,ln,"f"))}finally{e.close()}})}delete(e){return ge(this,void 0,void 0,function*(){let t=yield this.open();try{yield t.delete(O(this,ln,"f"),e)}finally{t.close()}})}deleteMultiple(e){return ge(this,void 0,void 0,function*(){let t=yield this.open();try{let r=e.map(i=>t.delete(O(this,ln,"f"),i));yield Promise.all(r)}finally{t.close()}})}deleteByIndex(e,t){return ge(this,arguments,void 0,function(r,i){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tl;return(function*(){let u=yield s.open();try{let c=u.transaction(O(s,ln,"f"),"readwrite").objectStore(O(s,ln,"f"));return yield O(s,Ia,"m",F_).call(s,yield c.index(r).openCursor(i),a)}finally{u.close()}})()})}deleteRecords(){return ge(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tl;return(function*(){let r=yield e.open();try{let s=r.transaction(O(e,ln,"f"),"readwrite").objectStore(O(e,ln,"f"));return yield O(e,Ia,"m",F_).call(e,yield s.openCursor(null,F1),t)}finally{r.close()}})()})}};o(dE,"IndexedDB");var Wh=dE;hh=new WeakMap,ln=new WeakMap,el=new WeakMap,gh=new WeakMap,ph=new WeakMap,jh=new WeakMap,Ia=new WeakSet,k_=o(function(e){return ge(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tl,s=arguments.length>2?arguments[2]:void 0;return(function*(){let a=[];for(;t&&a.length<i;){let u=O(r,jh,"f").call(r,t);(!s||s(u))&&a.push(u),t=yield t.continue()}return a})()})},"_IndexedDB_mapCursorToRecords"),F_=o(function(e,t){return ge(this,void 0,void 0,function*(){let r=0;for(;e&&r<t;)yield e.delete(),r++,e=yield e.continue();return r})},"_IndexedDB_deleteWithCursor");var nW=1,fE=class fE extends Wh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lP;super({dbName:e,tableName:Mj,cursorToRecord:o(t=>new x_(t.primaryKey,t.value.log,t.value.logType,t.value.transportId),"cursorToRecord"),indices:[{name:dP,field:fP},{name:Fj,field:Vj}],version:nW})}getByTransportId(e,t){return ge(this,void 0,void 0,function*(){return this.getByIndex("byTransportId",e,t)})}getByLogType(e,t){return ge(this,void 0,void 0,function*(){return this.getByIndex("byLogType",e,t)})}putLog(e,t){return ge(this,void 0,void 0,function*(){return this.put([{log:e,logType:e.type,transportId:t}])})}deleteByLogType(e,t){return ge(this,void 0,void 0,function*(){return this.deleteByIndex("byLogType",e,t)})}};o(fE,"LogsIndexedDB");var $_=fE,Kr,rW=200,iW=1e4,hE=class hE{constructor(e){let{databaseName:t,database:r=new $_(t)}=e;Kr.set(this,void 0),ye(this,Kr,r,"f")}readLogs(e){return ge(this,void 0,void 0,function*(){return O(this,Kr,"f").getAll({sortAsc:!0,maxRecords:e})})}readLogsByTransport(e,t){return ge(this,void 0,void 0,function*(){return O(this,Kr,"f").getByTransportId(e,t)})}removeLogs(e){return ge(this,void 0,void 0,function*(){return O(this,Kr,"f").deleteMultiple(e)})}insertLog(e,t){return ge(this,void 0,void 0,function*(){return O(this,Kr,"f").putLog(e,t)})}countLogs(){return ge(this,void 0,void 0,function*(){return O(this,Kr,"f").count()})}isFull(){return ge(this,void 0,void 0,function*(){return(yield O(this,Kr,"f").count())>=iW})}discardLogs(){return ge(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rW;return(function*(){let r=Object.keys(Je).filter(s=>isNaN(Number(s))),i=t;for(let s of r){let a=Uj[s],u=yield O(e,Kr,"f").deleteByLogType(a,i);if(i-=u,i<=0)break}return i})()})}};o(hE,"LogsStorage");var B_=hE;Kr=new WeakMap;var mt;(function(n){n.IsAggregateProxy="outsystems.aggregation.proxy",n.AggregationSize="outsystems.aggregation.size",n.IsOutlier="outsystems.aggregation.outlier",n.AverageDuration="outsystems.aggregation.duration.average",n.MaxDuration="outsystems.aggregation.duration.max",n.MinDuration="outsystems.aggregation.duration.min",n.IsNonAggregable="osinternal.spanIsNonAggregable",n.ChildrenNames="osinternal.childrenNames",n.functionKey="outsystems.function.key"})(mt||(mt={}));var sW="NonAggregable";function oW(n,e){return n<e?-1:e<n?1:0}o(oW,"compareStrings");function aW(n){return n.attributes[mt.functionKey]}o(aW,"defaultGetSpanObjectId");function pP(n,e,t){var r;let i=n.name,s=t==null?void 0:t(n),a=(r=n.attributes[mt.ChildrenNames])!==null&&r!==void 0?r:[];return a.sort(oW),`${n.attributes[mt.IsNonAggregable]?`${sW}.`:""}${e}.${i}.${s}(${a.join(",")})`}o(pP,"makeAggregateSignature");function uW(n,e){return!(n.attributes[mt.IsNonAggregable]||e.some(t=>t.attributes[mt.IsNonAggregable]))}o(uW,"canAggregateSpan");var V_={absolute:o((n,e)=>{let{min:t,max:r}=n,i=typeof t=="number"&&e<t,s=typeof r=="number"&&e>r;return i||s},"absolute"),relative:o((n,e,t)=>{let{min:r,max:i}=n;return V_.absolute({min:typeof r=="number"?t+r:void 0,max:typeof i=="number"?t+i:void 0},e)},"relative"),ratio:o((n,e,t)=>{let{lower:r,upper:i,max:s,min:a}=n;return V_.relative({min:typeof r=="number"?Math.min(t*r,a!=null?a:1/0):void 0,max:typeof i=="number"?Math.max(t*i,s!=null?s:-1/0):void 0},e,t)},"ratio")};function cW(n,e,t){return V_[n.type](n,e,t)}o(cW,"applyThreshold");var mh,gE=class gE{constructor(e){mh.set(this,void 0),ye(this,mh,e,"f")}isOutlier(e,t){for(let[r,i]of Object.entries(O(this,mh,"f"))){let s=e.attributes[r],a=t.attributes[r];if(!(s===void 0&&a===void 0)&&(s===void 0||a===void 0||cW(i,s,a)))return!0}return!1}};o(gE,"ThresholdOutlierDetector");var H_=gE;mh=new WeakMap;var gs,_i,vh,Gh,mP,vP,yP,_P,wP,EP,pE=class pE{constructor(e){let{storage:t,outlierDetector:r=new H_({[mt.AverageDuration]:{type:"ratio",upper:.1,max:5e7}}),getSpanObjectId:i=aW}=e;gs.add(this),_i.set(this,void 0),vh.set(this,void 0),Gh.set(this,void 0),ye(this,_i,t,"f"),ye(this,vh,r,"f"),ye(this,Gh,i,"f")}aggregate(e,t){return ge(this,void 0,void 0,function*(){let r=yield O(this,_i,"f").readSpansByParentId(e.spanId),i=O(this,gs,"m",yP).call(this,e);if(!uW(i,r)){yield O(this,_i,"f").insertSpans([O(this,gs,"m",wP).call(this,i)],t);return}let a=yield O(this,gs,"m",mP).call(this,i,t);if(!a)yield O(this,_i,"f").insertSpans([i],t);else if(O(this,vh,"f").isOutlier(i,a))yield O(this,_i,"f").insertSpans([O(this,gs,"m",_P).call(this,i)],t);else{let u=O(this,gs,"m",vP).call(this,e,a),l=O(this,gs,"m",EP).call(this,r,u);yield O(this,_i,"f").insertSpans([u,...l],t)}})}};o(pE,"SpanAggregator");var j_=pE;_i=new WeakMap,vh=new WeakMap,Gh=new WeakMap,gs=new WeakSet,mP=o(function(e,t){return ge(this,void 0,void 0,function*(){let r=pP(e,t,O(this,Gh,"f")),[i]=yield O(this,_i,"f").readSpansByAggregateSignature(r);return i})},"_SpanAggregator_findProxy"),vP=o(function(e,t){var r;let i=(r=t.attributes[mt.AggregationSize])!==null&&r!==void 0?r:1,s=t.attributes[mt.AverageDuration],a=t.attributes[mt.MaxDuration],u=t.attributes[mt.MinDuration],l=e.endTimeUnixNano-e.startTimeUnixNano;return Object.assign(Object.assign({},t),{attributes:Object.assign(Object.assign({},t.attributes),{[mt.IsAggregateProxy]:!0,[mt.AggregationSize]:i+1,[mt.AverageDuration]:(s*i+l)/(i+1),[mt.MaxDuration]:Math.max(a,l),[mt.MinDuration]:Math.min(u,l)}),parentSpanId:t.parentSpanId===e.spanId?e.parentSpanId:t.parentSpanId})},"_SpanAggregator_updateProxy"),yP=o(function(e){let t=e.endTimeUnixNano-e.startTimeUnixNano;return Object.assign(Object.assign({},e),{attributes:Object.assign(Object.assign({},e.attributes),{[mt.IsAggregateProxy]:!1,[mt.AverageDuration]:t,[mt.MaxDuration]:t,[mt.MinDuration]:t})})},"_SpanAggregator_createEnrichedSpan"),_P=o(function(e){return Object.assign(Object.assign({},e),{attributes:Object.assign(Object.assign({},e.attributes),{[mt.IsOutlier]:!0,[mt.IsNonAggregable]:!0})})},"_SpanAggregator_toOutlierSpan"),wP=o(function(e){return Object.assign(Object.assign({},e),{attributes:Object.assign(Object.assign({},e.attributes),{[mt.IsNonAggregable]:!0})})},"_SpanAggregator_toNonAggregableSpan"),EP=o(function(e,t){return e.flatMap(r=>r.spanId!==t.spanId?[Object.assign(Object.assign({},r),{parentSpanId:t.spanId})]:[])},"_SpanAggregator_adopt");var mE=class mE{constructor(e){let{spanId:t,span:r,transportId:i,aggregateSignature:s}=e;this.spanId=t,this.span=r,this.transportId=i,this.parentId=r.parentSpanId,this.aggregateSignature=s!=null?s:""}};o(mE,"SpanRecord");var W_=mE,G_,TP,lW=1,vE=class vE extends Wh{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lP,t=arguments.length>1?arguments[1]:void 0;super({dbName:e,tableName:kj,version:lW,propertyKey:t,cursorToRecord:o(r=>new W_({spanId:r.primaryKey,span:r.value.span,transportId:r.value.transportId,aggregateSignature:r.value.aggregateSignature}),"cursorToRecord"),indices:[{name:dP,field:fP},{name:$j,field:Hj},{name:Bj,field:jj}]}),G_.add(this)}getByAggregateSignature(e,t){return this.getByIndex("byAggregateSignature",e,t)}getByParentId(e,t){return this.getByIndex("byParentId",e,t)}getByTransportId(e,t){return this.getByIndex("byTransportId",e,t)}getTopLevelByTransportId(e,t){return this.getByIndex("byTransportId",e,t,r=>r.parentId===void 0)}putSpans(e,t){return this.put(e.map(r=>O(this,G_,"m",TP).call(this,r,t)))}};o(vE,"TracesIndexedDB");var zh=vE;G_=new WeakSet,TP=o(function(e,t){return{span:e,transportId:t,spanId:e.spanId,aggregateSignature:pP(e,t,r=>r.attributes["outsystems.function.key"]),parentId:e.parentSpanId}},"_TracesIndexedDB_spanToRecord");var $n,dW=200,fW=1e4,yE=class yE{constructor(e){let{databaseName:t,autoincrement:r=!0,database:i=r?new zh(t):new zh(t,"spanId")}=e;$n.set(this,void 0),ye(this,$n,i,"f")}readSpans(e){return ge(this,void 0,void 0,function*(){return O(this,$n,"f").getAll({sortAsc:!0,maxRecords:e})})}readSpansByTransport(e,t){return ge(this,void 0,void 0,function*(){let r=yield O(this,$n,"f").getTopLevelByTransportId(e,t);return r.length>0?r:O(this,$n,"f").getByTransportId(e,t)})}readSpansByParentId(e,t){return ge(this,void 0,void 0,function*(){return O(this,$n,"f").getByParentId(e,t)})}readSpansByAggregateSignature(e,t){return ge(this,void 0,void 0,function*(){return O(this,$n,"f").getByAggregateSignature(e,t)})}removeSpans(e){return ge(this,void 0,void 0,function*(){return O(this,$n,"f").deleteMultiple(e)})}insertSpan(e,t){return ge(this,void 0,void 0,function*(){return O(this,$n,"f").putSpans([e],t)})}insertSerializableSpans(e,t){return ge(this,void 0,void 0,function*(){return O(this,$n,"f").putSpans(e,t)})}countSpans(){return ge(this,void 0,void 0,function*(){return O(this,$n,"f").count()})}isFull(){return ge(this,void 0,void 0,function*(){return(yield O(this,$n,"f").count())>=fW})}discardSpans(){return ge(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dW;return(function*(){return O(e,$n,"f").deleteRecords(t)})()})}};o(yE,"TracesStorage");var qh=yE;$n=new WeakMap;function hW(n){return new j_({storage:{insertSpans:o((e,t)=>ge(this,void 0,void 0,function*(){yield n.insertSerializableSpans(e,t)}),"insertSpans"),readSpansByAggregateSignature:o(e=>ge(this,void 0,void 0,function*(){return(yield n.readSpansByAggregateSignature(e)).map(r=>r.span)}),"readSpansByAggregateSignature"),readSpansByParentId:o(e=>ge(this,void 0,void 0,function*(){return(yield n.readSpansByParentId(e)).map(r=>r.span)}),"readSpansByParentId")},getSpanObjectId:o(e=>e.attributes["outsystems.function.key"],"getSpanObjectId")})}o(hW,"makeSpanAggregator");var Yr,ps,yh,nl,rl,il,_h,Ca,sl,h_=100,g_=1e3,gW=new Hh,pW=new Hh,mW="logs",vW="spans_v2",yW="spans",_E=class _E{constructor(e){let{databaseNameSuffix:t,isOnline:r=o(()=>!0,"isOnline"),offlineLogsStorage:i=new B_({databaseName:`${mW}-${t}`}),offlineTracesStorage:s=new qh({databaseName:`${vW}-${t}`,autoincrement:!1}),legacyOfflineTracesStorage:a=new qh({databaseName:`${yW}-${t}`}),flushLegacyTraces:u=!1,aggregateSpans:l=!1,spanAggregator:c=hW(s),mutexDispatchLogs:d=gW,mutexDispatchSpans:f=pW}=e;Yr.set(this,void 0),ps.set(this,void 0),yh.set(this,void 0),nl.set(this,!0),rl.set(this,void 0),il.set(this,void 0),_h.set(this,void 0),Ca.set(this,void 0),sl.set(this,void 0),ye(this,Yr,i,"f"),ye(this,ps,s,"f"),ye(this,yh,a,"f"),ye(this,rl,r,"f"),ye(this,nl,u,"f"),ye(this,il,l,"f"),ye(this,_h,c,"f"),ye(this,sl,d,"f"),ye(this,Ca,f,"f")}setAggregateSpansStatus(e){ye(this,il,e,"f")}writeLog(e,t){return ge(this,arguments,void 0,function(r,i){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h_;return(function*(){try{(yield O(s,Yr,"f").isFull())&&(yield O(s,Yr,"f").discardLogs()),yield O(s,Yr,"f").insertLog(r,i.getTransportId()),(yield O(s,Yr,"f").countLogs())>=a&&(yield s.flushTransportLogs(i))}catch(u){console.debug("Error writing log to storage",u)}})()})}writeSpan(e,t){return ge(this,arguments,void 0,function(r,i){var s=this;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g_;return(function*(){try{(yield O(s,ps,"f").isFull())&&(yield O(s,ps,"f").discardSpans()),yield O(s,Ca,"f").runExclusive(()=>ge(s,void 0,void 0,function*(){O(this,il,"f")?yield O(this,_h,"f").aggregate(r,i.getTransportId()):yield O(this,ps,"f").insertSpan(r,i.getTransportId())})),(yield O(s,ps,"f").countSpans())>=a&&(yield s.flushTransportSpans(i))}catch(u){console.debug("Error writing trace to storage",u)}})()})}processTransportLogs(e){return ge(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h_;return(function*(){yield O(r,sl,"f").runExclusive(()=>ge(r,void 0,void 0,function*(){yield this.internalLogProcess(t,i,!0)}))})()})}flushTransportLogs(e){return ge(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h_;return(function*(){yield O(r,sl,"f").runExclusive(()=>ge(r,void 0,void 0,function*(){yield this.internalLogProcess(t,i,!1)}))})()})}internalLogProcess(e,t,r){return ge(this,void 0,void 0,function*(){if(!(e.requiresConnectivity()&&!O(this,rl,"f").call(this)))try{let i=r?t:1,s=yield O(this,Yr,"f").readLogsByTransport(e.getTransportId(),t);for(;s.length>=i;)yield e.writeAll(s.map(a=>a.log)),yield O(this,Yr,"f").removeLogs(s.map(a=>a.logId)),s=yield O(this,Yr,"f").readLogsByTransport(e.getTransportId(),t)}catch(i){throw console.debug("Error in internal log processing",i),i}})}processTransportSpans(e){return ge(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g_;return(function*(){yield O(r,Ca,"f").runExclusive(()=>ge(r,void 0,void 0,function*(){yield this.internalSpanProcess(t,i,!0)}))})()})}flushTransportSpans(e){return ge(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g_;return(function*(){yield O(r,Ca,"f").runExclusive(()=>ge(r,void 0,void 0,function*(){yield this.internalSpanProcess(t,i,!1)}))})()})}internalSpanProcess(e,t,r){return ge(this,void 0,void 0,function*(){if(!(e.requiresConnectivity()&&!O(this,rl,"f").call(this))){if(O(this,nl,"f"))try{let i=yield this.writeSpansToTransport({transport:e,spansBatchSize:t,storage:O(this,yh,"f"),processCompleteBatchOnly:!1});ye(this,nl,i>0,"f")}catch(i){console.warn("Error in processing legacy spans",i)}yield this.writeSpansToTransport({transport:e,spansBatchSize:t,processCompleteBatchOnly:r,storage:O(this,ps,"f")})}})}writeSpansToTransport(e){return ge(this,arguments,void 0,function(t){let{transport:r,spansBatchSize:i,processCompleteBatchOnly:s,storage:a}=t;return(function*(){try{let u=s?i:1,l=yield a.readSpansByTransport(r.getTransportId(),i);if(l.length===0)return 0;for(;l.length>=u;)yield r.writeAll(l.map(c=>c.span)),yield a.removeSpans(l.map(c=>c.spanId)),l=yield a.readSpansByTransport(r.getTransportId(),i);return yield a.countSpans()}catch(u){throw console.debug("Error processing spans",u),u}})()})}};o(_E,"OfflineManager");var z_=_E;Yr=new WeakMap,ps=new WeakMap,yh=new WeakMap,nl=new WeakMap,rl=new WeakMap,il=new WeakMap,_h=new WeakMap,Ca=new WeakMap,sl=new WeakMap;var _W=6e4,wE=class wE{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_W;this.timerInterval=e,this.tasksToRun=new Map}scheduleNextRun(){this.currentTaskTimeout&&clearTimeout(this.currentTaskTimeout),this.currentTaskTimeout=setTimeout(()=>this.runTask(),this.timerInterval)}runTask(){return ge(this,void 0,void 0,function*(){if(this.currentTaskTimeout){this.stop();let t=Array.from(this.tasksToRun.values()).map(r=>r());yield Promise.all(t),this.scheduleNextRun()}})}start(){this.scheduleNextRun()}stop(){this.currentTaskTimeout&&(clearTimeout(this.currentTaskTimeout),this.currentTaskTimeout=void 0)}addTask(e,t){this.tasksToRun.set(e,t)}deleteTask(e){this.tasksToRun.delete(e)}getTask(e){return this.tasksToRun.get(e)}setTimerInterval(e){this.timerInterval=e,this.start()}};o(wE,"TaskScheduler");var q_=wE,EE=class EE{constructor(e){let{logTransports:t=[],traceTransports:r=[],databaseNameSuffix:i,isOnline:s,aggregateSpans:a,offlineManager:u=new z_({databaseNameSuffix:i,isOnline:s,flushLegacyTraces:!0,aggregateSpans:a}),taskScheduler:l=new q_,circuitBreakerRunner:c=new D_}=e;this.logTransports=t,this.traceTransports=r,this.offlineManager=u,this.taskScheduler=l,this.circuitBreakerRunner=c,this.taskScheduler.addTask("flush-logs",()=>ge(this,void 0,void 0,function*(){return this.flushLogs()})),this.taskScheduler.addTask("flush-spans",()=>ge(this,void 0,void 0,function*(){return this.flushSpans()})),this.taskScheduler.start()}addLogTransport(e){let t=e.getTransportId(),r=o(i=>i.getTransportId()===t,"predicate");this.logTransports.some(r)||this.logTransports.push(e)}addTraceTransport(e){let t=e.getTransportId(),r=o(i=>i.getTransportId()===t,"predicate");this.traceTransports.some(r)||this.traceTransports.push(e)}removeLogTransport(e){let t=o(i=>i.getTransportId()===e,"predicate"),r=this.logTransports.findIndex(t);r!==-1&&(this.logTransports.splice(r,1),this.circuitBreakerRunner.closeCircuit(e))}removeTraceTransport(e){let t=o(i=>i.getTransportId()===e,"predicate"),r=this.traceTransports.findIndex(t);r!==-1&&(this.traceTransports.splice(r,1),this.circuitBreakerRunner.closeCircuit(e))}setAllLogTypeBaselines(e){for(let t of this.logTransports)t.setLogTypeBaseline(e)}setTagId(e){var t,r;for(let i of this.traceTransports)(t=i.setTagId)===null||t===void 0||t.call(i,e);for(let i of this.logTransports)(r=i.setTagId)===null||r===void 0||r.call(i,e)}setResourceAttributes(e){var t,r;for(let i of this.traceTransports)(t=i.setResourceAttributes)===null||t===void 0||t.call(i,e);for(let i of this.logTransports)(r=i.setResourceAttributes)===null||r===void 0||r.call(i,e)}enableTracing(){for(let e of this.traceTransports)e.enableTracing()}disableTracing(){for(let e of this.traceTransports)e.disableTracing()}flushLogs(){return ge(this,void 0,void 0,function*(){let e=this.logTransports.map(t=>ge(this,void 0,void 0,function*(){let r=t.getTransportId();yield this.circuitBreakerRunner.run(r,()=>this.offlineManager.flushTransportLogs(t))}));yield Promise.all(e)})}flushSpans(){return ge(this,void 0,void 0,function*(){let e=this.traceTransports.map(t=>ge(this,void 0,void 0,function*(){let r=t.getTransportId();yield this.circuitBreakerRunner.run(r,()=>!t.hasWriteBuffer()&&typeof t.flush=="function"?t.flush():this.offlineManager.flushTransportSpans(t))}));yield Promise.all(e)})}processLog(e){return ge(this,void 0,void 0,function*(){let t=this.logTransports.filter(r=>r.getLogTypeBaseline()<=e.type);for(let r of t)if(r.hasWriteBuffer())yield this.offlineManager.writeLog(e,r);else{let i=r.getTransportId();(yield this.circuitBreakerRunner.run(i,()=>r.write(e)))!==0&&(yield this.offlineManager.writeLog(e,r))}})}processSpan(e){return ge(this,void 0,void 0,function*(){let t=this.traceTransports.filter(r=>r.isTracingEnabled());for(let r of t)if(r.hasWriteBuffer())yield this.offlineManager.writeSpan(e,r);else{let i=r.getTransportId();(yield this.circuitBreakerRunner.run(i,()=>r.write(e)))!==0&&(yield this.offlineManager.writeSpan(e,r))}})}setSchedulerTimerInterval(e){this.taskScheduler.setTimerInterval(e)}setAggregateSpansStatus(e){this.offlineManager.setAggregateSpansStatus(e)}};o(EE,"TransportManager");var wl=EE,K_;(function(n){n[n.Internal=0]="Internal",n[n.External=1]="External",n[n.Client=2]="Client"})(K_||(K_={}));var Re=K_,wW=typeof $a=="object"&&$a&&$a.Object===Object&&$a,bP=wW,EW=bP,TW=typeof self=="object"&&self&&self.Object===Object&&self,bW=EW||TW||Function("return this")(),Ci=bW,SW=Ci,AW=SW.Symbol,Eg=AW,$1=Eg,SP=Object.prototype,IW=SP.hasOwnProperty,CW=SP.toString,Jc=$1?$1.toStringTag:void 0;function RW(n){var e=IW.call(n,Jc),t=n[Jc];try{n[Jc]=void 0;var r=!0}catch(s){}var i=CW.call(n);return r&&(e?n[Jc]=t:delete n[Jc]),i}o(RW,"getRawTag$1");var OW=RW,PW=Object.prototype,NW=PW.toString;function DW(n){return NW.call(n)}o(DW,"objectToString$1");var LW=DW,B1=Eg,xW=OW,UW=LW,MW="[object Null]",kW="[object Undefined]",V1=B1?B1.toStringTag:void 0;function FW(n){return n==null?n===void 0?kW:MW:V1&&V1 in Object(n)?xW(n):UW(n)}o(FW,"baseGetTag$5");var Il=FW;function $W(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}o($W,"isObject$5");var Cl=$W,BW=Il,VW=Cl,HW="[object AsyncFunction]",jW="[object Function]",WW="[object GeneratorFunction]",GW="[object Proxy]";function zW(n){if(!VW(n))return!1;var e=BW(n);return e==jW||e==WW||e==HW||e==GW}o(zW,"isFunction$3");var AP=zW,qW=Ci,KW=qW["__core-js_shared__"],YW=KW,p_=YW,H1=(function(){var n=/[^.]+$/.exec(p_&&p_.keys&&p_.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function XW(n){return!!H1&&H1 in n}o(XW,"isMasked$1");var JW=XW,ZW=Function.prototype,QW=ZW.toString;function e6(n){if(n!=null){try{return QW.call(n)}catch(e){}try{return n+""}catch(e){}}return""}o(e6,"toSource$2");var IP=e6,t6=AP,n6=JW,r6=Cl,i6=IP,s6=/[\\^$.*+?()[\]{}|]/g,o6=/^\[object .+?Constructor\]$/,a6=Function.prototype,u6=Object.prototype,c6=a6.toString,l6=u6.hasOwnProperty,d6=RegExp("^"+c6.call(l6).replace(s6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f6(n){if(!r6(n)||n6(n))return!1;var e=t6(n)?d6:o6;return e.test(i6(n))}o(f6,"baseIsNative$1");var h6=f6;function g6(n,e){return n==null?void 0:n[e]}o(g6,"getValue$1");var p6=g6,m6=h6,v6=p6;function y6(n,e){var t=v6(n,e);return m6(t)?t:void 0}o(y6,"getNative$7");var To=y6,_6=To,w6=(function(){try{var n=_6(Object,"defineProperty");return n({},"",{}),n}catch(e){}})(),E6=w6,j1=E6;function T6(n,e,t){e=="__proto__"&&j1?j1(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}o(T6,"baseAssignValue$2");var CP=T6;function b6(n){return function(e,t,r){for(var i=-1,s=Object(e),a=r(e),u=a.length;u--;){var l=a[n?u:++i];if(t(s[l],l,s)===!1)break}return e}}o(b6,"createBaseFor$1");var S6=b6,A6=S6,I6=A6(),C6=I6;function R6(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}o(R6,"baseTimes$1");var O6=R6;function P6(n){return n!=null&&typeof n=="object"}o(P6,"isObjectLike$5");var Rl=P6,N6=Il,D6=Rl,L6="[object Arguments]";function x6(n){return D6(n)&&N6(n)==L6}o(x6,"baseIsArguments$1");var U6=x6,W1=U6,M6=Rl,RP=Object.prototype,k6=RP.hasOwnProperty,F6=RP.propertyIsEnumerable,$6=W1((function(){return arguments})())?W1:function(n){return M6(n)&&k6.call(n,"callee")&&!F6.call(n,"callee")},OP=$6,B6=Array.isArray,Ts=B6,Kh={exports:{}};function V6(){return!1}o(V6,"stubFalse");var H6=V6;Kh.exports;(function(n,e){var t=Ci,r=H6,i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,a=s&&s.exports===i,u=a?t.Buffer:void 0,l=u?u.isBuffer:void 0,c=l||r;n.exports=c})(Kh,Kh.exports);var PP=Kh.exports,j6=9007199254740991,W6=/^(?:0|[1-9]\d*)$/;function G6(n,e){var t=typeof n;return e=e==null?j6:e,!!e&&(t=="number"||t!="symbol"&&W6.test(n))&&n>-1&&n%1==0&&n<e}o(G6,"isIndex$3");var $w=G6,z6=9007199254740991;function q6(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=z6}o(q6,"isLength$3");var Bw=q6,K6=Il,Y6=Bw,X6=Rl,J6="[object Arguments]",Z6="[object Array]",Q6="[object Boolean]",eG="[object Date]",tG="[object Error]",nG="[object Function]",rG="[object Map]",iG="[object Number]",sG="[object Object]",oG="[object RegExp]",aG="[object Set]",uG="[object String]",cG="[object WeakMap]",lG="[object ArrayBuffer]",dG="[object DataView]",fG="[object Float32Array]",hG="[object Float64Array]",gG="[object Int8Array]",pG="[object Int16Array]",mG="[object Int32Array]",vG="[object Uint8Array]",yG="[object Uint8ClampedArray]",_G="[object Uint16Array]",wG="[object Uint32Array]",It={};It[fG]=It[hG]=It[gG]=It[pG]=It[mG]=It[vG]=It[yG]=It[_G]=It[wG]=!0;It[J6]=It[Z6]=It[lG]=It[Q6]=It[dG]=It[eG]=It[tG]=It[nG]=It[rG]=It[iG]=It[sG]=It[oG]=It[aG]=It[uG]=It[cG]=!1;function EG(n){return X6(n)&&Y6(n.length)&&!!It[K6(n)]}o(EG,"baseIsTypedArray$1");var TG=EG;function bG(n){return function(e){return n(e)}}o(bG,"baseUnary$1");var SG=bG,Yh={exports:{}};Yh.exports;(function(n,e){var t=bP,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,a=s&&t.process,u=(function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch(c){}})();n.exports=u})(Yh,Yh.exports);var AG=Yh.exports,IG=TG,CG=SG,G1=AG,z1=G1&&G1.isTypedArray,RG=z1?CG(z1):IG,NP=RG,OG=O6,PG=OP,NG=Ts,DG=PP,LG=$w,xG=NP,UG=Object.prototype,MG=UG.hasOwnProperty;function kG(n,e){var t=NG(n),r=!t&&PG(n),i=!t&&!r&&DG(n),s=!t&&!r&&!i&&xG(n),a=t||r||i||s,u=a?OG(n.length,String):[],l=u.length;for(var c in n)(e||MG.call(n,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||LG(c,l)))&&u.push(c);return u}o(kG,"arrayLikeKeys$2");var DP=kG,FG=Object.prototype;function $G(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||FG;return n===t}o($G,"isPrototype$2");var LP=$G;function BG(n,e){return function(t){return n(e(t))}}o(BG,"overArg$2");var xP=BG,VG=xP,HG=VG(Object.keys,Object),jG=HG,WG=LP,GG=jG,zG=Object.prototype,qG=zG.hasOwnProperty;function KG(n){if(!WG(n))return GG(n);var e=[];for(var t in Object(n))qG.call(n,t)&&t!="constructor"&&e.push(t);return e}o(KG,"baseKeys$1");var YG=KG,XG=AP,JG=Bw;function ZG(n){return n!=null&&JG(n.length)&&!XG(n)}o(ZG,"isArrayLike$2");var UP=ZG,QG=DP,e8=YG,t8=UP;function n8(n){return t8(n)?QG(n):e8(n)}o(n8,"keys$3");var Vw=n8,r8=C6,i8=Vw;function s8(n,e){return n&&r8(n,e,i8)}o(s8,"baseForOwn$1");var o8=s8;function a8(){this.__data__=[],this.size=0}o(a8,"listCacheClear$1");var u8=a8;function c8(n,e){return n===e||n!==n&&e!==e}o(c8,"eq$3");var Hw=c8,l8=Hw;function d8(n,e){for(var t=n.length;t--;)if(l8(n[t][0],e))return t;return-1}o(d8,"assocIndexOf$4");var Tg=d8,f8=Tg,h8=Array.prototype,g8=h8.splice;function p8(n){var e=this.__data__,t=f8(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():g8.call(e,t,1),--this.size,!0}o(p8,"listCacheDelete$1");var m8=p8,v8=Tg;function y8(n){var e=this.__data__,t=v8(e,n);return t<0?void 0:e[t][1]}o(y8,"listCacheGet$1");var _8=y8,w8=Tg;function E8(n){return w8(this.__data__,n)>-1}o(E8,"listCacheHas$1");var T8=E8,b8=Tg;function S8(n,e){var t=this.__data__,r=b8(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}o(S8,"listCacheSet$1");var A8=S8,I8=u8,C8=m8,R8=_8,O8=T8,P8=A8;function Ka(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}o(Ka,"ListCache$4");Ka.prototype.clear=I8;Ka.prototype.delete=C8;Ka.prototype.get=R8;Ka.prototype.has=O8;Ka.prototype.set=P8;var bg=Ka,N8=bg;function D8(){this.__data__=new N8,this.size=0}o(D8,"stackClear$1");var L8=D8;function x8(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}o(x8,"stackDelete$1");var U8=x8;function M8(n){return this.__data__.get(n)}o(M8,"stackGet$1");var k8=M8;function F8(n){return this.__data__.has(n)}o(F8,"stackHas$1");var $8=F8,B8=To,V8=Ci,H8=B8(V8,"Map"),jw=H8,j8=To,W8=j8(Object,"create"),Sg=W8,q1=Sg;function G8(){this.__data__=q1?q1(null):{},this.size=0}o(G8,"hashClear$1");var z8=G8;function q8(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}o(q8,"hashDelete$1");var K8=q8,Y8=Sg,X8="__lodash_hash_undefined__",J8=Object.prototype,Z8=J8.hasOwnProperty;function Q8(n){var e=this.__data__;if(Y8){var t=e[n];return t===X8?void 0:t}return Z8.call(e,n)?e[n]:void 0}o(Q8,"hashGet$1");var ez=Q8,tz=Sg,nz=Object.prototype,rz=nz.hasOwnProperty;function iz(n){var e=this.__data__;return tz?e[n]!==void 0:rz.call(e,n)}o(iz,"hashHas$1");var sz=iz,oz=Sg,az="__lodash_hash_undefined__";function uz(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=oz&&e===void 0?az:e,this}o(uz,"hashSet$1");var cz=uz,lz=z8,dz=K8,fz=ez,hz=sz,gz=cz;function Ya(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}o(Ya,"Hash$1");Ya.prototype.clear=lz;Ya.prototype.delete=dz;Ya.prototype.get=fz;Ya.prototype.has=hz;Ya.prototype.set=gz;var pz=Ya,K1=pz,mz=bg,vz=jw;function yz(){this.size=0,this.__data__={hash:new K1,map:new(vz||mz),string:new K1}}o(yz,"mapCacheClear$1");var _z=yz;function wz(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}o(wz,"isKeyable$1");var Ez=wz,Tz=Ez;function bz(n,e){var t=n.__data__;return Tz(e)?t[typeof e=="string"?"string":"hash"]:t.map}o(bz,"getMapData$4");var Ag=bz,Sz=Ag;function Az(n){var e=Sz(this,n).delete(n);return this.size-=e?1:0,e}o(Az,"mapCacheDelete$1");var Iz=Az,Cz=Ag;function Rz(n){return Cz(this,n).get(n)}o(Rz,"mapCacheGet$1");var Oz=Rz,Pz=Ag;function Nz(n){return Pz(this,n).has(n)}o(Nz,"mapCacheHas$1");var Dz=Nz,Lz=Ag;function xz(n,e){var t=Lz(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}o(xz,"mapCacheSet$1");var Uz=xz,Mz=_z,kz=Iz,Fz=Oz,$z=Dz,Bz=Uz;function Xa(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}o(Xa,"MapCache$3");Xa.prototype.clear=Mz;Xa.prototype.delete=kz;Xa.prototype.get=Fz;Xa.prototype.has=$z;Xa.prototype.set=Bz;var Ww=Xa,Vz=bg,Hz=jw,jz=Ww,Wz=200;function Gz(n,e){var t=this.__data__;if(t instanceof Vz){var r=t.__data__;if(!Hz||r.length<Wz-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new jz(r)}return t.set(n,e),this.size=t.size,this}o(Gz,"stackSet$1");var zz=Gz,qz=bg,Kz=L8,Yz=U8,Xz=k8,Jz=$8,Zz=zz;function Ja(n){var e=this.__data__=new qz(n);this.size=e.size}o(Ja,"Stack$2");Ja.prototype.clear=Kz;Ja.prototype.delete=Yz;Ja.prototype.get=Xz;Ja.prototype.has=Jz;Ja.prototype.set=Zz;var MP=Ja,Qz="__lodash_hash_undefined__";function e5(n){return this.__data__.set(n,Qz),this}o(e5,"setCacheAdd$1");var t5=e5;function n5(n){return this.__data__.has(n)}o(n5,"setCacheHas$1");var r5=n5,i5=Ww,s5=t5,o5=r5;function Xh(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new i5;++e<t;)this.add(n[e])}o(Xh,"SetCache$1");Xh.prototype.add=Xh.prototype.push=s5;Xh.prototype.has=o5;var a5=Xh;function u5(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}o(u5,"arraySome$1");var c5=u5;function l5(n,e){return n.has(e)}o(l5,"cacheHas$1");var d5=l5,f5=a5,h5=c5,g5=d5,p5=1,m5=2;function v5(n,e,t,r,i,s){var a=t&p5,u=n.length,l=e.length;if(u!=l&&!(a&&l>u))return!1;var c=s.get(n),d=s.get(e);if(c&&d)return c==e&&d==n;var f=-1,h=!0,g=t&m5?new f5:void 0;for(s.set(n,e),s.set(e,n);++f<u;){var p=n[f],m=e[f];if(r)var w=a?r(m,p,f,e,n,s):r(p,m,f,n,e,s);if(w!==void 0){if(w)continue;h=!1;break}if(g){if(!h5(e,function(E,_){if(!g5(g,_)&&(p===E||i(p,E,t,r,s)))return g.push(_)})){h=!1;break}}else if(!(p===m||i(p,m,t,r,s))){h=!1;break}}return s.delete(n),s.delete(e),h}o(v5,"equalArrays$2");var kP=v5,y5=Ci,_5=y5.Uint8Array,w5=_5;function E5(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}o(E5,"mapToArray$1");var T5=E5;function b5(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}o(b5,"setToArray$1");var S5=b5,Y1=Eg,X1=w5,A5=Hw,I5=kP,C5=T5,R5=S5,O5=1,P5=2,N5="[object Boolean]",D5="[object Date]",L5="[object Error]",x5="[object Map]",U5="[object Number]",M5="[object RegExp]",k5="[object Set]",F5="[object String]",$5="[object Symbol]",B5="[object ArrayBuffer]",V5="[object DataView]",J1=Y1?Y1.prototype:void 0,m_=J1?J1.valueOf:void 0;function H5(n,e,t,r,i,s,a){switch(t){case V5:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case B5:return!(n.byteLength!=e.byteLength||!s(new X1(n),new X1(e)));case N5:case D5:case U5:return A5(+n,+e);case L5:return n.name==e.name&&n.message==e.message;case M5:case F5:return n==e+"";case x5:var u=C5;case k5:var l=r&O5;if(u||(u=R5),n.size!=e.size&&!l)return!1;var c=a.get(n);if(c)return c==e;r|=P5,a.set(n,e);var d=I5(u(n),u(e),r,i,s,a);return a.delete(n),d;case $5:if(m_)return m_.call(n)==m_.call(e)}return!1}o(H5,"equalByTag$1");var j5=H5;function W5(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}o(W5,"arrayPush$2");var FP=W5,G5=FP,z5=Ts;function q5(n,e,t){var r=e(n);return z5(n)?r:G5(r,t(n))}o(q5,"baseGetAllKeys$2");var $P=q5;function K5(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var a=n[t];e(a,t,n)&&(s[i++]=a)}return s}o(K5,"arrayFilter$1");var Y5=K5;function X5(){return[]}o(X5,"stubArray$2");var BP=X5,J5=Y5,Z5=BP,Q5=Object.prototype,e9=Q5.propertyIsEnumerable,Z1=Object.getOwnPropertySymbols,t9=Z1?function(n){return n==null?[]:(n=Object(n),J5(Z1(n),function(e){return e9.call(n,e)}))}:Z5,VP=t9,n9=$P,r9=VP,i9=Vw;function s9(n){return n9(n,i9,r9)}o(s9,"getAllKeys$1");var o9=s9,Q1=o9,a9=1,u9=Object.prototype,c9=u9.hasOwnProperty;function l9(n,e,t,r,i,s){var a=t&a9,u=Q1(n),l=u.length,c=Q1(e),d=c.length;if(l!=d&&!a)return!1;for(var f=l;f--;){var h=u[f];if(!(a?h in e:c9.call(e,h)))return!1}var g=s.get(n),p=s.get(e);if(g&&p)return g==e&&p==n;var m=!0;s.set(n,e),s.set(e,n);for(var w=a;++f<l;){h=u[f];var E=n[h],_=e[h];if(r)var T=a?r(_,E,h,e,n,s):r(E,_,h,n,e,s);if(!(T===void 0?E===_||i(E,_,t,r,s):T)){m=!1;break}w||(w=h=="constructor")}if(m&&!w){var R=n.constructor,D=e.constructor;R!=D&&"constructor"in n&&"constructor"in e&&!(typeof R=="function"&&R instanceof R&&typeof D=="function"&&D instanceof D)&&(m=!1)}return s.delete(n),s.delete(e),m}o(l9,"equalObjects$1");var d9=l9,f9=To,h9=Ci,g9=f9(h9,"DataView"),p9=g9,m9=To,v9=Ci,y9=m9(v9,"Promise"),_9=y9,w9=To,E9=Ci,T9=w9(E9,"Set"),b9=T9,S9=To,A9=Ci,I9=S9(A9,"WeakMap"),C9=I9,Y_=p9,X_=jw,J_=_9,Z_=b9,Q_=C9,HP=Il,Za=IP,eO="[object Map]",R9="[object Object]",tO="[object Promise]",nO="[object Set]",rO="[object WeakMap]",iO="[object DataView]",O9=Za(Y_),P9=Za(X_),N9=Za(J_),D9=Za(Z_),L9=Za(Q_),co=HP;(Y_&&co(new Y_(new ArrayBuffer(1)))!=iO||X_&&co(new X_)!=eO||J_&&co(J_.resolve())!=tO||Z_&&co(new Z_)!=nO||Q_&&co(new Q_)!=rO)&&(co=o(function(n){var e=HP(n),t=e==R9?n.constructor:void 0,r=t?Za(t):"";if(r)switch(r){case O9:return iO;case P9:return eO;case N9:return tO;case D9:return nO;case L9:return rO}return e},"getTag$1"));var x9=co,v_=MP,U9=kP,M9=j5,k9=d9,sO=x9,oO=Ts,aO=PP,F9=NP,$9=1,uO="[object Arguments]",cO="[object Array]",rh="[object Object]",B9=Object.prototype,lO=B9.hasOwnProperty;function V9(n,e,t,r,i,s){var a=oO(n),u=oO(e),l=a?cO:sO(n),c=u?cO:sO(e);l=l==uO?rh:l,c=c==uO?rh:c;var d=l==rh,f=c==rh,h=l==c;if(h&&aO(n)){if(!aO(e))return!1;a=!0,d=!1}if(h&&!d)return s||(s=new v_),a||F9(n)?U9(n,e,t,r,i,s):M9(n,e,l,t,r,i,s);if(!(t&$9)){var g=d&&lO.call(n,"__wrapped__"),p=f&&lO.call(e,"__wrapped__");if(g||p){var m=g?n.value():n,w=p?e.value():e;return s||(s=new v_),i(m,w,t,r,s)}}return h?(s||(s=new v_),k9(n,e,t,r,i,s)):!1}o(V9,"baseIsEqualDeep$1");var H9=V9,j9=H9,dO=Rl;function jP(n,e,t,r,i){return n===e?!0:n==null||e==null||!dO(n)&&!dO(e)?n!==n&&e!==e:j9(n,e,t,r,jP,i)}o(jP,"baseIsEqual$2");var WP=jP,W9=MP,G9=WP,z9=1,q9=2;function K9(n,e,t,r){var i=t.length,s=i,a=!r;if(n==null)return!s;for(n=Object(n);i--;){var u=t[i];if(a&&u[2]?u[1]!==n[u[0]]:!(u[0]in n))return!1}for(;++i<s;){u=t[i];var l=u[0],c=n[l],d=u[1];if(a&&u[2]){if(c===void 0&&!(l in n))return!1}else{var f=new W9;if(r)var h=r(c,d,l,n,e,f);if(!(h===void 0?G9(d,c,z9|q9,r,f):h))return!1}}return!0}o(K9,"baseIsMatch$1");var Y9=K9,X9=Cl;function J9(n){return n===n&&!X9(n)}o(J9,"isStrictComparable$2");var GP=J9,Z9=GP,Q9=Vw;function eq(n){for(var e=Q9(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,Z9(i)]}return e}o(eq,"getMatchData$1");var tq=eq;function nq(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}o(nq,"matchesStrictComparable$2");var zP=nq,rq=Y9,iq=tq,sq=zP;function oq(n){var e=iq(n);return e.length==1&&e[0][2]?sq(e[0][0],e[0][1]):function(t){return t===n||rq(t,n,e)}}o(oq,"baseMatches$1");var aq=oq,uq=Il,cq=Rl,lq="[object Symbol]";function dq(n){return typeof n=="symbol"||cq(n)&&uq(n)==lq}o(dq,"isSymbol$3");var Gw=dq,fq=Ts,hq=Gw,gq=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pq=/^\w*$/;function mq(n,e){if(fq(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||hq(n)?!0:pq.test(n)||!gq.test(n)||e!=null&&n in Object(e)}o(mq,"isKey$3");var zw=mq,qP=Ww,vq="Expected a function";function qw(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(vq);var t=o(function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var a=n.apply(this,r);return t.cache=s.set(i,a)||s,a},"memoized");return t.cache=new(qw.Cache||qP),t}o(qw,"memoize$1");qw.Cache=qP;var yq=qw,_q=yq,wq=500;function Eq(n){var e=_q(n,function(r){return t.size===wq&&t.clear(),r}),t=e.cache;return e}o(Eq,"memoizeCapped$1");var Tq=Eq,bq=Tq,Sq=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Aq=/\\(\\)?/g,Iq=bq(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Sq,function(t,r,i,s){e.push(i?s.replace(Aq,"$1"):r||t)}),e}),Cq=Iq;function Rq(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}o(Rq,"arrayMap$2");var KP=Rq,fO=Eg,Oq=KP,Pq=Ts,Nq=Gw,hO=fO?fO.prototype:void 0,gO=hO?hO.toString:void 0;function YP(n){if(typeof n=="string")return n;if(Pq(n))return Oq(n,YP)+"";if(Nq(n))return gO?gO.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}o(YP,"baseToString$1");var Dq=YP,Lq=Dq;function xq(n){return n==null?"":Lq(n)}o(xq,"toString$1");var Uq=xq,Mq=Ts,kq=zw,Fq=Cq,$q=Uq;function Bq(n,e){return Mq(n)?n:kq(n,e)?[n]:Fq($q(n))}o(Bq,"castPath$4");var Ig=Bq,Vq=Gw;function Hq(n){if(typeof n=="string"||Vq(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}o(Hq,"toKey$5");var Ol=Hq,jq=Ig,Wq=Ol;function Gq(n,e){e=jq(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Wq(e[t++])];return t&&t==r?n:void 0}o(Gq,"baseGet$3");var Kw=Gq,zq=Kw;function qq(n,e,t){var r=n==null?void 0:zq(n,e);return r===void 0?t:r}o(qq,"get$1");var Kq=qq;function Yq(n,e){return n!=null&&e in Object(n)}o(Yq,"baseHasIn$1");var Xq=Yq,Jq=Ig,Zq=OP,Qq=Ts,eK=$w,tK=Bw,nK=Ol;function rK(n,e,t){e=Jq(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var a=nK(e[r]);if(!(s=n!=null&&t(n,a)))break;n=n[a]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&tK(i)&&eK(a,i)&&(Qq(n)||Zq(n)))}o(rK,"hasPath$1");var iK=rK,sK=Xq,oK=iK;function aK(n,e){return n!=null&&oK(n,e,sK)}o(aK,"hasIn$1");var uK=aK,cK=WP,lK=Kq,dK=uK,fK=zw,hK=GP,gK=zP,pK=Ol,mK=1,vK=2;function yK(n,e){return fK(n)&&hK(e)?gK(pK(n),e):function(t){var r=lK(t,n);return r===void 0&&r===e?dK(t,n):cK(e,r,mK|vK)}}o(yK,"baseMatchesProperty$1");var _K=yK;function wK(n){return n}o(wK,"identity$1");var EK=wK;function TK(n){return function(e){return e==null?void 0:e[n]}}o(TK,"baseProperty$1");var bK=TK,SK=Kw;function AK(n){return function(e){return SK(e,n)}}o(AK,"basePropertyDeep$1");var IK=AK,CK=bK,RK=IK,OK=zw,PK=Ol;function NK(n){return OK(n)?CK(PK(n)):RK(n)}o(NK,"property$1");var DK=NK,LK=aq,xK=_K,UK=EK,MK=Ts,kK=DK;function FK(n){return typeof n=="function"?n:n==null?UK:typeof n=="object"?MK(n)?xK(n[0],n[1]):LK(n):kK(n)}o(FK,"baseIteratee$2");var XP=FK,$K=CP,BK=o8,VK=XP;function HK(n,e){var t={};return e=VK(e),BK(n,function(r,i,s){$K(t,i,e(r,i,s))}),t}o(HK,"mapValues");var jK=HK,WK=kw(jK),GK=CP,zK=Hw,qK=Object.prototype,KK=qK.hasOwnProperty;function YK(n,e,t){var r=n[e];(!(KK.call(n,e)&&zK(r,t))||t===void 0&&!(e in n))&&GK(n,e,t)}o(YK,"assignValue$1");var XK=YK,JK=XK,ZK=Ig,QK=$w,pO=Cl,e7=Ol;function t7(n,e,t,r){if(!pO(n))return n;e=ZK(e,n);for(var i=-1,s=e.length,a=s-1,u=n;u!=null&&++i<s;){var l=e7(e[i]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(i!=a){var d=u[l];c=r?r(d,l,u):void 0,c===void 0&&(c=pO(d)?d:QK(e[i+1])?[]:{})}JK(u,l,c),u=u[l]}return n}o(t7,"baseSet$1");var n7=t7,r7=Kw,i7=n7,s7=Ig;function o7(n,e,t){for(var r=-1,i=e.length,s={};++r<i;){var a=e[r],u=r7(n,a);t(u,a)&&i7(s,s7(a,n),u)}return s}o(o7,"basePickBy$1");var a7=o7,u7=xP,c7=u7(Object.getPrototypeOf,Object),l7=c7,d7=FP,f7=l7,h7=VP,g7=BP,p7=Object.getOwnPropertySymbols,m7=p7?function(n){for(var e=[];n;)d7(e,h7(n)),n=f7(n);return e}:g7,v7=m7;function y7(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}o(y7,"nativeKeysIn$1");var _7=y7,w7=Cl,E7=LP,T7=_7,b7=Object.prototype,S7=b7.hasOwnProperty;function A7(n){if(!w7(n))return T7(n);var e=E7(n),t=[];for(var r in n)r=="constructor"&&(e||!S7.call(n,r))||t.push(r);return t}o(A7,"baseKeysIn$1");var I7=A7,C7=DP,R7=I7,O7=UP;function P7(n){return O7(n)?C7(n,!0):R7(n)}o(P7,"keysIn$1");var N7=P7,D7=$P,L7=v7,x7=N7;function U7(n){return D7(n,x7,L7)}o(U7,"getAllKeysIn$1");var M7=U7,k7=KP,F7=XP,$7=a7,B7=M7;function V7(n,e){if(n==null)return{};var t=k7(B7(n),function(r){return[r]});return e=F7(e),$7(n,t,function(r,i){return e(r,i[0])})}o(V7,"pickBy");var H7=V7,j7=kw(H7),JP="OS-CLRT-00000",ol=o(n=>{let e=WK(n,r=>r());return j7(e,r=>r!=null)},"evaluateObjFuncValues"),Cg={[Re.Internal]:1,[Re.External]:2,[Re.Client]:3},ZP=o(n=>{var e,t,r;let i={};return n.type===Je.Error&&n.error&&(i["exception.type"]=n.error.name,i["exception.message"]=QP(n.error.message),i["exception.stacktrace"]=(e=n.error.stack)!==null&&e!==void 0?e:"",i["outsystems.error.code"]=(r=(t=n.errorCode)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:JP.toString()),i},"getExceptionAttributes"),W7=o(n=>{let e={},t=n.span;return t&&(e.traceId=t.traceId,e.spanId=t.spanId),e},"getTraceFields"),Jh=o(n=>{let e=o(r=>typeof r=="boolean"?"boolValue":typeof r=="number"?r%1===0?"intValue":"doubleValue":"stringValue","mapTypeToValueName");return Object.entries(n).map(r=>{let[i,s]=r;return{key:i,value:{[e(s)]:s}}})},"convertObjectToAttributesList"),Yw=o(n=>(n["http.url"]&&(n["http.url"]=QP(n["http.url"])),n),"sanitizeUrlAttribute"),QP=o(n=>n.replace(/((outsystems|https|http):\/\/[^ ]*?)\?[^ ]*/g,"$1"),"removeQueryParametersUrl"),Jn,lo,fo,mg=class mg{constructor(e){let{baseAttributes:t={},transportManager:r,getTimestamp:i}=e;Jn.set(this,void 0),lo.set(this,void 0),fo.set(this,void 0),ye(this,Jn,r,"f"),ye(this,lo,i,"f"),ye(this,fo,t,"f")}static build(e){return ge(this,arguments,void 0,function(t){let{transports:r=[],baseAttributes:i,databaseNameSuffix:s,transportManager:a=new wl({databaseNameSuffix:s,logTransports:r}),getTimestamp:u=o(()=>new Nr,"getTimestamp")}=t;return(function*(){return new mg({baseAttributes:i,transportManager:a,getTimestamp:u})})()})}addTransport(e){O(this,Jn,"f").addLogTransport(e)}removeTransport(e){O(this,Jn,"f").removeLogTransport(e)}setLogTypeBaseline(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Je.Error;O(this,Jn,"f").setAllLogTypeBaselines(e)}flush(){return ge(this,void 0,void 0,function*(){O(this,Jn,"f").flushLogs()})}setSchedulerTimerInterval(e){O(this,Jn,"f").setSchedulerTimerInterval(e)}error(e){let{category:t,message:r,error:i,errorCode:s,visibility:a=Re.Internal,span:u,attributes:l}=e,c=new Ba({type:Je.Error,category:t,message:r,error:i,visibility:a,timestamp:O(this,lo,"f").call(this),errorCode:s,span:u,attributes:Object.assign(Object.assign({},ol(O(this,fo,"f"))),l)});O(this,Jn,"f").processLog(c)}warning(e){let{category:t,message:r,visibility:i=Re.Internal,span:s,attributes:a}=e,u=new Ba({type:Je.Warning,category:t,message:r,visibility:i,timestamp:O(this,lo,"f").call(this),span:s,attributes:Object.assign(Object.assign({},ol(O(this,fo,"f"))),a)});O(this,Jn,"f").processLog(u)}info(e){let{category:t,message:r,visibility:i=Re.External,span:s,attributes:a}=e,u=new Ba({type:Je.Info,category:t,message:r,visibility:i,timestamp:O(this,lo,"f").call(this),span:s,attributes:Object.assign(Object.assign({},ol(O(this,fo,"f"))),a)});O(this,Jn,"f").processLog(u)}debug(e){let{category:t,message:r,visibility:i=Re.Internal,span:s,attributes:a}=e,u=new Ba({type:Je.Debug,category:t,message:r,visibility:i,timestamp:O(this,lo,"f").call(this),span:s,attributes:Object.assign(Object.assign({},ol(O(this,fo,"f"))),a)});O(this,Jn,"f").processLog(u)}log(e){return ge(this,void 0,void 0,function*(){yield O(this,Jn,"f").processLog(e)})}};o(mg,"Logger");var ew=mg;Jn=new WeakMap,lo=new WeakMap,fo=new WeakMap;function G7(n){return n===void 0&&(n={}),typeof n.addEventListener=="function"&&typeof n.removeEventListener=="function"}o(G7,"isListenerObject");var mO="OT_ZONE_CONTEXT",z7=(function(){function n(){this._enabled=!1,this._zoneCounter=0}return o(n,"ZoneContextManager"),n.prototype._activeContextFromZone=function(e){return e&&e.get(mO)||wi},n.prototype._bindFunction=function(e,t){var r=this,i=o(function(){for(var s=this,a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return r.with(e,function(){return t.apply(s,a)})},"contextWrapper");return Object.defineProperty(i,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),i},n.prototype._bindListener=function(e,t){var r=t;return r.__ot_listeners!==void 0||(r.__ot_listeners={},typeof r.addEventListener=="function"&&(r.addEventListener=this._patchAddEventListener(r,r.addEventListener,e)),typeof r.removeEventListener=="function"&&(r.removeEventListener=this._patchRemoveEventListener(r,r.removeEventListener))),t},n.prototype._createZoneName=function(){this._zoneCounter++;var e=Math.random();return this._zoneCounter+"-"+e},n.prototype._createZone=function(e,t){var r;return Zone.current.fork({name:e,properties:(r={},r[mO]=t,r)})},n.prototype._getActiveZone=function(){return Zone.current},n.prototype._patchAddEventListener=function(e,t,r){var i=this;return function(s,a,u){e.__ot_listeners===void 0&&(e.__ot_listeners={});var l=e.__ot_listeners[s];l===void 0&&(l=new WeakMap,e.__ot_listeners[s]=l);var c=i.bind(r,a);return l.set(a,c),t.call(this,s,c,u)}},n.prototype._patchRemoveEventListener=function(e,t){return function(r,i){if(e.__ot_listeners===void 0||e.__ot_listeners[r]===void 0)return t.call(this,r,i);var s=e.__ot_listeners[r],a=s.get(i);return s.delete(i),t.call(this,r,a||i)}},n.prototype.active=function(){if(!this._enabled)return wi;var e=this._getActiveZone(),t=this._activeContextFromZone(e);return t||wi},n.prototype.bind=function(e,t){return e===void 0&&(e=this.active()),typeof t=="function"?this._bindFunction(e,t):(G7(t)&&this._bindListener(e,t),t)},n.prototype.disable=function(){return this._enabled=!1,this},n.prototype.enable=function(){return this._enabled=!0,this},n.prototype.with=function(e,t,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var a=this._createZoneName(),u=this._createZone(a,e);return u.run(t,r,i)},n})();var Xr=globalThis;function ur(n){return(Xr.__Zone_symbol_prefix||"__zone_symbol__")+n}o(ur,"__symbol__");function q7(){var n;let e=Xr.performance;function t(de){e&&e.mark&&e.mark(de)}o(t,"mark");function r(de,N){e&&e.measure&&e.measure(de,N)}o(r,"performanceMeasure"),t("Zone");let Oe=class Oe{static assertZonePatched(){if(Xr.Promise!==P.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let N=Oe.current;for(;N.parent;)N=N.parent;return N}static get current(){return oe.zone}static get currentTask(){return S}static __load_patch(N,L){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(P.hasOwnProperty(N)){let ve=Xr[ur("forceDuplicateZoneCheck")]===!0;if(!x&&ve)throw Error("Already loaded patch: "+N)}else if(!Xr["__Zone_disable_"+N]){let ve="Zone:"+N;t(ve),P[N]=L(Xr,Oe,Z),r(ve,ve)}}get parent(){return this._parent}get name(){return this._name}constructor(N,L){this._parent=N,this._name=L?L.name||"unnamed":"<root>",this._properties=L&&L.properties||{},this._zoneDelegate=new a(this,this._parent&&this._parent._zoneDelegate,L)}get(N){let L=this.getZoneWith(N);if(L)return L._properties[N]}getZoneWith(N){let L=this;for(;L;){if(L._properties.hasOwnProperty(N))return L;L=L._parent}return null}fork(N){if(!N)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,N)}wrap(N,L){if(typeof N!="function")throw new Error("Expecting function got: "+N);let x=this._zoneDelegate.intercept(this,N,L),ve=this;return function(){return ve.runGuarded(x,this,arguments,L)}}run(N,L,x,ve){oe={parent:oe,zone:this};try{return this._zoneDelegate.invoke(this,N,L,x,ve)}finally{oe=oe.parent}}runGuarded(N){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,x=arguments.length>2?arguments[2]:void 0,ve=arguments.length>3?arguments[3]:void 0;oe={parent:oe,zone:this};try{try{return this._zoneDelegate.invoke(this,N,L,x,ve)}catch(Ee){if(this._zoneDelegate.handleError(this,Ee))throw Ee}}finally{oe=oe.parent}}runTask(N,L,x){if(N.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(N.zone||E).name+"; Execution: "+this.name+")");let ve=N,{type:Ee,data:{isPeriodic:Me=!1,isRefreshable:tt=!1}={}}=N;if(N.state===_&&(Ee===q||Ee===Y))return;let Le=N.state!=D;Le&&ve._transitionTo(D,R);let fe=S;S=ve,oe={parent:oe,zone:this};try{Ee==Y&&N.data&&!Me&&!tt&&(N.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,ve,L,x)}catch($){if(this._zoneDelegate.handleError(this,$))throw $}}finally{let $=N.state;if($!==_&&$!==z)if(Ee==q||Me||tt&&$===T)Le&&ve._transitionTo(R,D,T);else{let J=ve._zoneDelegates;this._updateTaskCount(ve,-1),Le&&ve._transitionTo(_,D,_),tt&&(ve._zoneDelegates=J)}oe=oe.parent,S=fe}}scheduleTask(N){if(N.zone&&N.zone!==this){let x=this;for(;x;){if(x===N.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${N.zone.name}`);x=x.parent}}N._transitionTo(T,_);let L=[];N._zoneDelegates=L,N._zone=this;try{N=this._zoneDelegate.scheduleTask(this,N)}catch(x){throw N._transitionTo(z,T,_),this._zoneDelegate.handleError(this,x),x}return N._zoneDelegates===L&&this._updateTaskCount(N,1),N.state==T&&N._transitionTo(R,T),N}scheduleMicroTask(N,L,x,ve){return this.scheduleTask(new u(j,N,L,x,ve,void 0))}scheduleMacroTask(N,L,x,ve,Ee){return this.scheduleTask(new u(Y,N,L,x,ve,Ee))}scheduleEventTask(N,L,x,ve,Ee){return this.scheduleTask(new u(q,N,L,x,ve,Ee))}cancelTask(N){if(N.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(N.zone||E).name+"; Execution: "+this.name+")");if(!(N.state!==R&&N.state!==D)){N._transitionTo(B,R,D);try{this._zoneDelegate.cancelTask(this,N)}catch(L){throw N._transitionTo(z,B),this._zoneDelegate.handleError(this,L),L}return this._updateTaskCount(N,-1),N._transitionTo(_,B),N.runCount=-1,N}}_updateTaskCount(N,L){let x=N._zoneDelegates;L==-1&&(N._zoneDelegates=null);for(let ve=0;ve<x.length;ve++)x[ve]._updateTaskCount(N.type,L)}};o(Oe,"ZoneImpl");let i=Oe;n=i,n.__symbol__=ur;let s={name:"",onHasTask:o((de,N,L,x)=>de.hasTask(L,x),"onHasTask"),onScheduleTask:o((de,N,L,x)=>de.scheduleTask(L,x),"onScheduleTask"),onInvokeTask:o((de,N,L,x,ve,Ee)=>de.invokeTask(L,x,ve,Ee),"onInvokeTask"),onCancelTask:o((de,N,L,x)=>de.cancelTask(L,x),"onCancelTask")},Ye=class Ye{get zone(){return this._zone}constructor(N,L,x){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=N,this._parentDelegate=L,this._forkZS=x&&(x&&x.onFork?x:L._forkZS),this._forkDlgt=x&&(x.onFork?L:L._forkDlgt),this._forkCurrZone=x&&(x.onFork?this._zone:L._forkCurrZone),this._interceptZS=x&&(x.onIntercept?x:L._interceptZS),this._interceptDlgt=x&&(x.onIntercept?L:L._interceptDlgt),this._interceptCurrZone=x&&(x.onIntercept?this._zone:L._interceptCurrZone),this._invokeZS=x&&(x.onInvoke?x:L._invokeZS),this._invokeDlgt=x&&(x.onInvoke?L:L._invokeDlgt),this._invokeCurrZone=x&&(x.onInvoke?this._zone:L._invokeCurrZone),this._handleErrorZS=x&&(x.onHandleError?x:L._handleErrorZS),this._handleErrorDlgt=x&&(x.onHandleError?L:L._handleErrorDlgt),this._handleErrorCurrZone=x&&(x.onHandleError?this._zone:L._handleErrorCurrZone),this._scheduleTaskZS=x&&(x.onScheduleTask?x:L._scheduleTaskZS),this._scheduleTaskDlgt=x&&(x.onScheduleTask?L:L._scheduleTaskDlgt),this._scheduleTaskCurrZone=x&&(x.onScheduleTask?this._zone:L._scheduleTaskCurrZone),this._invokeTaskZS=x&&(x.onInvokeTask?x:L._invokeTaskZS),this._invokeTaskDlgt=x&&(x.onInvokeTask?L:L._invokeTaskDlgt),this._invokeTaskCurrZone=x&&(x.onInvokeTask?this._zone:L._invokeTaskCurrZone),this._cancelTaskZS=x&&(x.onCancelTask?x:L._cancelTaskZS),this._cancelTaskDlgt=x&&(x.onCancelTask?L:L._cancelTaskDlgt),this._cancelTaskCurrZone=x&&(x.onCancelTask?this._zone:L._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let ve=x&&x.onHasTask,Ee=L&&L._hasTaskZS;(ve||Ee)&&(this._hasTaskZS=ve?x:s,this._hasTaskDlgt=L,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,x.onScheduleTask||(this._scheduleTaskZS=s,this._scheduleTaskDlgt=L,this._scheduleTaskCurrZone=this._zone),x.onInvokeTask||(this._invokeTaskZS=s,this._invokeTaskDlgt=L,this._invokeTaskCurrZone=this._zone),x.onCancelTask||(this._cancelTaskZS=s,this._cancelTaskDlgt=L,this._cancelTaskCurrZone=this._zone))}fork(N,L){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,N,L):new i(N,L)}intercept(N,L,x){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,N,L,x):L}invoke(N,L,x,ve,Ee){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,N,L,x,ve,Ee):L.apply(x,ve)}handleError(N,L){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,N,L):!0}scheduleTask(N,L){let x=L;if(this._scheduleTaskZS)this._hasTaskZS&&x._zoneDelegates.push(this._hasTaskDlgtOwner),x=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,N,L),x||(x=L);else if(L.scheduleFn)L.scheduleFn(L);else if(L.type==j)m(L);else throw new Error("Task is missing scheduleFn.");return x}invokeTask(N,L,x,ve){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,N,L,x,ve):L.callback.apply(x,ve)}cancelTask(N,L){let x;if(this._cancelTaskZS)x=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,N,L);else{if(!L.cancelFn)throw Error("Task is not cancelable");x=L.cancelFn(L)}return x}hasTask(N,L){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,N,L)}catch(x){this.handleError(N,x)}}_updateTaskCount(N,L){let x=this._taskCounts,ve=x[N],Ee=x[N]=ve+L;if(Ee<0)throw new Error("More tasks executed then were scheduled.");if(ve==0||Ee==0){let Me={microTask:x.microTask>0,macroTask:x.macroTask>0,eventTask:x.eventTask>0,change:N};this.hasTask(this._zone,Me)}}};o(Ye,"_ZoneDelegate");let a=Ye,Xe=class Xe{constructor(N,L,x,ve,Ee,Me){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=N,this.source=L,this.data=ve,this.scheduleFn=Ee,this.cancelFn=Me,!x)throw new Error("callback is not defined");this.callback=x;let tt=this;N===q&&ve&&ve.useG?this.invoke=Xe.invokeTask:this.invoke=function(){return Xe.invokeTask.call(Xr,tt,this,arguments)}}static invokeTask(N,L,x){N||(N=this),K++;try{return N.runCount++,N.zone.runTask(N,L,x)}finally{K==1&&w(),K--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(_,T)}_transitionTo(N,L,x){if(this._state===L||this._state===x)this._state=N,N==_&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${N}', expecting state '${L}'${x?" or '"+x+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId!="undefined"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}};o(Xe,"ZoneTask");let u=Xe,l=ur("setTimeout"),c=ur("Promise"),d=ur("then"),f=[],h=!1,g;function p(de){if(g||Xr[c]&&(g=Xr[c].resolve(0)),g){let N=g[d];N||(N=g.then),N.call(g,de)}else Xr[l](de,0)}o(p,"nativeScheduleMicroTask");function m(de){K===0&&f.length===0&&p(w),de&&f.push(de)}o(m,"scheduleMicroTask");function w(){if(!h){for(h=!0;f.length;){let de=f;f=[];for(let N=0;N<de.length;N++){let L=de[N];try{L.zone.runTask(L,null,null)}catch(x){Z.onUnhandledError(x)}}}Z.microtaskDrainDone(),h=!1}}o(w,"drainMicroTaskQueue");let E={name:"NO ZONE"},_="notScheduled",T="scheduling",R="scheduled",D="running",B="canceling",z="unknown",j="microTask",Y="macroTask",q="eventTask",P={},Z={symbol:ur,currentZoneFrame:o(()=>oe,"currentZoneFrame"),onUnhandledError:U,microtaskDrainDone:U,scheduleMicroTask:m,showUncaughtError:o(()=>!i[ur("ignoreConsoleErrorUncaughtError")],"showUncaughtError"),patchEventTarget:o(()=>[],"patchEventTarget"),patchOnProperties:U,patchMethod:o(()=>U,"patchMethod"),bindArguments:o(()=>[],"bindArguments"),patchThen:o(()=>U,"patchThen"),patchMacroTask:o(()=>U,"patchMacroTask"),patchEventPrototype:o(()=>U,"patchEventPrototype"),isIEOrEdge:o(()=>!1,"isIEOrEdge"),getGlobalObjects:o(()=>{},"getGlobalObjects"),ObjectDefineProperty:o(()=>U,"ObjectDefineProperty"),ObjectGetOwnPropertyDescriptor:o(()=>{},"ObjectGetOwnPropertyDescriptor"),ObjectCreate:o(()=>{},"ObjectCreate"),ArraySlice:o(()=>[],"ArraySlice"),patchClass:o(()=>U,"patchClass"),wrapWithCurrentZone:o(()=>U,"wrapWithCurrentZone"),filterProperties:o(()=>[],"filterProperties"),attachOriginToPatched:o(()=>U,"attachOriginToPatched"),_redefineProperty:o(()=>U,"_redefineProperty"),patchCallbacks:o(()=>U,"patchCallbacks"),nativeScheduleMicroTask:p},oe={parent:null,zone:new i(null,null)},S=null,K=0;function U(){}return o(U,"noop"),r("Zone","Zone"),i}o(q7,"initZone");function K7(){var n,e;let t=globalThis,r=t[ur("forceDuplicateZoneCheck")]===!0;if(t.Zone&&(r||typeof t.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return(e=t[n="Zone"])!==null&&e!==void 0||(t[n]=q7()),t.Zone}o(K7,"loadZone");var El=Object.getOwnPropertyDescriptor,Xw=Object.defineProperty,Jw=Object.getPrototypeOf,Y7=Object.create,X7=Array.prototype.slice,Zw="addEventListener",Qw="removeEventListener",y_=ur(Zw),__=ur(Qw),Ti="true",bi="false",Tl=ur("");function eE(n,e){return Zone.current.wrap(n,e)}o(eE,"wrapWithCurrentZone");function tE(n,e,t,r,i){return Zone.current.scheduleMacroTask(n,e,t,r,i)}o(tE,"scheduleMacroTaskWithCurrentZone");var ct=ur,Rg=typeof window!="undefined",Qa=Rg?window:void 0,zt=Rg&&Qa||globalThis,J7="removeAttribute";function nE(n,e){for(let t=n.length-1;t>=0;t--)typeof n[t]=="function"&&(n[t]=eE(n[t],e+"_"+t));return n}o(nE,"bindArguments");function Z7(n,e){let t=n.constructor.name;for(let r=0;r<e.length;r++){let i=e[r],s=n[i];if(s){let a=El(n,i);if(!eN(a))continue;n[i]=(u=>{let l=o(function(){return u.apply(this,nE(arguments,t+"."+i))},"patched");return Ai(l,u),l})(s)}}}o(Z7,"patchPrototype");function eN(n){return n?n.writable===!1?!1:!(typeof n.get=="function"&&typeof n.set=="undefined"):!0}o(eN,"isPropertyWritable");var tN=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,Og=!("nw"in zt)&&typeof zt.process!="undefined"&&zt.process.toString()==="[object process]",rE=!Og&&!tN&&!!(Rg&&Qa.HTMLElement),nN=typeof zt.process!="undefined"&&zt.process.toString()==="[object process]"&&!tN&&!!(Rg&&Qa.HTMLElement),Zh={},Q7=ct("enable_beforeunload"),vO=o(function(n){if(n=n||zt.event,!n)return;let e=Zh[n.type];e||(e=Zh[n.type]=ct("ON_PROPERTY"+n.type));let t=this||n.target||zt,r=t[e],i;if(rE&&t===Qa&&n.type==="error"){let s=n;i=r&&r.call(this,s.message,s.filename,s.lineno,s.colno,s.error),i===!0&&n.preventDefault()}else i=r&&r.apply(this,arguments),n.type==="beforeunload"&&zt[Q7]&&typeof i=="string"?n.returnValue=i:i!=null&&!i&&n.preventDefault();return i},"wrapFn");function yO(n,e,t){let r=El(n,e);if(!r&&t&&El(t,e)&&(r={enumerable:!0,configurable:!0}),!r||!r.configurable)return;let i=ct("on"+e+"patched");if(n.hasOwnProperty(i)&&n[i])return;delete r.writable,delete r.value;let s=r.get,a=r.set,u=e.slice(2),l=Zh[u];l||(l=Zh[u]=ct("ON_PROPERTY"+u)),r.set=function(c){let d=this;if(!d&&n===zt&&(d=zt),!d)return;typeof d[l]=="function"&&d.removeEventListener(u,vO),a&&a.call(d,null),d[l]=c,typeof c=="function"&&d.addEventListener(u,vO,!1)},r.get=function(){let c=this;if(!c&&n===zt&&(c=zt),!c)return null;let d=c[l];if(d)return d;if(s){let f=s.call(this);if(f)return r.set.call(this,f),typeof c[J7]=="function"&&c.removeAttribute(e),f}return null},Xw(n,e,r),n[i]=!0}o(yO,"patchProperty");function rN(n,e,t){if(e)for(let r=0;r<e.length;r++)yO(n,"on"+e[r],t);else{let r=[];for(let i in n)i.slice(0,2)=="on"&&r.push(i);for(let i=0;i<r.length;i++)yO(n,r[i],t)}}o(rN,"patchOnProperties");var Pr=ct("originalInstance");function al(n){let e=zt[n];if(!e)return;zt[ct(n)]=e,zt[n]=function(){let i=nE(arguments,n);switch(i.length){case 0:this[Pr]=new e;break;case 1:this[Pr]=new e(i[0]);break;case 2:this[Pr]=new e(i[0],i[1]);break;case 3:this[Pr]=new e(i[0],i[1],i[2]);break;case 4:this[Pr]=new e(i[0],i[1],i[2],i[3]);break;default:throw new Error("Arg list too long.")}},Ai(zt[n],e);let t=new e(function(){}),r;for(r in t)n==="XMLHttpRequest"&&r==="responseBlob"||(function(i){typeof t[i]=="function"?zt[n].prototype[i]=function(){return this[Pr][i].apply(this[Pr],arguments)}:Xw(zt[n].prototype,i,{set:o(function(s){typeof s=="function"?(this[Pr][i]=eE(s,n+"."+i),Ai(this[Pr][i],s)):this[Pr][i]=s},"set"),get:o(function(){return this[Pr][i]},"get")})})(r);for(r in e)r!=="prototype"&&e.hasOwnProperty(r)&&(zt[n][r]=e[r])}o(al,"patchClass");function Si(n,e,t){let r=n;for(;r&&!r.hasOwnProperty(e);)r=Jw(r);!r&&n[e]&&(r=n);let i=ct(e),s=null;if(r&&(!(s=r[i])||!r.hasOwnProperty(i))){s=r[i]=r[e];let a=r&&El(r,e);if(eN(a)){let u=t(s,i,e);r[e]=function(){return u(this,arguments)},Ai(r[e],s)}}return s}o(Si,"patchMethod");function eY(n,e,t){let r=null;function i(s){let a=s.data;return a.args[a.cbIdx]=function(){s.invoke.apply(this,arguments)},r.apply(a.target,a.args),s}o(i,"scheduleTask"),r=Si(n,e,s=>function(a,u){let l=t(a,u);return l.cbIdx>=0&&typeof u[l.cbIdx]=="function"?tE(l.name,u[l.cbIdx],l,i):s.apply(a,u)})}o(eY,"patchMacroTask");function Ai(n,e){n[ct("OriginalDelegate")]=e}o(Ai,"attachOriginToPatched");var _O=!1,w_=!1;function tY(){try{let n=Qa.navigator.userAgent;if(n.indexOf("MSIE ")!==-1||n.indexOf("Trident/")!==-1)return!0}catch(n){}return!1}o(tY,"isIE");function nY(){if(_O)return w_;_O=!0;try{let n=Qa.navigator.userAgent;(n.indexOf("MSIE ")!==-1||n.indexOf("Trident/")!==-1||n.indexOf("Edge/")!==-1)&&(w_=!0)}catch(n){}return w_}o(nY,"isIEOrEdge");function wO(n){return typeof n=="function"}o(wO,"isFunction");function EO(n){return typeof n=="number"}o(EO,"isNumber");var Ha=!1;if(typeof window!="undefined")try{let n=Object.defineProperty({},"passive",{get:o(function(){Ha=!0},"get")});window.addEventListener("test",n,n),window.removeEventListener("test",n,n)}catch(n){Ha=!1}var rY={useG:!0},cr={},iN={},sN=new RegExp("^"+Tl+"(\\w+)(true|false)$"),oN=ct("propagationStopped");function aN(n,e){let t=(e?e(n):n)+bi,r=(e?e(n):n)+Ti,i=Tl+t,s=Tl+r;cr[n]={},cr[n][bi]=i,cr[n][Ti]=s}o(aN,"prepareEventNames");function iY(n,e,t,r){let i=r&&r.add||Zw,s=r&&r.rm||Qw,a=r&&r.listeners||"eventListeners",u=r&&r.rmAll||"removeAllListeners",l=ct(i),c="."+i+":",d="prependListener",f="."+d+":",h=o(function(_,T,R){if(_.isRemoved)return;let D=_.callback;typeof D=="object"&&D.handleEvent&&(_.callback=j=>D.handleEvent(j),_.originalDelegate=D);let B;try{_.invoke(_,T,[R])}catch(j){B=j}let z=_.options;if(z&&typeof z=="object"&&z.once){let j=_.originalDelegate?_.originalDelegate:_.callback;T[s].call(T,R.type,j,z)}return B},"invokeTask");function g(_,T,R){if(T=T||n.event,!T)return;let D=_||T.target||n,B=D[cr[T.type][R?Ti:bi]];if(B){let z=[];if(B.length===1){let j=h(B[0],D,T);j&&z.push(j)}else{let j=B.slice();for(let Y=0;Y<j.length&&!(T&&T[oN]===!0);Y++){let q=h(j[Y],D,T);q&&z.push(q)}}if(z.length===1)throw z[0];for(let j=0;j<z.length;j++){let Y=z[j];e.nativeScheduleMicroTask(()=>{throw Y})}}}o(g,"globalCallback");let p=o(function(_){return g(this,_,!1)},"globalZoneAwareCallback"),m=o(function(_){return g(this,_,!0)},"globalZoneAwareCaptureCallback");function w(_,T){if(!_)return!1;let R=!0;T&&T.useG!==void 0&&(R=T.useG);let D=T&&T.vh,B=!0;T&&T.chkDup!==void 0&&(B=T.chkDup);let z=!1;T&&T.rt!==void 0&&(z=T.rt);let j=_;for(;j&&!j.hasOwnProperty(i);)j=Jw(j);if(!j&&_[i]&&(j=_),!j||j[l])return!1;let Y=T&&T.eventNameToString,q={},P=j[l]=j[i],Z=j[ct(s)]=j[s],oe=j[ct(a)]=j[a],S=j[ct(u)]=j[u],K;T&&T.prepend&&(K=j[ct(T.prepend)]=j[T.prepend]);function U($,J){return!Ha&&typeof $=="object"&&$?!!$.capture:!Ha||!J?$:typeof $=="boolean"?{capture:$,passive:!0}:$?typeof $=="object"&&$.passive!==!1?os(Rt({},$),{passive:!0}):$:{passive:!0}}o(U,"buildEventListenerOptions");let Oe=o(function($){if(!q.isExisting)return P.call(q.target,q.eventName,q.capture?m:p,q.options)},"customScheduleGlobal"),Ye=o(function($){if(!$.isRemoved){let J=cr[$.eventName],W;J&&(W=J[$.capture?Ti:bi]);let ne=W&&$.target[W];if(ne){for(let _e=0;_e<ne.length;_e++)if(ne[_e]===$){ne.splice(_e,1),$.isRemoved=!0,$.removeAbortListener&&($.removeAbortListener(),$.removeAbortListener=null),ne.length===0&&($.allRemoved=!0,$.target[W]=null);break}}}if($.allRemoved)return Z.call($.target,$.eventName,$.capture?m:p,$.options)},"customCancelGlobal"),Xe=o(function($){return P.call(q.target,q.eventName,$.invoke,q.options)},"customScheduleNonGlobal"),de=o(function($){return K.call(q.target,q.eventName,$.invoke,q.options)},"customSchedulePrepend"),N=o(function($){return Z.call($.target,$.eventName,$.invoke,$.options)},"customCancelNonGlobal"),L=R?Oe:Xe,x=R?Ye:N,ve=o(function($,J){let W=typeof J;return W==="function"&&$.callback===J||W==="object"&&$.originalDelegate===J},"compareTaskCallbackVsDelegate"),Ee=T&&T.diff?T.diff:ve,Me=Zone[ct("UNPATCHED_EVENTS")],tt=n[ct("PASSIVE_EVENTS")];function Le($){if(typeof $=="object"&&$!==null){let J=Rt({},$);return $.signal&&(J.signal=$.signal),J}return $}o(Le,"copyEventListenerOptions");let fe=o(function($,J,W,ne){let _e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,we=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;return function(){let Ie=this||n,xe=arguments[0];T&&T.transferEventName&&(xe=T.transferEventName(xe));let A=arguments[1];if(!A)return $.apply(this,arguments);if(Og&&xe==="uncaughtException")return $.apply(this,arguments);let v=!1;if(typeof A!="function"){if(!A.handleEvent)return $.apply(this,arguments);v=!0}if(D&&!D($,A,Ie,arguments))return;let y=Ha&&!!tt&&tt.indexOf(xe)!==-1,C=Le(U(arguments[2],y)),V=C==null?void 0:C.signal;if(V!=null&&V.aborted)return;if(Me){for(let Pn=0;Pn<Me.length;Pn++)if(xe===Me[Pn])return y?$.call(Ie,xe,A,C):$.apply(this,arguments)}let se=C?typeof C=="boolean"?!0:C.capture:!1,ce=C&&typeof C=="object"?C.once:!1,We=Zone.current,nt=cr[xe];nt||(aN(xe,Y),nt=cr[xe]);let rt=nt[se?Ti:bi],yt=Ie[rt],gt=!1;if(yt){if(gt=!0,B){for(let Pn=0;Pn<yt.length;Pn++)if(Ee(yt[Pn],A))return}}else yt=Ie[rt]=[];let Ft,ts=Ie.constructor.name,ns=iN[ts];ns&&(Ft=ns[xe]),Ft||(Ft=ts+J+(Y?Y(xe):xe)),q.options=C,ce&&(q.options.once=!1),q.target=Ie,q.capture=se,q.eventName=xe,q.isExisting=gt;let Ys=R?rY:void 0;Ys&&(Ys.taskData=q),V&&(q.options.signal=void 0);let kn=We.scheduleEventTask(Ft,A,Ys,W,ne);if(V){q.options.signal=V;let Pn=o(()=>kn.zone.cancelTask(kn),"onAbort");$.call(V,"abort",Pn,{once:!0}),kn.removeAbortListener=()=>V.removeEventListener("abort",Pn)}if(q.target=null,Ys&&(Ys.taskData=null),ce&&(q.options.once=!0),!Ha&&typeof kn.options=="boolean"||(kn.options=C),kn.target=Ie,kn.capture=se,kn.eventName=xe,v&&(kn.originalDelegate=A),we?yt.unshift(kn):yt.push(kn),_e)return Ie}},"makeAddListener");return j[i]=fe(P,c,L,x,z),K&&(j[d]=fe(K,f,de,x,z,!0)),j[s]=function(){let $=this||n,J=arguments[0];T&&T.transferEventName&&(J=T.transferEventName(J));let W=arguments[2],ne=W?typeof W=="boolean"?!0:W.capture:!1,_e=arguments[1];if(!_e)return Z.apply(this,arguments);if(D&&!D(Z,_e,$,arguments))return;let we=cr[J],Ie;we&&(Ie=we[ne?Ti:bi]);let xe=Ie&&$[Ie];if(xe)for(let A=0;A<xe.length;A++){let v=xe[A];if(Ee(v,_e)){if(xe.splice(A,1),v.isRemoved=!0,xe.length===0&&(v.allRemoved=!0,$[Ie]=null,!ne&&typeof J=="string")){let y=Tl+"ON_PROPERTY"+J;$[y]=null}return v.zone.cancelTask(v),z?$:void 0}}return Z.apply(this,arguments)},j[a]=function(){let $=this||n,J=arguments[0];T&&T.transferEventName&&(J=T.transferEventName(J));let W=[],ne=uN($,Y?Y(J):J);for(let _e=0;_e<ne.length;_e++){let we=ne[_e],Ie=we.originalDelegate?we.originalDelegate:we.callback;W.push(Ie)}return W},j[u]=function(){let $=this||n,J=arguments[0];if(J){T&&T.transferEventName&&(J=T.transferEventName(J));let W=cr[J];if(W){let ne=W[bi],_e=W[Ti],we=$[ne],Ie=$[_e];if(we){let xe=we.slice();for(let A=0;A<xe.length;A++){let v=xe[A],y=v.originalDelegate?v.originalDelegate:v.callback;this[s].call(this,J,y,v.options)}}if(Ie){let xe=Ie.slice();for(let A=0;A<xe.length;A++){let v=xe[A],y=v.originalDelegate?v.originalDelegate:v.callback;this[s].call(this,J,y,v.options)}}}}else{let W=Object.keys($);for(let ne=0;ne<W.length;ne++){let _e=W[ne],we=sN.exec(_e),Ie=we&&we[1];Ie&&Ie!=="removeListener"&&this[u].call(this,Ie)}this[u].call(this,"removeListener")}if(z)return this},Ai(j[i],P),Ai(j[s],Z),S&&Ai(j[u],S),oe&&Ai(j[a],oe),!0}o(w,"patchEventTargetMethods");let E=[];for(let _=0;_<t.length;_++)E[_]=w(t[_],r);return E}o(iY,"patchEventTarget");function uN(n,e){if(!e){let s=[];for(let a in n){let u=sN.exec(a),l=u&&u[1];if(l&&(!e||l===e)){let c=n[a];if(c)for(let d=0;d<c.length;d++)s.push(c[d])}}return s}let t=cr[e];t||(aN(e),t=cr[e]);let r=n[t[bi]],i=n[t[Ti]];return r?i?r.concat(i):r.slice():i?i.slice():[]}o(uN,"findEventTasks");function sY(n,e){let t=n.Event;t&&t.prototype&&e.patchMethod(t.prototype,"stopImmediatePropagation",r=>function(i,s){i[oN]=!0,r&&r.apply(i,s)})}o(sY,"patchEventPrototype");function oY(n,e){e.patchMethod(n,"queueMicrotask",t=>function(r,i){Zone.current.scheduleMicroTask("queueMicrotask",i[0])})}o(oY,"patchQueueMicrotask");var ih=ct("zoneTask");function Sa(n,e,t,r){let i=null,s=null;e+=r,t+=r;let a={};function u(c){let d=c.data;d.args[0]=function(){return c.invoke.apply(this,arguments)};let f=i.apply(n,d.args);return EO(f)?d.handleId=f:(d.handle=f,d.isRefreshable=wO(f.refresh)),c}o(u,"scheduleTask");function l(c){let{handle:d,handleId:f}=c.data;return s.call(n,d!=null?d:f)}o(l,"clearTask"),i=Si(n,e,c=>function(d,f){if(wO(f[0])){var h;let g={isRefreshable:!1,isPeriodic:r==="Interval",delay:r==="Timeout"||r==="Interval"?f[1]||0:void 0,args:f},p=f[0];f[0]=o(function(){try{return p.apply(this,arguments)}finally{let{handle:D,handleId:B,isPeriodic:z,isRefreshable:j}=g;!z&&!j&&(B?delete a[B]:D&&(D[ih]=null))}},"timer");let m=tE(e,f[0],g,u,l);if(!m)return m;let{handleId:w,handle:E,isRefreshable:_,isPeriodic:T}=m.data;if(w)a[w]=m;else if(E&&(E[ih]=m,_&&!T)){let R=E.refresh;E.refresh=function(){let{zone:D,state:B}=m;return B==="notScheduled"?(m._state="scheduled",D._updateTaskCount(m,1)):B==="running"&&(m._state="scheduling"),R.call(this)}}return(h=E!=null?E:w)!==null&&h!==void 0?h:m}else return c.apply(n,f)}),s=Si(n,t,c=>function(d,f){var h;let g=f[0],p;EO(g)?(p=a[g],delete a[g]):(p=g==null?void 0:g[ih],p?g[ih]=null:p=g),(h=p)!==null&&h!==void 0&&h.type?p.cancelFn&&p.zone.cancelTask(p):c.apply(n,f)})}o(Sa,"patchTimer");function aY(n,e){let{isBrowser:t,isMix:r}=e.getGlobalObjects();if(!t&&!r||!n.customElements||!("customElements"in n))return;let i=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,n.customElements,"customElements","define",i)}o(aY,"patchCustomElements");function uY(n,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:t,zoneSymbolEventNames:r,TRUE_STR:i,FALSE_STR:s,ZONE_SYMBOL_PREFIX:a}=e.getGlobalObjects();for(let l=0;l<t.length;l++){let c=t[l],d=c+s,f=c+i,h=a+d,g=a+f;r[c]={},r[c][s]=h,r[c][i]=g}let u=n.EventTarget;if(!(!u||!u.prototype))return e.patchEventTarget(n,e,[u&&u.prototype]),!0}o(uY,"eventTargetPatch");function cY(n,e){e.patchEventPrototype(n,e)}o(cY,"patchEvent");function cN(n,e,t){if(!t||t.length===0)return e;let r=t.filter(s=>s.target===n);if(!r||r.length===0)return e;let i=r[0].ignoreProperties;return e.filter(s=>i.indexOf(s)===-1)}o(cN,"filterProperties");function TO(n,e,t,r){if(!n)return;let i=cN(n,e,t);rN(n,i,r)}o(TO,"patchFilteredProperties");function tw(n){return Object.getOwnPropertyNames(n).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}o(tw,"getOnEventNames");function lY(n,e){if(Og&&!nN||Zone[n.symbol("patchEvents")])return;let t=e.__Zone_ignore_on_properties,r=[];if(rE){let i=window;r=r.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let s=tY()?[{target:i,ignoreProperties:["error"]}]:[];TO(i,tw(i),t&&t.concat(s),Jw(i))}r=r.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let i=0;i<r.length;i++){let s=e[r[i]];s&&s.prototype&&TO(s.prototype,tw(s.prototype),t)}}o(lY,"propertyDescriptorPatch");function dY(n){n.__load_patch("legacy",e=>{let t=e[n.__symbol__("legacyPatch")];t&&t()}),n.__load_patch("timers",e=>{let r="clear";Sa(e,"set",r,"Timeout"),Sa(e,"set",r,"Interval"),Sa(e,"set",r,"Immediate")}),n.__load_patch("requestAnimationFrame",e=>{Sa(e,"request","cancel","AnimationFrame"),Sa(e,"mozRequest","mozCancel","AnimationFrame"),Sa(e,"webkitRequest","webkitCancel","AnimationFrame")}),n.__load_patch("blocking",(e,t)=>{let r=["alert","prompt","confirm"];for(let i=0;i<r.length;i++){let s=r[i];Si(e,s,(a,u,l)=>function(c,d){return t.current.run(a,e,d,l)})}}),n.__load_patch("EventTarget",(e,t,r)=>{cY(e,r),uY(e,r);let i=e.XMLHttpRequestEventTarget;i&&i.prototype&&r.patchEventTarget(e,r,[i.prototype])}),n.__load_patch("MutationObserver",(e,t,r)=>{al("MutationObserver"),al("WebKitMutationObserver")}),n.__load_patch("IntersectionObserver",(e,t,r)=>{al("IntersectionObserver")}),n.__load_patch("FileReader",(e,t,r)=>{al("FileReader")}),n.__load_patch("on_property",(e,t,r)=>{lY(r,e)}),n.__load_patch("customElements",(e,t,r)=>{aY(e,r)}),n.__load_patch("XHR",(e,t)=>{c(e);let r=ct("xhrTask"),i=ct("xhrSync"),s=ct("xhrListener"),a=ct("xhrScheduled"),u=ct("xhrURL"),l=ct("xhrErrorBeforeScheduled");function c(d){let f=d.XMLHttpRequest;if(!f)return;let h=f.prototype;function g(P){return P[r]}o(g,"findPendingTask");let p=h[y_],m=h[__];if(!p){let P=d.XMLHttpRequestEventTarget;if(P){let Z=P.prototype;p=Z[y_],m=Z[__]}}let w="readystatechange",E="scheduled";function _(P){let Z=P.data,oe=Z.target;oe[a]=!1,oe[l]=!1;let S=oe[s];p||(p=oe[y_],m=oe[__]),S&&m.call(oe,w,S);let K=oe[s]=()=>{if(oe.readyState===oe.DONE)if(!Z.aborted&&oe[a]&&P.state===E){let Oe=oe[t.__symbol__("loadfalse")];if(oe.status!==0&&Oe&&Oe.length>0){let Ye=P.invoke;P.invoke=function(){let Xe=oe[t.__symbol__("loadfalse")];for(let de=0;de<Xe.length;de++)Xe[de]===P&&Xe.splice(de,1);!Z.aborted&&P.state===E&&Ye.call(P)},Oe.push(P)}else P.invoke()}else!Z.aborted&&oe[a]===!1&&(oe[l]=!0)};return p.call(oe,w,K),oe[r]||(oe[r]=P),Y.apply(oe,Z.args),oe[a]=!0,P}o(_,"scheduleTask");function T(){}o(T,"placeholderCallback");function R(P){let Z=P.data;return Z.aborted=!0,q.apply(Z.target,Z.args)}o(R,"clearTask");let D=Si(h,"open",()=>function(P,Z){return P[i]=Z[2]==!1,P[u]=Z[1],D.apply(P,Z)}),B="XMLHttpRequest.send",z=ct("fetchTaskAborting"),j=ct("fetchTaskScheduling"),Y=Si(h,"send",()=>function(P,Z){if(t.current[j]===!0||P[i])return Y.apply(P,Z);{let oe={target:P,url:P[u],isPeriodic:!1,args:Z,aborted:!1},S=tE(B,T,oe,_,R);P&&P[l]===!0&&!oe.aborted&&S.state===E&&S.invoke()}}),q=Si(h,"abort",()=>function(P,Z){let oe=g(P);if(oe&&typeof oe.type=="string"){if(oe.cancelFn==null||oe.data&&oe.data.aborted)return;oe.zone.cancelTask(oe)}else if(t.current[z]===!0)return q.apply(P,Z)})}o(c,"patchXHR")}),n.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&Z7(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),n.__load_patch("PromiseRejectionEvent",(e,t)=>{function r(i){return function(s){uN(e,i).forEach(u=>{let l=e.PromiseRejectionEvent;if(l){let c=new l(i,{promise:s.promise,reason:s.rejection});u.invoke(c)}})}}o(r,"findPromiseRejectionHandler"),e.PromiseRejectionEvent&&(t[ct("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),t[ct("rejectionHandledHandler")]=r("rejectionhandled"))}),n.__load_patch("queueMicrotask",(e,t,r)=>{oY(e,r)})}o(dY,"patchBrowser");function fY(n){n.__load_patch("ZoneAwarePromise",(e,t,r)=>{let i=Object.getOwnPropertyDescriptor,s=Object.defineProperty;function a(fe){if(fe&&fe.toString===Object.prototype.toString){let $=fe.constructor&&fe.constructor.name;return($||"")+": "+JSON.stringify(fe)}return fe?fe.toString():Object.prototype.toString.call(fe)}o(a,"readableObjectToString");let u=r.symbol,l=[],c=e[u("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,d=u("Promise"),f=u("then"),h="__creationTrace__";r.onUnhandledError=fe=>{if(r.showUncaughtError()){let $=fe&&fe.rejection;$?console.error("Unhandled Promise rejection:",$ instanceof Error?$.message:$,"; Zone:",fe.zone.name,"; Task:",fe.task&&fe.task.source,"; Value:",$,$ instanceof Error?$.stack:void 0):console.error(fe)}},r.microtaskDrainDone=()=>{for(;l.length;){let fe=l.shift();try{fe.zone.runGuarded(()=>{throw fe.throwOriginal?fe.rejection:fe})}catch($){p($)}}};let g=u("unhandledPromiseRejectionHandler");function p(fe){r.onUnhandledError(fe);try{let $=t[g];typeof $=="function"&&$.call(this,fe)}catch($){}}o(p,"handleUnhandledRejection");function m(fe){return fe&&fe.then}o(m,"isThenable");function w(fe){return fe}o(w,"forwardResolution");function E(fe){return x.reject(fe)}o(E,"forwardRejection");let _=u("state"),T=u("value"),R=u("finally"),D=u("parentPromiseValue"),B=u("parentPromiseState"),z="Promise.then",j=null,Y=!0,q=!1,P=0;function Z(fe,$){return J=>{try{U(fe,$,J)}catch(W){U(fe,!1,W)}}}o(Z,"makeResolver");let oe=o(function(){let fe=!1;return o(function(J){return function(){fe||(fe=!0,J.apply(null,arguments))}},"wrapper")},"once"),S="Promise resolved with itself",K=u("currentTaskTrace");function U(fe,$,J){let W=oe();if(fe===J)throw new TypeError(S);if(fe[_]===j){let ne=null;try{(typeof J=="object"||typeof J=="function")&&(ne=J&&J.then)}catch(_e){return W(()=>{U(fe,!1,_e)})(),fe}if($!==q&&J instanceof x&&J.hasOwnProperty(_)&&J.hasOwnProperty(T)&&J[_]!==j)Ye(J),U(fe,J[_],J[T]);else if($!==q&&typeof ne=="function")try{ne.call(J,W(Z(fe,$)),W(Z(fe,!1)))}catch(_e){W(()=>{U(fe,!1,_e)})()}else{fe[_]=$;let _e=fe[T];if(fe[T]=J,fe[R]===R&&$===Y&&(fe[_]=fe[B],fe[T]=fe[D]),$===q&&J instanceof Error){let we=t.currentTask&&t.currentTask.data&&t.currentTask.data[h];we&&s(J,K,{configurable:!0,enumerable:!1,writable:!0,value:we})}for(let we=0;we<_e.length;)Xe(fe,_e[we++],_e[we++],_e[we++],_e[we++]);if(_e.length==0&&$==q){fe[_]=P;let we=J;try{throw new Error("Uncaught (in promise): "+a(J)+(J&&J.stack?`
`+J.stack:""))}catch(Ie){we=Ie}c&&(we.throwOriginal=!0),we.rejection=J,we.promise=fe,we.zone=t.current,we.task=t.currentTask,l.push(we),r.scheduleMicroTask()}}}return fe}o(U,"resolvePromise");let Oe=u("rejectionHandledHandler");function Ye(fe){if(fe[_]===P){try{let $=t[Oe];$&&typeof $=="function"&&$.call(this,{rejection:fe[T],promise:fe})}catch($){}fe[_]=q;for(let $=0;$<l.length;$++)fe===l[$].promise&&l.splice($,1)}}o(Ye,"clearRejectedNoCatch");function Xe(fe,$,J,W,ne){Ye(fe);let _e=fe[_],we=_e?typeof W=="function"?W:w:typeof ne=="function"?ne:E;$.scheduleMicroTask(z,()=>{try{let Ie=fe[T],xe=!!J&&R===J[R];xe&&(J[D]=Ie,J[B]=_e);let A=$.run(we,void 0,xe&&we!==E&&we!==w?[]:[Ie]);U(J,!0,A)}catch(Ie){U(J,!1,Ie)}},J)}o(Xe,"scheduleResolveOrReject");let de="function ZoneAwarePromise() { [native code] }",N=o(function(){},"noop"),L=e.AggregateError,Le=class Le{static toString(){return de}static resolve($){return $ instanceof Le?$:U(new this(null),Y,$)}static reject($){return U(new this(null),q,$)}static withResolvers(){let $={};return $.promise=new Le((J,W)=>{$.resolve=J,$.reject=W}),$}static any($){if(!$||typeof $[Symbol.iterator]!="function")return Promise.reject(new L([],"All promises were rejected"));let J=[],W=0;try{for(let we of $)W++,J.push(Le.resolve(we))}catch(we){return Promise.reject(new L([],"All promises were rejected"))}if(W===0)return Promise.reject(new L([],"All promises were rejected"));let ne=!1,_e=[];return new Le((we,Ie)=>{for(let xe=0;xe<J.length;xe++)J[xe].then(A=>{ne||(ne=!0,we(A))},A=>{_e.push(A),W--,W===0&&(ne=!0,Ie(new L(_e,"All promises were rejected")))})})}static race($){let J,W,ne=new this((Ie,xe)=>{J=Ie,W=xe});function _e(Ie){J(Ie)}o(_e,"onResolve");function we(Ie){W(Ie)}o(we,"onReject");for(let Ie of $)m(Ie)||(Ie=this.resolve(Ie)),Ie.then(_e,we);return ne}static all($){return Le.allWithCallback($)}static allSettled($){return(this&&this.prototype instanceof Le?this:Le).allWithCallback($,{thenCallback:o(W=>({status:"fulfilled",value:W}),"thenCallback"),errorCallback:o(W=>({status:"rejected",reason:W}),"errorCallback")})}static allWithCallback($,J){let W,ne,_e=new this((A,v)=>{W=A,ne=v}),we=2,Ie=0,xe=[];for(let A of $){m(A)||(A=this.resolve(A));let v=Ie;try{A.then(y=>{xe[v]=J?J.thenCallback(y):y,we--,we===0&&W(xe)},y=>{J?(xe[v]=J.errorCallback(y),we--,we===0&&W(xe)):ne(y)})}catch(y){ne(y)}we++,Ie++}return we-=2,we===0&&W(xe),_e}constructor($){let J=this;if(!(J instanceof Le))throw new Error("Must be an instanceof Promise.");J[_]=j,J[T]=[];try{let W=oe();$&&$(W(Z(J,Y)),W(Z(J,q)))}catch(W){U(J,!1,W)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return Le}then($,J){var W;let ne=(W=this.constructor)===null||W===void 0?void 0:W[Symbol.species];(!ne||typeof ne!="function")&&(ne=this.constructor||Le);let _e=new ne(N),we=t.current;return this[_]==j?this[T].push(we,_e,$,J):Xe(this,we,_e,$,J),_e}catch($){return this.then(null,$)}finally($){var J;let W=(J=this.constructor)===null||J===void 0?void 0:J[Symbol.species];(!W||typeof W!="function")&&(W=Le);let ne=new W(N);ne[R]=R;let _e=t.current;return this[_]==j?this[T].push(_e,ne,$,$):Xe(this,_e,ne,$,$),ne}};o(Le,"ZoneAwarePromise");let x=Le;x.resolve=x.resolve,x.reject=x.reject,x.race=x.race,x.all=x.all;let ve=e[d]=e.Promise;e.Promise=x;let Ee=u("thenPatched");function Me(fe){let $=fe.prototype,J=i($,"then");if(J&&(J.writable===!1||!J.configurable))return;let W=$.then;$[f]=W,fe.prototype.then=function(ne,_e){return new x((Ie,xe)=>{W.call(this,Ie,xe)}).then(ne,_e)},fe[Ee]=!0}o(Me,"patchThen"),r.patchThen=Me;function tt(fe){return function($,J){let W=fe.apply($,J);if(W instanceof x)return W;let ne=W.constructor;return ne[Ee]||Me(ne),W}}return o(tt,"zoneify"),ve&&(Me(ve),Si(e,"fetch",fe=>tt(fe))),Promise[t.__symbol__("uncaughtPromiseErrors")]=l,x})}o(fY,"patchPromise");function hY(n){n.__load_patch("toString",e=>{let t=Function.prototype.toString,r=ct("OriginalDelegate"),i=ct("Promise"),s=ct("Error"),a=o(function(){if(typeof this=="function"){let d=this[r];if(d)return typeof d=="function"?t.call(d):Object.prototype.toString.call(d);if(this===Promise){let f=e[i];if(f)return t.call(f)}if(this===Error){let f=e[s];if(f)return t.call(f)}}return t.call(this)},"toString");a[r]=t,Function.prototype.toString=a;let u=Object.prototype.toString,l="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?l:u.call(this)}})}o(hY,"patchToString");function gY(n,e,t,r,i){let s=Zone.__symbol__(r);if(e[s])return;let a=e[s]=e[r];e[r]=function(u,l,c){return l&&l.prototype&&i.forEach(function(d){let f=`${t}.${r}::`+d,h=l.prototype;try{if(h.hasOwnProperty(d)){let g=n.ObjectGetOwnPropertyDescriptor(h,d);g&&g.value?(g.value=n.wrapWithCurrentZone(g.value,f),n._redefineProperty(l.prototype,d,g)):h[d]&&(h[d]=n.wrapWithCurrentZone(h[d],f))}else h[d]&&(h[d]=n.wrapWithCurrentZone(h[d],f))}catch(g){}}),a.call(e,u,l,c)},n.attachOriginToPatched(e[r],a)}o(gY,"patchCallbacks");function pY(n){n.__load_patch("util",(e,t,r)=>{let i=tw(e);r.patchOnProperties=rN,r.patchMethod=Si,r.bindArguments=nE,r.patchMacroTask=eY;let s=t.__symbol__("BLACK_LISTED_EVENTS"),a=t.__symbol__("UNPATCHED_EVENTS");e[a]&&(e[s]=e[a]),e[s]&&(t[s]=t[a]=e[s]),r.patchEventPrototype=sY,r.patchEventTarget=iY,r.isIEOrEdge=nY,r.ObjectDefineProperty=Xw,r.ObjectGetOwnPropertyDescriptor=El,r.ObjectCreate=Y7,r.ArraySlice=X7,r.patchClass=al,r.wrapWithCurrentZone=eE,r.filterProperties=cN,r.attachOriginToPatched=Ai,r._redefineProperty=Object.defineProperty,r.patchCallbacks=gY,r.getGlobalObjects=()=>({globalSources:iN,zoneSymbolEventNames:cr,eventNames:i,isBrowser:rE,isMix:nN,isNode:Og,TRUE_STR:Ti,FALSE_STR:bi,ZONE_SYMBOL_PREFIX:Tl,ADD_EVENT_LISTENER_STR:Zw,REMOVE_EVENT_LISTENER_STR:Qw})})}o(pY,"patchUtil");function mY(n){fY(n),hY(n),pY(n)}o(mY,"patchCommon");var lN=K7();mY(lN);dY(lN);var TE=class TE{emit(e){}};o(TE,"NoopLogger");var Qh=TE,vY=new Qh,bE=class bE{getLogger(e,t,r){return new Qh}};o(bE,"NoopLoggerProvider");var nw=bE,dN=new nw,SE=class SE{constructor(e,t,r,i){this._provider=e,this.name=t,this.version=r,this.options=i}emit(e){this._getLogger().emit(e)}_getLogger(){if(this._delegate)return this._delegate;let e=this._provider._getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):vY}};o(SE,"ProxyLogger");var rw=SE,AE=class AE{getLogger(e,t,r){var i;return(i=this._getDelegateLogger(e,t,r))!==null&&i!==void 0?i:new rw(this,e,t,r)}_getDelegate(){var e;return(e=this._delegate)!==null&&e!==void 0?e:dN}_setDelegate(e){this._delegate=e}_getDelegateLogger(e,t,r){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getLogger(e,t,r)}};o(AE,"ProxyLoggerProvider");var eg=AE,yY=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},sh=Symbol.for("io.opentelemetry.js.api.logs"),Zc=yY;function _Y(n,e,t){return r=>r===n?e:t}o(_Y,"makeGetter");var bO=1,vg=class vg{constructor(){this._proxyLoggerProvider=new eg}static getInstance(){return this._instance||(this._instance=new vg),this._instance}setGlobalLoggerProvider(e){return Zc[sh]?this.getLoggerProvider():(Zc[sh]=_Y(bO,e,dN),this._proxyLoggerProvider._setDelegate(e),e)}getLoggerProvider(){var e,t;return(t=(e=Zc[sh])===null||e===void 0?void 0:e.call(Zc,bO))!==null&&t!==void 0?t:this._proxyLoggerProvider}getLogger(e,t,r){return this.getLoggerProvider().getLogger(e,t,r)}disable(){delete Zc[sh],this._proxyLoggerProvider=new eg}};o(vg,"LogsAPI");var iw=vg,wY=iw.getInstance(),Zn=console.error.bind(console);function Qc(n,e,t){let r=!!n[e]&&Object.prototype.propertyIsEnumerable.call(n,e);Object.defineProperty(n,e,{configurable:!0,enumerable:r,writable:!0,value:t})}o(Qc,"defineProperty");var fN=o((n,e,t)=>{if(!n||!n[e]){Zn("no original function "+String(e)+" to wrap");return}if(!t){Zn("no wrapper function"),Zn(new Error().stack);return}let r=n[e];if(typeof r!="function"||typeof t!="function"){Zn("original object and wrapper must be functions");return}let i=t(r,e);return Qc(i,"__original",r),Qc(i,"__unwrap",()=>{n[e]===i&&Qc(n,e,r)}),Qc(i,"__wrapped",!0),Qc(n,e,i),i},"wrap"),EY=o((n,e,t)=>{if(n)Array.isArray(n)||(n=[n]);else{Zn("must provide one or more modules to patch"),Zn(new Error().stack);return}if(!(e&&Array.isArray(e))){Zn("must provide one or more functions to wrap on modules");return}n.forEach(r=>{e.forEach(i=>{fN(r,i,t)})})},"massWrap"),hN=o((n,e)=>{if(!n||!n[e]){Zn("no function to unwrap."),Zn(new Error().stack);return}let t=n[e];if(!t.__unwrap)Zn("no original to unwrap to -- has "+String(e)+" already been unwrapped?");else{t.__unwrap();return}},"unwrap"),TY=o((n,e)=>{if(n)Array.isArray(n)||(n=[n]);else{Zn("must provide one or more modules to patch"),Zn(new Error().stack);return}if(!(e&&Array.isArray(e))){Zn("must provide one or more functions to unwrap on modules");return}n.forEach(t=>{e.forEach(r=>{hN(t,r)})})},"massUnwrap"),IE=class IE{constructor(e,t,r){dn(this,"instrumentationName",void 0),dn(this,"instrumentationVersion",void 0),dn(this,"_config",{}),dn(this,"_tracer",void 0),dn(this,"_meter",void 0),dn(this,"_logger",void 0),dn(this,"_diag",void 0),dn(this,"_wrap",fN),dn(this,"_unwrap",hN),dn(this,"_massWrap",EY),dn(this,"_massUnwrap",TY),this.instrumentationName=e,this.instrumentationVersion=t,this.setConfig(r),this._diag=ot.createComponentLogger({namespace:e}),this._tracer=Nn.getTracer(e,t),this._meter=$H.getMeter(e,t),this._logger=wY.getLogger(e,t),this._updateMetricInstruments()}get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}get logger(){return this._logger}setLoggerProvider(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)}getModuleDefinitions(){var e;let t=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(t)?t:[t]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(e){this._config=Rt({enabled:!0},e)}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}_runSpanCustomizationHook(e,t,r,i){if(e)try{e(r,i)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},s)}}};o(IE,"InstrumentationAbstract");var sw=IE,CE=class CE extends sw{constructor(e,t,r){super(e,t,r),this._config.enabled&&this.enable()}};o(CE,"InstrumentationBase");var ow=CE;function SO(n,e,t){let r,i;try{i=n()}catch(s){r=s}finally{return e(r,i),i}}o(SO,"safeExecuteInTheMiddle");function bY(n){return typeof n=="function"&&typeof n.__original=="function"&&typeof n.__unwrap=="function"&&n.__wrapped===!0}o(bY,"isWrapped");var Vn;(function(n){n[n.STABLE=1]="STABLE",n[n.OLD=2]="OLD",n[n.DUPLICATE=3]="DUPLICATE"})(Vn||(Vn={}));function SY(n,e){let t=Vn.OLD,r=e==null?void 0:e.split(",").map(i=>i.trim()).filter(i=>i!=="");for(let i of r!=null?r:[])if(i.toLowerCase()===n+"/dup"){t=Vn.DUPLICATE;break}else i.toLowerCase()===n&&(t=Vn.STABLE);return t}o(SY,"semconvStabilityFromStr");var E_=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},aw=performance,AY="error.type",IY="http.request.method",CY="http.request.method_original",RY="http.response.status_code",OY="server.address",PY="server.port",NY="url.full",DY=9,LY=6,xY=Math.pow(10,LY),uw=Math.pow(10,DY);function bl(n){let e=n/1e3,t=Math.trunc(e),r=Math.round(n%1e3*xY);return[t,r]}o(bl,"millisToHrTime");function gN(){let n=aw.timeOrigin;if(typeof n!="number"){let e=aw;n=e.timing&&e.timing.fetchStart}return n}o(gN,"getTimeOrigin");function cw(n){let e=bl(gN()),t=bl(typeof n=="number"?n:aw.now());return MY(e,t)}o(cw,"hrTime");function ml(n){if(UY(n))return n;if(typeof n=="number")return n<gN()?cw(n):bl(n);if(n instanceof Date)return bl(n.getTime());throw TypeError("Invalid input type")}o(ml,"timeInputToHrTime");function ws(n){return n[0]*uw+n[1]}o(ws,"hrTimeToNanoseconds");function UY(n){return Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"}o(UY,"isTimeInputHrTime");function MY(n,e){let t=[n[0]+e[0],n[1]+e[1]];return t[1]>=uw&&(t[1]-=uw,t[0]+=1),t}o(MY,"addHrTimes");function pN(n,e){return typeof e=="string"?n===e:!!n.match(e)}o(pN,"urlMatches");function kY(n,e){if(!e)return!1;for(let t of e)if(pN(n,t))return!0;return!1}o(kY,"isUrlIgnored");var Ct;(function(n){n.CONNECT_END="connectEnd",n.CONNECT_START="connectStart",n.DECODED_BODY_SIZE="decodedBodySize",n.DOM_COMPLETE="domComplete",n.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",n.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",n.DOM_INTERACTIVE="domInteractive",n.DOMAIN_LOOKUP_END="domainLookupEnd",n.DOMAIN_LOOKUP_START="domainLookupStart",n.ENCODED_BODY_SIZE="encodedBodySize",n.FETCH_START="fetchStart",n.LOAD_EVENT_END="loadEventEnd",n.LOAD_EVENT_START="loadEventStart",n.NAVIGATION_START="navigationStart",n.REDIRECT_END="redirectEnd",n.REDIRECT_START="redirectStart",n.REQUEST_START="requestStart",n.RESPONSE_END="responseEnd",n.RESPONSE_START="responseStart",n.SECURE_CONNECTION_START="secureConnectionStart",n.START_TIME="startTime",n.UNLOAD_EVENT_END="unloadEventEnd",n.UNLOAD_EVENT_START="unloadEventStart"})(Ct||(Ct={}));var FY="http.response_content_length",$Y="http.response_content_length_uncompressed",T_;function BY(){return T_||(T_=document.createElement("a")),T_}o(BY,"getUrlNormalizingAnchor");function VY(n,e){return e in n}o(VY,"hasKey");function yi(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(VY(t,e)&&typeof t[e]=="number"&&!(r&&t[e]===0))return n.addEvent(e,t[e])}o(yi,"addSpanNetworkEvent");function AO(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(r===void 0&&(r=e[Ct.START_TIME]!==0),t||(yi(n,Ct.FETCH_START,e,r),yi(n,Ct.DOMAIN_LOOKUP_START,e,r),yi(n,Ct.DOMAIN_LOOKUP_END,e,r),yi(n,Ct.CONNECT_START,e,r),yi(n,Ct.SECURE_CONNECTION_START,e,r),yi(n,Ct.CONNECT_END,e,r),yi(n,Ct.REQUEST_START,e,r),yi(n,Ct.RESPONSE_START,e,r),yi(n,Ct.RESPONSE_END,e,r)),!i){let s=e[Ct.ENCODED_BODY_SIZE];s!==void 0&&n.setAttribute(FY,s);let a=e[Ct.DECODED_BODY_SIZE];a!==void 0&&s!==a&&n.setAttribute($Y,a)}}o(AO,"addSpanNetworkEvents");function HY(n){return n.slice().sort((e,t)=>{let r=e[Ct.FETCH_START],i=t[Ct.FETCH_START];return r>i?1:r<i?-1:0})}o(HY,"sortResources");function mN(){return typeof location!="undefined"?location.origin:void 0}o(mN,"getOrigin");function jY(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:new WeakSet,s=arguments.length>5?arguments[5]:void 0,a=tg(n);n=a.toString();let u=GY(n,e,t,r,i,s);if(u.length===0)return{mainRequest:void 0};if(u.length===1)return{mainRequest:u[0]};let l=HY(u);if(a.origin!==mN()&&l.length>1){let c=l[0],d=WY(l,c[Ct.RESPONSE_END],t),f=c[Ct.RESPONSE_END];return d[Ct.FETCH_START]<f&&(d=c,c=void 0),{corsPreFlightRequest:c,mainRequest:d}}else return{mainRequest:u[0]}}o(jY,"getResource");function WY(n,e,t){let r=ws(t),i=ws(ml(e)),s=n[1],a,u=n.length;for(let l=1;l<u;l++){let c=n[l],d=ws(ml(c[Ct.FETCH_START])),f=ws(ml(c[Ct.RESPONSE_END])),h=r-f;d>=i&&(!a||h<a)&&(a=h,s=c)}return s}o(WY,"findMainRequest");function GY(n,e,t,r,i,s){let a=ws(e),u=ws(t),l=r.filter(c=>{let d=ws(ml(c[Ct.FETCH_START])),f=ws(ml(c[Ct.RESPONSE_END]));return c.initiatorType.toLowerCase()===s&&c.name===n&&d>=a&&f<=u});return l.length>0&&(l=l.filter(c=>!i.has(c))),l}o(GY,"filterResourcesForSpan");function tg(n){if(typeof URL=="function")return new URL(n,typeof document!="undefined"?document.baseURI:typeof location!="undefined"?location.href:void 0);let e=BY();return e.href=n,e}o(tg,"parseUrl");function zY(n,e){let t=e||[];return(typeof t=="string"||t instanceof RegExp)&&(t=[t]),tg(n).origin===mN()?!0:t.some(i=>pN(n,i))}o(zY,"shouldPropagateTraceHeaders");var ng;(function(n){n.COMPONENT="component",n.HTTP_STATUS_TEXT="http.status_text"})(ng||(ng={}));var qY="http.host",KY="http.method",YY="http.request.body.size",XY="http.request_content_length_uncompressed",JY="http.scheme",ZY="http.status_code",QY="http.url",eX="http.user_agent",vN=ot.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-fetch/utils"});function tX(){if((arguments.length<=0?void 0:arguments[0])instanceof URL||typeof(arguments.length<=0?void 0:arguments[0])=="string"){let n=arguments.length<=1?void 0:arguments[1];if(!(n!=null&&n.body))return Promise.resolve();if(n.body instanceof ReadableStream){let{body:e,length:t}=nX(n.body);return n.body=e,t}else return Promise.resolve(iX(n.body))}else{let n=arguments.length<=0?void 0:arguments[0];return n!=null&&n.body?n.clone().text().then(e=>lw(e)):Promise.resolve()}}o(tX,"getFetchBodyLength");function nX(n){if(!n.pipeThrough)return vN.warn("Platform has ReadableStream but not pipeThrough!"),{body:n,length:Promise.resolve(void 0)};let e=0,t,r=new Promise(a=>{t=a}),i=new TransformStream({start(){},transform(a,u){return pt(this,null,function*(){let l=yield a;e+=l.byteLength,u.enqueue(a)})},flush(){t(e)}});return{body:n.pipeThrough(i),length:r}}o(nX,"_getBodyNonDestructively");function rX(n){return typeof Document!="undefined"&&n instanceof Document}o(rX,"isDocument");function iX(n){if(rX(n))return new XMLSerializer().serializeToString(document).length;if(typeof n=="string")return lw(n);if(n instanceof Blob)return n.size;if(n instanceof FormData)return oX(n);if(n instanceof URLSearchParams)return lw(n.toString());if(n.byteLength!==void 0)return n.byteLength;vN.warn("unknown body type")}o(iX,"getXHRBodyLength");var sX=new TextEncoder;function lw(n){return sX.encode(n).byteLength}o(lw,"getByteLength");function oX(n){let e=0;for(let[t,r]of n.entries())e+=t.length,r instanceof Blob?e+=r.size:e+=r.length;return e}o(oX,"getFormDataSize");function aX(n){let e=cX(),t=n.toUpperCase();return t in e?t:"_OTHER"}o(aX,"normalizeHttpRequestMethod");var uX={CONNECT:!0,DELETE:!0,GET:!0,HEAD:!0,OPTIONS:!0,PATCH:!0,POST:!0,PUT:!0,TRACE:!0},b_;function cX(){return b_===void 0&&(b_=uX),b_}o(cX,"getKnownMethods");var lX={"https:":"443","http:":"80"};function dX(n){let e=Number(n.port||lX[n.protocol]);if(e&&!isNaN(e))return e}o(dX,"serverPortFromUrl");var IO="0.206.0",fX=300,CO=typeof process=="object"&&((X0=process.release)===null||X0===void 0?void 0:X0.name)==="node",RE=class RE extends ow{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super("@opentelemetry/instrumentation-fetch",IO,e),dn(this,"component","fetch"),dn(this,"version",IO),dn(this,"moduleName",this.component),dn(this,"_usedResources",new WeakSet),dn(this,"_tasksCount",0),dn(this,"_semconvStability",void 0),this._semconvStability=SY("http",e==null?void 0:e.semconvStabilityOptIn)}init(){}_addChildSpan(e,t){let r=this.tracer.startSpan("CORS Preflight",{startTime:t[Ct.FETCH_START]},Nn.setSpan(Hn.active(),e)),i=!(this._semconvStability&Vn.OLD);AO(r,t,this.getConfig().ignoreNetworkEvents,void 0,i),r.end(t[Ct.RESPONSE_END])}_addFinalSpanAttributes(e,t){let r=tg(t.url);if(this._semconvStability&Vn.OLD&&(e.setAttribute(ZY,t.status),t.statusText!=null&&e.setAttribute(ng.HTTP_STATUS_TEXT,t.statusText),e.setAttribute(qY,r.host),e.setAttribute(JY,r.protocol.replace(":","")),typeof navigator!="undefined"&&e.setAttribute(eX,navigator.userAgent)),this._semconvStability&Vn.STABLE){e.setAttribute(RY,t.status),e.setAttribute(OY,r.hostname);let i=dX(r);i&&e.setAttribute(PY,i)}}_addHeaders(e,t){if(!zY(t,this.getConfig().propagateTraceHeaderCorsUrls)){let r={};Ei.inject(Hn.active(),r),Object.keys(r).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(e instanceof Request)Ei.inject(Hn.active(),e.headers,{set:o((r,i,s)=>r.set(i,typeof s=="string"?s:String(s)),"set")});else if(e.headers instanceof Headers)Ei.inject(Hn.active(),e.headers,{set:o((r,i,s)=>r.set(i,typeof s=="string"?s:String(s)),"set")});else if(e.headers instanceof Map)Ei.inject(Hn.active(),e.headers,{set:o((r,i,s)=>r.set(i,typeof s=="string"?s:String(s)),"set")});else{let r={};Ei.inject(Hn.active(),r),e.headers=Object.assign({},r,e.headers||{})}}_clearResources(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)}_createSpan(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(kY(e,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}let r="",i={};if(this._semconvStability&Vn.OLD){let s=(t.method||"GET").toUpperCase();r=`HTTP ${s}`,i[ng.COMPONENT]=this.moduleName,i[KY]=s,i[QY]=e}if(this._semconvStability&Vn.STABLE){let s=t.method,a=aX(t.method||"GET");r||(r=a),i[IY]=a,a!==s&&(i[CY]=s),i[NY]=e}return this.tracer.startSpan(r,{kind:kh.CLIENT,attributes:i})}_findResourceAndAddNetworkEvents(e,t,r){let i=t.entries;if(!i.length){if(!performance.getEntriesByType)return;i=performance.getEntriesByType("resource")}let s=jY(t.spanUrl,t.startTime,r,i,this._usedResources,"fetch");if(s.mainRequest){let a=s.mainRequest;this._markResourceAsUsed(a);let u=s.corsPreFlightRequest;u&&(this._addChildSpan(e,u),this._markResourceAsUsed(u));let l=!(this._semconvStability&Vn.OLD);AO(e,a,this.getConfig().ignoreNetworkEvents,void 0,l)}}_markResourceAsUsed(e){this._usedResources.add(e)}_endSpan(e,t,r){let i=bl(Date.now()),s=cw();this._addFinalSpanAttributes(e,r),this._semconvStability&Vn.STABLE&&r.status>=400&&(e.setStatus({code:_l.ERROR}),e.setAttribute(AY,String(r.status))),setTimeout(()=>{var a;(a=t.observer)===null||a===void 0||a.disconnect(),this._findResourceAndAddNetworkEvents(e,t,s),this._tasksCount--,this._clearResources(),e.end(i)},fX)}_patchConstructor(){return e=>{let t=this;return o(function(){let i=this;for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];let l=tg(a[0]instanceof Request?a[0].url:String(a[0])).href,c=a[0]instanceof Request?a[0]:a[1]||{},d=t._createSpan(l,c);if(!d)return e.apply(this,a);let f=t._prepareSpanData(l);t.getConfig().measureRequestSize&&tX(...a).then(E=>{E&&(t._semconvStability&Vn.OLD&&d.setAttribute(XY,E),t._semconvStability&Vn.STABLE&&d.setAttribute(YY,E))}).catch(E=>{t._diag.warn("getFetchBodyLength",E)});function h(E,_){t._applyAttributesAfterFetch(E,c,_),t._endSpan(E,f,{status:_.status||0,statusText:_.message,url:l})}o(h,"endSpanOnError");function g(E,_){t._applyAttributesAfterFetch(E,c,_),_.status>=200&&_.status<400?t._endSpan(E,f,_):t._endSpan(E,f,{status:_.status,statusText:_.statusText,url:l})}o(g,"endSpanOnSuccess");function p(E,_){if(!E)return null;let T=E.getReader();return new ReadableStream({pull(D){return pt(this,null,function*(){try{let{value:B,done:z}=yield T.read();z?(T.releaseLock(),D.close()):D.enqueue(B)}catch(B){D.error(B),T.cancel(B).catch(z=>{});try{T.releaseLock()}catch(z){}}})},cancel(D){return _.cancel(D).catch(B=>{}),T.cancel(D)}})}o(p,"withCancelPropagation");function m(E,_,T){let R=null;try{let B=T.clone().body;if(B){let z=B.getReader(),j=p(T.body,z);R=new Response(j,{status:T.status,statusText:T.statusText,headers:T.headers});let Y=o(()=>{z.read().then(q=>{let{done:P}=q;P?g(E,T):Y()},q=>{h(E,q)})},"read");Y()}else g(E,T)}finally{_(R!=null?R:T)}}o(m,"onSuccess");function w(E,_,T){try{h(E,T)}finally{_(T)}}return o(w,"onError"),new Promise((E,_)=>Hn.with(Nn.setSpan(Hn.active(),d),()=>(t._addHeaders(c,l),t._callRequestHook(d,c),t._tasksCount++,e.apply(i,c instanceof Request?[c]:[l,c]).then(m.bind(i,d,E),w.bind(i,d,_)))))},"patchConstructor")}}_applyAttributesAfterFetch(e,t,r){let i=this.getConfig().applyCustomAttributesOnSpan;i&&SO(()=>i(e,t,r),s=>{s&&this._diag.error("applyCustomAttributesOnSpan",s)})}_callRequestHook(e,t){let r=this.getConfig().requestHook;r&&SO(()=>r(e,t),i=>{i&&this._diag.error("requestHook",i)})}_prepareSpanData(e){let t=cw(),r=[];if(typeof PerformanceObserver!="function")return{entries:r,startTime:t,spanUrl:e};let i=new PerformanceObserver(s=>{s.getEntries().forEach(u=>{u.initiatorType==="fetch"&&u.name===e&&r.push(u)})});return i.observe({entryTypes:["resource"]}),{entries:r,observer:i,startTime:t,spanUrl:e}}enable(){if(CO){this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()");return}bY(fetch)&&(this._unwrap(E_,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(E_,"fetch",this._patchConstructor())}disable(){CO||(this._unwrap(E_,"fetch"),this._usedResources=new WeakSet)}};o(RE,"FetchInstrumentation");var dw=RE,hX="exception",gX=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:o(function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RO=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},pX=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},mX=(function(){function n(e,t,r,i,s,a,u,l,c,d){u===void 0&&(u=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:_l.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=r,this._spanContext=i,this.parentSpanId=a,this.kind=s,this.links=u;var f=Date.now();this._performanceStartTime=Wa.now(),this._performanceOffset=f-(this._performanceStartTime+YO()),this._startTimeProvided=l!=null,this.startTime=this._getTime(l!=null?l:f),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,d!=null&&this.setAttributes(d),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t)}return o(n,"Span"),n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(e,t){return t==null||this._isSpanEnded()?this:e.length===0?(ot.warn("Invalid attribute key: "+e),this):jO(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(ot.warn("Invalid attribute value set for key: "+e),this)},n.prototype.setAttributes=function(e){var t,r;try{for(var i=gX(Object.entries(e)),s=i.next();!s.done;s=i.next()){var a=RO(s.value,2),u=a[0],l=a[1];this.setAttribute(u,l)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return this},n.prototype.addEvent=function(e,t,r){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return ot.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&ot.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),I1(t)&&(I1(r)||(r=t),t=void 0);var i=uh(t);return this.events.push({name:e,attributes:i,time:this._getTime(r),droppedAttributesCount:0}),this},n.prototype.addLink=function(e){return this.links.push(e),this},n.prototype.addLinks=function(e){var t;return(t=this.links).push.apply(t,pX([],RO(e),!1)),this},n.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},n.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},n.prototype.end=function(e){if(this._isSpanEnded()){ot.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=V4(this.startTime,this.endTime),this._duration[0]<0&&(ot.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&ot.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this)},n.prototype._getTime=function(e){if(typeof e=="number"&&e<Wa.now())return XO(e+this._performanceOffset);if(typeof e=="number")return Fa(e);if(e instanceof Date)return Fa(e.getTime());if(JO(e))return e;if(this._startTimeProvided)return Fa(Date.now());var t=Wa.now()-this._performanceStartTime;return ZO(this.startTime,Fa(t))},n.prototype.isRecording=function(){return this._ended===!1},n.prototype.recordException=function(e,t){var r={};typeof e=="string"?r[i_]=e:e&&(e.code?r[r_]=e.code.toString():e.name&&(r[r_]=e.name),e.message&&(r[i_]=e.message),e.stack&&(r[O4]=e.stack)),r[r_]||r[i_]?this.addEvent(hX,r,t):ot.warn("Failed to record an exception "+e)},Object.defineProperty(n.prototype,"duration",{get:o(function(){return this._duration},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ended",{get:o(function(){return this._ended},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"droppedAttributesCount",{get:o(function(){return this._droppedAttributesCount},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"droppedEventsCount",{get:o(function(){return this._droppedEventsCount},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"droppedLinksCount",{get:o(function(){return this._droppedLinksCount},"get"),enumerable:!1,configurable:!0}),n.prototype._isSpanEnded=function(){return this._ended&&ot.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},n.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substr(0,t)},n.prototype._truncateToSize=function(e){var t=this,r=this._attributeValueLengthLimit;return r<=0?(ot.warn("Attribute value limit must be positive, got "+r),e):typeof e=="string"?this._truncateToLimitUtil(e,r):Array.isArray(e)?e.map(function(i){return typeof i=="string"?t._truncateToLimitUtil(i,r):i}):e},n})(),qa;(function(n){n[n.NOT_RECORD=0]="NOT_RECORD",n[n.RECORD=1]="RECORD",n[n.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(qa||(qa={}));var rg=(function(){function n(){}return o(n,"AlwaysOffSampler"),n.prototype.shouldSample=function(){return{decision:qa.NOT_RECORD}},n.prototype.toString=function(){return"AlwaysOffSampler"},n})(),Ga=(function(){function n(){}return o(n,"AlwaysOnSampler"),n.prototype.shouldSample=function(){return{decision:qa.RECORD_AND_SAMPLED}},n.prototype.toString=function(){return"AlwaysOnSampler"},n})(),S_=(function(){function n(e){var t,r,i,s;this._root=e.root,this._root||(Fh(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Ga),this._remoteParentSampled=(t=e.remoteParentSampled)!==null&&t!==void 0?t:new Ga,this._remoteParentNotSampled=(r=e.remoteParentNotSampled)!==null&&r!==void 0?r:new rg,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new Ga,this._localParentNotSampled=(s=e.localParentNotSampled)!==null&&s!==void 0?s:new rg}return o(n,"ParentBasedSampler"),n.prototype.shouldSample=function(e,t,r,i,s,a){var u=Nn.getSpanContext(e);return!u||!wg(u)?this._root.shouldSample(e,t,r,i,s,a):u.isRemote?u.traceFlags&Ii.SAMPLED?this._remoteParentSampled.shouldSample(e,t,r,i,s,a):this._remoteParentNotSampled.shouldSample(e,t,r,i,s,a):u.traceFlags&Ii.SAMPLED?this._localParentSampled.shouldSample(e,t,r,i,s,a):this._localParentNotSampled.shouldSample(e,t,r,i,s,a)},n.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},n})(),OO=(function(){function n(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return o(n,"TraceIdRatioBasedSampler"),n.prototype.shouldSample=function(e,t){return{decision:FO(t)&&this._accumulate(t)<this._upperBound?qa.RECORD_AND_SAMPLED:qa.NOT_RECORD}},n.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},n.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},n.prototype._accumulate=function(e){for(var t=0,r=0;r<e.length/8;r++){var i=r*8,s=parseInt(e.slice(i,i+8),16);t=(t^s)>>>0}return t},n})(),vX=za(),yX=Jr.AlwaysOn,Aa=1;function yN(){var n=za();return{sampler:_N(vX),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:n.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:n.OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:n.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:n.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:n.OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:n.OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:n.OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:n.OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}o(yN,"loadDefaultConfig");function _N(n){switch(n===void 0&&(n=za()),n.OTEL_TRACES_SAMPLER){case Jr.AlwaysOn:return new Ga;case Jr.AlwaysOff:return new rg;case Jr.ParentBasedAlwaysOn:return new S_({root:new Ga});case Jr.ParentBasedAlwaysOff:return new S_({root:new rg});case Jr.TraceIdRatio:return new OO(PO(n));case Jr.ParentBasedTraceIdRatio:return new S_({root:new OO(PO(n))});default:return ot.error('OTEL_TRACES_SAMPLER value "'+n.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+yX+'".'),new Ga}}o(_N,"buildSamplerFromEnv");function PO(n){if(n.OTEL_TRACES_SAMPLER_ARG===void 0||n.OTEL_TRACES_SAMPLER_ARG==="")return ot.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Aa+"."),Aa;var e=Number(n.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(ot.error("OTEL_TRACES_SAMPLER_ARG="+n.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Aa+"."),Aa):e<0||e>1?(ot.error("OTEL_TRACES_SAMPLER_ARG="+n.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Aa+"."),Aa):e}o(PO,"getSamplerProbabilityFromEnv");function _X(n){var e={sampler:_N()},t=yN(),r=Object.assign({},t,e,n);return r.generalLimits=Object.assign({},t.generalLimits,n.generalLimits||{}),r.spanLimits=Object.assign({},t.spanLimits,n.spanLimits||{}),r}o(_X,"mergeConfig");function wX(n){var e,t,r,i,s,a,u,l,c,d,f,h,g=Object.assign({},n.spanLimits),p=S4();return g.attributeCountLimit=(a=(s=(i=(t=(e=n.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&t!==void 0?t:(r=n.generalLimits)===null||r===void 0?void 0:r.attributeCountLimit)!==null&&i!==void 0?i:p.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:p.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&a!==void 0?a:lh,g.attributeValueLengthLimit=(h=(f=(d=(l=(u=n.spanLimits)===null||u===void 0?void 0:u.attributeValueLengthLimit)!==null&&l!==void 0?l:(c=n.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&d!==void 0?d:p.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&f!==void 0?f:p.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&h!==void 0?h:ch,Object.assign({},n,{spanLimits:g})}o(wX,"reconfigureLimits");var EX=(function(){function n(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var r=za();this._maxExportBatchSize=typeof(t==null?void 0:t.maxExportBatchSize)=="number"?t.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(t==null?void 0:t.maxQueueSize)=="number"?t.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(t==null?void 0:t.scheduledDelayMillis)=="number"?t.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(t==null?void 0:t.exportTimeoutMillis)=="number"?t.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Ij(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(ot.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return o(n,"BatchSpanProcessorBase"),n.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},n.prototype.onStart=function(e,t){},n.prototype.onEnd=function(e){this._shutdownOnce.isCalled||(e.spanContext().traceFlags&Ii.SAMPLED)!==0&&this._addToBuffer(e)},n.prototype.shutdown=function(){return this._shutdownOnce.call()},n.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},n.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&ot.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(ot.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},n.prototype._flushAll=function(){var e=this;return new Promise(function(t,r){for(var i=[],s=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),a=0,u=s;a<u;a++)i.push(e._flushOneBatch());Promise.all(i).then(function(){t()}).catch(r)})},n.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(t,r){var i=setTimeout(function(){r(new Error("Timeout"))},e._exportTimeoutMillis);Hn.with(qH(Hn.active()),function(){var s;e._finishedSpans.length<=e._maxExportBatchSize?(s=e._finishedSpans,e._finishedSpans=[]):s=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var a=o(function(){return e._exporter.export(s,function(f){var h;clearTimeout(i),f.code===P_.SUCCESS?t():r((h=f.error)!==null&&h!==void 0?h:new Error("BatchSpanProcessor: span export failed"))})},"doExport"),u=null,l=0,c=s.length;l<c;l++){var d=s[l];d.resource.asyncAttributesPending&&d.resource.waitForAsyncAttributes&&(u!=null||(u=[]),u.push(d.resource.waitForAsyncAttributes()))}u===null?a():Promise.all(u).then(a,function(f){Fh(f),r(f)})})})},n.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var t=o(function(){e._isExporting=!0,e._flushOneBatch().finally(function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(r){e._isExporting=!1,Fh(r)})},"flush");if(this._finishedSpans.length>=this._maxExportBatchSize)return t();this._timer===void 0&&(this._timer=setTimeout(function(){return t()},this._scheduledDelayMillis),this._timer,void 0)}},n.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},n})(),TX=(function(){var n=o(function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)},"extendStatics");return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}o(r,"__"),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bX=(function(n){TX(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.onInit(r),i}return o(e,"BatchSpanProcessor"),e.prototype.onInit=function(t){var r=this;(t==null?void 0:t.disableAutoFlushOnDocumentHide)!==!0&&typeof document!="undefined"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&r.forceFlush()},this._pageHideListener=function(){r.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){typeof document!="undefined"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e})(EX),SX=8,AX=16,IX=(function(){function n(){this.generateTraceId=NO(AX),this.generateSpanId=NO(SX)}return o(n,"RandomIdGenerator"),n})(),oh=Array(32);function NO(n){return o(function(){for(var t=0;t<n*2;t++)oh[t]=Math.floor(Math.random()*16)+48,oh[t]>=58&&(oh[t]+=39);return String.fromCharCode.apply(null,oh.slice(0,n*2))},"generateId")}o(NO,"getIdGenerator");var CX=(function(){function n(e,t,r){this._tracerProvider=r;var i=_X(t);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=t.idGenerator||new IX,this.resource=r.resource,this.instrumentationLibrary=e}return o(n,"Tracer"),n.prototype.startSpan=function(e,t,r){var i,s,a;t===void 0&&(t={}),r===void 0&&(r=Hn.active()),t.root&&(r=Nn.deleteSpan(r));var u=Nn.getSpan(r);if(Mw(r)){ot.debug("Instrumentation suppressed, returning Noop Span");var l=Nn.wrapSpanContext(MO);return l}var c=u==null?void 0:u.spanContext(),d=this._idGenerator.generateSpanId(),f,h,g;!c||!Nn.isSpanContextValid(c)?f=this._idGenerator.generateTraceId():(f=c.traceId,h=c.traceState,g=c.spanId);var p=(i=t.kind)!==null&&i!==void 0?i:kh.INTERNAL,m=((s=t.links)!==null&&s!==void 0?s:[]).map(function(B){return{context:B.context,attributes:uh(B.attributes)}}),w=uh(t.attributes),E=this._sampler.shouldSample(r,f,e,p,w,m);h=(a=E.traceState)!==null&&a!==void 0?a:h;var _=E.decision===Mh.RECORD_AND_SAMPLED?Ii.SAMPLED:Ii.NONE,T={traceId:f,spanId:d,traceFlags:_,traceState:h};if(E.decision===Mh.NOT_RECORD){ot.debug("Recording is off, propagating context in a non-recording span");var l=Nn.wrapSpanContext(T);return l}var R=uh(Object.assign(w,E.attributes)),D=new mX(this,r,e,T,p,g,m,t.startTime,void 0,R);return D},n.prototype.startActiveSpan=function(e,t,r,i){var s,a,u;if(!(arguments.length<2)){arguments.length===2?u=t:arguments.length===3?(s=t,u=r):(s=t,a=r,u=i);var l=a!=null?a:Hn.active(),c=this.startSpan(e,s,l),d=Nn.setSpan(l,c);return Hn.with(d,u,void 0,c)}},n.prototype.getGeneralLimits=function(){return this._generalLimits},n.prototype.getSpanLimits=function(){return this._spanLimits},n.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},n})();function RX(){return"unknown_service"}o(RX,"defaultServiceName");var ys=function(){return ys=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ys.apply(this,arguments)},OX=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},PX=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},NX=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},DO=(function(){function n(e,t){var r=this,i;this._attributes=e,this.asyncAttributesPending=t!=null,this._syncAttributes=(i=this._attributes)!==null&&i!==void 0?i:{},this._asyncAttributesPromise=t==null?void 0:t.then(function(s){return r._attributes=Object.assign({},r._attributes,s),r.asyncAttributesPending=!1,s},function(s){return ot.debug("a resource's async attributes promise rejected: %s",s),r.asyncAttributesPending=!1,{}})}return o(n,"Resource"),n.empty=function(){return n.EMPTY},n.default=function(){var e;return new n((e={},e[M4]=RX(),e[R_]=s_[R_],e[C_]=s_[C_],e[O_]=s_[O_],e))},Object.defineProperty(n.prototype,"attributes",{get:o(function(){var e;return this.asyncAttributesPending&&ot.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},"get"),enumerable:!1,configurable:!0}),n.prototype.waitForAsyncAttributes=function(){return OX(this,void 0,void 0,function(){return PX(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},n.prototype.merge=function(e){var t=this,r;if(!e)return this;var i=ys(ys({},this._syncAttributes),(r=e._syncAttributes)!==null&&r!==void 0?r:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new n(i);var s=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(a){var u,l=NX(a,2),c=l[0],d=l[1];return ys(ys(ys(ys({},t._syncAttributes),c),(u=e._syncAttributes)!==null&&u!==void 0?u:e.attributes),d)});return new n(i,s)},n.EMPTY=new n({}),n})(),ah=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:o(function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DX=(function(){function n(e){this._spanProcessors=e}return o(n,"MultiSpanProcessor"),n.prototype.forceFlush=function(){var e,t,r=[];try{for(var i=ah(this._spanProcessors),s=i.next();!s.done;s=i.next()){var a=s.value;r.push(a.forceFlush())}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return new Promise(function(u){Promise.all(r).then(function(){u()}).catch(function(l){Fh(l||new Error("MultiSpanProcessor: forceFlush failed")),u()})})},n.prototype.onStart=function(e,t){var r,i;try{for(var s=ah(this._spanProcessors),a=s.next();!a.done;a=s.next()){var u=a.value;u.onStart(e,t)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},n.prototype.onEnd=function(e){var t,r;try{for(var i=ah(this._spanProcessors),s=i.next();!s.done;s=i.next()){var a=s.value;a.onEnd(e)}}catch(u){t={error:u}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.shutdown=function(){var e,t,r=[];try{for(var i=ah(this._spanProcessors),s=i.next();!s.done;s=i.next()){var a=s.value;r.push(a.shutdown())}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return new Promise(function(u,l){Promise.all(r).then(function(){u()},l)})},n})(),LX=(function(){function n(){}return o(n,"NoopSpanProcessor"),n.prototype.onStart=function(e,t){},n.prototype.onEnd=function(e){},n.prototype.shutdown=function(){return Promise.resolve()},n.prototype.forceFlush=function(){return Promise.resolve()},n})(),po;(function(n){n[n.resolved=0]="resolved",n[n.timeout=1]="timeout",n[n.error=2]="error",n[n.unresolved=3]="unresolved"})(po||(po={}));var xX=(function(){function n(e){e===void 0&&(e={});var t;this._registeredSpanProcessors=[],this._tracers=new Map;var r=Ej({},yN(),wX(e));this.resource=(t=r.resource)!==null&&t!==void 0?t:DO.empty(),this.resource=DO.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});var i=this._buildExporterFromEnv();if(i!==void 0){var s=new bX(i);this.activeSpanProcessor=s}else this.activeSpanProcessor=new LX}return o(n,"BasicTracerProvider"),n.prototype.getTracer=function(e,t,r){var i=e+"@"+(t||"")+":"+((r==null?void 0:r.schemaUrl)||"");return this._tracers.has(i)||this._tracers.set(i,new CX({name:e,version:t,schemaUrl:r==null?void 0:r.schemaUrl},this._config,this)),this._tracers.get(i)},n.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(t){return ot.error("Error while trying to shutdown current span processor",t)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new DX(this._registeredSpanProcessors)},n.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},n.prototype.register=function(e){e===void 0&&(e={}),Nn.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&Hn.setGlobalContextManager(e.contextManager),e.propagator&&Ei.setGlobalPropagator(e.propagator)},n.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map(function(r){return new Promise(function(i){var s,a=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+e+" ms")),s=po.timeout},e);r.forceFlush().then(function(){clearTimeout(a),s!==po.timeout&&(s=po.resolved,i(s))}).catch(function(u){clearTimeout(a),s=po.error,i(u)})})});return new Promise(function(r,i){Promise.all(t).then(function(s){var a=s.filter(function(u){return u!==po.resolved});a.length>0?i(a):r()}).catch(function(s){return i([s])})})},n.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},n.prototype._getPropagator=function(e){var t;return(t=this.constructor._registeredPropagators.get(e))===null||t===void 0?void 0:t()},n.prototype._getSpanExporter=function(e){var t;return(t=this.constructor._registeredExporters.get(e))===null||t===void 0?void 0:t()},n.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set(za().OTEL_PROPAGATORS)),r=t.map(function(s){var a=e._getPropagator(s);return a||ot.warn('Propagator "'+s+'" requested through environment variable is unavailable.'),a}),i=r.reduce(function(s,a){return a&&s.push(a),s},[]);if(i.length!==0)return t.length===1?i[0]:new G4({propagators:i})},n.prototype._buildExporterFromEnv=function(){var e=za().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var t=this._getSpanExporter(e);return t||ot.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},n._registeredPropagators=new Map([["tracecontext",function(){return new uj}],["baggage",function(){return new n4}]]),n._registeredExporters=new Map,n})(),UX=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},MX=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},kX=(function(){function n(){this._enabled=!1,this._currentContext=wi}return o(n,"StackContextManager"),n.prototype._bindFunction=function(e,t){e===void 0&&(e=wi);var r=this,i=o(function(){for(var s=this,a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return r.with(e,function(){return t.apply(s,a)})},"contextWrapper");return Object.defineProperty(i,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),i},n.prototype.active=function(){return this._currentContext},n.prototype.bind=function(e,t){return e===void 0&&(e=this.active()),typeof t=="function"?this._bindFunction(e,t):t},n.prototype.disable=function(){return this._currentContext=wi,this._enabled=!1,this},n.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=wi,this)},n.prototype.with=function(e,t,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var a=this._currentContext;this._currentContext=e||wi;try{return t.call.apply(t,MX([r],UX(i),!1))}finally{this._currentContext=a}},n})(),FX=(function(){var n=o(function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)},"extendStatics");return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}o(r,"__"),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$X=(function(n){FX(e,n);function e(t){t===void 0&&(t={});var r=n.call(this,t)||this;if(t.contextManager)throw"contextManager should be defined in register method not in constructor";if(t.propagator)throw"propagator should be defined in register method not in constructor";return r}return o(e,"WebTracerProvider"),e.prototype.register=function(t){t===void 0&&(t={}),t.contextManager===void 0&&(t.contextManager=new kX),t.contextManager&&t.contextManager.enable(),n.prototype.register.call(this,t)},e})(xX);function wN(n){let e=n.getSpanInformation(),t=n.getContext();return{traceId:t.traceId,spanId:t.spanId,parentSpanId:e.parentSpanId,name:e.name,startTimeUnixNano:e.startTime,endTimeUnixNano:e.endTime,attributes:t.attributes,kind:e.kind,status:e.status}}o(wN,"serializeSpan");var fw,ig,vo,wh,Eh,EN,OE=class OE{constructor(e){let{transportManager:t,promiseMap:r=new Map,tracer:i}=e;fw.add(this),ig.set(this,void 0),vo.set(this,void 0),wh.set(this,0),Eh.set(this,void 0),ye(this,ig,t,"f"),ye(this,vo,r,"f"),ye(this,Eh,i,"f")}shutdown(){return ge(this,void 0,void 0,function*(){yield Promise.all(O(this,vo,"f").values())})}forceFlush(){return ge(this,void 0,void 0,function*(){yield Promise.all(O(this,vo,"f").values())})}onStart(){}onEnd(e){let t=O(this,Eh,"f").fromOTSpan(e);O(this,fw,"m",EN).call(this,t)}};o(OE,"MainTraceExporter");var hw=OE;ig=new WeakMap,vo=new WeakMap,wh=new WeakMap,Eh=new WeakMap,fw=new WeakSet,EN=o(function(e){var t,r;let i=(ye(this,wh,(r=O(this,wh,"f"),t=r++,r),"f"),t),s=wN(e),a=o(()=>ge(this,void 0,void 0,function*(){yield O(this,ig,"f").processSpan(s),O(this,vo,"f").delete(i)}),"work");O(this,vo,"f").set(i,a())},"_MainTraceExporter_writeSpan");function BX(n,e){var t,r;if(e){let i=(r=(t=e.getSpanInformation())===null||t===void 0?void 0:t.childrenNames)!==null&&r!==void 0?r:[];i.push(n),e.setAttribute(mt.ChildrenNames,i)}}o(BX,"addChildSpanNameToParent");var Dr={Tag:"outsystems.log.message.tag",Visibility:"outsystems.otel.access.visibility",AccessType:"outsystems.otel.access.type",ChildrenNames:mt.ChildrenNames,IsNonAggregable:mt.IsNonAggregable},VX=[Dr.IsNonAggregable,Dr.ChildrenNames],Vt,Th,bh,ul,PE=class PE{constructor(e){let{visibility:t,attributes:r={},span:i,activateSpan:s,explicitChildren:a=[]}=e;Vt.set(this,void 0),Th.set(this,void 0),bh.set(this,void 0),ul.set(this,void 0),ye(this,Vt,i,"f"),ye(this,Th,s,"f"),ye(this,ul,a,"f"),t!==void 0&&O(this,Vt,"f").setAttribute(Dr.Visibility,Cg[t]),O(this,Vt,"f").setAttributes(r),this.ended=new Promise(u=>{ye(this,bh,u,"f")})}setAttribute(e,t){O(this,Vt,"f").setAttribute(e,t)}setStatus(e,t){O(this,Vt,"f").setStatus({code:e,message:t})}raiseError(e,t){O(this,Vt,"f").recordException(e),this.setStatus(2,t)}getContext(){let e=O(this,Vt,"f").spanContext();return{spanId:e.spanId,traceId:e.traceId,attributes:O(this,Vt,"f").attributes,sampled:!!(e.traceFlags&1)}}addEvent(e,t){O(this,Vt,"f").addEvent(e,t)}end(){return ge(this,void 0,void 0,function*(){var e;yield Promise.all(O(this,ul,"f").map(t=>t.ended)),O(this,Vt,"f").end(),(e=O(this,bh,"f"))===null||e===void 0||e.call(this)})}fail(){O(this,Vt,"f").setStatus({code:_l.ERROR})}getSpanInformation(){return{name:O(this,Vt,"f").name,kind:O(this,Vt,"f").kind,status:O(this,Vt,"f").status.code,parentSpanId:O(this,Vt,"f").parentSpanId,startTime:Nr.toNanoSeconds(new Nr(O(this,Vt,"f").startTime)),endTime:Nr.toNanoSeconds(new Nr(O(this,Vt,"f").endTime)),childrenNames:O(this,Vt,"f").attributes[mt.ChildrenNames]}}activate(){return O(this,Th,"f").call(this)}addExplicitChild(e){O(this,ul,"f").push(e)}};o(PE,"Span");var gw=PE;Vt=new WeakMap,Th=new WeakMap,bh=new WeakMap,ul=new WeakMap;var pw,ms,Ra,Oa,ho,Sh,Pa,Ah,ja,sg,TN,NE=class NE{constructor(e){let{transports:t,baseAttributes:r={},staticAttributes:i=[],databaseNameSuffix:s,transportManager:a=new wl({traceTransports:t,databaseNameSuffix:s}),tracerProvider:u=new $X,contextManager:l=new z7,tracer:c=u.getTracer("@outsystems/logger-js","3.4.2"),exporter:d,enabled:f=!0,getActiveSpan:h=o(()=>Nn.getActiveSpan(),"getActiveSpan"),setSpan:g=o((m,w)=>Nn.setSpan(m,w),"setSpan")}=e;pw.add(this),ms.set(this,void 0),Ra.set(this,void 0),Oa.set(this,void 0),ho.set(this,void 0),Sh.set(this,void 0),Pa.set(this,void 0),Ah.set(this,void 0),ja.set(this,void 0),sg.set(this,void 0),ye(this,ms,a,"f"),ye(this,ho,c,"f"),ye(this,Oa,f,"f"),ye(this,Pa,h,"f"),ye(this,Ra,u,"f"),ye(this,Ah,g,"f"),ye(this,Sh,l,"f"),ye(this,ja,r,"f"),ye(this,sg,i,"f");let p=d!=null?d:new hw({transportManager:a,tracer:this});O(this,Ra,"f").register({contextManager:l}),O(this,Ra,"f").addSpanProcessor(p)}addTransport(e){O(this,ms,"f").addTraceTransport(e)}removeTransport(e){O(this,ms,"f").removeTraceTransport(e)}startSpan(e,t,r,i){if(O(this,Oa,"f")){let s=r!=null?r:O(this,Pa,"f").call(this)?this.fromOTSpan(O(this,Pa,"f").call(this)):void 0;BX(e,s);let a=r?O(this,ho,"f").startSpan(e,{attributes:{},kind:i},r.activate()):O(this,ho,"f").startSpan(e,{kind:i}),u=this.fromOTSpan(a,t);return r==null||r.addExplicitChild(u),u}else return}startActiveSpan(e,t,r,i,s){if(O(this,Oa,"f")){let a=o(l=>{let c=this.fromOTSpan(l,r);return i==null||i.addExplicitChild(c),t(c)},"fn");return i?O(this,ho,"f").startActiveSpan(e,{attributes:{},kind:s},i.activate(),a):O(this,ho,"f").startActiveSpan(e,{kind:s},a)}else return t(void 0)}getActiveSpan(){let e=O(this,Pa,"f").call(this);return e?this.fromOTSpan(e):void 0}setStatus(e){ye(this,Oa,e,"f")}addBaseSpanAttributes(e){ye(this,ja,Object.assign(Object.assign({},O(this,ja,"f")),e),"f")}enableFetchInstrumentation(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:new dw).setTracerProvider(O(this,Ra,"f"))}span(e){return ge(this,void 0,void 0,function*(){yield O(this,ms,"f").processSpan(e)})}flush(){return ge(this,void 0,void 0,function*(){O(this,ms,"f").flushSpans()})}setSchedulerTimerInterval(e){O(this,ms,"f").setSchedulerTimerInterval(e)}fromOTSpan(e,t){let r=O(this,pw,"m",TN).call(this,e);return new gw({span:e,attributes:ol(r),activateSpan:o(()=>O(this,Ah,"f").call(this,O(this,Sh,"f").active(),e),"activateSpan"),visibility:t})}};o(NE,"Tracer");var mw=NE;ms=new WeakMap,Ra=new WeakMap,Oa=new WeakMap,ho=new WeakMap,Sh=new WeakMap,Pa=new WeakMap,Ah=new WeakMap,ja=new WeakMap,sg=new WeakMap,pw=new WeakSet,TN=o(function(e){let t=Object.assign({},O(this,ja,"f"));return e.parentSpanId===void 0||Object.keys(t).forEach(i=>{O(this,sg,"f").includes(i)&&delete t[i]}),t},"_Tracer_handleStaticAttributes");var vw,og,bN,HX="Application",DE=class DE{constructor(e){let{transportId:t,logTypeBaseline:r=Je.Debug,formatter:i,transportConsole:s=console,shouldWriteLogsOnConsoles:a=o(()=>!1,"shouldWriteLogsOnConsoles")}=e;vw.add(this),og.set(this,void 0),this.formatConsoleLog=u=>{var l,c,d,f;let h={errorCode:u.type===Je.Error?(l=u.errorCode)!==null&&l!==void 0?l:JP:void 0,category:(c=u.category)!==null&&c!==void 0?c:HX,message:(f=(d=u==null?void 0:u.error)===null||d===void 0?void 0:d.message)!==null&&f!==void 0?f:u.message,timestamp:Nr.toISOString(u.timestamp)};return`${h.timestamp}:${h.errorCode?" "+h.errorCode:""} [${h.category}] ${h.message}`},this.transportId=t,this.logTypeBaseline=r,this.formatter=i,this.transportConsole=s,ye(this,og,a,"f")}getTransportId(){return this.transportId}requiresConnectivity(){return!1}hasWriteBuffer(){return!1}getLogTypeBaseline(){return this.logTypeBaseline}setLogTypeBaseline(e){this.logTypeBaseline=e}write(e){return ge(this,void 0,void 0,function*(){if(!O(this,vw,"m",bN).call(this,e))return;let t=this.formatter?this.formatter.format(e):this.formatConsoleLog(e);switch(e.type){case Je.Debug:this.transportConsole.debug(t);break;case Je.Info:this.transportConsole.log(t);break;case Je.Warning:this.transportConsole.warn(t);break;case Je.Error:this.transportConsole.error(t,e.error);break;default:this.transportConsole.log(t)}})}writeAll(e){return ge(this,void 0,void 0,function*(){for(let t of e)yield this.write(t)})}};o(DE,"ConsoleTransport");var yw=DE;og=new WeakMap,vw=new WeakSet,bN=o(function(e){return e.visibility===Re.External||O(this,og,"f").call(this)},"_ConsoleTransport_canWriteOnConsole");function SN(n){let e={};return n.category&&(e[Dr.Tag]=n.category),e}o(SN,"mapLogFieldToAttributes");var LE=class LE{format(e){var t,r;let i=(t=e.visibility)!==null&&t!==void 0?t:Re.External,s=ZP(e),a=SN(e),u=Object.assign(Object.assign(Object.assign({[Dr.Visibility]:Cg[i]},s),a),e.attributes),l=Yw(u),c=Nr.toISOString(e.timestamp);return{message:(r=e.message)!==null&&r!==void 0?r:"",attributes:l,instant:c}}};o(LE,"NativeLoggerFormatter");var _w=LE,jX={[Je.Debug]:"logDebug",[Je.Info]:"logInfo",[Je.Warning]:"logWarning",[Je.Error]:"logError",[Je.Trace]:"logTrace"},xE=class xE{constructor(e){let{transportId:t,logTypeBaseline:r,nativeLoggerV2:i,formatter:s=new _w}=e;this.transportId=t,this.logTypeBaseline=r,this.nativeLoggerV2=i,this.formatter=s}getTransportId(){return this.transportId}requiresConnectivity(){return!1}hasWriteBuffer(){return!1}getLogTypeBaseline(){return this.logTypeBaseline}setLogTypeBaseline(e){this.logTypeBaseline=e}write(e){return ge(this,void 0,void 0,function*(){let t=this.formatter.format(e),r=jX[e.type];return this.nativeLoggerV2[r](t)})}writeAll(e){return ge(this,void 0,void 0,function*(){for(let t of e)yield this.write(t)})}};o(xE,"NativeLoggerTransport");var ww=xE,cl,LO=2e3,WX={[Je.Trace]:1,[Je.Debug]:5,[Je.Info]:9,[Je.Warning]:13,[Je.Error]:17},GX={[Je.Debug]:"Debug",[Je.Info]:"Information",[Je.Warning]:"Warning",[Je.Error]:"Error",[Je.Trace]:"Trace"},zX=o(n=>{let e={body:{stringValue:""}};if(n.message){let t=n.message.length>LO?`${n.message.substring(0,LO-3)}...`:n.message;e.body={stringValue:t}}return e},"getOptionalLogRecordFields"),UE=class UE{constructor(){let{resourceAttributes:e={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};cl.set(this,void 0),ye(this,cl,e,"f")}setResourceAttributes(e){ye(this,cl,e!=null?e:{},"f")}format(e){return this.formatAll([e])}formatAll(e){let t=Object.assign({[Dr.AccessType]:3},O(this,cl,"f")),r=Jh(t),i=e.map(s=>KX(s));return qX(i,r)}};o(UE,"OpenTelemetryLogFormatter");var Ew=UE;cl=new WeakMap;function qX(n,e){return{resourceLogs:[{resource:{attributes:e},scopeLogs:[{scope:{name:"@outsystems/logger-js",version:"3.4.2"},logRecords:n}]}]}}o(qX,"formatRequest$1");function KX(n){var e;let t=(e=n.visibility)!==null&&e!==void 0?e:Re.External,r=ZP(n),i=W7(n),s=SN(n),a=Object.assign(Object.assign(Object.assign({[Dr.Visibility]:Cg[t]},r),s),n.attributes),u=Yw(a),l=Jh(u),c=WX[n.type],d=GX[n.type],f=Nr.toNanoSeconds(n.timestamp),h=zX(n);return Object.assign(Object.assign(Object.assign({},h),i),{timeUnixNano:f,severityNumber:c,severityText:d,attributes:l})}o(KX,"formatLog");var Ih,yo,ag,Tw,YX="/v2/logs",ME=class ME{constructor(e){let{transportId:t,resourceAttributes:r,logTypeBaseline:i,logsEndpoint:s=YX,logsCollectorBaseUrl:a,tagId:u,enableWriteBuffer:l=!0,httpClient:c=new vi({baseUrl:a,headers:u?{"api-key":u,"tag-id":u}:{}}),formatter:d=new Ew({resourceAttributes:r})}=e;Ih.add(this),yo.set(this,void 0),ag.set(this,void 0),this.transportId=t,this.logTypeBaseline=i,this.logsEndpoint=s,this.enableWriteBuffer=l,this.httpClient=c,this.formatter=d,ye(this,yo,u,"f"),ye(this,ag,a,"f")}getTransportId(){return this.transportId}requiresConnectivity(){return!0}hasWriteBuffer(){return this.enableWriteBuffer}getLogTypeBaseline(){return this.logTypeBaseline}setLogTypeBaseline(e){this.logTypeBaseline=e}setTagId(e){ye(this,yo,e,"f")}setResourceAttributes(e){var t,r;(r=(t=this.formatter).setResourceAttributes)===null||r===void 0||r.call(t,e)}write(e){return ge(this,void 0,void 0,function*(){return O(this,Ih,"m",Tw).call(this,this.formatter.format(e))})}writeAll(e){return ge(this,void 0,void 0,function*(){return O(this,Ih,"m",Tw).call(this,this.formatter.formatAll(e))})}};o(ME,"OpenTelemetryLoggerTransport");var bw=ME;yo=new WeakMap,ag=new WeakMap,Ih=new WeakSet,Tw=o(function(e){return ge(this,void 0,void 0,function*(){return this.httpClient.post({url:this.logsEndpoint,payload:e,contentType:nn.Json,headers:O(this,yo,"f")?{"api-key":O(this,yo,"f"),"tag-id":O(this,yo,"f")}:{},baseURL:O(this,ag,"f")})})},"_OpenTelemetryLoggerTransport_postLogs");var Sw,ll,AN,kE=class kE{constructor(){let{resourceAttributes:e={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Sw.add(this),ll.set(this,void 0),ye(this,ll,e,"f")}setResourceAttributes(e){ye(this,ll,e!=null?e:{},"f")}format(e){return this.formatAll([e])}formatAll(e){let t=Object.assign({[Dr.AccessType]:3},O(this,ll,"f")),r=Jh(t),i=e.map(s=>{let a=Object.assign({[Dr.Visibility]:Cg[Re.External]},O(this,Sw,"m",AN).call(this,s.attributes)),u=Yw(a),l=Jh(u);return Object.assign({traceId:s.traceId,spanId:s.spanId,parentSpanId:s.parentSpanId,name:s.name,startTimeUnixNano:s.startTimeUnixNano,endTimeUnixNano:s.endTimeUnixNano,status:{code:s.status!==0?s.status:1},attributes:l},s.kind?{kind:s.kind}:{})});return XX(i,r)}};o(kE,"OpenTelemetryTraceFormatter");var Aw=kE;ll=new WeakMap,Sw=new WeakSet,AN=o(function(e){return Object.entries(e).reduce((t,r)=>{let[i,s]=r;return VX.includes(i)||(t[i]=s),t},{})},"_OpenTelemetryTraceFormatter_filterInternalAttributes");function XX(n,e){return{resourceSpans:[{resource:{attributes:e},scopeSpans:[{scope:{name:"@outsystems/logger-js",version:"3.4.2"},spans:n}]}]}}o(XX,"formatRequest");var Ch,Na,_o,ug,Iw,JX="/v2/traces",FE=class FE{constructor(e){let{transportId:t,resourceAttributes:r,enabled:i=!0,tracesEndpoint:s=JX,tracesCollectorBaseUrl:a,tagId:u,enableWriteBuffer:l=!0,httpClient:c=new vi({baseUrl:a,headers:u?{"api-key":u,"tag-id":u}:{}}),formatter:d=new Aw({resourceAttributes:r})}=e;Ch.add(this),Na.set(this,void 0),_o.set(this,void 0),ug.set(this,void 0),this.transportId=t,ye(this,Na,i,"f"),this.tracesEndpoint=s,this.enableWriteBuffer=l,this.httpClient=c,this.formatter=d,ye(this,_o,u,"f"),ye(this,ug,a,"f")}getTransportId(){return this.transportId}isTracingEnabled(){return O(this,Na,"f")}enableTracing(){ye(this,Na,!0,"f")}disableTracing(){ye(this,Na,!1,"f")}requiresConnectivity(){return!0}hasWriteBuffer(){return this.enableWriteBuffer}setTagId(e){ye(this,_o,e,"f")}setResourceAttributes(e){var t,r;(r=(t=this.formatter).setResourceAttributes)===null||r===void 0||r.call(t,e)}write(e){return ge(this,void 0,void 0,function*(){return O(this,Ch,"m",Iw).call(this,this.formatter.format(e))})}writeAll(e){return ge(this,void 0,void 0,function*(){return O(this,Ch,"m",Iw).call(this,this.formatter.formatAll(e))})}};o(FE,"OpenTelemetryTracerTransport");var Cw=FE;Na=new WeakMap,_o=new WeakMap,ug=new WeakMap,Ch=new WeakSet,Iw=o(function(e){return ge(this,void 0,void 0,function*(){return this.httpClient.post({url:this.tracesEndpoint,payload:e,contentType:nn.Json,headers:O(this,_o,"f")?{"api-key":O(this,_o,"f"),"tag-id":O(this,_o,"f")}:{},baseURL:O(this,ug,"f")})})},"_OpenTelemetryTracerTransport_postSpans");var vs,Rh,Da,dl,$E=class $E{constructor(){let{sw:e,container:t=navigator.serviceWorker}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;if(vs.set(this,void 0),Rh.set(this,void 0),Da.set(this,[]),dl.set(this,!1),!t)throw new Error("No service worker container available");ye(this,vs,(r=e!=null?e:t==null?void 0:t.controller)!==null&&r!==void 0?r:void 0,"f"),ye(this,Rh,t,"f"),this.waitForSW()}get pendingMessages(){return O(this,Da,"f")}isServiceWorkerAvailable(){return!!O(this,vs,"f")&&O(this,vs,"f").state==="activated"}send(e,t){this.sendMessage({kind:e,data:t})}sendMessage(e,t){var r;this.isServiceWorkerAvailable()?(r=O(this,vs,"f"))===null||r===void 0||r.postMessage(e,t):(O(this,Da,"f").push({message:e,options:t}),this.waitForSW())}waitForSW(){return ge(this,void 0,void 0,function*(){if(this.isServiceWorkerAvailable()||O(this,dl,"f"))return;ye(this,dl,!0,"f");let{active:e}=yield O(this,Rh,"f").ready;ye(this,vs,e!=null?e:void 0,"f"),ye(this,dl,!1,"f"),this.flushMessages()})}flushMessages(){var e;if(this.isServiceWorkerAvailable()){for(let{message:t,options:r}of O(this,Da,"f"))(e=O(this,vs,"f"))===null||e===void 0||e.postMessage(t,r);ye(this,Da,[],"f")}else this.waitForSW()}};o($E,"ServiceWorkerTransport");var Rw=$E;vs=new WeakMap,Rh=new WeakMap,Da=new WeakMap,dl=new WeakMap;var fl,Oh,La,cg,lg,dg,fg,hg,xa,Ph,BE=class BE{constructor(e){let{transportId:t,tagId:r,collectorBaseUrl:i,databaseSuffix:s,swTransport:a=new Rw,enabled:u=!0,attributes:l={},aggregateSpans:c=!1}=e;fl.add(this),Oh.set(this,void 0),La.set(this,void 0),cg.set(this,void 0),lg.set(this,void 0),dg.set(this,void 0),fg.set(this,void 0),hg.set(this,void 0),xa.set(this,void 0),ye(this,Oh,t,"f"),ye(this,La,a,"f"),ye(this,xa,u,"f"),ye(this,cg,l,"f"),ye(this,lg,r,"f"),ye(this,dg,i,"f"),ye(this,fg,s,"f"),ye(this,hg,c,"f")}getTransportId(){return O(this,Oh,"f")}requiresConnectivity(){return!1}isTracingEnabled(){return O(this,xa,"f")}enableTracing(){ye(this,xa,!0,"f")}disableTracing(){ye(this,xa,!1,"f")}hasWriteBuffer(){return!1}write(e){return O(this,La,"f").send("Span",{span:e,meta:O(this,fl,"m",Ph).call(this)}),Promise.resolve()}writeAll(e){for(let t of e)O(this,La,"f").send("Span",{span:t,meta:O(this,fl,"m",Ph).call(this)});return Promise.resolve()}flush(){return O(this,La,"f").send("Flush",{kind:"Spans",meta:O(this,fl,"m",Ph).call(this)}),Promise.resolve()}};o(BE,"ServiceWorkerTracerTransport");var Ow=BE;Oh=new WeakMap,La=new WeakMap,cg=new WeakMap,lg=new WeakMap,dg=new WeakMap,fg=new WeakMap,hg=new WeakMap,xa=new WeakMap,fl=new WeakSet,Ph=o(function(){return{databaseSuffix:O(this,fg,"f"),resourceAttributes:O(this,cg,"f"),collectorBaseUrl:O(this,dg,"f"),apiKey:O(this,lg,"f"),aggregateSpans:O(this,hg,"f")}},"_ServiceWorkerTracerTransport_getMetadata");var Ua,Bn,Ma,ka,Nh,Dh,Lh,xh,Uh,hl,VE=class VE{constructor(e){let{databaseNameSuffix:t,logTransports:r,traceTransports:i,baseLogAttributes:s={},baseSpanAttributes:a={},staticSpanAttributes:u=[],isOnline:l,aggregateSpans:c,transportManager:d=new wl({databaseNameSuffix:t,logTransports:r,traceTransports:i,isOnline:l,aggregateSpans:c}),tracerInstance:f,loggerInstance:h}=e;Ua.add(this),Bn.set(this,void 0),Ma.set(this,void 0),ka.set(this,void 0),Nh.set(this,void 0),Dh.set(this,void 0),Lh.set(this,void 0),xh.set(this,void 0),Uh.set(this,void 0),ye(this,Bn,d,"f"),ye(this,Ma,f,"f"),ye(this,ka,h,"f"),ye(this,Nh,()=>or.isEnabled(Rr.WriteLogsOnConsoles),"f"),ye(this,Dh,s,"f"),ye(this,Lh,a,"f"),ye(this,xh,u,"f"),ye(this,Uh,t,"f")}init(){return ge(this,void 0,void 0,function*(){yield this.getLogger(),this.getTracer()})}getLogger(){return ge(this,void 0,void 0,function*(){return O(this,ka,"f")||ye(this,ka,yield ew.build({transportManager:O(this,Bn,"f"),baseAttributes:O(this,Dh,"f")}),"f"),O(this,ka,"f")})}getTracer(){return O(this,Ma,"f")||ye(this,Ma,new mw({transportManager:O(this,Bn,"f"),baseAttributes:O(this,Lh,"f"),staticAttributes:O(this,xh,"f")}),"f"),O(this,Ma,"f")}useNativeLoggerTransport(e){return ge(this,arguments,void 0,function(t){var r=this;let{plugin:i,logTypeBaseline:s}=t;return(function*(){(yield r.getLogger()).addTransport(new ww({transportId:"native-logger-transport",nativeLoggerV2:i,logTypeBaseline:s}))})()})}useOpenTelemetryLoggerTransport(e){return ge(this,arguments,void 0,function(t){var r=this;let{resourceAttributes:i,logTypeBaseline:s,collectorBaseUrl:a,tagId:u,httpClient:l}=t;return(function*(){(yield r.getLogger()).addTransport(new bw({transportId:"otel-logger-transport",resourceAttributes:i,logTypeBaseline:s,logsCollectorBaseUrl:a,tagId:u,httpClient:l}))})()})}useConsoleLoggerTransport(e){return ge(this,void 0,void 0,function*(){(yield this.getLogger()).addTransport(new yw({transportId:"console-transport",logTypeBaseline:e,shouldWriteLogsOnConsoles:O(this,Nh,"f")}))})}useServiceWorkerTracerTransport(e){let{resourceAttributes:t,enabled:r=!0,collectorBaseUrl:i,tagId:s,swTransport:a,aggregateSpans:u=!1}=e,l=this.getTracer(),c=new Ow({transportId:"sw-tracer-transport",attributes:t,enabled:r,tagId:s,collectorBaseUrl:i,databaseSuffix:O(this,Uh,"f"),swTransport:a,aggregateSpans:u});l.addTransport(c)}useOpenTelemetryTracerTransport(e){let{resourceAttributes:t,enabled:r=!0,collectorBaseUrl:i,tagId:s,httpClient:a}=e,u=this.getTracer(),l=new Cw({transportId:"otel-tracer-transport",resourceAttributes:t,enabled:r,tagId:s,tracesCollectorBaseUrl:i,httpClient:a});u.addTransport(l)}useConsoleTracerTransport(){return ge(this,void 0,void 0,function*(){throw new Error("Not implemented")})}useFetchInstrumentation(){this.getTracer().enableFetchInstrumentation()}setLogLevel(e){O(this,Bn,"f").setAllLogTypeBaselines(e)}setTracerStatus(e){this.getTracer().setStatus(e)}setTagId(e){O(this,Bn,"f").setTagId(e)}setAggregateSpansStatus(e){O(this,Bn,"f").setAggregateSpansStatus(e)}setResourceAttributes(e){O(this,Bn,"f").setResourceAttributes(e)}setSchedulerTimerInterval(e){O(this,Bn,"f").setSchedulerTimerInterval(e)}flushInstrumentationData(){return ge(this,void 0,void 0,function*(){yield Promise.all([O(this,Bn,"f").flushLogs(),O(this,Bn,"f").flushSpans()])})}logError(e){return ge(this,arguments,void 0,function(t){var r=this;let{category:i,message:s,error:a,errorCode:u,visibility:l,failSpan:c=!0,attributes:d}=t;return(function*(){if(c){let g=r.getTracer().getActiveSpan();g==null||g.fail()}(yield r.getLogger()).error({category:i,message:s,error:a,errorCode:u,visibility:l,span:O(r,Ua,"m",hl).call(r),attributes:d})})()})}logWarning(e){return ge(this,arguments,void 0,function(t){var r=this;let{category:i,message:s,visibility:a,attributes:u}=t;return(function*(){(yield r.getLogger()).warning({category:i,message:s,visibility:a,span:O(r,Ua,"m",hl).call(r),attributes:u})})()})}logInfo(e){return ge(this,arguments,void 0,function(t){var r=this;let{category:i,message:s,visibility:a,attributes:u}=t;return(function*(){(yield r.getLogger()).info({category:i,message:s,visibility:a,span:O(r,Ua,"m",hl).call(r),attributes:u})})()})}logDebug(e){return ge(this,arguments,void 0,function(t){var r=this;let{category:i,message:s,visibility:a,attributes:u}=t;return(function*(){(yield r.getLogger()).debug({category:i,message:s,visibility:a,span:O(r,Ua,"m",hl).call(r),attributes:u})})()})}log(e){return ge(this,void 0,void 0,function*(){yield(yield this.getLogger()).log(e)})}span(e){return ge(this,void 0,void 0,function*(){yield this.getTracer().span(e)})}flushLogs(){return ge(this,void 0,void 0,function*(){yield O(this,Bn,"f").flushLogs()})}flushSpans(){return ge(this,void 0,void 0,function*(){yield O(this,Bn,"f").flushSpans()})}startSpan(e,t,r,i){return this.getTracer().startSpan(e,t,r,i)}startActiveSpan(e,t,r,i,s){return this.getTracer().startActiveSpan(e,t,r,i,s)}getActiveSpan(){return this.getTracer().getActiveSpan()}};o(VE,"InstrumentationFactory");var gg=VE;Bn=new WeakMap,Ma=new WeakMap,ka=new WeakMap,Nh=new WeakMap,Dh=new WeakMap,Lh=new WeakMap,xh=new WeakMap,Uh=new WeakMap,Ua=new WeakSet,hl=o(function(){let t=this.getTracer().getActiveSpan();return t?wN(t):void 0},"_InstrumentationFactory_getActiveSpanInfo");var pg;(function(n){n[n.Internal=0]="Internal",n[n.Client=2]="Client"})(pg||(pg={}));var eT=o(function(n,e){return eT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},eT(n,e)},"extendStatics");function _p(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");eT(n,e);function t(){this.constructor=n}o(t,"__"),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}o(_p,"__extends$1");var qt=o(function(){return qt=Object.assign||o(function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},"__assign"),qt.apply(this,arguments)},"__assign$8");function yD(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}o(yD,"__rest");function _D(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var u=n.length-1;u>=0;u--)(a=n[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}o(_D,"__decorate");function wD(n,e){return function(t,r){e(t,r,n)}}o(wD,"__param");function ED(n,e,t,r,i,s){function a(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}o(a,"accept");for(var u=r.kind,l=u==="getter"?"get":u==="setter"?"set":"value",c=!e&&n?r.static?n:n.prototype:null,d=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),f,h=!1,g=t.length-1;g>=0;g--){var p={};for(var m in r)p[m]=m==="access"?{}:r[m];for(var m in r.access)p.access[m]=r.access[m];p.addInitializer=function(E){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(E||null))};var w=(0,t[g])(u==="accessor"?{get:d.get,set:d.set}:d[l],p);if(u==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(f=a(w.get))&&(d.get=f),(f=a(w.set))&&(d.set=f),(f=a(w.init))&&i.unshift(f)}else(f=a(w))&&(u==="field"?i.unshift(f):d[l]=f)}c&&Object.defineProperty(c,r.name,d),h=!0}o(ED,"__esDecorate");function TD(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}o(TD,"__runInitializers");function bD(n){return typeof n=="symbol"?n:"".concat(n)}o(bD,"__propKey");function SD(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}o(SD,"__setFunctionName");function AD(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}o(AD,"__metadata");function be(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})}o(be,"__awaiter$d");function Ze(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}o(Ze,"__generator$d");var wp=Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]};function ID(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&wp(e,n,t)}o(ID,"__exportStar");function Zg(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:o(function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}o(Zg,"__values$2");function fr(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s}o(fr,"__read$6");function CD(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(fr(arguments[e]));return n}o(CD,"__spread");function RD(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,u=s.length;a<u;a++,i++)r[i]=s[a];return r}o(RD,"__spreadArrays");function OD(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}o(OD,"__spreadArray$3");function yu(n){return this instanceof yu?(this.v=n,this):new yu(n)}o(yu,"__await");function PD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(g){return function(p){return Promise.resolve(p).then(g,f)}}function u(g,p){r[g]&&(i[g]=function(m){return new Promise(function(w,E){s.push([g,m,w,E])>1||l(g,m)})},p&&(i[g]=p(i[g])))}function l(g,p){try{c(r[g](p))}catch(m){h(s[0][3],m)}}function c(g){g.value instanceof yu?Promise.resolve(g.value.v).then(d,f):h(s[0][2],g)}function d(g){l("next",g)}function f(g){l("throw",g)}function h(g,p){g(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}o(PD,"__asyncGenerator");function ND(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(a){return(t=!t)?{value:yu(n[i](a)),done:!1}:s?s(a):a}:s}}o(ND,"__asyncDelegator");function DD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Zg=="function"?Zg(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(a){return new Promise(function(u,l){a=n[s](a),i(u,l,a.done,a.value)})}}function i(s,a,u,l){Promise.resolve(l).then(function(c){s({value:c,done:u})},a)}}o(DD,"__asyncValues");function LD(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}o(LD,"__makeTemplateObject");var ZX=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},tT=o(function(n){return tT=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},tT(n)},"ownKeys");function xD(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=tT(n),r=0;r<t.length;r++)t[r]!=="default"&&wp(e,n,t[r]);return ZX(e,n),e}o(xD,"__importStar");function UD(n){return n&&n.__esModule?n:{default:n}}o(UD,"__importDefault");function H(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}o(H,"__classPrivateFieldGet");function Ae(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}o(Ae,"__classPrivateFieldSet");function MD(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}o(MD,"__classPrivateFieldIn");function kD(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=o(function(){try{i.call(this)}catch(s){return Promise.reject(s)}},"dispose")),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}o(kD,"__addDisposableResource");var QX=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function FD(n){function e(s){n.error=n.hasError?new QX(s,n.error,"An error was suppressed during disposal."):s,n.hasError=!0}o(e,"fail");var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(s).then(i,function(a){return e(a),i()})}else r|=1}catch(a){e(a)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return o(i,"next"),i()}o(FD,"__disposeResources");function $D(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,s,a){return r?e?".jsx":".js":i&&(!s||!a)?t:i+s+"."+a.toLowerCase()+"js"}):n}o($D,"__rewriteRelativeImportExtension");var eJ={__extends:_p,__assign:qt,__rest:yD,__decorate:_D,__param:wD,__esDecorate:ED,__runInitializers:TD,__propKey:bD,__setFunctionName:SD,__metadata:AD,__awaiter:be,__generator:Ze,__createBinding:wp,__exportStar:ID,__values:Zg,__read:fr,__spread:CD,__spreadArrays:RD,__spreadArray:OD,__await:yu,__asyncGenerator:PD,__asyncDelegator:ND,__asyncValues:DD,__makeTemplateObject:LD,__importStar:xD,__importDefault:UD,__classPrivateFieldGet:H,__classPrivateFieldSet:Ae,__classPrivateFieldIn:MD,__addDisposableResource:kD,__disposeResources:FD,__rewriteRelativeImportExtension:$D},tJ=Object.freeze({__proto__:null,__addDisposableResource:kD,get __assign(){return qt},__asyncDelegator:ND,__asyncGenerator:PD,__asyncValues:DD,__await:yu,__awaiter:be,__classPrivateFieldGet:H,__classPrivateFieldIn:MD,__classPrivateFieldSet:Ae,__createBinding:wp,__decorate:_D,__disposeResources:FD,__esDecorate:ED,__exportStar:ID,__extends:_p,__generator:Ze,__importDefault:UD,__importStar:xD,__makeTemplateObject:LD,__metadata:AD,__param:wD,__propKey:bD,__read:fr,__rest:yD,__rewriteRelativeImportExtension:$D,__runInitializers:TD,__setFunctionName:SD,__spread:CD,__spreadArray:OD,__spreadArrays:RD,__values:Zg,default:eJ}),Qg;(function(n){n.Cognito="COGNITO",n.Google="Google",n.Facebook="Facebook",n.Amazon="LoginWithAmazon",n.Apple="SignInWithApple"})(Qg||(Qg={}));function HE(n){var e=["provider"];return n&&!!e.find(function(t){return n.hasOwnProperty(t)})}o(HE,"isFederatedSignInOptions");function nJ(n){var e=["customProvider"];return n&&!!e.find(function(t){return n.hasOwnProperty(t)})}o(nJ,"isFederatedSignInOptionsCustom");function rJ(n){var e=["customState"];return n&&!!e.find(function(t){return n.hasOwnProperty(t)})}o(rJ,"hasCustomState");function Oo(n){return n.redirectSignIn!==void 0}o(Oo,"isCognitoHostedOpts");var at;(function(n){n.NoConfig="noConfig",n.MissingAuthConfig="missingAuthConfig",n.EmptyUsername="emptyUsername",n.InvalidUsername="invalidUsername",n.EmptyPassword="emptyPassword",n.EmptyCode="emptyCode",n.SignUpError="signUpError",n.NoMFA="noMFA",n.InvalidMFA="invalidMFA",n.EmptyChallengeResponse="emptyChallengeResponse",n.NoUserSession="noUserSession",n.Default="default",n.DeviceConfig="deviceConfig",n.NetworkError="networkError",n.AutoSignInError="autoSignInError"})(at||(at={}));function iJ(n){return!!n.username}o(iJ,"isUsernamePasswordOpts");var IN;(function(n){n.API_KEY="API_KEY",n.AWS_IAM="AWS_IAM",n.OPENID_CONNECT="OPENID_CONNECT",n.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",n.AWS_LAMBDA="AWS_LAMBDA"})(IN||(IN={}));var sJ="Logging",oJ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:o(function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eu=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},tu=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},CN={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},Lr;(function(n){n.DEBUG="DEBUG",n.ERROR="ERROR",n.INFO="INFO",n.WARN="WARN",n.VERBOSE="VERBOSE"})(Lr||(Lr={}));var Mr=(function(){function n(e,t){t===void 0&&(t=Lr.WARN),this.name=e,this.level=t,this._pluggables=[]}return o(n,"ConsoleLogger"),n.prototype._padding=function(e){return e<10?"0"+e:""+e},n.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},n.prototype.configure=function(e){return e?(this._config=e,this._config):this._config},n.prototype._log=function(e){for(var t,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];var a=this.level;n.LOG_LEVEL&&(a=n.LOG_LEVEL),typeof window!="undefined"&&window.LOG_LEVEL&&(a=window.LOG_LEVEL);var u=CN[a],l=CN[e];if(l>=u){var c=console.log.bind(console);e===Lr.ERROR&&console.error&&(c=console.error.bind(console)),e===Lr.WARN&&console.warn&&(c=console.warn.bind(console));var d="[".concat(e,"] ").concat(this._ts()," ").concat(this.name),f="";if(i.length===1&&typeof i[0]=="string")f="".concat(d," - ").concat(i[0]),c(f);else if(i.length===1)f="".concat(d," ").concat(i[0]),c(d,i[0]);else if(typeof i[0]=="string"){var h=i.slice(1);h.length===1&&(h=h[0]),f="".concat(d," - ").concat(i[0]," ").concat(h),c("".concat(d," - ").concat(i[0]),h)}else f="".concat(d," ").concat(i),c(d,i);try{for(var g=oJ(this._pluggables),p=g.next();!p.done;p=g.next()){var m=p.value,w={message:f,timestamp:Date.now()};m.pushLogs([w])}}catch(E){t={error:E}}finally{try{p&&!p.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}}},n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,tu([Lr.INFO],eu(e),!1))},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,tu([Lr.INFO],eu(e),!1))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,tu([Lr.WARN],eu(e),!1))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,tu([Lr.ERROR],eu(e),!1))},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,tu([Lr.DEBUG],eu(e),!1))},n.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,tu([Lr.VERBOSE],eu(e),!1))},n.prototype.addPluggable=function(e){e&&e.getCategoryName()===sJ&&(this._pluggables.push(e),e.configure(this._config))},n.prototype.listPluggables=function(){return this._pluggables},n.LOG_LEVEL=null,n})(),aJ=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},jE=new Mr("Amplify"),uJ=(function(){function n(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Geo=null,this.Notifications=null,this.Logger=Mr,this.ServiceWorker=null}return o(n,"AmplifyClass"),n.prototype.register=function(e){jE.debug("component registered in amplify",e),this._components.push(e),typeof e.getModuleName=="function"?(this._modules[e.getModuleName()]=e,this[e.getModuleName()]=e):jE.debug("no getModuleName method for component",e),e.configure(this._config)},n.prototype.configure=function(e){var t=this;return e?(this._config=Object.assign(this._config,e),jE.debug("amplify config",this._config),Object.entries(this._modules).forEach(function(r){var i=aJ(r,2);i[0];var s=i[1];Object.keys(s).forEach(function(a){t._modules[a]&&(s[a]=t._modules[a])})}),this._components.map(function(r){r.configure(t._config)}),this._config):this._config},n.prototype.addPluggable=function(e){e&&e.getCategory&&typeof e.getCategory=="function"&&this._components.map(function(t){t.addPluggable&&typeof t.addPluggable=="function"&&t.addPluggable(e)})},n})(),td=new uJ,Ut;(function(n){n.WebUnknown="0",n.React="1",n.NextJs="2",n.Angular="3",n.VueJs="4",n.Nuxt="5",n.Svelte="6",n.ServerSideUnknown="100",n.ReactSSR="101",n.NextJsSSR="102",n.AngularSSR="103",n.VueJsSSR="104",n.NuxtSSR="105",n.SvelteSSR="106",n.ReactNative="201",n.Expo="202"})(Ut||(Ut={}));var nT;(function(n){n.API="api",n.Auth="auth",n.Analytics="analytics",n.DataStore="datastore",n.Geo="geo",n.InAppMessaging="inappmessaging",n.Interactions="interactions",n.Predictions="predictions",n.PubSub="pubsub",n.PushNotification="pushnotification",n.Storage="storage"})(nT||(nT={}));var RN;(function(n){n.Record="1",n.UpdateEndpoint="2"})(RN||(RN={}));var ON;(function(n){n.GraphQl="1",n.Get="2",n.Post="3",n.Put="4",n.Patch="5",n.Del="6",n.Head="7"})(ON||(ON={}));var rT;(function(n){n.FederatedSignIn="30"})(rT||(rT={}));var PN;(function(n){n.Subscribe="1",n.GraphQl="2"})(PN||(PN={}));var NN;(function(n){n.None="0"})(NN||(NN={}));var DN;(function(n){n.None="0"})(DN||(DN={}));var LN;(function(n){n.None="0"})(LN||(LN={}));var xN;(function(n){n.Convert="1",n.Identify="2",n.Interpret="3"})(xN||(xN={}));var UN;(function(n){n.Subscribe="1"})(UN||(UN={}));var MN;(function(n){n.None="0"})(MN||(MN={}));var kN;(function(n){n.Put="1",n.Get="2",n.List="3",n.Copy="4",n.Remove="5",n.GetProperties="6"})(kN||(kN={}));var BD="5.3.26",Ep=o(function(){return typeof global!="undefined"},"globalExists"),_u=o(function(){return typeof window!="undefined"},"windowExists"),VD=o(function(){return typeof document!="undefined"},"documentExists"),UT=o(function(){return typeof process!="undefined"},"processExists"),Jl=o(function(n,e){return!!Object.keys(n).find(function(t){return t.startsWith(e)})},"keyPrefixMatch");function cJ(){var n=o(function(r){return r.startsWith("_react")||r.startsWith("__react")},"elementKeyPrefixedWithReact"),e=o(function(r){return Object.keys(r).find(n)},"elementIsReactEnabled"),t=o(function(){return Array.from(document.querySelectorAll("[id]"))},"allElementsWithId");return VD()&&t().some(e)}o(cJ,"reactWebDetect");function lJ(){return UT()&&typeof process.env!="undefined"&&!!Object.keys(process.env).find(function(n){return n.includes("react")})}o(lJ,"reactSSRDetect");function dJ(){return _u()&&Jl(window,"__VUE")}o(dJ,"vueWebDetect");function fJ(){return Ep()&&Jl(global,"__VUE")}o(fJ,"vueSSRDetect");function hJ(){return _u()&&Jl(window,"__SVELTE")}o(hJ,"svelteWebDetect");function gJ(){return UT()&&typeof process.env!="undefined"&&!!Object.keys(process.env).find(function(n){return n.includes("svelte")})}o(gJ,"svelteSSRDetect");function pJ(){return _u()&&window.next&&typeof window.next=="object"}o(pJ,"nextWebDetect");function mJ(){return Ep()&&(Jl(global,"__next")||Jl(global,"__NEXT"))}o(mJ,"nextSSRDetect");function vJ(){return _u()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}o(vJ,"nuxtWebDetect");function yJ(){return Ep()&&typeof global.__NUXT_PATHS__!="undefined"}o(yJ,"nuxtSSRDetect");function _J(){var n=!!(VD()&&document.querySelector("[ng-version]")),e=!!(_u()&&typeof window.ng!="undefined");return n||e}o(_J,"angularWebDetect");function wJ(){var n;return UT()&&typeof process.env=="object"&&((n=process.env.npm_lifecycle_script)===null||n===void 0?void 0:n.startsWith("ng "))||!1}o(wJ,"angularSSRDetect");function EJ(){return typeof navigator!="undefined"&&typeof navigator.product!="undefined"&&navigator.product==="ReactNative"}o(EJ,"reactNativeDetect");function TJ(){return Ep()&&typeof global.expo!="undefined"}o(TJ,"expoDetect");function bJ(){return _u()}o(bJ,"webDetect");var SJ=[{platform:Ut.Expo,detectionMethod:TJ},{platform:Ut.ReactNative,detectionMethod:EJ},{platform:Ut.NextJs,detectionMethod:pJ},{platform:Ut.Nuxt,detectionMethod:vJ},{platform:Ut.Angular,detectionMethod:_J},{platform:Ut.React,detectionMethod:cJ},{platform:Ut.VueJs,detectionMethod:dJ},{platform:Ut.Svelte,detectionMethod:hJ},{platform:Ut.WebUnknown,detectionMethod:bJ},{platform:Ut.NextJsSSR,detectionMethod:mJ},{platform:Ut.NuxtSSR,detectionMethod:yJ},{platform:Ut.ReactSSR,detectionMethod:lJ},{platform:Ut.VueJsSSR,detectionMethod:fJ},{platform:Ut.AngularSSR,detectionMethod:wJ},{platform:Ut.SvelteSSR,detectionMethod:gJ}];function AJ(){var n;return((n=SJ.find(function(e){return e.detectionMethod()}))===null||n===void 0?void 0:n.platform)||Ut.ServerSideUnknown}o(AJ,"detect");var kl,kg=[],ep=!1,IJ=10,CJ=10,RJ=1e3,MT=o(function(){if(!kl){if(kl=AJ(),ep)for(;kg.length;)kg.pop()();else kg.forEach(function(n){return n()});FN(Ut.ServerSideUnknown,IJ),FN(Ut.WebUnknown,CJ)}return kl},"detectFramework"),HD=o(function(n){ep||kg.push(n)},"observeFrameworkChanges");function OJ(){kl=void 0}o(OJ,"clearCache");function FN(n,e){kl===n&&!ep&&setTimeout(function(){OJ(),ep=!0,setTimeout(MT,RJ)},e)}o(FN,"resetTimeout");var PJ=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},jD="aws-amplify",NJ=(function(){function n(){this.userAgent="".concat(jD,"/").concat(BD)}return o(n,"PlatformBuilder"),Object.defineProperty(n.prototype,"framework",{get:o(function(){return MT()},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isReactNative",{get:o(function(){return this.framework===Ut.ReactNative||this.framework===Ut.Expo},"get"),enumerable:!1,configurable:!0}),n.prototype.observeFrameworkChanges=function(e){HD(e)},n})(),WE=new NJ,DJ=o(function(n){var e=n===void 0?{}:n,t=e.category,r=e.action;e.framework;var i=[[jD,BD]];return t&&i.push([t,r]),i.push(["framework",MT()]),i},"getAmplifyUserAgentObject"),kT=o(function(n){var e=DJ(n),t=e.map(function(r){var i=PJ(r,2),s=i[0],a=i[1];return"".concat(s,"/").concat(a)}).join(" ");return t},"getAmplifyUserAgent$1"),Fl=function(){return Fl=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Fl.apply(this,arguments)},GE=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},$N=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},Ri=new Mr("Hub"),LJ=typeof Symbol!="undefined"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default";function xJ(n){return n.onHubCapsule!==void 0}o(xJ,"isLegacyCallback");var UJ=(function(){function n(e){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}return o(n,"HubClass"),n.prototype._remove=function(e,t){if(e instanceof RegExp){var r=this.patterns.find(function(s){var a=s.pattern;return a.source===e.source});if(!r){Ri.warn("No listeners for ".concat(e));return}this.patterns=$N([],GE(this.patterns.filter(function(s){return s!==r})),!1)}else{var i=this.listeners[e];if(!i){Ri.warn("No listeners for ".concat(e));return}this.listeners[e]=$N([],GE(i.filter(function(s){var a=s.callback;return a!==t})),!1)}},n.prototype.remove=function(e,t){this._remove(e,t)},n.prototype.dispatch=function(e,t,r,i){if(r===void 0&&(r=""),this.protectedChannels.indexOf(e)>-1){var s=i===LJ;s||Ri.warn("WARNING: ".concat(e," is protected and dispatching on it can have unintended consequences"))}var a={channel:e,payload:Fl({},t),source:r,patternInfo:[]};try{this._toListeners(a)}catch(u){Ri.error(u)}},n.prototype.listen=function(e,t,r){var i=this;r===void 0&&(r="noname");var s;if(xJ(t))Ri.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),s=t.onHubCapsule.bind(t);else{if(typeof t!="function")throw new Error("No callback supplied to Hub");s=t}if(e instanceof RegExp)this.patterns.push({pattern:e,callback:s});else{var a=this.listeners[e];a||(a=[],this.listeners[e]=a),a.push({name:r,callback:s})}return function(){i._remove(e,s)}},n.prototype._toListeners=function(e){var t=e.channel,r=e.payload,i=this.listeners[t];if(i&&i.forEach(function(a){Ri.debug("Dispatching to ".concat(t," with "),r);try{a.callback(e)}catch(u){Ri.error(u)}}),this.patterns.length>0){if(!r.message){Ri.warn("Cannot perform pattern matching without a message key");return}var s=r.message;this.patterns.forEach(function(a){var u=s.match(a.pattern);if(u){var l=GE(u),c=l.slice(1),d=Fl(Fl({},e),{patternInfo:c});try{a.callback(d)}catch(f){Ri.error(f)}}})}},n})(),Pi=new UJ("__default__"),MJ=o(function(n){if(n.isResolved)return n;var e=!0,t=!1,r=!1,i=n.then(function(s){return r=!0,e=!1,s},function(s){throw t=!0,e=!1,s});return i.isFullfilled=function(){return r},i.isPending=function(){return e},i.isRejected=function(){return t},i},"makeQuerablePromise"),Fi=o(function(){var n=typeof window!="undefined"&&typeof window.document!="undefined",e=typeof process!="undefined"&&process.versions!=null&&process.versions.node!=null;return{isBrowser:n,isNode:e}},"browserOrNode"),kJ=(function(){var n=o(function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)},"extendStatics");return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}o(r,"__"),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),BN=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},zE=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},FJ=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},$J=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},Pg=new Mr("Util"),Po=(function(n){kJ(e,n);function e(t){var r=n.call(this,t)||this;return r.nonRetryable=!0,r}return o(e,"NonRetryableError"),e})(Error),BJ=o(function(n){var e="nonRetryable";return n&&n[e]},"isNonRetryableError$1");function VJ(n,e,t,r){return BN(this,void 0,void 0,function(){var i=this;return zE(this,function(s){if(typeof n!="function")throw Error("functionToRetry must be a function");return[2,new Promise(function(a,u){return BN(i,void 0,void 0,function(){var l,c,d,f,h,g;return zE(this,function(p){switch(p.label){case 0:l=0,c=!1,d=o(function(){},"wakeUp"),h=o(function(){var m,w,E,_;return zE(this,function(T){switch(T.label){case 0:l++,Pg.debug("".concat(n.name," attempt #").concat(l," with this vars: ").concat(JSON.stringify(e))),T.label=1;case 1:return T.trys.push([1,3,,7]),m={},w=a,[4,n.apply(void 0,$J([],FJ(e),!1))];case 2:return[2,(m.value=w.apply(void 0,[T.sent()]),m)];case 3:return E=T.sent(),f=E,Pg.debug("error on ".concat(n.name),E),BJ(E)?(Pg.debug("".concat(n.name," non retryable error"),E),[2,{value:u(E)}]):(_=t(l,e,E),Pg.debug("".concat(n.name," retrying in ").concat(_," ms")),_===!1||c?[2,{value:u(E)}]:[3,4]);case 4:return[4,new Promise(function(R){d=R,setTimeout(d,_)})];case 5:T.sent(),T.label=6;case 6:return[3,7];case 7:return[2]}})},"_loop_1"),p.label=1;case 1:return c?[3,3]:[5,h()];case 2:return g=p.sent(),typeof g=="object"?[2,g.value]:[3,1];case 3:return u(f),[2]}})})})]})})}o(VJ,"retry$1");var HJ=300*1e3;function WD(n){n===void 0&&(n=HJ);var e=100,t=100;return function(r){var i=Math.pow(2,r)*e+t*Math.random();return i>n?!1:i}}o(WD,"jitteredBackoff$2");var jJ=o(function(n,e,t,r){return VJ(n,e,WD(t))},"jitteredExponentialRetry$1"),Mi=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function WJ(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}o(WJ,"getDefaultExportFromCjs");function FT(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=o(function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)},"a");t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:o(function(){return n[r]},"get")})}),t}o(FT,"getAugmentedNamespace");function GJ(n){return n.split("").map(function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")}).join("")}o(GJ,"urlSafeEncode");function zJ(n){return n.match(/.{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join("")}o(zJ,"urlSafeDecode");var No={},GD=FT(tJ),Tp={},er={};Object.defineProperty(er,"__esModule",{value:!0});er.MAX_HASHABLE_LENGTH=er.INIT=er.KEY=er.DIGEST_LENGTH=er.BLOCK_SIZE=void 0;er.BLOCK_SIZE=64;er.DIGEST_LENGTH=32;er.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);er.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];er.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1;var bp={};Object.defineProperty(bp,"__esModule",{value:!0});bp.RawSha256=void 0;var lr=er,qJ=(function(){function n(){this.state=Int32Array.from(lr.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return o(n,"RawSha256"),n.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,r=e.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>lr.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[t++],r--,this.bufferLength===lr.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(t.setUint8(this.bufferLength++,128),r%lr.BLOCK_SIZE>=lr.BLOCK_SIZE-8){for(var i=this.bufferLength;i<lr.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<lr.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(lr.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(lr.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}for(var s=new Uint8Array(lr.DIGEST_LENGTH),i=0;i<8;i++)s[i*4]=this.state[i]>>>24&255,s[i*4+1]=this.state[i]>>>16&255,s[i*4+2]=this.state[i]>>>8&255,s[i*4+3]=this.state[i]>>>0&255;return s},n.prototype.hashBuffer=function(){for(var e=this,t=e.buffer,r=e.state,i=r[0],s=r[1],a=r[2],u=r[3],l=r[4],c=r[5],d=r[6],f=r[7],h=0;h<lr.BLOCK_SIZE;h++){if(h<16)this.temp[h]=(t[h*4]&255)<<24|(t[h*4+1]&255)<<16|(t[h*4+2]&255)<<8|t[h*4+3]&255;else{var g=this.temp[h-2],p=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10;g=this.temp[h-15];var m=(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;this.temp[h]=(p+this.temp[h-7]|0)+(m+this.temp[h-16]|0)}var w=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&c^~l&d)|0)+(f+(lr.KEY[h]+this.temp[h]|0)|0)|0,E=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&s^i&a^s&a)|0;f=d,d=c,c=l,l=u+w|0,u=a,a=s,s=i,i=w+E|0}r[0]+=i,r[1]+=s,r[2]+=a,r[3]+=u,r[4]+=l,r[5]+=c,r[6]+=d,r[7]+=f},n})();bp.RawSha256=qJ;var zD={},Sp={},KJ=o(n=>{let e=[];for(let t=0,r=n.length;t<r;t++){let i=n.charCodeAt(t);if(i<128)e.push(i);else if(i<2048)e.push(i>>6|192,i&63|128);else if(t+1<n.length&&(i&64512)===55296&&(n.charCodeAt(t+1)&64512)===56320){let s=65536+((i&1023)<<10)+(n.charCodeAt(++t)&1023);e.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else e.push(i>>12|224,i>>6&63|128,i&63|128)}return Uint8Array.from(e)},"fromUtf8$3"),YJ=o(n=>{let e="";for(let t=0,r=n.length;t<r;t++){let i=n[t];if(i<128)e+=String.fromCharCode(i);else if(192<=i&&i<224){let s=n[++t];e+=String.fromCharCode((i&31)<<6|s&63)}else if(240<=i&&i<365){let a="%"+[i,n[++t],n[++t],n[++t]].map(u=>u.toString(16)).join("%");e+=decodeURIComponent(a)}else e+=String.fromCharCode((i&15)<<12|(n[++t]&63)<<6|n[++t]&63)}return e},"toUtf8$2");function XJ(n){return new TextEncoder().encode(n)}o(XJ,"fromUtf8$2");function JJ(n){return new TextDecoder("utf-8").decode(n)}o(JJ,"toUtf8$1");var ZJ=o(n=>typeof TextEncoder=="function"?XJ(n):KJ(n),"fromUtf8$1"),QJ=o(n=>typeof TextDecoder=="function"?JJ(n):YJ(n),"toUtf8"),eZ=Object.freeze({__proto__:null,fromUtf8:ZJ,toUtf8:QJ}),tZ=FT(eZ);Object.defineProperty(Sp,"__esModule",{value:!0});Sp.convertToBuffer=void 0;var nZ=tZ,rZ=typeof Buffer!="undefined"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:nZ.fromUtf8;function iZ(n){return n instanceof Uint8Array?n:typeof n=="string"?rZ(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}o(iZ,"convertToBuffer");Sp.convertToBuffer=iZ;var Ap={};Object.defineProperty(Ap,"__esModule",{value:!0});Ap.isEmptyData=void 0;function sZ(n){return typeof n=="string"?n.length===0:n.byteLength===0}o(sZ,"isEmptyData");Ap.isEmptyData=sZ;var Ip={};Object.defineProperty(Ip,"__esModule",{value:!0});Ip.numToUint8=void 0;function oZ(n){return new Uint8Array([(n&4278190080)>>24,(n&16711680)>>16,(n&65280)>>8,n&255])}o(oZ,"numToUint8");Ip.numToUint8=oZ;var Cp={};Object.defineProperty(Cp,"__esModule",{value:!0});Cp.uint32ArrayFrom=void 0;function aZ(n){if(!Array.from){for(var e=new Uint32Array(n.length),t=0;t<n.length;)e[t]=n[t];return e}return Uint32Array.from(n)}o(aZ,"uint32ArrayFrom");Cp.uint32ArrayFrom=aZ;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.uint32ArrayFrom=n.numToUint8=n.isEmptyData=n.convertToBuffer=void 0;var e=Sp;Object.defineProperty(n,"convertToBuffer",{enumerable:!0,get:o(function(){return e.convertToBuffer},"get")});var t=Ap;Object.defineProperty(n,"isEmptyData",{enumerable:!0,get:o(function(){return t.isEmptyData},"get")});var r=Ip;Object.defineProperty(n,"numToUint8",{enumerable:!0,get:o(function(){return r.numToUint8},"get")});var i=Cp;Object.defineProperty(n,"uint32ArrayFrom",{enumerable:!0,get:o(function(){return i.uint32ArrayFrom},"get")})})(zD);Object.defineProperty(Tp,"__esModule",{value:!0});Tp.Sha256=void 0;var VN=GD,tp=er,iT=bp,sT=zD,uZ=(function(){function n(e){if(this.hash=new iT.RawSha256,e){this.outer=new iT.RawSha256;var t=cZ(e),r=new Uint8Array(tp.BLOCK_SIZE);r.set(t);for(var i=0;i<tp.BLOCK_SIZE;i++)t[i]^=54,r[i]^=92;this.hash.update(t),this.outer.update(r);for(var i=0;i<t.byteLength;i++)t[i]=0}}return o(n,"Sha256"),n.prototype.update=function(e){if(!((0,sT.isEmptyData)(e)||this.error))try{this.hash.update((0,sT.convertToBuffer)(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return(0,VN.__awaiter)(this,void 0,void 0,function(){return(0,VN.__generator)(this,function(e){return[2,this.digestSync()]})})},n})();Tp.Sha256=uZ;function cZ(n){var e=(0,sT.convertToBuffer)(n);if(e.byteLength>tp.BLOCK_SIZE){var t=new iT.RawSha256;t.update(e),e=t.digest()}var r=new Uint8Array(tp.BLOCK_SIZE);return r.set(e),r}o(cZ,"bufferFromSecret");(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=GD;(0,e.__exportStar)(Tp,n)})(No);var np=function(){return np=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},np.apply(this,arguments)},lZ=new Mr("Parser"),qD=o(function(n){var e={};if(n.aws_mobile_analytics_app_id){var t={AWSPinpoint:{appId:n.aws_mobile_analytics_app_id,region:n.aws_mobile_analytics_app_region}};e.Analytics=t}(n.aws_cognito_identity_pool_id||n.aws_user_pools_id)&&(e.Auth={userPoolId:n.aws_user_pools_id,userPoolWebClientId:n.aws_user_pools_web_client_id,region:n.aws_cognito_region,identityPoolId:n.aws_cognito_identity_pool_id,identityPoolRegion:n.aws_cognito_region,mandatorySignIn:n.aws_mandatory_sign_in==="enable",signUpVerificationMethod:n.aws_cognito_sign_up_verification_method||"code"});var r;return n.aws_user_files_s3_bucket?r={AWSS3:{bucket:n.aws_user_files_s3_bucket,region:n.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:n.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:r=n?n.Storage||n:{},n.Logging&&(e.Logging=np(np({},n.Logging),{region:n.aws_project_region})),n.geo&&(e.Geo=Object.assign({},n.geo),n.geo.amazon_location_service&&(e.Geo={AmazonLocationService:n.geo.amazon_location_service})),e.Analytics=Object.assign({},e.Analytics,n.Analytics),e.Auth=Object.assign({},e.Auth,n.Auth),e.Storage=Object.assign({},r),e.Logging=Object.assign({},e.Logging,n.Logging),lZ.debug("parse config",n,"to amplifyconfig",e),e},"parseAWSExports"),dZ=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},fZ=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Ss=new Mr("CognitoCredentials"),hZ=new Promise(function(n,e){if(!Fi().isBrowser)return Ss.debug("not in the browser, directly resolved"),n();var t=window.gapi&&window.gapi.auth2?window.gapi.auth2:null;if(t)return Ss.debug("google api already loaded"),n();setTimeout(function(){return n()},2e3)}),gZ=(function(){function n(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return o(n,"GoogleOAuth"),n.prototype.refreshGoogleToken=function(){return dZ(this,void 0,void 0,function(){return fZ(this,function(e){switch(e.label){case 0:return this.initialized?[3,2]:(Ss.debug("need to wait for the Google SDK loaded"),[4,hZ]);case 1:e.sent(),this.initialized=!0,Ss.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}})})},n.prototype._refreshGoogleTokenImpl=function(){var e=null;return Fi().isBrowser&&(e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),e?new Promise(function(t,r){e.getAuthInstance().then(function(i){i||(Ss.debug("google Auth undefined"),r(new Po("google Auth undefined")));var s=i.currentUser.get();s.isSignedIn()?(Ss.debug("refreshing the google access token"),s.reloadAuthResponse().then(function(a){var u=a.id_token,l=a.expires_at;t({token:u,expires_at:l})}).catch(function(a){a&&a.error==="network_error"?r("Network error reloading google auth response"):r(new Po("Failed to reload google auth response"))})):r(new Po("User is not signed in with Google"))}).catch(function(i){Ss.debug("Failed to refresh google token",i),r(new Po("Failed to refresh google token"))})}):(Ss.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},n})(),pZ=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},mZ=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Io=new Mr("CognitoCredentials"),vZ=new Promise(function(n,e){if(!Fi().isBrowser)return Io.debug("not in the browser, directly resolved"),n();var t=window.FB;if(t)return Io.debug("FB SDK already loaded"),n();setTimeout(function(){return n()},2e3)}),yZ=(function(){function n(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return o(n,"FacebookOAuth"),n.prototype.refreshFacebookToken=function(){return pZ(this,void 0,void 0,function(){return mZ(this,function(e){switch(e.label){case 0:return this.initialized?[3,2]:(Io.debug("need to wait for the Facebook SDK loaded"),[4,vZ]);case 1:e.sent(),this.initialized=!0,Io.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}})})},n.prototype._refreshFacebookTokenImpl=function(){var e=null;if(Fi().isBrowser&&(e=window.FB),!e){var t="no fb sdk available";return Io.debug(t),Promise.reject(new Po(t))}return new Promise(function(r,i){e.getLoginStatus(function(s){if(!s||!s.authResponse){var a="no response from facebook when refreshing the jwt token";Io.debug(a),i(new Po(a))}else{var u=s.authResponse,l=u.accessToken,c=u.expiresIn,d=new Date,f=c*1e3+d.getTime();if(!l){var a="the jwtToken is undefined";Io.debug(a),i(new Po(a))}r({token:l,expires_at:f})}},{scope:"public_profile,email"})})},n})(),_Z=new gZ,wZ=new yZ,bo={},EZ=(function(){function n(){}return o(n,"MemoryStorage"),n.setItem=function(e,t){return bo[e]=t,bo[e]},n.getItem=function(e){return Object.prototype.hasOwnProperty.call(bo,e)?bo[e]:void 0},n.removeItem=function(e){return delete bo[e]},n.clear=function(){return bo={},bo},n})(),KD=(function(){function n(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch(e){this.storageWindow=EZ}}return o(n,"StorageHelper"),n.prototype.getStorage=function(){return this.storageWindow},n})(),YD={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},TZ={partitions:[YD,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},bZ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:o(function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SZ=o(function(n){var e,t,r=TZ.partitions;try{for(var i=bZ(r),s=i.next();!s.done;s=i.next()){var a=s.value,u=a.regions,l=a.outputs,c=a.regionRegex,d=new RegExp(c);if(u.includes(n)||d.test(n))return l.dnsSuffix}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return YD.outputs.dnsSuffix},"getDnsSuffix");function AZ(n,e){return e=e||{},new Promise(function(t,r){var i=new XMLHttpRequest,s=[],a=[],u={},l=o(function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:o(function(){return Promise.resolve(i.responseText)},"text"),json:o(function(){return Promise.resolve(i.responseText).then(JSON.parse)},"json"),blob:o(function(){return Promise.resolve(new Blob([i.response]))},"blob"),clone:l,headers:{keys:o(function(){return s},"keys"),entries:o(function(){return a},"entries"),get:o(function(d){return u[d.toLowerCase()]},"get"),has:o(function(d){return d.toLowerCase()in u},"has")}}},"a");for(var c in i.open(e.method||"get",n,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(d,f,h){s.push(f=f.toLowerCase()),a.push([f,h]),u[f]=u[f]?u[f]+","+h:h}),t(l())},i.onerror=r,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(c,e.headers[c]);i.send(e.body||null)})}o(AZ,"unfetch_module");var IZ=Object.freeze({__proto__:null,default:AZ}),HN=FT(IZ);self.fetch||(self.fetch=HN.default||HN);var qE=o(function(n){var e;return function(){return e||(e=n()),e}},"withMemoization"),rp=function(){return rp=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},rp.apply(this,arguments)},CZ=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},RZ=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},OZ=o(function(n){return!["HEAD","GET","DELETE"].includes(n.toUpperCase())},"shouldSendBody"),PZ=o(function(n,e){var t=n.url,r=n.method,i=n.headers,s=n.body,a=e.abortSignal;return CZ(void 0,void 0,void 0,function(){var u,l,c,d,f,h,g;return RZ(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,fetch(t,{method:r,headers:i,body:OZ(r)?s:void 0,signal:a})];case 1:return u=p.sent(),[3,3];case 2:throw l=p.sent(),l instanceof TypeError?new Error("Network error"):l;case 3:return c={},(h=u.headers)===null||h===void 0||h.forEach(function(m,w){c[w.toLowerCase()]=m}),d={statusCode:u.status,headers:c,body:null},f=Object.assign((g=u.body)!==null&&g!==void 0?g:{},{text:qE(function(){return u.text()}),blob:qE(function(){return u.blob()}),json:qE(function(){return u.json()})}),[2,rp(rp({},d),{body:f})]}})})},"fetchTransferHandler"),ip=function(){return ip=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ip.apply(this,arguments)},NZ=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},DZ=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},LZ=3,xZ=o(function(n){var e=n.maxAttempts,t=e===void 0?LZ:e,r=n.retryDecider,i=n.computeDelay,s=n.abortSignal;if(t<1)throw new Error("maxAttempts must be greater than 0");return function(a,u){return o(function(c){var d;return NZ(this,void 0,void 0,function(){var f,h,g,p,m,w;return DZ(this,function(E){switch(E.label){case 0:h=(d=u.attemptsCount)!==null&&d!==void 0?d:0,p=o(function(){if(g)return jN(g,h),g;throw jN(f,h),f},"handleTerminalErrorOrResponse"),E.label=1;case 1:if(!(!(s!=null&&s.aborted)&&h<t))return[3,11];E.label=2;case 2:return E.trys.push([2,4,,5]),[4,a(c)];case 3:return g=E.sent(),f=void 0,[3,5];case 4:return m=E.sent(),f=m,g=void 0,[3,5];case 5:return h=u.attemptsCount>h?u.attemptsCount:h+1,u.attemptsCount=h,[4,r(g,f)];case 6:return E.sent()?!(s!=null&&s.aborted)&&h<t?(w=i(h),[4,UZ(w,s)]):[3,8]:[3,9];case 7:E.sent(),E.label=8;case 8:return[3,1];case 9:return[2,p()];case 10:return[3,1];case 11:if(s!=null&&s.aborted)throw new Error("Request aborted.");return[2,p()]}})})},"retryMiddleware")}},"retryMiddleware"),UZ=o(function(n,e){if(e!=null&&e.aborted)return Promise.resolve();var t,r,i=new Promise(function(s){r=s,t=setTimeout(s,n)});return e==null||e.addEventListener("abort",o(function s(a){clearTimeout(t),e==null||e.removeEventListener("abort",s),r()},"cancelSleep")),i},"cancellableSleep"),jN=o(function(n,e){var t;Object.prototype.toString.call(n)==="[object Object]"&&(n.$metadata=ip(ip({},(t=n.$metadata)!==null&&t!==void 0?t:{}),{attempts:e}))},"addOrIncrementMetadataAttempts"),WN=300*1e3,MZ=o(function(n){var e=WD(WN),t=e(n);return t===!1?WN:t},"jitteredBackoff$1"),kZ=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],FZ=o(function(n){return kZ.includes(n)},"isClockSkewError"),$Z=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},BZ=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},VZ=o(function(n){return function(e,t){return $Z(void 0,void 0,void 0,function(){var r,i,s,a;return BZ(this,function(u){switch(u.label){case 0:return t==null?[3,1]:(i=t,[3,3]);case 1:return[4,n(e)];case 2:i=u.sent(),u.label=3;case 3:return r=((a=i)!==null&&a!==void 0?a:{}).name,s=e==null?void 0:e.statusCode,[2,GZ(t)||WZ(s,r)||FZ(r)||zZ(s,r)]}})})}},"getRetryDecider"),HZ=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],jZ=["TimeoutError","RequestTimeout","RequestTimeoutException"],WZ=o(function(n,e){return n===429||HZ.includes(e)},"isThrottlingError"),GZ=o(function(n){return(n==null?void 0:n.name)==="Network error"},"isConnectionError"),zZ=o(function(n,e){return[500,502,503,504].includes(n)||jZ.includes(e)},"isServerSideError"),qZ=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},KZ=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},YZ=o(function(n){var e=n.userAgentHeader,t=e===void 0?"x-amz-user-agent":e,r=n.userAgentValue,i=r===void 0?"":r;return function(s){return o(function(u){return qZ(this,void 0,void 0,function(){var l,c,d;return KZ(this,function(f){switch(f.label){case 0:return i.trim().length!==0?[3,2]:[4,s(u)];case 1:return l=f.sent(),[2,l];case 2:return c=t.toLowerCase(),u.headers[c]=u.headers[c]?"".concat(u.headers[c]," ").concat(i):i,[4,s(u)];case 3:return d=f.sent(),[2,d]}})})},"userAgentMiddleware")}},"userAgentMiddleware"),XD=o(function(n,e){return function(t,r){for(var i={},s=o(function(c){return n(c,r)},"composedHandler"),a=e.length-1;a>=0;a--){var u=e[a],l=u(r);s=l(s,i)}return s(t)}},"composeTransferHandler"),XZ=XD(PZ,[YZ,xZ]),sp=function(){return sp=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},sp.apply(this,arguments)},Rp=o(function(n){var e,t,r=n.headers,i=n.statusCode;return sp(sp({},JZ(n)?n.$metadata:{}),{httpStatusCode:i,requestId:(t=(e=r["x-amzn-requestid"])!==null&&e!==void 0?e:r["x-amzn-request-id"])!==null&&t!==void 0?t:r["x-amz-request-id"],extendedRequestId:r["x-amz-id-2"],cfId:r["x-amz-cf-id"]})},"parseMetadata"),JZ=o(function(n){return typeof(n==null?void 0:n.$metadata)=="object"},"isMetadataBearer"),JD=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},ZD=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ZZ=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return s},$T=o(function(n){return JD(void 0,void 0,void 0,function(){var e,t,r,i,s,a,u,l,c,d;return ZD(this,function(f){switch(f.label){case 0:return!n||n.statusCode<300?[2]:[4,BT(n)];case 1:return e=f.sent(),t=o(function(h){var g=ZZ(h.toString().split(/[\,\:]+/),1),p=g[0];return p.includes("#")?p.split("#")[1]:p},"sanitizeErrorCode"),r=t((l=(u=(a=n.headers["x-amzn-errortype"])!==null&&a!==void 0?a:e.code)!==null&&u!==void 0?u:e.__type)!==null&&l!==void 0?l:"UnknownError"),i=(d=(c=e.message)!==null&&c!==void 0?c:e.Message)!==null&&d!==void 0?d:"Unknown error",s=new Error(i),[2,Object.assign(s,{name:r,$metadata:Rp(n)})]}})})},"parseJsonError"),BT=o(function(n){return JD(void 0,void 0,void 0,function(){var e;return ZD(this,function(t){switch(t.label){case 0:if(!n.body)throw new Error("Missing response payload");return[4,n.body.json()];case 1:return e=t.sent(),[2,Object.assign(e,{$metadata:Rp(n)})]}})})},"parseJsonBody"),QZ=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},eQ=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},tQ="cognito-identity",nQ=o(function(n){var e=n.region;return{url:new URL("https://cognito-identity.".concat(e,".").concat(SZ(e)))}},"endpointResolver"),rQ=o(function(){return function(n,e){return o(function(r){return QZ(this,void 0,void 0,function(){return eQ(this,function(i){return r.headers["cache-control"]="no-store",[2,n(r)]})})},"disableCacheMiddleware")}},"disableCacheMiddleware"),QD=XD(XZ,[rQ]),VT={service:tQ,endpointResolver:nQ,retryDecider:VZ($T),computeDelay:MZ,userAgentValue:kT()};HD(function(){VT.userAgentValue=kT()});var eL=o(function(n){return{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.".concat(n)}},"getSharedHeaders"),tL=o(function(n,e,t){var r=n.url;return{headers:e,url:r,body:t,method:"POST"}},"buildHttpRpcRequest"),$l=function(){return $l=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},$l.apply(this,arguments)},iQ=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},sQ=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},nL=o(function(n,e,t,r){return function(i,s){return iQ(void 0,void 0,void 0,function(){var a,u,l,c;return sQ(this,function(d){switch(d.label){case 0:return a=$l($l({},r),i),[4,a.endpointResolver(a,s)];case 1:return u=d.sent(),[4,e(s,u)];case 2:return l=d.sent(),[4,n(l,$l({},a))];case 3:return c=d.sent(),[4,t(c)];case 4:return[2,d.sent()]}})})}},"composeServiceApi"),oQ=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},aQ=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},uQ=o(function(n,e){var t=eL("GetId"),r=JSON.stringify(n);return tL(e,t,r)},"getIdSerializer"),cQ=o(function(n){return oQ(void 0,void 0,void 0,function(){var e,t;return aQ(this,function(r){switch(r.label){case 0:return n.statusCode>=300?[4,$T(n)]:[3,2];case 1:throw e=r.sent(),e;case 2:return[4,BT(n)];case 3:return t=r.sent(),[2,{IdentityId:t.IdentityId,$metadata:Rp(n)}]}})})},"getIdDeserializer"),Ng=nL(QD,uQ,cQ,VT),lQ=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},dQ=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},fQ=o(function(n,e){var t=eL("GetCredentialsForIdentity"),r=JSON.stringify(n);return tL(e,t,r)},"getCredentialsForIdentitySerializer"),hQ=o(function(n){return lQ(void 0,void 0,void 0,function(){var e,t;return dQ(this,function(r){switch(r.label){case 0:return n.statusCode>=300?[4,$T(n)]:[3,2];case 1:throw e=r.sent(),e;case 2:return[4,BT(n)];case 3:return t=r.sent(),[2,{IdentityId:t.IdentityId,Credentials:gQ(t.Credentials),$metadata:Rp(n)}]}})})},"getCredentialsForIdentityDeserializer"),gQ=o(function(n){return n===void 0&&(n={}),{AccessKeyId:n.AccessKeyId,SecretKey:n.SecretKey,SessionToken:n.SessionToken,Expiration:new Date(n.Expiration*1e3)}},"deserializeCredentials"),Dg=nL(QD,fQ,hQ,VT),op=function(){return op=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},op.apply(this,arguments)},_n=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})},wn=function(n,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},r,i,s,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},He=new Mr("Credentials"),pQ=3e3*1e3,mQ="CognitoIdentityId-",vQ=typeof Symbol!="undefined"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",yQ=o(function(n,e,t){Pi.dispatch("core",{event:n,data:e,message:t},"Credentials",vQ)},"dispatchCredentialsEvent"),_Q=(function(){function n(e){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(e),this._refreshHandlers.google=_Z.refreshGoogleToken,this._refreshHandlers.facebook=wZ.refreshFacebookToken}return o(n,"CredentialsClass"),n.prototype.getModuleName=function(){return"Credentials"},n.prototype.getCredSource=function(){return this._credentials_source},n.prototype.configure=function(e){if(!e)return this._config||{};this._config=Object.assign({},this._config,e);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=op(op({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=new KD().getStorage()),this._storageSync=Promise.resolve(),typeof this._storage.sync=="function"&&(this._storageSync=this._storage.sync()),yQ("credentials_configured",null,"Credentials has been configured successfully"),this._config},n.prototype.get=function(){return He.debug("getting credentials"),this._pickupCredentials()},n.prototype._getCognitoIdentityIdStorageKey=function(e){return"".concat(mQ).concat(e)},n.prototype._pickupCredentials=function(){return He.debug("picking up credentials"),!this._gettingCredPromise||!this._gettingCredPromise.isPending()?(He.debug("getting new cred promise"),this._gettingCredPromise=MJ(this._keepAlive())):He.debug("getting old cred promise"),this._gettingCredPromise},n.prototype._keepAlive=function(){return _n(this,void 0,void 0,function(){var e,t,r,i,s,a,u,l;return wn(this,function(c){switch(c.label){case 0:if(He.debug("checking if credentials exists and not expired"),e=this._credentials,e&&!this._isExpired(e)&&!this._isPastTTL())return He.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(e)];if(He.debug("need to get a new credential or refresh the existing one"),t=this.Auth,r=t===void 0?td.Auth:t,!r||typeof r.currentUserCredentials!="function")return[2,this._setCredentialsForGuest()];if(!(!this._isExpired(e)&&this._isPastTTL()))return[3,6];He.debug("ttl has passed but token is not yet expired"),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,r.currentUserPoolUser()];case 2:return i=c.sent(),[4,r.currentSession()];case 3:return s=c.sent(),a=s.refreshToken,u=new Promise(function(d,f){i.refreshSession(a,function(h,g){return h?f(h):d(g)})}),[4,u];case 4:return c.sent(),[3,6];case 5:return l=c.sent(),He.debug("Error attempting to refreshing the session",l),[3,6];case 6:return[2,r.currentUserCredentials()]}})})},n.prototype.refreshFederatedToken=function(e){He.debug("Getting federated credentials");var t=e.provider,r=e.user,i=e.token,s=e.identity_id,a=e.expires_at;a=new Date(a).getFullYear()===1970?a*1e3:a;var u=this;return He.debug("checking if federated jwt token expired"),a>new Date().getTime()?(He.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:i,user:r,identity_id:s,expires_at:a})):u._refreshHandlers[t]&&typeof u._refreshHandlers[t]=="function"?(He.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:u._refreshHandlers[t],provider:t,user:r})):(He.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},n.prototype._providerRefreshWithRetry=function(e){var t=this,r=e.refreshHandler,i=e.provider,s=e.user,a=10*1e3;return jJ(r,[],a).then(function(u){return He.debug("refresh federated token sucessfully",u),t._setCredentialsFromFederation({provider:i,token:u.token,user:s,identity_id:u.identity_id,expires_at:u.expires_at})}).catch(function(u){var l=typeof u=="string"&&u.toLowerCase().lastIndexOf("network error",u.length)===0;return l||t.clear(),He.debug("refresh federated token failed",u),Promise.reject("refreshing federation token failed: "+u)})},n.prototype._isExpired=function(e){if(!e)return He.debug("no credentials for expiration check"),!0;He.debug("are these credentials expired?",e);var t=Date.now(),r=e.expiration;return r.getTime()<=t},n.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},n.prototype._setCredentialsForGuest=function(){var e;return _n(this,void 0,void 0,function(){var t,r,i,s,a,u,l,c,d,f,h=this;return wn(this,function(g){switch(g.label){case 0:return He.debug("setting credentials for guest"),!((e=this._config)===null||e===void 0)&&e.identityPoolId||(this._config=Object.assign({},this._config,qD(this._config||{}).Auth)),t=this._config,r=t.identityPoolId,i=t.region,s=t.mandatorySignIn,a=t.identityPoolRegion,s?[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")]:r?!a&&!i?(He.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")]):(l=this,[4,this._getGuestIdentityId()]):(He.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")]);case 1:return u=l._identityId=g.sent(),c={region:a!=null?a:i},d=o(function(){return _n(h,void 0,void 0,function(){var p,m;return wn(this,function(w){switch(w.label){case 0:return u?[3,2]:[4,Ng(c,{IdentityPoolId:r})];case 1:p=w.sent().IdentityId,this._identityId=p,w.label=2;case 2:return[4,Dg(c,{IdentityId:this._identityId})];case 3:return m=w.sent().Credentials,[2,{identityId:this._identityId,accessKeyId:m.AccessKeyId,secretAccessKey:m.SecretKey,sessionToken:m.SessionToken,expiration:m.Expiration}]}})})},"guestCredentialsProvider"),f=d().catch(function(p){return _n(h,void 0,void 0,function(){return wn(this,function(m){throw p})})}),[2,this._loadCredentials(f,"guest",!1,null).then(function(p){return p}).catch(function(p){return _n(h,void 0,void 0,function(){var m,w=this;return wn(this,function(E){switch(E.label){case 0:return p.name==="ResourceNotFoundException"&&p.message==="Identity '".concat(u,"' not found.")?(He.debug("Failed to load guest credentials"),[4,this._removeGuestIdentityId()]):[3,2];case 1:return E.sent(),m=o(function(){return _n(w,void 0,void 0,function(){var _,T;return wn(this,function(R){switch(R.label){case 0:return[4,Ng(c,{IdentityPoolId:r})];case 1:return _=R.sent().IdentityId,this._identityId=_,[4,Dg(c,{IdentityId:_})];case 2:return T=R.sent().Credentials,[2,{identityId:_,accessKeyId:T.AccessKeyId,secretAccessKey:T.SecretKey,sessionToken:T.SessionToken,expiration:T.Expiration}]}})})},"guestCredentialsProvider_1"),f=m().catch(function(_){return _n(w,void 0,void 0,function(){return wn(this,function(T){throw _})})}),[2,this._loadCredentials(f,"guest",!1,null)];case 2:return[2,p]}})})})]}})})},n.prototype._setCredentialsFromFederation=function(e){var t=this,r=e.provider,i=e.token,s=e.identity_id,a={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"},u=a[r]||r;if(!u)return Promise.reject("You must specify a federated provider");var l={};l[u]=i;var c=this._config,d=c.identityPoolId,f=c.region,h=c.identityPoolRegion;if(!d)return He.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!h&&!f)return He.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var g={region:h!=null?h:f},p=o(function(){return _n(t,void 0,void 0,function(){var w,E;return wn(this,function(_){switch(_.label){case 0:return s?[3,2]:[4,Ng(g,{IdentityPoolId:d,Logins:l})];case 1:w=_.sent().IdentityId,s=w,_.label=2;case 2:return[4,Dg(g,{IdentityId:s,Logins:l})];case 3:return E=_.sent().Credentials,[2,{identityId:s,accessKeyId:E.AccessKeyId,secretAccessKey:E.SecretKey,sessionToken:E.SessionToken,expiration:E.Expiration}]}})})},"authenticatedCredentialsProvider"),m=p().catch(function(w){return _n(t,void 0,void 0,function(){return wn(this,function(E){throw w})})});return this._loadCredentials(m,"federated",!0,e)},n.prototype._setCredentialsFromSession=function(e){var t=this;He.debug("set credentials from session");var r=e.getIdToken().getJwtToken(),i=this._config,s=i.region,a=i.userPoolId,u=i.identityPoolId,l=i.identityPoolRegion;if(!u)return He.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!l&&!s)return He.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var c="cognito-idp."+s+".amazonaws.com/"+a,d={};d[c]=r;var f={region:l!=null?l:s},h=o(function(){return _n(t,void 0,void 0,function(){var p,m,w,E,_,T,R,D,B,z;return wn(this,function(j){switch(j.label){case 0:return[4,this._getGuestIdentityId()];case 1:return p=j.sent(),p?[3,3]:[4,Ng(f,{IdentityPoolId:u,Logins:d})];case 2:w=j.sent().IdentityId,m=w,j.label=3;case 3:return[4,Dg(f,{IdentityId:p||m,Logins:d})];case 4:return E=j.sent(),_=E.Credentials,T=_.AccessKeyId,R=_.Expiration,D=_.SecretKey,B=_.SessionToken,z=E.IdentityId,this._identityId=z,p?(He.debug("The guest identity ".concat(p," has been successfully linked to the logins")),p===z&&He.debug("The guest identity ".concat(p," has become the primary identity")),[4,this._removeGuestIdentityId()]):[3,6];case 5:j.sent(),j.label=6;case 6:return[2,{accessKeyId:T,secretAccessKey:D,sessionToken:B,expiration:R,identityId:z}]}})})},"credentialsProvider"),g=h().catch(function(p){return _n(t,void 0,void 0,function(){return wn(this,function(m){throw p})})});return this._loadCredentials(g,"userPool",!0,null)},n.prototype._loadCredentials=function(e,t,r,i){var s=this,a=this;return new Promise(function(u,l){e.then(function(c){return _n(s,void 0,void 0,function(){var d,f,h,g,p;return wn(this,function(m){switch(m.label){case 0:if(He.debug("Load credentials successfully",c),this._identityId&&!c.identityId&&(c.identityId=this._identityId),a._credentials=c,a._credentials.authenticated=r,a._credentials_source=t,a._nextCredentialsRefresh=new Date().getTime()+pQ,t==="federated"){d=Object.assign({id:this._credentials.identityId},i.user),f=i.provider,h=i.token,g=i.expires_at,p=i.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:f,token:h,user:d,expires_at:g,identity_id:p}))}catch(w){He.debug("Failed to put federated info into auth storage",w)}}return t!=="guest"?[3,2]:[4,this._setGuestIdentityId(c.identityId)];case 1:m.sent(),m.label=2;case 2:return u(a._credentials),[2]}})})}).catch(function(c){if(c){He.debug("Failed to load credentials",e),He.debug("Error loading credentials",c),l(c);return}})})},n.prototype.set=function(e,t){return t==="session"?this._setCredentialsFromSession(e):t==="federation"?this._setCredentialsFromFederation(e):t==="guest"?this._setCredentialsForGuest():(He.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},n.prototype.clear=function(){return _n(this,void 0,void 0,function(){return wn(this,function(e){return this._credentials=null,this._credentials_source=null,He.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]})})},n.prototype._getGuestIdentityId=function(){return _n(this,void 0,void 0,function(){var e,t;return wn(this,function(r){switch(r.label){case 0:e=this._config.identityPoolId,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[2,this._storage.getItem(this._getCognitoIdentityIdStorageKey(e))];case 3:return t=r.sent(),He.debug("Failed to get the cached guest identityId",t),[3,4];case 4:return[2]}})})},n.prototype._setGuestIdentityId=function(e){return _n(this,void 0,void 0,function(){var t,r;return wn(this,function(i){switch(i.label){case 0:t=this._config.identityPoolId,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._storageSync];case 2:return i.sent(),this._storage.setItem(this._getCognitoIdentityIdStorageKey(t),e),[3,4];case 3:return r=i.sent(),He.debug("Failed to cache guest identityId",r),[3,4];case 4:return[2]}})})},n.prototype._removeGuestIdentityId=function(){return _n(this,void 0,void 0,function(){var e;return wn(this,function(t){return e=this._config.identityPoolId,He.debug("removing ".concat(this._getCognitoIdentityIdStorageKey(e)," from storage")),this._storage.removeItem(this._getCognitoIdentityIdStorageKey(e)),[2]})})},n.prototype.shear=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},n})(),rL=new _Q(null);td.register(rL);var Lg={};var GN;function wQ(){if(GN)return Lg;GN=1,Lg.parse=a,Lg.serialize=c;var n=Object.prototype.toString,e=Object.prototype.hasOwnProperty,t=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,r=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/;function a(g,p){if(typeof g!="string")throw new TypeError("argument str must be a string");var m={},w=g.length;if(w<2)return m;var E=p&&p.decode||d,_=0,T=0,R=0;do{if(T=g.indexOf("=",_),T===-1)break;if(R=g.indexOf(";",_),R===-1)R=w;else if(T>R){_=g.lastIndexOf(";",T-1)+1;continue}var D=u(g,_,T),B=l(g,T,D),z=g.slice(D,B);if(!e.call(m,z)){var j=u(g,T+1,R),Y=l(g,R,j);g.charCodeAt(j)===34&&g.charCodeAt(Y-1)===34&&(j++,Y--);var q=g.slice(j,Y);m[z]=h(q,E)}_=R+1}while(_<w);return m}o(a,"parse");function u(g,p,m){do{var w=g.charCodeAt(p);if(w!==32&&w!==9)return p}while(++p<m);return m}o(u,"startIndex");function l(g,p,m){for(;p>m;){var w=g.charCodeAt(--p);if(w!==32&&w!==9)return p+1}return m}o(l,"endIndex");function c(g,p,m){var w=m&&m.encode||encodeURIComponent;if(typeof w!="function")throw new TypeError("option encode is invalid");if(!t.test(g))throw new TypeError("argument name is invalid");var E=w(p);if(!r.test(E))throw new TypeError("argument val is invalid");var _=g+"="+E;if(!m)return _;if(m.maxAge!=null){var T=Math.floor(m.maxAge);if(!isFinite(T))throw new TypeError("option maxAge is invalid");_+="; Max-Age="+T}if(m.domain){if(!i.test(m.domain))throw new TypeError("option domain is invalid");_+="; Domain="+m.domain}if(m.path){if(!s.test(m.path))throw new TypeError("option path is invalid");_+="; Path="+m.path}if(m.expires){var R=m.expires;if(!f(R)||isNaN(R.valueOf()))throw new TypeError("option expires is invalid");_+="; Expires="+R.toUTCString()}if(m.httpOnly&&(_+="; HttpOnly"),m.secure&&(_+="; Secure"),m.partitioned&&(_+="; Partitioned"),m.priority){var D=typeof m.priority=="string"?m.priority.toLowerCase():m.priority;switch(D){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(m.sameSite){var B=typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite;switch(B){case!0:_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"strict":_+="; SameSite=Strict";break;case"none":_+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return _}o(c,"serialize");function d(g){return g.indexOf("%")!==-1?decodeURIComponent(g):g}o(d,"decode");function f(g){return n.call(g)==="[object Date]"}o(f,"isDate");function h(g,p){try{return p(g)}catch(m){return g}}return o(h,"tryDecode"),Lg}o(wQ,"requireCookie");var Fg=wQ();function EQ(){let n=typeof global=="undefined"?void 0:global.TEST_HAS_DOCUMENT_COOKIE;return typeof n=="boolean"?n:typeof document=="object"&&typeof document.cookie=="string"}o(EQ,"hasDocumentCookie");function TQ(n){return typeof n=="string"?Fg.parse(n):typeof n=="object"&&n!==null?n:{}}o(TQ,"parseCookies");function KE(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=bQ(n);if(!e.doNotParse)try{return JSON.parse(t)}catch(r){}return n}o(KE,"readCookie");function bQ(n){return n&&n[0]==="j"&&n[1]===":"?n.substr(2):n}o(bQ,"cleanupCookieValue");var qT=class qT{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.update=()=>{if(!this.HAS_DOCUMENT_COOKIE)return;let i=this.cookies;this.cookies=Fg.parse(document.cookie),this._checkChanges(i)};let r=typeof document=="undefined"?"":document.cookie;this.cookies=TQ(e||r),this.defaultSetOptions=t,this.HAS_DOCUMENT_COOKIE=EQ()}_emitChange(e){for(let t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)}_checkChanges(e){new Set(Object.keys(e).concat(Object.keys(this.cookies))).forEach(r=>{e[r]!==this.cookies[r]&&this._emitChange({name:r,value:KE(this.cookies[r])})})}_startPolling(){this.pollingInterval=setInterval(this.update,300)}_stopPolling(){this.pollingInterval&&clearInterval(this.pollingInterval)}get(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.doNotUpdate||this.update(),KE(this.cookies[e],t)}getAll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.doNotUpdate||this.update();let t={};for(let r in this.cookies)t[r]=KE(this.cookies[r],e);return t}set(e,t,r){r?r=Object.assign(Object.assign({},this.defaultSetOptions),r):r=this.defaultSetOptions;let i=typeof t=="string"?t:JSON.stringify(t);this.cookies=Object.assign(Object.assign({},this.cookies),{[e]:i}),this.HAS_DOCUMENT_COOKIE&&(document.cookie=Fg.serialize(e,i,r)),this._emitChange({name:e,value:t,options:r})}remove(e,t){let r=t=Object.assign(Object.assign(Object.assign({},this.defaultSetOptions),t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Object.assign({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=Fg.serialize(e,"",r)),this._emitChange({name:e,value:void 0,options:t})}addChangeListener(e){this.changeListeners.push(e),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===1&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.addEventListener("change",this.update):this._startPolling())}removeChangeListener(e){let t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===0&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.removeEventListener("change",this.update):this._stopPolling())}};o(qT,"Cookies");var Bl=qT,ap=function(){return ap=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ap.apply(this,arguments)},zN=Fi().isBrowser,SQ=365*24*60*60*1e3,AQ=(function(){function n(e){e===void 0&&(e={}),this.cookies=new Bl,this.store=zN?window.localStorage:Object.create(null),this.cookies=e.req?new Bl(decodeURIComponent(e.req.headers.cookie)):new Bl,Object.assign(this.store,this.cookies.getAll())}return o(n,"UniversalStorage"),Object.defineProperty(n.prototype,"length",{get:o(function(){return Object.entries(this.store).length},"get"),enumerable:!1,configurable:!0}),n.prototype.clear=function(){var e=this;Array.from(new Array(this.length)).map(function(t,r){return e.key(r)}).forEach(function(t){return e.removeItem(t)})},n.prototype.getItem=function(e){return this.getLocalItem(e)},n.prototype.getLocalItem=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)?this.store[e]:null},n.prototype.getUniversalItem=function(e){return this.cookies.get(e)},n.prototype.key=function(e){return Object.keys(this.store)[e]},n.prototype.removeItem=function(e){this.removeLocalItem(e),this.removeUniversalItem(e)},n.prototype.removeLocalItem=function(e){delete this.store[e]},n.prototype.removeUniversalItem=function(e){this.cookies.remove(e,{path:"/"})},n.prototype.setItem=function(e,t){this.setLocalItem(e,t);var r=e.split(".").pop(),i=["LastAuthUser","accessToken","refreshToken","idToken"];i.includes(r!=null?r:"")&&this.setUniversalItem(e,t,{expires:new Date(Date.now()+SQ)})},n.prototype.setLocalItem=function(e,t){this.store[e]=t},n.prototype.setUniversalItem=function(e,t,r){r===void 0&&(r={}),this.cookies.set(e,t,ap(ap({},r),{path:"/",sameSite:!0,secure:!(zN&&window.location.hostname==="localhost")}))},n})(),IQ="x-amz-user-agent";var qN=(function(){function n(t){var r=t||{},i=r.ValidationData,s=r.Username,a=r.Password,u=r.AuthParameters,l=r.ClientMetadata;this.validationData=i||{},this.authParameters=u||{},this.clientMetadata=l||{},this.username=s,this.password=a}o(n,"AuthenticationDetails");var e=n.prototype;return e.getUsername=o(function(){return this.username},"getUsername"),e.getPassword=o(function(){return this.password},"getPassword"),e.getValidationData=o(function(){return this.validationData},"getValidationData"),e.getAuthParameters=o(function(){return this.authParameters},"getAuthParameters"),e.getClientMetadata=o(function(){return this.clientMetadata},"getClientMetadata"),n})(),_t={},Op={};Op.byteLength=RQ;Op.toByteArray=PQ;Op.fromByteArray=LQ;var ei=[],dr=[],CQ=typeof Uint8Array!="undefined"?Uint8Array:Array,YE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(So=0,KN=YE.length;So<KN;++So)ei[So]=YE[So],dr[YE.charCodeAt(So)]=So;var So,KN;dr[45]=62;dr[95]=63;function iL(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}o(iL,"getLens");function RQ(n){var e=iL(n),t=e[0],r=e[1];return(t+r)*3/4-r}o(RQ,"byteLength");function OQ(n,e,t){return(e+t)*3/4-t}o(OQ,"_byteLength");function PQ(n){var e,t=iL(n),r=t[0],i=t[1],s=new CQ(OQ(n,r,i)),a=0,u=i>0?r-4:r,l;for(l=0;l<u;l+=4)e=dr[n.charCodeAt(l)]<<18|dr[n.charCodeAt(l+1)]<<12|dr[n.charCodeAt(l+2)]<<6|dr[n.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=dr[n.charCodeAt(l)]<<2|dr[n.charCodeAt(l+1)]>>4,s[a++]=e&255),i===1&&(e=dr[n.charCodeAt(l)]<<10|dr[n.charCodeAt(l+1)]<<4|dr[n.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}o(PQ,"toByteArray");function NQ(n){return ei[n>>18&63]+ei[n>>12&63]+ei[n>>6&63]+ei[n&63]}o(NQ,"tripletToBase64");function DQ(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(NQ(r));return i.join("")}o(DQ,"encodeChunk");function LQ(n){for(var e,t=n.length,r=t%3,i=[],s=16383,a=0,u=t-r;a<u;a+=s)i.push(DQ(n,a,a+s>u?u:a+s));return r===1?(e=n[t-1],i.push(ei[e>>2]+ei[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(ei[e>>10]+ei[e>>4&63]+ei[e<<2&63]+"=")),i.join("")}o(LQ,"fromByteArray");var HT={};HT.read=function(n,e,t,r,i){var s,a,u=i*8-r-1,l=(1<<u)-1,c=l>>1,d=-7,f=t?i-1:0,h=t?-1:1,g=n[e+f];for(f+=h,s=g&(1<<-d)-1,g>>=-d,d+=u;d>0;s=s*256+n[e+f],f+=h,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=r;d>0;a=a*256+n[e+f],f+=h,d-=8);if(s===0)s=1-c;else{if(s===l)return a?NaN:(g?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-c}return(g?-1:1)*a*Math.pow(2,s-r)};HT.write=function(n,e,t,r,i,s){var a,u,l,c=s*8-i-1,d=(1<<c)-1,f=d>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,p=r?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+f>=1?e+=h/l:e+=h*Math.pow(2,1-f),e*l>=2&&(a++,l/=2),a+f>=d?(u=0,a=d):a+f>=1?(u=(e*l-1)*Math.pow(2,i),a=a+f):(u=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;n[t+g]=u&255,g+=p,u/=256,i-=8);for(a=a<<i|u,c+=i;c>0;n[t+g]=a&255,g+=p,a/=256,c-=8);n[t+g-p]|=m*128};var xQ={}.toString,UQ=Array.isArray||function(n){return xQ.call(n)=="[object Array]"};(function(n){var e=Op,t=HT,r=UQ;n.Buffer=u,n.SlowBuffer=E,n.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=Mi.TYPED_ARRAY_SUPPORT!==void 0?Mi.TYPED_ARRAY_SUPPORT:i(),n.kMaxLength=s();function i(){try{var A=new Uint8Array(1);return A.__proto__={__proto__:Uint8Array.prototype,foo:o(function(){return 42},"foo")},A.foo()===42&&typeof A.subarray=="function"&&A.subarray(1,1).byteLength===0}catch(v){return!1}}o(i,"typedArraySupport");function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}o(s,"kMaxLength");function a(A,v){if(s()<v)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(A=new Uint8Array(v),A.__proto__=u.prototype):(A===null&&(A=new u(v)),A.length=v),A}o(a,"createBuffer");function u(A,v,y){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(A,v,y);if(typeof A=="number"){if(typeof v=="string")throw new Error("If encoding is specified then the first argument must be a string");return f(this,A)}return l(this,A,v,y)}o(u,"Buffer"),u.poolSize=8192,u._augment=function(A){return A.__proto__=u.prototype,A};function l(A,v,y,C){if(typeof v=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&v instanceof ArrayBuffer?p(A,v,y,C):typeof v=="string"?h(A,v,y):m(A,v)}o(l,"from"),u.from=function(A,v,y){return l(null,A,v,y)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0}));function c(A){if(typeof A!="number")throw new TypeError('"size" argument must be a number');if(A<0)throw new RangeError('"size" argument must not be negative')}o(c,"assertSize");function d(A,v,y,C){return c(v),v<=0?a(A,v):y!==void 0?typeof C=="string"?a(A,v).fill(y,C):a(A,v).fill(y):a(A,v)}o(d,"alloc"),u.alloc=function(A,v,y){return d(null,A,v,y)};function f(A,v){if(c(v),A=a(A,v<0?0:w(v)|0),!u.TYPED_ARRAY_SUPPORT)for(var y=0;y<v;++y)A[y]=0;return A}o(f,"allocUnsafe"),u.allocUnsafe=function(A){return f(null,A)},u.allocUnsafeSlow=function(A){return f(null,A)};function h(A,v,y){if((typeof y!="string"||y==="")&&(y="utf8"),!u.isEncoding(y))throw new TypeError('"encoding" must be a valid string encoding');var C=_(v,y)|0;A=a(A,C);var V=A.write(v,y);return V!==C&&(A=A.slice(0,V)),A}o(h,"fromString");function g(A,v){var y=v.length<0?0:w(v.length)|0;A=a(A,y);for(var C=0;C<y;C+=1)A[C]=v[C]&255;return A}o(g,"fromArrayLike");function p(A,v,y,C){if(v.byteLength,y<0||v.byteLength<y)throw new RangeError("'offset' is out of bounds");if(v.byteLength<y+(C||0))throw new RangeError("'length' is out of bounds");return y===void 0&&C===void 0?v=new Uint8Array(v):C===void 0?v=new Uint8Array(v,y):v=new Uint8Array(v,y,C),u.TYPED_ARRAY_SUPPORT?(A=v,A.__proto__=u.prototype):A=g(A,v),A}o(p,"fromArrayBuffer");function m(A,v){if(u.isBuffer(v)){var y=w(v.length)|0;return A=a(A,y),A.length===0||v.copy(A,0,0,y),A}if(v){if(typeof ArrayBuffer!="undefined"&&v.buffer instanceof ArrayBuffer||"length"in v)return typeof v.length!="number"||xe(v.length)?a(A,0):g(A,v);if(v.type==="Buffer"&&r(v.data))return g(A,v.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}o(m,"fromObject");function w(A){if(A>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return A|0}o(w,"checked");function E(A){return+A!=A&&(A=0),u.alloc(+A)}o(E,"SlowBuffer"),u.isBuffer=o(function(v){return!!(v!=null&&v._isBuffer)},"isBuffer"),u.compare=o(function(v,y){if(!u.isBuffer(v)||!u.isBuffer(y))throw new TypeError("Arguments must be Buffers");if(v===y)return 0;for(var C=v.length,V=y.length,se=0,ce=Math.min(C,V);se<ce;++se)if(v[se]!==y[se]){C=v[se],V=y[se];break}return C<V?-1:V<C?1:0},"compare"),u.isEncoding=o(function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),u.concat=o(function(v,y){if(!r(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return u.alloc(0);var C;if(y===void 0)for(y=0,C=0;C<v.length;++C)y+=v[C].length;var V=u.allocUnsafe(y),se=0;for(C=0;C<v.length;++C){var ce=v[C];if(!u.isBuffer(ce))throw new TypeError('"list" argument must be an Array of Buffers');ce.copy(V,se),se+=ce.length}return V},"concat");function _(A,v){if(u.isBuffer(A))return A.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(A)||A instanceof ArrayBuffer))return A.byteLength;typeof A!="string"&&(A=""+A);var y=A.length;if(y===0)return 0;for(var C=!1;;)switch(v){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":case void 0:return W(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return we(A).length;default:if(C)return W(A).length;v=(""+v).toLowerCase(),C=!0}}o(_,"byteLength"),u.byteLength=_;function T(A,v,y){var C=!1;if((v===void 0||v<0)&&(v=0),v>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,v>>>=0,y<=v))return"";for(A||(A="utf8");;)switch(A){case"hex":return Xe(this,v,y);case"utf8":case"utf-8":return S(this,v,y);case"ascii":return Oe(this,v,y);case"latin1":case"binary":return Ye(this,v,y);case"base64":return oe(this,v,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,v,y);default:if(C)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),C=!0}}o(T,"slowToString"),u.prototype._isBuffer=!0;function R(A,v,y){var C=A[v];A[v]=A[y],A[y]=C}o(R,"swap"),u.prototype.swap16=o(function(){var v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var y=0;y<v;y+=2)R(this,y,y+1);return this},"swap16"),u.prototype.swap32=o(function(){var v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var y=0;y<v;y+=4)R(this,y,y+3),R(this,y+1,y+2);return this},"swap32"),u.prototype.swap64=o(function(){var v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var y=0;y<v;y+=8)R(this,y,y+7),R(this,y+1,y+6),R(this,y+2,y+5),R(this,y+3,y+4);return this},"swap64"),u.prototype.toString=o(function(){var v=this.length|0;return v===0?"":arguments.length===0?S(this,0,v):T.apply(this,arguments)},"toString"),u.prototype.equals=o(function(v){if(!u.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:u.compare(this,v)===0},"equals"),u.prototype.inspect=o(function(){var v="",y=n.INSPECT_MAX_BYTES;return this.length>0&&(v=this.toString("hex",0,y).match(/.{2}/g).join(" "),this.length>y&&(v+=" ... ")),"<Buffer "+v+">"},"inspect"),u.prototype.compare=o(function(v,y,C,V,se){if(!u.isBuffer(v))throw new TypeError("Argument must be a Buffer");if(y===void 0&&(y=0),C===void 0&&(C=v?v.length:0),V===void 0&&(V=0),se===void 0&&(se=this.length),y<0||C>v.length||V<0||se>this.length)throw new RangeError("out of range index");if(V>=se&&y>=C)return 0;if(V>=se)return-1;if(y>=C)return 1;if(y>>>=0,C>>>=0,V>>>=0,se>>>=0,this===v)return 0;for(var ce=se-V,We=C-y,nt=Math.min(ce,We),rt=this.slice(V,se),yt=v.slice(y,C),gt=0;gt<nt;++gt)if(rt[gt]!==yt[gt]){ce=rt[gt],We=yt[gt];break}return ce<We?-1:We<ce?1:0},"compare");function D(A,v,y,C,V){if(A.length===0)return-1;if(typeof y=="string"?(C=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,isNaN(y)&&(y=V?0:A.length-1),y<0&&(y=A.length+y),y>=A.length){if(V)return-1;y=A.length-1}else if(y<0)if(V)y=0;else return-1;if(typeof v=="string"&&(v=u.from(v,C)),u.isBuffer(v))return v.length===0?-1:B(A,v,y,C,V);if(typeof v=="number")return v=v&255,u.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?V?Uint8Array.prototype.indexOf.call(A,v,y):Uint8Array.prototype.lastIndexOf.call(A,v,y):B(A,[v],y,C,V);throw new TypeError("val must be string, number or Buffer")}o(D,"bidirectionalIndexOf");function B(A,v,y,C,V){var se=1,ce=A.length,We=v.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(A.length<2||v.length<2)return-1;se=2,ce/=2,We/=2,y/=2}function nt(ts,ns){return se===1?ts[ns]:ts.readUInt16BE(ns*se)}o(nt,"read");var rt;if(V){var yt=-1;for(rt=y;rt<ce;rt++)if(nt(A,rt)===nt(v,yt===-1?0:rt-yt)){if(yt===-1&&(yt=rt),rt-yt+1===We)return yt*se}else yt!==-1&&(rt-=rt-yt),yt=-1}else for(y+We>ce&&(y=ce-We),rt=y;rt>=0;rt--){for(var gt=!0,Ft=0;Ft<We;Ft++)if(nt(A,rt+Ft)!==nt(v,Ft)){gt=!1;break}if(gt)return rt}return-1}o(B,"arrayIndexOf"),u.prototype.includes=o(function(v,y,C){return this.indexOf(v,y,C)!==-1},"includes"),u.prototype.indexOf=o(function(v,y,C){return D(this,v,y,C,!0)},"indexOf"),u.prototype.lastIndexOf=o(function(v,y,C){return D(this,v,y,C,!1)},"lastIndexOf");function z(A,v,y,C){y=Number(y)||0;var V=A.length-y;C?(C=Number(C),C>V&&(C=V)):C=V;var se=v.length;if(se%2!==0)throw new TypeError("Invalid hex string");C>se/2&&(C=se/2);for(var ce=0;ce<C;++ce){var We=parseInt(v.substr(ce*2,2),16);if(isNaN(We))return ce;A[y+ce]=We}return ce}o(z,"hexWrite");function j(A,v,y,C){return Ie(W(v,A.length-y),A,y,C)}o(j,"utf8Write");function Y(A,v,y,C){return Ie(ne(v),A,y,C)}o(Y,"asciiWrite");function q(A,v,y,C){return Y(A,v,y,C)}o(q,"latin1Write");function P(A,v,y,C){return Ie(we(v),A,y,C)}o(P,"base64Write");function Z(A,v,y,C){return Ie(_e(v,A.length-y),A,y,C)}o(Z,"ucs2Write"),u.prototype.write=o(function(v,y,C,V){if(y===void 0)V="utf8",C=this.length,y=0;else if(C===void 0&&typeof y=="string")V=y,C=this.length,y=0;else if(isFinite(y))y=y|0,isFinite(C)?(C=C|0,V===void 0&&(V="utf8")):(V=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var se=this.length-y;if((C===void 0||C>se)&&(C=se),v.length>0&&(C<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");for(var ce=!1;;)switch(V){case"hex":return z(this,v,y,C);case"utf8":case"utf-8":return j(this,v,y,C);case"ascii":return Y(this,v,y,C);case"latin1":case"binary":return q(this,v,y,C);case"base64":return P(this,v,y,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,v,y,C);default:if(ce)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),ce=!0}},"write"),u.prototype.toJSON=o(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function oe(A,v,y){return v===0&&y===A.length?e.fromByteArray(A):e.fromByteArray(A.slice(v,y))}o(oe,"base64Slice");function S(A,v,y){y=Math.min(A.length,y);for(var C=[],V=v;V<y;){var se=A[V],ce=null,We=se>239?4:se>223?3:se>191?2:1;if(V+We<=y){var nt,rt,yt,gt;switch(We){case 1:se<128&&(ce=se);break;case 2:nt=A[V+1],(nt&192)===128&&(gt=(se&31)<<6|nt&63,gt>127&&(ce=gt));break;case 3:nt=A[V+1],rt=A[V+2],(nt&192)===128&&(rt&192)===128&&(gt=(se&15)<<12|(nt&63)<<6|rt&63,gt>2047&&(gt<55296||gt>57343)&&(ce=gt));break;case 4:nt=A[V+1],rt=A[V+2],yt=A[V+3],(nt&192)===128&&(rt&192)===128&&(yt&192)===128&&(gt=(se&15)<<18|(nt&63)<<12|(rt&63)<<6|yt&63,gt>65535&&gt<1114112&&(ce=gt))}}ce===null?(ce=65533,We=1):ce>65535&&(ce-=65536,C.push(ce>>>10&1023|55296),ce=56320|ce&1023),C.push(ce),V+=We}return U(C)}o(S,"utf8Slice");var K=4096;function U(A){var v=A.length;if(v<=K)return String.fromCharCode.apply(String,A);for(var y="",C=0;C<v;)y+=String.fromCharCode.apply(String,A.slice(C,C+=K));return y}o(U,"decodeCodePointsArray");function Oe(A,v,y){var C="";y=Math.min(A.length,y);for(var V=v;V<y;++V)C+=String.fromCharCode(A[V]&127);return C}o(Oe,"asciiSlice");function Ye(A,v,y){var C="";y=Math.min(A.length,y);for(var V=v;V<y;++V)C+=String.fromCharCode(A[V]);return C}o(Ye,"latin1Slice");function Xe(A,v,y){var C=A.length;(!v||v<0)&&(v=0),(!y||y<0||y>C)&&(y=C);for(var V="",se=v;se<y;++se)V+=J(A[se]);return V}o(Xe,"hexSlice");function de(A,v,y){for(var C=A.slice(v,y),V="",se=0;se<C.length;se+=2)V+=String.fromCharCode(C[se]+C[se+1]*256);return V}o(de,"utf16leSlice"),u.prototype.slice=o(function(v,y){var C=this.length;v=~~v,y=y===void 0?C:~~y,v<0?(v+=C,v<0&&(v=0)):v>C&&(v=C),y<0?(y+=C,y<0&&(y=0)):y>C&&(y=C),y<v&&(y=v);var V;if(u.TYPED_ARRAY_SUPPORT)V=this.subarray(v,y),V.__proto__=u.prototype;else{var se=y-v;V=new u(se,void 0);for(var ce=0;ce<se;++ce)V[ce]=this[ce+v]}return V},"slice");function N(A,v,y){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+v>y)throw new RangeError("Trying to access beyond buffer length")}o(N,"checkOffset"),u.prototype.readUIntLE=o(function(v,y,C){v=v|0,y=y|0,C||N(v,y,this.length);for(var V=this[v],se=1,ce=0;++ce<y&&(se*=256);)V+=this[v+ce]*se;return V},"readUIntLE"),u.prototype.readUIntBE=o(function(v,y,C){v=v|0,y=y|0,C||N(v,y,this.length);for(var V=this[v+--y],se=1;y>0&&(se*=256);)V+=this[v+--y]*se;return V},"readUIntBE"),u.prototype.readUInt8=o(function(v,y){return y||N(v,1,this.length),this[v]},"readUInt8"),u.prototype.readUInt16LE=o(function(v,y){return y||N(v,2,this.length),this[v]|this[v+1]<<8},"readUInt16LE"),u.prototype.readUInt16BE=o(function(v,y){return y||N(v,2,this.length),this[v]<<8|this[v+1]},"readUInt16BE"),u.prototype.readUInt32LE=o(function(v,y){return y||N(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},"readUInt32LE"),u.prototype.readUInt32BE=o(function(v,y){return y||N(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},"readUInt32BE"),u.prototype.readIntLE=o(function(v,y,C){v=v|0,y=y|0,C||N(v,y,this.length);for(var V=this[v],se=1,ce=0;++ce<y&&(se*=256);)V+=this[v+ce]*se;return se*=128,V>=se&&(V-=Math.pow(2,8*y)),V},"readIntLE"),u.prototype.readIntBE=o(function(v,y,C){v=v|0,y=y|0,C||N(v,y,this.length);for(var V=y,se=1,ce=this[v+--V];V>0&&(se*=256);)ce+=this[v+--V]*se;return se*=128,ce>=se&&(ce-=Math.pow(2,8*y)),ce},"readIntBE"),u.prototype.readInt8=o(function(v,y){return y||N(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},"readInt8"),u.prototype.readInt16LE=o(function(v,y){y||N(v,2,this.length);var C=this[v]|this[v+1]<<8;return C&32768?C|4294901760:C},"readInt16LE"),u.prototype.readInt16BE=o(function(v,y){y||N(v,2,this.length);var C=this[v+1]|this[v]<<8;return C&32768?C|4294901760:C},"readInt16BE"),u.prototype.readInt32LE=o(function(v,y){return y||N(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},"readInt32LE"),u.prototype.readInt32BE=o(function(v,y){return y||N(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},"readInt32BE"),u.prototype.readFloatLE=o(function(v,y){return y||N(v,4,this.length),t.read(this,v,!0,23,4)},"readFloatLE"),u.prototype.readFloatBE=o(function(v,y){return y||N(v,4,this.length),t.read(this,v,!1,23,4)},"readFloatBE"),u.prototype.readDoubleLE=o(function(v,y){return y||N(v,8,this.length),t.read(this,v,!0,52,8)},"readDoubleLE"),u.prototype.readDoubleBE=o(function(v,y){return y||N(v,8,this.length),t.read(this,v,!1,52,8)},"readDoubleBE");function L(A,v,y,C,V,se){if(!u.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>V||v<se)throw new RangeError('"value" argument is out of bounds');if(y+C>A.length)throw new RangeError("Index out of range")}o(L,"checkInt"),u.prototype.writeUIntLE=o(function(v,y,C,V){if(v=+v,y=y|0,C=C|0,!V){var se=Math.pow(2,8*C)-1;L(this,v,y,C,se,0)}var ce=1,We=0;for(this[y]=v&255;++We<C&&(ce*=256);)this[y+We]=v/ce&255;return y+C},"writeUIntLE"),u.prototype.writeUIntBE=o(function(v,y,C,V){if(v=+v,y=y|0,C=C|0,!V){var se=Math.pow(2,8*C)-1;L(this,v,y,C,se,0)}var ce=C-1,We=1;for(this[y+ce]=v&255;--ce>=0&&(We*=256);)this[y+ce]=v/We&255;return y+C},"writeUIntBE"),u.prototype.writeUInt8=o(function(v,y,C){return v=+v,y=y|0,C||L(this,v,y,1,255,0),u.TYPED_ARRAY_SUPPORT||(v=Math.floor(v)),this[y]=v&255,y+1},"writeUInt8");function x(A,v,y,C){v<0&&(v=65535+v+1);for(var V=0,se=Math.min(A.length-y,2);V<se;++V)A[y+V]=(v&255<<8*(C?V:1-V))>>>(C?V:1-V)*8}o(x,"objectWriteUInt16"),u.prototype.writeUInt16LE=o(function(v,y,C){return v=+v,y=y|0,C||L(this,v,y,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[y]=v&255,this[y+1]=v>>>8):x(this,v,y,!0),y+2},"writeUInt16LE"),u.prototype.writeUInt16BE=o(function(v,y,C){return v=+v,y=y|0,C||L(this,v,y,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[y]=v>>>8,this[y+1]=v&255):x(this,v,y,!1),y+2},"writeUInt16BE");function ve(A,v,y,C){v<0&&(v=4294967295+v+1);for(var V=0,se=Math.min(A.length-y,4);V<se;++V)A[y+V]=v>>>(C?V:3-V)*8&255}o(ve,"objectWriteUInt32"),u.prototype.writeUInt32LE=o(function(v,y,C){return v=+v,y=y|0,C||L(this,v,y,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[y+3]=v>>>24,this[y+2]=v>>>16,this[y+1]=v>>>8,this[y]=v&255):ve(this,v,y,!0),y+4},"writeUInt32LE"),u.prototype.writeUInt32BE=o(function(v,y,C){return v=+v,y=y|0,C||L(this,v,y,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[y]=v>>>24,this[y+1]=v>>>16,this[y+2]=v>>>8,this[y+3]=v&255):ve(this,v,y,!1),y+4},"writeUInt32BE"),u.prototype.writeIntLE=o(function(v,y,C,V){if(v=+v,y=y|0,!V){var se=Math.pow(2,8*C-1);L(this,v,y,C,se-1,-se)}var ce=0,We=1,nt=0;for(this[y]=v&255;++ce<C&&(We*=256);)v<0&&nt===0&&this[y+ce-1]!==0&&(nt=1),this[y+ce]=(v/We>>0)-nt&255;return y+C},"writeIntLE"),u.prototype.writeIntBE=o(function(v,y,C,V){if(v=+v,y=y|0,!V){var se=Math.pow(2,8*C-1);L(this,v,y,C,se-1,-se)}var ce=C-1,We=1,nt=0;for(this[y+ce]=v&255;--ce>=0&&(We*=256);)v<0&&nt===0&&this[y+ce+1]!==0&&(nt=1),this[y+ce]=(v/We>>0)-nt&255;return y+C},"writeIntBE"),u.prototype.writeInt8=o(function(v,y,C){return v=+v,y=y|0,C||L(this,v,y,1,127,-128),u.TYPED_ARRAY_SUPPORT||(v=Math.floor(v)),v<0&&(v=255+v+1),this[y]=v&255,y+1},"writeInt8"),u.prototype.writeInt16LE=o(function(v,y,C){return v=+v,y=y|0,C||L(this,v,y,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[y]=v&255,this[y+1]=v>>>8):x(this,v,y,!0),y+2},"writeInt16LE"),u.prototype.writeInt16BE=o(function(v,y,C){return v=+v,y=y|0,C||L(this,v,y,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[y]=v>>>8,this[y+1]=v&255):x(this,v,y,!1),y+2},"writeInt16BE"),u.prototype.writeInt32LE=o(function(v,y,C){return v=+v,y=y|0,C||L(this,v,y,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[y]=v&255,this[y+1]=v>>>8,this[y+2]=v>>>16,this[y+3]=v>>>24):ve(this,v,y,!0),y+4},"writeInt32LE"),u.prototype.writeInt32BE=o(function(v,y,C){return v=+v,y=y|0,C||L(this,v,y,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),u.TYPED_ARRAY_SUPPORT?(this[y]=v>>>24,this[y+1]=v>>>16,this[y+2]=v>>>8,this[y+3]=v&255):ve(this,v,y,!1),y+4},"writeInt32BE");function Ee(A,v,y,C,V,se){if(y+C>A.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}o(Ee,"checkIEEE754");function Me(A,v,y,C,V){return V||Ee(A,v,y,4),t.write(A,v,y,C,23,4),y+4}o(Me,"writeFloat"),u.prototype.writeFloatLE=o(function(v,y,C){return Me(this,v,y,!0,C)},"writeFloatLE"),u.prototype.writeFloatBE=o(function(v,y,C){return Me(this,v,y,!1,C)},"writeFloatBE");function tt(A,v,y,C,V){return V||Ee(A,v,y,8),t.write(A,v,y,C,52,8),y+8}o(tt,"writeDouble"),u.prototype.writeDoubleLE=o(function(v,y,C){return tt(this,v,y,!0,C)},"writeDoubleLE"),u.prototype.writeDoubleBE=o(function(v,y,C){return tt(this,v,y,!1,C)},"writeDoubleBE"),u.prototype.copy=o(function(v,y,C,V){if(C||(C=0),!V&&V!==0&&(V=this.length),y>=v.length&&(y=v.length),y||(y=0),V>0&&V<C&&(V=C),V===C||v.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("sourceStart out of bounds");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),v.length-y<V-C&&(V=v.length-y+C);var se=V-C,ce;if(this===v&&C<y&&y<V)for(ce=se-1;ce>=0;--ce)v[ce+y]=this[ce+C];else if(se<1e3||!u.TYPED_ARRAY_SUPPORT)for(ce=0;ce<se;++ce)v[ce+y]=this[ce+C];else Uint8Array.prototype.set.call(v,this.subarray(C,C+se),y);return se},"copy"),u.prototype.fill=o(function(v,y,C,V){if(typeof v=="string"){if(typeof y=="string"?(V=y,y=0,C=this.length):typeof C=="string"&&(V=C,C=this.length),v.length===1){var se=v.charCodeAt(0);se<256&&(v=se)}if(V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!u.isEncoding(V))throw new TypeError("Unknown encoding: "+V)}else typeof v=="number"&&(v=v&255);if(y<0||this.length<y||this.length<C)throw new RangeError("Out of range index");if(C<=y)return this;y=y>>>0,C=C===void 0?this.length:C>>>0,v||(v=0);var ce;if(typeof v=="number")for(ce=y;ce<C;++ce)this[ce]=v;else{var We=u.isBuffer(v)?v:W(new u(v,V).toString()),nt=We.length;for(ce=0;ce<C-y;++ce)this[ce+y]=We[ce%nt]}return this},"fill");var Le=/[^+\/0-9A-Za-z-_]/g;function fe(A){if(A=$(A).replace(Le,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}o(fe,"base64clean");function $(A){return A.trim?A.trim():A.replace(/^\s+|\s+$/g,"")}o($,"stringtrim");function J(A){return A<16?"0"+A.toString(16):A.toString(16)}o(J,"toHex");function W(A,v){v=v||1/0;for(var y,C=A.length,V=null,se=[],ce=0;ce<C;++ce){if(y=A.charCodeAt(ce),y>55295&&y<57344){if(!V){if(y>56319){(v-=3)>-1&&se.push(239,191,189);continue}else if(ce+1===C){(v-=3)>-1&&se.push(239,191,189);continue}V=y;continue}if(y<56320){(v-=3)>-1&&se.push(239,191,189),V=y;continue}y=(V-55296<<10|y-56320)+65536}else V&&(v-=3)>-1&&se.push(239,191,189);if(V=null,y<128){if((v-=1)<0)break;se.push(y)}else if(y<2048){if((v-=2)<0)break;se.push(y>>6|192,y&63|128)}else if(y<65536){if((v-=3)<0)break;se.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((v-=4)<0)break;se.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return se}o(W,"utf8ToBytes");function ne(A){for(var v=[],y=0;y<A.length;++y)v.push(A.charCodeAt(y)&255);return v}o(ne,"asciiToBytes");function _e(A,v){for(var y,C,V,se=[],ce=0;ce<A.length&&!((v-=2)<0);++ce)y=A.charCodeAt(ce),C=y>>8,V=y%256,se.push(V),se.push(C);return se}o(_e,"utf16leToBytes");function we(A){return e.toByteArray(fe(A))}o(we,"base64ToBytes");function Ie(A,v,y,C){for(var V=0;V<C&&!(V+y>=v.length||V>=A.length);++V)v[V+y]=A[V];return V}o(Ie,"blitBuffer");function xe(A){return A!==A}o(xe,"isnan")})(_t);var gr;typeof window!="undefined"&&window.crypto&&(gr=window.crypto);!gr&&typeof window!="undefined"&&window.msCrypto&&(gr=window.msCrypto);!gr&&typeof global!="undefined"&&global.crypto&&(gr=global.crypto);if(!gr&&typeof as=="function")try{gr=as("crypto")}catch(n){}function MQ(){if(gr){if(typeof gr.getRandomValues=="function")try{return gr.getRandomValues(new Uint32Array(1))[0]}catch(n){}if(typeof gr.randomBytes=="function")try{return gr.randomBytes(4).readInt32LE()}catch(n){}}throw new Error("Native crypto module could not be used to get secure random number.")}o(MQ,"cryptoSecureRandomInt");function kQ(n){for(var e=n.words,t=n.sigBytes,r=[],i=0;i<t;i++){var s=e[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((s&15).toString(16))}return r.join("")}o(kQ,"hexStringify");var FQ=(function(){function n(t,r){t=this.words=t||[],r!=null?this.sigBytes=r:this.sigBytes=t.length*4}o(n,"WordArray");var e=n.prototype;return e.random=o(function(r){for(var i=[],s=0;s<r;s+=4)i.push(MQ());return new n(i,r)},"random"),e.toString=o(function(){return kQ(this)},"toString"),n})();function Se(n,e){n!=null&&this.fromString(n,e)}o(Se,"BigInteger");function Dn(){return new Se(null)}o(Dn,"nbi");var Cs,$Q=0xdeadbeefcafe,YN=($Q&16777215)==15715070;function BQ(n,e,t,r,i,s){for(;--s>=0;){var a=e*this[n++]+t[r]+i;i=Math.floor(a/67108864),t[r++]=a&67108863}return i}o(BQ,"am1");function VQ(n,e,t,r,i,s){for(var a=e&32767,u=e>>15;--s>=0;){var l=this[n]&32767,c=this[n++]>>15,d=u*l+c*a;l=a*l+((d&32767)<<15)+t[r]+(i&1073741823),i=(l>>>30)+(d>>>15)+u*c+(i>>>30),t[r++]=l&1073741823}return i}o(VQ,"am2");function HQ(n,e,t,r,i,s){for(var a=e&16383,u=e>>14;--s>=0;){var l=this[n]&16383,c=this[n++]>>14,d=u*l+c*a;l=a*l+((d&16383)<<14)+t[r]+i,i=(l>>28)+(d>>14)+u*c,t[r++]=l&268435455}return i}o(HQ,"am3");var XN=typeof navigator!="undefined";XN&&YN&&navigator.appName=="Microsoft Internet Explorer"?(Se.prototype.am=VQ,Cs=30):XN&&YN&&navigator.appName!="Netscape"?(Se.prototype.am=BQ,Cs=26):(Se.prototype.am=HQ,Cs=28);Se.prototype.DB=Cs;Se.prototype.DM=(1<<Cs)-1;Se.prototype.DV=1<<Cs;var jT=52;Se.prototype.FV=Math.pow(2,jT);Se.prototype.F1=jT-Cs;Se.prototype.F2=2*Cs-jT;var jQ="0123456789abcdefghijklmnopqrstuvwxyz",Pp=new Array,wu,mr;wu=48;for(mr=0;mr<=9;++mr)Pp[wu++]=mr;wu=97;for(mr=10;mr<36;++mr)Pp[wu++]=mr;wu=65;for(mr=10;mr<36;++mr)Pp[wu++]=mr;function JN(n){return jQ.charAt(n)}o(JN,"int2char");function WQ(n,e){var t=Pp[n.charCodeAt(e)];return t==null?-1:t}o(WQ,"intAt");function GQ(n){for(var e=this.t-1;e>=0;--e)n[e]=this[e];n.t=this.t,n.s=this.s}o(GQ,"bnpCopyTo");function zQ(n){this.t=1,this.s=n<0?-1:0,n>0?this[0]=n:n<-1?this[0]=n+this.DV:this.t=0}o(zQ,"bnpFromInt");function WT(n){var e=Dn();return e.fromInt(n),e}o(WT,"nbv");function qQ(n,e){var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var r=n.length,i=!1,s=0;--r>=0;){var a=WQ(n,r);if(a<0){n.charAt(r)=="-"&&(i=!0);continue}i=!1,s==0?this[this.t++]=a:s+t>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,s+=t,s>=this.DB&&(s-=this.DB)}this.clamp(),i&&Se.ZERO.subTo(this,this)}o(qQ,"bnpFromString");function KQ(){for(var n=this.s&this.DM;this.t>0&&this[this.t-1]==n;)--this.t}o(KQ,"bnpClamp");function YQ(n){if(this.s<0)return"-"+this.negate().toString(n);var e;if(n==16)e=4;else if(n==8)e=3;else if(n==2)e=1;else if(n==32)e=5;else if(n==4)e=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");var t=(1<<e)-1,r,i=!1,s="",a=this.t,u=this.DB-a*this.DB%e;if(a-- >0)for(u<this.DB&&(r=this[a]>>u)>0&&(i=!0,s=JN(r));a>=0;)u<e?(r=(this[a]&(1<<u)-1)<<e-u,r|=this[--a]>>(u+=this.DB-e)):(r=this[a]>>(u-=e)&t,u<=0&&(u+=this.DB,--a)),r>0&&(i=!0),i&&(s+=JN(r));return i?s:"0"}o(YQ,"bnToString");function XQ(){var n=Dn();return Se.ZERO.subTo(this,n),n}o(XQ,"bnNegate");function JQ(){return this.s<0?this.negate():this}o(JQ,"bnAbs");function ZQ(n){var e=this.s-n.s;if(e!=0)return e;var t=this.t;if(e=t-n.t,e!=0)return this.s<0?-e:e;for(;--t>=0;)if((e=this[t]-n[t])!=0)return e;return 0}o(ZQ,"bnCompareTo");function GT(n){var e=1,t;return(t=n>>>16)!=0&&(n=t,e+=16),(t=n>>8)!=0&&(n=t,e+=8),(t=n>>4)!=0&&(n=t,e+=4),(t=n>>2)!=0&&(n=t,e+=2),(t=n>>1)!=0&&(n=t,e+=1),e}o(GT,"nbits");function QQ(){return this.t<=0?0:this.DB*(this.t-1)+GT(this[this.t-1]^this.s&this.DM)}o(QQ,"bnBitLength");function eee(n,e){var t;for(t=this.t-1;t>=0;--t)e[t+n]=this[t];for(t=n-1;t>=0;--t)e[t]=0;e.t=this.t+n,e.s=this.s}o(eee,"bnpDLShiftTo");function tee(n,e){for(var t=n;t<this.t;++t)e[t-n]=this[t];e.t=Math.max(this.t-n,0),e.s=this.s}o(tee,"bnpDRShiftTo");function nee(n,e){var t=n%this.DB,r=this.DB-t,i=(1<<r)-1,s=Math.floor(n/this.DB),a=this.s<<t&this.DM,u;for(u=this.t-1;u>=0;--u)e[u+s+1]=this[u]>>r|a,a=(this[u]&i)<<t;for(u=s-1;u>=0;--u)e[u]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}o(nee,"bnpLShiftTo");function ree(n,e){e.s=this.s;var t=Math.floor(n/this.DB);if(t>=this.t){e.t=0;return}var r=n%this.DB,i=this.DB-r,s=(1<<r)-1;e[0]=this[t]>>r;for(var a=t+1;a<this.t;++a)e[a-t-1]|=(this[a]&s)<<i,e[a-t]=this[a]>>r;r>0&&(e[this.t-t-1]|=(this.s&s)<<i),e.t=this.t-t,e.clamp()}o(ree,"bnpRShiftTo");function iee(n,e){for(var t=0,r=0,i=Math.min(n.t,this.t);t<i;)r+=this[t]-n[t],e[t++]=r&this.DM,r>>=this.DB;if(n.t<this.t){for(r-=n.s;t<this.t;)r+=this[t],e[t++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;t<n.t;)r-=n[t],e[t++]=r&this.DM,r>>=this.DB;r-=n.s}e.s=r<0?-1:0,r<-1?e[t++]=this.DV+r:r>0&&(e[t++]=r),e.t=t,e.clamp()}o(iee,"bnpSubTo");function see(n,e){var t=this.abs(),r=n.abs(),i=t.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+t.t]=t.am(0,r[i],e,i,0,t.t);e.s=0,e.clamp(),this.s!=n.s&&Se.ZERO.subTo(e,e)}o(see,"bnpMultiplyTo");function oee(n){for(var e=this.abs(),t=n.t=2*e.t;--t>=0;)n[t]=0;for(t=0;t<e.t-1;++t){var r=e.am(t,e[t],n,2*t,0,1);(n[t+e.t]+=e.am(t+1,2*e[t],n,2*t+1,r,e.t-t-1))>=e.DV&&(n[t+e.t]-=e.DV,n[t+e.t+1]=1)}n.t>0&&(n[n.t-1]+=e.am(t,e[t],n,2*t,0,1)),n.s=0,n.clamp()}o(oee,"bnpSquareTo");function aee(n,e,t){var r=n.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){e!=null&&e.fromInt(0),t!=null&&this.copyTo(t);return}t==null&&(t=Dn());var s=Dn(),a=this.s,u=n.s,l=this.DB-GT(r[r.t-1]);l>0?(r.lShiftTo(l,s),i.lShiftTo(l,t)):(r.copyTo(s),i.copyTo(t));var c=s.t,d=s[c-1];if(d!=0){var f=d*(1<<this.F1)+(c>1?s[c-2]>>this.F2:0),h=this.FV/f,g=(1<<this.F1)/f,p=1<<this.F2,m=t.t,w=m-c,E=e==null?Dn():e;for(s.dlShiftTo(w,E),t.compareTo(E)>=0&&(t[t.t++]=1,t.subTo(E,t)),Se.ONE.dlShiftTo(c,E),E.subTo(s,s);s.t<c;)s[s.t++]=0;for(;--w>=0;){var _=t[--m]==d?this.DM:Math.floor(t[m]*h+(t[m-1]+p)*g);if((t[m]+=s.am(0,_,t,w,0,c))<_)for(s.dlShiftTo(w,E),t.subTo(E,t);t[m]<--_;)t.subTo(E,t)}e!=null&&(t.drShiftTo(c,e),a!=u&&Se.ZERO.subTo(e,e)),t.t=c,t.clamp(),l>0&&t.rShiftTo(l,t),a<0&&Se.ZERO.subTo(t,t)}}}o(aee,"bnpDivRemTo");function uee(n){var e=Dn();return this.abs().divRemTo(n,null,e),this.s<0&&e.compareTo(Se.ZERO)>0&&n.subTo(e,e),e}o(uee,"bnMod");function cee(){if(this.t<1)return 0;var n=this[0];if((n&1)==0)return 0;var e=n&3;return e=e*(2-(n&15)*e)&15,e=e*(2-(n&255)*e)&255,e=e*(2-((n&65535)*e&65535))&65535,e=e*(2-n*e%this.DV)%this.DV,e>0?this.DV-e:-e}o(cee,"bnpInvDigit");function lee(n){return this.compareTo(n)==0}o(lee,"bnEquals");function dee(n,e){for(var t=0,r=0,i=Math.min(n.t,this.t);t<i;)r+=this[t]+n[t],e[t++]=r&this.DM,r>>=this.DB;if(n.t<this.t){for(r+=n.s;t<this.t;)r+=this[t],e[t++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;t<n.t;)r+=n[t],e[t++]=r&this.DM,r>>=this.DB;r+=n.s}e.s=r<0?-1:0,r>0?e[t++]=r:r<-1&&(e[t++]=this.DV+r),e.t=t,e.clamp()}o(dee,"bnpAddTo");function fee(n){var e=Dn();return this.addTo(n,e),e}o(fee,"bnAdd");function hee(n){var e=Dn();return this.subTo(n,e),e}o(hee,"bnSubtract");function gee(n){var e=Dn();return this.multiplyTo(n,e),e}o(gee,"bnMultiply");function pee(n){var e=Dn();return this.divRemTo(n,e,null),e}o(pee,"bnDivide");function Eu(n){this.m=n,this.mp=n.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<n.DB-15)-1,this.mt2=2*n.t}o(Eu,"Montgomery");function mee(n){var e=Dn();return n.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),n.s<0&&e.compareTo(Se.ZERO)>0&&this.m.subTo(e,e),e}o(mee,"montConvert");function vee(n){var e=Dn();return n.copyTo(e),this.reduce(e),e}o(vee,"montRevert");function yee(n){for(;n.t<=this.mt2;)n[n.t++]=0;for(var e=0;e<this.m.t;++e){var t=n[e]&32767,r=t*this.mpl+((t*this.mph+(n[e]>>15)*this.mpl&this.um)<<15)&n.DM;for(t=e+this.m.t,n[t]+=this.m.am(0,r,n,e,0,this.m.t);n[t]>=n.DV;)n[t]-=n.DV,n[++t]++}n.clamp(),n.drShiftTo(this.m.t,n),n.compareTo(this.m)>=0&&n.subTo(this.m,n)}o(yee,"montReduce");function _ee(n,e){n.squareTo(e),this.reduce(e)}o(_ee,"montSqrTo");function wee(n,e,t){n.multiplyTo(e,t),this.reduce(t)}o(wee,"montMulTo");Eu.prototype.convert=mee;Eu.prototype.revert=vee;Eu.prototype.reduce=yee;Eu.prototype.mulTo=wee;Eu.prototype.sqrTo=_ee;function Eee(n,e,t){var r=n.bitLength(),i,s=WT(1),a=new Eu(e);if(r<=0)return s;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6;var u=new Array,l=3,c=i-1,d=(1<<i)-1;if(u[1]=a.convert(this),i>1){var f=Dn();for(a.sqrTo(u[1],f);l<=d;)u[l]=Dn(),a.mulTo(f,u[l-2],u[l]),l+=2}var h=n.t-1,g,p=!0,m=Dn(),w;for(r=GT(n[h])-1;h>=0;){for(r>=c?g=n[h]>>r-c&d:(g=(n[h]&(1<<r+1)-1)<<c-r,h>0&&(g|=n[h-1]>>this.DB+r-c)),l=i;(g&1)==0;)g>>=1,--l;if((r-=l)<0&&(r+=this.DB,--h),p)u[g].copyTo(s),p=!1;else{for(;l>1;)a.sqrTo(s,m),a.sqrTo(m,s),l-=2;l>0?a.sqrTo(s,m):(w=s,s=m,m=w),a.mulTo(m,u[g],s)}for(;h>=0&&(n[h]&1<<r)==0;)a.sqrTo(s,m),w=s,s=m,m=w,--r<0&&(r=this.DB-1,--h)}var E=a.revert(s);return t(null,E),E}o(Eee,"bnModPow");Se.prototype.copyTo=GQ;Se.prototype.fromInt=zQ;Se.prototype.fromString=qQ;Se.prototype.clamp=KQ;Se.prototype.dlShiftTo=eee;Se.prototype.drShiftTo=tee;Se.prototype.lShiftTo=nee;Se.prototype.rShiftTo=ree;Se.prototype.subTo=iee;Se.prototype.multiplyTo=see;Se.prototype.squareTo=oee;Se.prototype.divRemTo=aee;Se.prototype.invDigit=cee;Se.prototype.addTo=dee;Se.prototype.toString=YQ;Se.prototype.negate=XQ;Se.prototype.abs=JQ;Se.prototype.compareTo=ZQ;Se.prototype.bitLength=QQ;Se.prototype.mod=uee;Se.prototype.equals=lee;Se.prototype.add=fee;Se.prototype.subtract=hee;Se.prototype.multiply=gee;Se.prototype.divide=pee;Se.prototype.modPow=Eee;Se.ZERO=WT(0);Se.ONE=WT(1);function XE(n){return _t.Buffer.from(new FQ().random(n).toString(),"hex")}o(XE,"randomBytes");var Tee=/^[89a-f]/i,bee="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",See="userAttributes.",nu=(function(){function n(t){this.N=new Se(bee,16),this.g=new Se("2",16),this.k=new Se(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=_t.Buffer.from("Caldera Derived Key","utf8"),this.poolName=t}o(n,"AuthenticationHelper");var e=n.prototype;return e.getSmallAValue=o(function(){return this.smallAValue},"getSmallAValue"),e.getLargeAValue=o(function(r){var i=this;this.largeAValue?r(null,this.largeAValue):this.calculateA(this.smallAValue,function(s,a){s&&r(s,null),i.largeAValue=a,r(null,i.largeAValue)})},"getLargeAValue"),e.generateRandomSmallA=o(function(){var r=XE(128).toString("hex"),i=new Se(r,16);return i},"generateRandomSmallA"),e.generateRandomString=o(function(){return XE(40).toString("base64")},"generateRandomString"),e.getRandomPassword=o(function(){return this.randomPassword},"getRandomPassword"),e.getSaltDevices=o(function(){return this.SaltToHashDevices},"getSaltDevices"),e.getVerifierDevices=o(function(){return this.verifierDevices},"getVerifierDevices"),e.generateHashDevice=o(function(r,i,s){var a=this;this.randomPassword=this.generateRandomString();var u=""+r+i+":"+this.randomPassword,l=this.hash(u),c=XE(16).toString("hex");this.SaltToHashDevices=this.padHex(new Se(c,16)),this.g.modPow(new Se(this.hexHash(this.SaltToHashDevices+l),16),this.N,function(d,f){d&&s(d,null),a.verifierDevices=a.padHex(f),s(null,null)})},"generateHashDevice"),e.calculateA=o(function(r,i){var s=this;this.g.modPow(r,this.N,function(a,u){a&&i(a,null),u.mod(s.N).equals(Se.ZERO)&&i(new Error("Illegal paramater. A mod N cannot be 0."),null),i(null,u)})},"calculateA"),e.calculateU=o(function(r,i){this.UHexHash=this.hexHash(this.padHex(r)+this.padHex(i));var s=new Se(this.UHexHash,16);return s},"calculateU"),e.hash=o(function(r){var i=new No.Sha256;i.update(r);var s=i.digestSync(),a=_t.Buffer.from(s).toString("hex");return new Array(64-a.length).join("0")+a},"hash"),e.hexHash=o(function(r){return this.hash(_t.Buffer.from(r,"hex"))},"hexHash"),e.computehkdf=o(function(r,i){var s=_t.Buffer.concat([this.infoBits,_t.Buffer.from("","utf8")]),a=new No.Sha256(i);a.update(r);var u=a.digestSync(),l=new No.Sha256(u);l.update(s);var c=l.digestSync(),d=c,f=d.slice(0,16);return f},"computehkdf"),e.getPasswordAuthenticationKey=o(function(r,i,s,a,u){var l=this;if(s.mod(this.N).equals(Se.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,s),this.UValue.equals(Se.ZERO))throw new Error("U cannot be zero.");var c=""+this.poolName+r+":"+i,d=this.hash(c),f=new Se(this.hexHash(this.padHex(a)+d),16);this.calculateS(f,s,function(h,g){h&&u(h,null);var p=l.computehkdf(_t.Buffer.from(l.padHex(g),"hex"),_t.Buffer.from(l.padHex(l.UValue),"hex"));u(null,p)})},"getPasswordAuthenticationKey"),e.calculateS=o(function(r,i,s){var a=this;this.g.modPow(r,this.N,function(u,l){u&&s(u,null);var c=i.subtract(a.k.multiply(l));c.modPow(a.smallAValue.add(a.UValue.multiply(r)),a.N,function(d,f){d&&s(d,null),s(null,f.mod(a.N))})})},"calculateS"),e.getNewPasswordRequiredChallengeUserAttributePrefix=o(function(){return See},"getNewPasswordRequiredChallengeUserAttributePrefix"),e.padHex=o(function(r){if(!(r instanceof Se))throw new Error("Not a BigInteger");var i=r.compareTo(Se.ZERO)<0,s=r.abs().toString(16);if(s=s.length%2!==0?"0"+s:s,s=Tee.test(s)?"00"+s:s,i){var a=s.split("").map(function(l){var c=~parseInt(l,16)&15;return"0123456789ABCDEF".charAt(c)}).join(""),u=new Se(a,16).add(Se.ONE);s=u.toString(16),s.toUpperCase().startsWith("FF8")&&(s=s.substring(2))}return s},"padHex"),n})();var sL=(function(){function n(t){this.jwtToken=t||"",this.payload=this.decodePayload()}o(n,"CognitoJwtToken");var e=n.prototype;return e.getJwtToken=o(function(){return this.jwtToken},"getJwtToken"),e.getExpiration=o(function(){return this.payload.exp},"getExpiration"),e.getIssuedAt=o(function(){return this.payload.iat},"getIssuedAt"),e.decodePayload=o(function(){var r=this.jwtToken.split(".")[1];try{return JSON.parse(_t.Buffer.from(r,"base64").toString("utf8"))}catch(i){return{}}},"decodePayload"),n})();function Aee(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,oT(n,e)}o(Aee,"_inheritsLoose$2");function oT(n,e){return oT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},oT(n,e)}o(oT,"_setPrototypeOf$2");var aT=(function(n){function e(t){var r=t===void 0?{}:t,i=r.AccessToken;return n.call(this,i||"")||this}return o(e,"CognitoAccessToken"),Aee(e,n),e})(sL);function Iee(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,uT(n,e)}o(Iee,"_inheritsLoose$1");function uT(n,e){return uT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},uT(n,e)}o(uT,"_setPrototypeOf$1");var cT=(function(n){function e(t){var r=t===void 0?{}:t,i=r.IdToken;return n.call(this,i||"")||this}return o(e,"CognitoIdToken"),Iee(e,n),e})(sL);var lT=(function(){function n(t){var r=t===void 0?{}:t,i=r.RefreshToken;this.token=i||""}o(n,"CognitoRefreshToken");var e=n.prototype;return e.getToken=o(function(){return this.token},"getToken"),n})(),Cee="5.0.4";var Ree="aws-amplify/"+Cee,oL={userAgent:Ree,isReactNative:typeof navigator!="undefined"&&navigator.product==="ReactNative"},Oee=o(function(){return oL.userAgent},"getUserAgent");var dT=(function(){function n(t){var r=t===void 0?{}:t,i=r.IdToken,s=r.RefreshToken,a=r.AccessToken,u=r.ClockDrift;if(a==null||i==null)throw new Error("Id token and Access Token must be present.");this.idToken=i,this.refreshToken=s,this.accessToken=a,this.clockDrift=u===void 0?this.calculateClockDrift():u}o(n,"CognitoUserSession");var e=n.prototype;return e.getIdToken=o(function(){return this.idToken},"getIdToken"),e.getRefreshToken=o(function(){return this.refreshToken},"getRefreshToken"),e.getAccessToken=o(function(){return this.accessToken},"getAccessToken"),e.getClockDrift=o(function(){return this.clockDrift},"getClockDrift"),e.calculateClockDrift=o(function(){var r=Math.floor(new Date/1e3),i=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return r-i},"calculateClockDrift"),e.isValid=o(function(){var r=Math.floor(new Date/1e3),i=r-this.clockDrift;return i<this.accessToken.getExpiration()&&i<this.idToken.getExpiration()},"isValid"),n})();var Pee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Nee=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ZN=(function(){function n(){}o(n,"DateHelper");var e=n.prototype;return e.getNowString=o(function(){var r=new Date,i=Nee[r.getUTCDay()],s=Pee[r.getUTCMonth()],a=r.getUTCDate(),u=r.getUTCHours();u<10&&(u="0"+u);var l=r.getUTCMinutes();l<10&&(l="0"+l);var c=r.getUTCSeconds();c<10&&(c="0"+c);var d=r.getUTCFullYear(),f=i+" "+s+" "+a+" "+u+":"+l+":"+c+" UTC "+d;return f},"getNowString"),n})();var iu=(function(){function n(t){var r=t===void 0?{}:t,i=r.Name,s=r.Value;this.Name=i||"",this.Value=s||""}o(n,"CognitoUserAttribute");var e=n.prototype;return e.getValue=o(function(){return this.Value},"getValue"),e.setValue=o(function(r){return this.Value=r,this},"setValue"),e.getName=o(function(){return this.Name},"getName"),e.setName=o(function(r){return this.Name=r,this},"setName"),e.toString=o(function(){return JSON.stringify(this)},"toString"),e.toJSON=o(function(){return{Name:this.Name,Value:this.Value}},"toJSON"),n})();var Ao={},Dee=(function(){function n(){}return o(n,"MemoryStorage"),n.setItem=o(function(t,r){return Ao[t]=r,Ao[t]},"setItem"),n.getItem=o(function(t){return Object.prototype.hasOwnProperty.call(Ao,t)?Ao[t]:void 0},"getItem"),n.removeItem=o(function(t){return delete Ao[t]},"removeItem"),n.clear=o(function(){return Ao={},Ao},"clear"),n})(),aL=(function(){function n(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(t){this.storageWindow=Dee}}o(n,"StorageHelper");var e=n.prototype;return e.getStorage=o(function(){return this.storageWindow},"getStorage"),n})();var Lee=typeof navigator!="undefined",QN=Lee?oL.isReactNative?"react-native":navigator.userAgent:"nodejs",fT=(function(){function n(t){if(t==null||t.Username==null||t.Pool==null)throw new Error("Username and Pool information are required.");this.username=t.Username||"",this.pool=t.Pool,this.Session=null,this.client=t.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=t.Storage||new aL().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}o(n,"CognitoUser");var e=n.prototype;return e.setSignInUserSession=o(function(r){this.clearCachedUserData(),this.signInUserSession=r,this.cacheTokens()},"setSignInUserSession"),e.getSignInUserSession=o(function(){return this.signInUserSession},"getSignInUserSession"),e.getUsername=o(function(){return this.username},"getUsername"),e.getAuthenticationFlowType=o(function(){return this.authenticationFlowType},"getAuthenticationFlowType"),e.setAuthenticationFlowType=o(function(r){this.authenticationFlowType=r},"setAuthenticationFlowType"),e.initiateAuth=o(function(r,i){var s=this,a=r.getAuthParameters();a.USERNAME=this.username;var u=Object.keys(r.getValidationData()).length!==0?r.getValidationData():r.getClientMetadata(),l={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:a,ClientMetadata:u};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",l,function(c,d){if(c)return i.onFailure(c);var f=d.ChallengeName,h=d.ChallengeParameters;return f==="CUSTOM_CHALLENGE"?(s.Session=d.Session,i.customChallenge(h)):(s.signInUserSession=s.getCognitoUserSession(d.AuthenticationResult),s.cacheTokens(),i.onSuccess(s.signInUserSession))})},"initiateAuth"),e.authenticateUser=o(function(r,i){return this.authenticationFlowType==="USER_PASSWORD_AUTH"?this.authenticateUserPlainUsernamePassword(r,i):this.authenticationFlowType==="USER_SRP_AUTH"||this.authenticationFlowType==="CUSTOM_AUTH"?this.authenticateUserDefaultAuth(r,i):i.onFailure(new Error("Authentication flow type is invalid."))},"authenticateUser"),e.authenticateUserDefaultAuth=o(function(r,i){var s=this,a=new nu(this.pool.getUserPoolName()),u=new ZN,l,c,d={};this.deviceKey!=null&&(d.DEVICE_KEY=this.deviceKey),d.USERNAME=this.username,a.getLargeAValue(function(f,h){f&&i.onFailure(f),d.SRP_A=h.toString(16),s.authenticationFlowType==="CUSTOM_AUTH"&&(d.CHALLENGE_NAME="SRP_A");var g=Object.keys(r.getValidationData()).length!==0?r.getValidationData():r.getClientMetadata(),p={AuthFlow:s.authenticationFlowType,ClientId:s.pool.getClientId(),AuthParameters:d,ClientMetadata:g};s.getUserContextData(s.username)&&(p.UserContextData=s.getUserContextData(s.username)),s.client.request("InitiateAuth",p,function(m,w){if(m)return i.onFailure(m);var E=w.ChallengeParameters;s.username=E.USER_ID_FOR_SRP,s.userDataKey=s.keyPrefix+"."+s.username+".userData",l=new Se(E.SRP_B,16),c=new Se(E.SALT,16),s.getCachedDeviceKeyAndPassword(),a.getPasswordAuthenticationKey(s.username,r.getPassword(),l,c,function(_,T){_&&i.onFailure(_);var R=u.getNowString(),D=_t.Buffer.concat([_t.Buffer.from(s.pool.getUserPoolName(),"utf8"),_t.Buffer.from(s.username,"utf8"),_t.Buffer.from(E.SECRET_BLOCK,"base64"),_t.Buffer.from(R,"utf8")]),B=new No.Sha256(T);B.update(D);var z=B.digestSync(),j=_t.Buffer.from(z).toString("base64"),Y={};Y.USERNAME=s.username,Y.PASSWORD_CLAIM_SECRET_BLOCK=E.SECRET_BLOCK,Y.TIMESTAMP=R,Y.PASSWORD_CLAIM_SIGNATURE=j,s.deviceKey!=null&&(Y.DEVICE_KEY=s.deviceKey);var q=o(function(oe,S){return s.client.request("RespondToAuthChallenge",oe,function(K,U){return K&&K.code==="ResourceNotFoundException"&&K.message.toLowerCase().indexOf("device")!==-1?(Y.DEVICE_KEY=null,s.deviceKey=null,s.randomPassword=null,s.deviceGroupKey=null,s.clearCachedDeviceKeyAndPassword(),q(oe,S)):S(K,U)})},"respondToAuthChallenge"),P={ChallengeName:"PASSWORD_VERIFIER",ClientId:s.pool.getClientId(),ChallengeResponses:Y,Session:w.Session,ClientMetadata:g};s.getUserContextData()&&(P.UserContextData=s.getUserContextData()),q(P,function(Z,oe){return Z?i.onFailure(Z):s.authenticateUserInternal(oe,a,i)})})})})},"authenticateUserDefaultAuth"),e.authenticateUserPlainUsernamePassword=o(function(r,i){var s=this,a={};if(a.USERNAME=this.username,a.PASSWORD=r.getPassword(),!a.PASSWORD){i.onFailure(new Error("PASSWORD parameter is required"));return}var u=new nu(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(a.DEVICE_KEY=this.deviceKey);var l=Object.keys(r.getValidationData()).length!==0?r.getValidationData():r.getClientMetadata(),c={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:a,ClientMetadata:l};this.getUserContextData(this.username)&&(c.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",c,function(d,f){return d?i.onFailure(d):s.authenticateUserInternal(f,u,i)})},"authenticateUserPlainUsernamePassword"),e.authenticateUserInternal=o(function(r,i,s){var a=this,u=r.ChallengeName,l=r.ChallengeParameters;if(u==="SMS_MFA")return this.Session=r.Session,s.mfaRequired(u,l);if(u==="SELECT_MFA_TYPE")return this.Session=r.Session,s.selectMFAType(u,l);if(u==="MFA_SETUP")return this.Session=r.Session,s.mfaSetup(u,l);if(u==="SOFTWARE_TOKEN_MFA")return this.Session=r.Session,s.totpRequired(u,l);if(u==="CUSTOM_CHALLENGE")return this.Session=r.Session,s.customChallenge(l);if(u==="NEW_PASSWORD_REQUIRED"){this.Session=r.Session;var c=null,d=null,f=[],h=i.getNewPasswordRequiredChallengeUserAttributePrefix();if(l&&(c=JSON.parse(r.ChallengeParameters.userAttributes),d=JSON.parse(r.ChallengeParameters.requiredAttributes)),d)for(var g=0;g<d.length;g++)f[g]=d[g].substr(h.length);return s.newPasswordRequired(c,f)}if(u==="DEVICE_SRP_AUTH"){this.Session=r.Session,this.getDeviceResponse(s);return}this.signInUserSession=this.getCognitoUserSession(r.AuthenticationResult),this.challengeName=u,this.cacheTokens();var p=r.AuthenticationResult.NewDeviceMetadata;if(p==null)return s.onSuccess(this.signInUserSession);i.generateHashDevice(r.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,r.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(m){if(m)return s.onFailure(m);var w={Salt:_t.Buffer.from(i.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:_t.Buffer.from(i.getVerifierDevices(),"hex").toString("base64")};a.verifierDevices=w.PasswordVerifier,a.deviceGroupKey=p.DeviceGroupKey,a.randomPassword=i.getRandomPassword(),a.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:a.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:w,DeviceName:QN},function(E,_){return E?s.onFailure(E):(a.deviceKey=r.AuthenticationResult.NewDeviceMetadata.DeviceKey,a.cacheDeviceKeyAndPassword(),_.UserConfirmationNecessary===!0?s.onSuccess(a.signInUserSession,_.UserConfirmationNecessary):s.onSuccess(a.signInUserSession))})})},"authenticateUserInternal"),e.completeNewPasswordChallenge=o(function(r,i,s,a){var u=this;if(!r)return s.onFailure(new Error("New password is required."));var l=new nu(this.pool.getUserPoolName()),c=l.getNewPasswordRequiredChallengeUserAttributePrefix(),d={};i&&Object.keys(i).forEach(function(h){d[c+h]=i[h]}),d.NEW_PASSWORD=r,d.USERNAME=this.username;var f={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:d,Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",f,function(h,g){return h?s.onFailure(h):u.authenticateUserInternal(g,l,s)})},"completeNewPasswordChallenge"),e.getDeviceResponse=o(function(r,i){var s=this,a=new nu(this.deviceGroupKey),u=new ZN,l={};l.USERNAME=this.username,l.DEVICE_KEY=this.deviceKey,a.getLargeAValue(function(c,d){c&&r.onFailure(c),l.SRP_A=d.toString(16);var f={ChallengeName:"DEVICE_SRP_AUTH",ClientId:s.pool.getClientId(),ChallengeResponses:l,ClientMetadata:i,Session:s.Session};s.getUserContextData()&&(f.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",f,function(h,g){if(h)return r.onFailure(h);var p=g.ChallengeParameters,m=new Se(p.SRP_B,16),w=new Se(p.SALT,16);a.getPasswordAuthenticationKey(s.deviceKey,s.randomPassword,m,w,function(E,_){if(E)return r.onFailure(E);var T=u.getNowString(),R=_t.Buffer.concat([_t.Buffer.from(s.deviceGroupKey,"utf8"),_t.Buffer.from(s.deviceKey,"utf8"),_t.Buffer.from(p.SECRET_BLOCK,"base64"),_t.Buffer.from(T,"utf8")]),D=new No.Sha256(_);D.update(R);var B=D.digestSync(),z=_t.Buffer.from(B).toString("base64"),j={};j.USERNAME=s.username,j.PASSWORD_CLAIM_SECRET_BLOCK=p.SECRET_BLOCK,j.TIMESTAMP=T,j.PASSWORD_CLAIM_SIGNATURE=z,j.DEVICE_KEY=s.deviceKey;var Y={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:s.pool.getClientId(),ChallengeResponses:j,Session:g.Session};s.getUserContextData()&&(Y.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",Y,function(q,P){return q?r.onFailure(q):(s.signInUserSession=s.getCognitoUserSession(P.AuthenticationResult),s.cacheTokens(),r.onSuccess(s.signInUserSession))})})})})},"getDeviceResponse"),e.confirmRegistration=o(function(r,i,s,a){var u={ClientId:this.pool.getClientId(),ConfirmationCode:r,Username:this.username,ForceAliasCreation:i,ClientMetadata:a};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",u,function(l){return l?s(l,null):s(null,"SUCCESS")})},"confirmRegistration"),e.sendCustomChallengeAnswer=o(function(r,i,s){var a=this,u={};u.USERNAME=this.username,u.ANSWER=r;var l=new nu(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(u.DEVICE_KEY=this.deviceKey);var c={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:u,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:s};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",c,function(d,f){return d?i.onFailure(d):a.authenticateUserInternal(f,l,i)})},"sendCustomChallengeAnswer"),e.sendMFACode=o(function(r,i,s,a){var u=this,l={};l.USERNAME=this.username,l.SMS_MFA_CODE=r;var c=s||"SMS_MFA";c==="SOFTWARE_TOKEN_MFA"&&(l.SOFTWARE_TOKEN_MFA_CODE=r),this.deviceKey!=null&&(l.DEVICE_KEY=this.deviceKey);var d={ChallengeName:c,ChallengeResponses:l,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(d.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",d,function(f,h){if(f)return i.onFailure(f);var g=h.ChallengeName;if(g==="DEVICE_SRP_AUTH"){u.getDeviceResponse(i);return}if(u.signInUserSession=u.getCognitoUserSession(h.AuthenticationResult),u.cacheTokens(),h.AuthenticationResult.NewDeviceMetadata==null)return i.onSuccess(u.signInUserSession);var p=new nu(u.pool.getUserPoolName());p.generateHashDevice(h.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,h.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(m){if(m)return i.onFailure(m);var w={Salt:_t.Buffer.from(p.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:_t.Buffer.from(p.getVerifierDevices(),"hex").toString("base64")};u.verifierDevices=w.PasswordVerifier,u.deviceGroupKey=h.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,u.randomPassword=p.getRandomPassword(),u.client.request("ConfirmDevice",{DeviceKey:h.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:u.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:w,DeviceName:QN},function(E,_){return E?i.onFailure(E):(u.deviceKey=h.AuthenticationResult.NewDeviceMetadata.DeviceKey,u.cacheDeviceKeyAndPassword(),_.UserConfirmationNecessary===!0?i.onSuccess(u.signInUserSession,_.UserConfirmationNecessary):i.onSuccess(u.signInUserSession))})})})},"sendMFACode"),e.changePassword=o(function(r,i,s,a){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return s(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:r,ProposedPassword:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:a},function(u){return u?s(u,null):s(null,"SUCCESS")})},"changePassword"),e.enableMFA=o(function(r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);var i=[],s={DeliveryMedium:"SMS",AttributeName:"phone_number"};i.push(s),this.client.request("SetUserSettings",{MFAOptions:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?r(a,null):r(null,"SUCCESS")})},"enableMFA"),e.setUserMfaPreference=o(function(r,i,s){if(this.signInUserSession==null||!this.signInUserSession.isValid())return s(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:r,SoftwareTokenMfaSettings:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?s(a,null):s(null,"SUCCESS")})},"setUserMfaPreference"),e.disableMFA=o(function(r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);var i=[];this.client.request("SetUserSettings",{MFAOptions:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?r(s,null):r(null,"SUCCESS")})},"disableMFA"),e.deleteUser=o(function(r,i){var s=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:i},function(a){return a?r(a,null):(s.clearCachedUser(),r(null,"SUCCESS"))})},"deleteUser"),e.updateAttributes=o(function(r,i,s){var a=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:r,ClientMetadata:s},function(u,l){return u?i(u,null):a.getUserData(function(){return i(null,"SUCCESS",l)},{bypassCache:!0})})},"updateAttributes"),e.getUserAttributes=o(function(r){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return r(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i,s){if(i)return r(i,null);for(var a=[],u=0;u<s.UserAttributes.length;u++){var l={Name:s.UserAttributes[u].Name,Value:s.UserAttributes[u].Value},c=new iu(l);a.push(c)}return r(null,a)})},"getUserAttributes"),e.getMFAOptions=o(function(r){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return r(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i,s){return i?r(i,null):r(null,s.MFAOptions)})},"getMFAOptions"),e.createGetUserRequest=o(function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},"createGetUserRequest"),e.refreshSessionIfPossible=o(function(r){var i=this;return r===void 0&&(r={}),new Promise(function(s){var a=i.signInUserSession.getRefreshToken();a&&a.getToken()?i.refreshSession(a,s,r.clientMetadata):s()})},"refreshSessionIfPossible"),e.getUserData=o(function(r,i){var s=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return this.clearCachedUserData(),r(new Error("User is not authenticated"),null);var a=this.getUserDataFromCache();if(!a){this.fetchUserData().then(function(u){r(null,u)}).catch(r);return}if(this.isFetchUserDataAndTokenRequired(i)){this.fetchUserData().then(function(u){return s.refreshSessionIfPossible(i).then(function(){return u})}).then(function(u){return r(null,u)}).catch(r);return}try{r(null,JSON.parse(a));return}catch(u){this.clearCachedUserData(),r(u,null);return}},"getUserData"),e.getUserDataFromCache=o(function(){var r=this.storage.getItem(this.userDataKey);return r},"getUserDataFromCache"),e.isFetchUserDataAndTokenRequired=o(function(r){var i=r||{},s=i.bypassCache,a=s===void 0?!1:s;return a},"isFetchUserDataAndTokenRequired"),e.fetchUserData=o(function(){var r=this;return this.createGetUserRequest().then(function(i){return r.cacheUserData(i),i})},"fetchUserData"),e.deleteAttributes=o(function(r,i){var s=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?i(a,null):s.getUserData(function(){return i(null,"SUCCESS")},{bypassCache:!0})})},"deleteAttributes"),e.resendConfirmationCode=o(function(r,i){var s={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:i};this.client.request("ResendConfirmationCode",s,function(a,u){return a?r(a,null):r(null,u)})},"resendConfirmationCode"),e.getSession=o(function(r,i){if(i===void 0&&(i={}),this.username==null)return r(new Error("Username is null. Cannot retrieve a new session"),null);if(this.signInUserSession!=null&&this.signInUserSession.isValid())return r(null,this.signInUserSession);var s="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,a=s+".idToken",u=s+".accessToken",l=s+".refreshToken",c=s+".clockDrift";if(this.storage.getItem(a)){var d=new cT({IdToken:this.storage.getItem(a)}),f=new aT({AccessToken:this.storage.getItem(u)}),h=new lT({RefreshToken:this.storage.getItem(l)}),g=parseInt(this.storage.getItem(c),0)||0,p={IdToken:d,AccessToken:f,RefreshToken:h,ClockDrift:g},m=new dT(p);if(m.isValid())return this.signInUserSession=m,r(null,this.signInUserSession);if(!h.getToken())return r(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(h,r,i.clientMetadata)}else r(new Error("Local storage is missing an ID Token, Please authenticate"),null)},"getSession"),e.refreshSession=o(function(r,i,s){var a=this,u=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(i):i,l={};l.REFRESH_TOKEN=r.getToken();var c="CognitoIdentityServiceProvider."+this.pool.getClientId(),d=c+".LastAuthUser";if(this.storage.getItem(d)){this.username=this.storage.getItem(d);var f=c+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(f),l.DEVICE_KEY=this.deviceKey}var h={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:l,ClientMetadata:s};this.getUserContextData()&&(h.UserContextData=this.getUserContextData()),this.client.requestWithRetry("InitiateAuth",h,function(g,p){if(g)return g.code==="NotAuthorizedException"&&a.clearCachedUser(),u(g,null);if(p){var m=p.AuthenticationResult;return Object.prototype.hasOwnProperty.call(m,"RefreshToken")||(m.RefreshToken=r.getToken()),a.signInUserSession=a.getCognitoUserSession(m),a.cacheTokens(),u(null,a.signInUserSession)}})},"refreshSession"),e.cacheTokens=o(function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId(),i=r+"."+this.username+".idToken",s=r+"."+this.username+".accessToken",a=r+"."+this.username+".refreshToken",u=r+"."+this.username+".clockDrift",l=r+".LastAuthUser";this.storage.setItem(i,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(s,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(a,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(u,""+this.signInUserSession.getClockDrift()),this.storage.setItem(l,this.username)},"cacheTokens"),e.cacheUserData=o(function(r){this.storage.setItem(this.userDataKey,JSON.stringify(r))},"cacheUserData"),e.clearCachedUserData=o(function(){this.storage.removeItem(this.userDataKey)},"clearCachedUserData"),e.clearCachedUser=o(function(){this.clearCachedTokens(),this.clearCachedUserData()},"clearCachedUser"),e.cacheDeviceKeyAndPassword=o(function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,i=r+".deviceKey",s=r+".randomPasswordKey",a=r+".deviceGroupKey";this.storage.setItem(i,this.deviceKey),this.storage.setItem(s,this.randomPassword),this.storage.setItem(a,this.deviceGroupKey)},"cacheDeviceKeyAndPassword"),e.getCachedDeviceKeyAndPassword=o(function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,i=r+".deviceKey",s=r+".randomPasswordKey",a=r+".deviceGroupKey";this.storage.getItem(i)&&(this.deviceKey=this.storage.getItem(i),this.randomPassword=this.storage.getItem(s),this.deviceGroupKey=this.storage.getItem(a))},"getCachedDeviceKeyAndPassword"),e.clearCachedDeviceKeyAndPassword=o(function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,i=r+".deviceKey",s=r+".randomPasswordKey",a=r+".deviceGroupKey";this.storage.removeItem(i),this.storage.removeItem(s),this.storage.removeItem(a)},"clearCachedDeviceKeyAndPassword"),e.clearCachedTokens=o(function(){var r="CognitoIdentityServiceProvider."+this.pool.getClientId(),i=r+"."+this.username+".idToken",s=r+"."+this.username+".accessToken",a=r+"."+this.username+".refreshToken",u=r+".LastAuthUser",l=r+"."+this.username+".clockDrift";this.storage.removeItem(i),this.storage.removeItem(s),this.storage.removeItem(a),this.storage.removeItem(u),this.storage.removeItem(l)},"clearCachedTokens"),e.getCognitoUserSession=o(function(r){var i=new cT(r),s=new aT(r),a=new lT(r),u={IdToken:i,AccessToken:s,RefreshToken:a};return new dT(u)},"getCognitoUserSession"),e.forgotPassword=o(function(r,i){var s={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:i};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",s,function(a,u){return a?r.onFailure(a):typeof r.inputVerificationCode=="function"?r.inputVerificationCode(u):r.onSuccess(u)})},"forgotPassword"),e.confirmPassword=o(function(r,i,s,a){var u={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:r,Password:i,ClientMetadata:a};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",u,function(l){return l?s.onFailure(l):s.onSuccess("SUCCESS")})},"confirmPassword"),e.getAttributeVerificationCode=o(function(r,i,s){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:s},function(a,u){return a?i.onFailure(a):typeof i.inputVerificationCode=="function"?i.inputVerificationCode(u):i.onSuccess("SUCCESS")})},"getAttributeVerificationCode"),e.verifyAttribute=o(function(r,i,s){if(this.signInUserSession==null||!this.signInUserSession.isValid())return s.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:r,Code:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?s.onFailure(a):s.onSuccess("SUCCESS")})},"verifyAttribute"),e.getDevice=o(function(r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(i,s){return i?r.onFailure(i):r.onSuccess(s)})},"getDevice"),e.forgetSpecificDevice=o(function(r,i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:r},function(s){return s?i.onFailure(s):i.onSuccess("SUCCESS")})},"forgetSpecificDevice"),e.forgetDevice=o(function(r){var i=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:r.onFailure,onSuccess:o(function(a){return i.deviceKey=null,i.deviceGroupKey=null,i.randomPassword=null,i.clearCachedDeviceKeyAndPassword(),r.onSuccess(a)},"onSuccess")})},"forgetDevice"),e.setDeviceStatusRemembered=o(function(r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(i){return i?r.onFailure(i):r.onSuccess("SUCCESS")})},"setDeviceStatusRemembered"),e.setDeviceStatusNotRemembered=o(function(r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(i){return i?r.onFailure(i):r.onSuccess("SUCCESS")})},"setDeviceStatusNotRemembered"),e.listDevices=o(function(r,i,s){if(this.signInUserSession==null||!this.signInUserSession.isValid())return s.onFailure(new Error("User is not authenticated"));var a={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:r};i&&(a.PaginationToken=i),this.client.request("ListDevices",a,function(u,l){return u?s.onFailure(u):s.onSuccess(l)})},"listDevices"),e.globalSignOut=o(function(r){var i=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s){return s?r.onFailure(s):(i.clearCachedUser(),r.onSuccess("SUCCESS"))})},"globalSignOut"),e.signOut=o(function(r){var i=this;if(!r||typeof r!="function"){this.cleanClientData();return}this.getSession(function(s,a){if(s)return r(s);i.revokeTokens(function(u){i.cleanClientData(),r(u)})})},"signOut"),e.revokeTokens=o(function(r){if(r===void 0&&(r=o(function(){},"revokeTokenCallback")),typeof r!="function")throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession){var i=new Error("User is not authenticated");return r(i)}if(!this.signInUserSession.getAccessToken()){var s=new Error("No Access token available");return r(s)}var a=this.signInUserSession.getRefreshToken().getToken(),u=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(u)&&a)return this.revokeToken({token:a,callback:r});r()},"revokeTokens"),e.isSessionRevocable=o(function(r){if(r&&typeof r.decodePayload=="function")try{var i=r.decodePayload(),s=i.origin_jti;return!!s}catch(a){}return!1},"isSessionRevocable"),e.cleanClientData=o(function(){this.signInUserSession=null,this.clearCachedUser()},"cleanClientData"),e.revokeToken=o(function(r){var i=r.token,s=r.callback;this.client.requestWithRetry("RevokeToken",{Token:i,ClientId:this.pool.getClientId()},function(a){if(a)return s(a);s()})},"revokeToken"),e.sendMFASelectionAnswer=o(function(r,i){var s=this,a={};a.USERNAME=this.username,a.ANSWER=r;var u={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:a,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,function(l,c){if(l)return i.onFailure(l);if(s.Session=c.Session,r==="SMS_MFA")return i.mfaRequired(c.ChallengeName,c.ChallengeParameters);if(r==="SOFTWARE_TOKEN_MFA")return i.totpRequired(c.ChallengeName,c.ChallengeParameters)})},"sendMFASelectionAnswer"),e.getUserContextData=o(function(){var r=this.pool;return r.getUserContextData(this.username)},"getUserContextData"),e.associateSoftwareToken=o(function(r){var i=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s,a){return s?r.onFailure(s):r.associateSecretCode(a.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(s,a){return s?r.onFailure(s):(i.Session=a.Session,r.associateSecretCode(a.SecretCode))})},"associateSoftwareToken"),e.verifySoftwareToken=o(function(r,i,s){var a=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:r,FriendlyDeviceName:i},function(u,l){return u?s.onFailure(u):s.onSuccess(l)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:r,FriendlyDeviceName:i},function(u,l){if(u)return s.onFailure(u);a.Session=l.Session;var c={};c.USERNAME=a.username;var d={ChallengeName:"MFA_SETUP",ClientId:a.pool.getClientId(),ChallengeResponses:c,Session:a.Session};a.getUserContextData()&&(d.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",d,function(f,h){return f?s.onFailure(f):(a.signInUserSession=a.getCognitoUserSession(h.AuthenticationResult),a.cacheTokens(),s.onSuccess(a.signInUserSession))})})},"verifySoftwareToken"),n})(),xee="auth";function Is(){}o(Is,"UserAgent");Is.prototype.userAgent=Oee();var Uee=o(function(){Is.category=xee},"addAuthCategoryToCognitoUserAgent"),eD=o(function(e){Is.framework=e},"addFrameworkToCognitoUserAgent"),Mee=o(function(e){var t=Is.category?" "+Is.category:"",r=Is.framework?" framework/"+Is.framework:"",i=""+Is.prototype.userAgent+t+r;return i},"getAmplifyUserAgent");function kee(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Zl(n,e)}o(kee,"_inheritsLoose");function hT(n){var e=typeof Map=="function"?new Map:void 0;return hT=o(function(r){if(r===null||!$ee(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Fee(r,arguments,gT(this).constructor)}return o(i,"Wrapper"),i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Zl(i,r)},"_wrapNativeSuper"),hT(n)}o(hT,"_wrapNativeSuper");function Fee(n,e,t){if(uL())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(n.bind.apply(n,r));return t&&Zl(i,t.prototype),i}o(Fee,"_construct");function uL(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(uL=o(function(){return!!n},"_isNativeReflectConstruct"))()}o(uL,"_isNativeReflectConstruct");function $ee(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch(e){return typeof n=="function"}}o($ee,"_isNativeFunction");function Zl(n,e){return Zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Zl(n,e)}o(Zl,"_setPrototypeOf");function gT(n){return gT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gT(n)}o(gT,"_getPrototypeOf");var Bee=(function(n){function e(t,r,i,s){var a;return a=n.call(this,t)||this,a.code=r,a.name=i,a.statusCode=s,a}return o(e,"CognitoError"),kee(e,n),e})(hT(Error)),Vee=(function(){function n(t,r,i){this.endpoint=r||"https://cognito-idp."+t+".amazonaws.com/";var s=i||{},a=s.credentials;this.fetchOptions=a?{credentials:a}:{}}o(n,"Client");var e=n.prototype;return e.promisifyRequest=o(function(r,i){var s=this;return new Promise(function(a,u){s.request(r,i,function(l,c){l?u(new Bee(l.message,l.code,l.name,l.statusCode)):a(c)})})},"promisifyRequest"),e.requestWithRetry=o(function(r,i,s){var a=this,u=5*1e3;Wee(function(l){return new Promise(function(c,d){a.request(r,l,function(f,h){f?d(f):c(h)})})},[i],u).then(function(l){return s(null,l)}).catch(function(l){return s(l)})},"requestWithRetry"),e.request=o(function(r,i,s){var a={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+r,"X-Amz-User-Agent":Mee(),"Cache-Control":"no-store"},u=Object.assign({},this.fetchOptions,{headers:a,method:"POST",mode:"cors",body:JSON.stringify(i)}),l;fetch(this.endpoint,u).then(function(c){return l=c,c},function(c){throw c instanceof TypeError?new Error("Network error"):c}).then(function(c){return c.json().catch(function(){return{}})}).then(function(c){if(l.ok)return s(null,c);var d=(c.__type||c.code).split("#").pop(),f=new Error(c.message||c.Message||null);return f.name=d,f.code=d,s(f)}).catch(function(c){if(l&&l.headers&&l.headers.get("x-amzn-errortype"))try{var d=l.headers.get("x-amzn-errortype").split(":")[0],f=new Error(l.status?l.status.toString():null);return f.code=d,f.name=d,f.statusCode=l.status,s(f)}catch(h){return s(c)}else c instanceof Error&&c.message==="Network error"&&(c.code="NetworkError");return s(c)})},"request"),n})(),xg={debug:o(function(){},"debug")},Hee=o(function(e){var t="nonRetryable";return e&&e[t]},"isNonRetryableError");function cL(n,e,t,r){if(r===void 0&&(r=1),typeof n!="function")throw Error("functionToRetry must be a function");return xg.debug(n.name+" attempt #"+r+" with args: "+JSON.stringify(e)),n.apply(void 0,e).catch(function(i){if(xg.debug("error on "+n.name,i),Hee(i))throw xg.debug(n.name+" non retryable error",i),i;var s=t(r,e,i);if(xg.debug(n.name+" retrying in "+s+" ms"),s!==!1)return new Promise(function(a){return setTimeout(a,s)}).then(function(){return cL(n,e,t,r+1)});throw i})}o(cL,"retry");function jee(n){var e=100,t=100;return function(r){var i=Math.pow(2,r)*e+t*Math.random();return i>n?!1:i}}o(jee,"jitteredBackoff");function Wee(n,e,t){return cL(n,e,jee(t))}o(Wee,"jitteredExponentialRetry");var Gee=55,zee=(function(){function n(t,r){var i=t||{},s=i.UserPoolId,a=i.ClientId,u=i.endpoint,l=i.fetchOptions,c=i.AdvancedSecurityDataCollectionFlag;if(!s||!a)throw new Error("Both UserPoolId and ClientId are required.");if(s.length>Gee||!/^[\w-]+_[0-9a-zA-Z]+$/.test(s))throw new Error("Invalid UserPoolId format.");var d=s.split("_")[0];this.userPoolId=s,this.clientId=a,this.client=new Vee(d,u,l),this.advancedSecurityDataCollectionFlag=c!==!1,this.storage=t.Storage||new aL().getStorage(),r&&(this.wrapRefreshSessionCallback=r)}o(n,"CognitoUserPool");var e=n.prototype;return e.getUserPoolId=o(function(){return this.userPoolId},"getUserPoolId"),e.getUserPoolName=o(function(){return this.getUserPoolId().split("_")[1]},"getUserPoolName"),e.getClientId=o(function(){return this.clientId},"getClientId"),e.signUp=o(function(r,i,s,a,u,l){var c=this,d={ClientId:this.clientId,Username:r,Password:i,UserAttributes:s,ValidationData:a,ClientMetadata:l};this.getUserContextData(r)&&(d.UserContextData=this.getUserContextData(r)),this.client.request("SignUp",d,function(f,h){if(f)return u(f,null);var g={Username:r,Pool:c,Storage:c.storage},p={user:new fT(g),userConfirmed:h.UserConfirmed,userSub:h.UserSub,codeDeliveryDetails:h.CodeDeliveryDetails};return u(null,p)})},"signUp"),e.getCurrentUser=o(function(){var r="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",i=this.storage.getItem(r);if(i){var s={Username:i,Pool:this,Storage:this.storage};return new fT(s)}return null},"getCurrentUser"),e.getUserContextData=o(function(r){if(typeof AmazonCognitoAdvancedSecurityData!="undefined"){var i=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var s=i.getData(r,this.userPoolId,this.clientId);if(s){var a={EncodedData:s};return a}}return{}}},"getUserContextData"),n})(),lL={exports:{}};(function(n,e){(function(t){var r;if(n.exports=t(),r=!0,!r){var i=window.Cookies,s=window.Cookies=t();s.noConflict=function(){return window.Cookies=i,s}}})(function(){function t(){for(var s=0,a={};s<arguments.length;s++){var u=arguments[s];for(var l in u)a[l]=u[l]}return a}o(t,"extend");function r(s){return s.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}o(r,"decode");function i(s){function a(){}o(a,"api");function u(c,d,f){if(typeof document!="undefined"){f=t({path:"/"},a.defaults,f),typeof f.expires=="number"&&(f.expires=new Date(new Date*1+f.expires*864e5)),f.expires=f.expires?f.expires.toUTCString():"";try{var h=JSON.stringify(d);/^[\{\[]/.test(h)&&(d=h)}catch(m){}d=s.write?s.write(d,c):encodeURIComponent(String(d)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),c=encodeURIComponent(String(c)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var g="";for(var p in f)f[p]&&(g+="; "+p,f[p]!==!0&&(g+="="+f[p].split(";")[0]));return document.cookie=c+"="+d+g}}o(u,"set");function l(c,d){if(typeof document!="undefined"){for(var f={},h=document.cookie?document.cookie.split("; "):[],g=0;g<h.length;g++){var p=h[g].split("="),m=p.slice(1).join("=");!d&&m.charAt(0)==='"'&&(m=m.slice(1,-1));try{var w=r(p[0]);if(m=(s.read||s)(m,w)||r(m),d)try{m=JSON.parse(m)}catch(E){}if(f[w]=m,c===w)break}catch(E){}}return c?f[c]:f}}return o(l,"get"),a.set=u,a.get=function(c){return l(c,!1)},a.getJSON=function(c){return l(c,!0)},a.remove=function(c,d){u(c,"",t(d,{expires:-1}))},a.defaults={},a.withConverter=i,a}return o(i,"init"),i(function(){})})})(lL);var Pl=lL.exports,qee=(function(){function n(t){if(t===void 0&&(t={}),t.domain&&(this.domain=t.domain),t.path?this.path=t.path:this.path="/",Object.prototype.hasOwnProperty.call(t,"expires")?this.expires=t.expires:this.expires=365,Object.prototype.hasOwnProperty.call(t,"secure")?this.secure=t.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!["strict","lax","none"].includes(t.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(t.sameSite==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=t.sameSite}else this.sameSite=null}o(n,"CookieStorage");var e=n.prototype;return e.setItem=o(function(r,i){var s={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(s.sameSite=this.sameSite),Pl.set(r,i,s),Pl.get(r)},"setItem"),e.getItem=o(function(r){return Pl.get(r)},"getItem"),e.removeItem=o(function(r){var i={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(i.sameSite=this.sameSite),Pl.remove(r,i)},"removeItem"),e.clear=o(function(){for(var r=Pl.get(),i=Object.keys(r).length,s=0;s<i;++s)this.removeItem(Object.keys(r)[s]);return{}},"clear"),n})(),up={exports:{}};up.exports;(function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=n&&!n.nodeType&&n,s=typeof Mi=="object"&&Mi;(s.global===s||s.window===s||s.self===s)&&(t=s);var a,u=2147483647,l=36,c=1,d=26,f=38,h=700,g=72,p=128,m="-",w=/^xn--/,E=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=l-c,D=Math.floor,B=String.fromCharCode,z;function j(de){throw RangeError(T[de])}o(j,"error");function Y(de,N){for(var L=de.length,x=[];L--;)x[L]=N(de[L]);return x}o(Y,"map");function q(de,N){var L=de.split("@"),x="";L.length>1&&(x=L[0]+"@",de=L[1]),de=de.replace(_,".");var ve=de.split("."),Ee=Y(ve,N).join(".");return x+Ee}o(q,"mapDomain");function P(de){for(var N=[],L=0,x=de.length,ve,Ee;L<x;)ve=de.charCodeAt(L++),ve>=55296&&ve<=56319&&L<x?(Ee=de.charCodeAt(L++),(Ee&64512)==56320?N.push(((ve&1023)<<10)+(Ee&1023)+65536):(N.push(ve),L--)):N.push(ve);return N}o(P,"ucs2decode");function Z(de){return Y(de,function(N){var L="";return N>65535&&(N-=65536,L+=B(N>>>10&1023|55296),N=56320|N&1023),L+=B(N),L}).join("")}o(Z,"ucs2encode");function oe(de){return de-48<10?de-22:de-65<26?de-65:de-97<26?de-97:l}o(oe,"basicToDigit");function S(de,N){return de+22+75*(de<26)-((N!=0)<<5)}o(S,"digitToBasic");function K(de,N,L){var x=0;for(de=L?D(de/h):de>>1,de+=D(de/N);de>R*d>>1;x+=l)de=D(de/R);return D(x+(R+1)*de/(de+f))}o(K,"adapt");function U(de){var N=[],L=de.length,x,ve=0,Ee=p,Me=g,tt,Le,fe,$,J,W,ne,_e,we;for(tt=de.lastIndexOf(m),tt<0&&(tt=0),Le=0;Le<tt;++Le)de.charCodeAt(Le)>=128&&j("not-basic"),N.push(de.charCodeAt(Le));for(fe=tt>0?tt+1:0;fe<L;){for($=ve,J=1,W=l;fe>=L&&j("invalid-input"),ne=oe(de.charCodeAt(fe++)),(ne>=l||ne>D((u-ve)/J))&&j("overflow"),ve+=ne*J,_e=W<=Me?c:W>=Me+d?d:W-Me,!(ne<_e);W+=l)we=l-_e,J>D(u/we)&&j("overflow"),J*=we;x=N.length+1,Me=K(ve-$,x,$==0),D(ve/x)>u-Ee&&j("overflow"),Ee+=D(ve/x),ve%=x,N.splice(ve++,0,Ee)}return Z(N)}o(U,"decode");function Oe(de){var N,L,x,ve,Ee,Me,tt,Le,fe,$,J,W=[],ne,_e,we,Ie;for(de=P(de),ne=de.length,N=p,L=0,Ee=g,Me=0;Me<ne;++Me)J=de[Me],J<128&&W.push(B(J));for(x=ve=W.length,ve&&W.push(m);x<ne;){for(tt=u,Me=0;Me<ne;++Me)J=de[Me],J>=N&&J<tt&&(tt=J);for(_e=x+1,tt-N>D((u-L)/_e)&&j("overflow"),L+=(tt-N)*_e,N=tt,Me=0;Me<ne;++Me)if(J=de[Me],J<N&&++L>u&&j("overflow"),J==N){for(Le=L,fe=l;$=fe<=Ee?c:fe>=Ee+d?d:fe-Ee,!(Le<$);fe+=l)Ie=Le-$,we=l-$,W.push(B(S($+Ie%we,0))),Le=D(Ie/we);W.push(B(S(Le,0))),Ee=K(L,_e,x==ve),L=0,++x}++L,++N}return W.join("")}o(Oe,"encode");function Ye(de){return q(de,function(N){return w.test(N)?U(N.slice(4).toLowerCase()):N})}o(Ye,"toUnicode");function Xe(de){return q(de,function(N){return E.test(N)?"xn--"+Oe(N):N})}if(o(Xe,"toASCII"),a={version:"1.3.2",ucs2:{decode:P,encode:Z},decode:U,encode:Oe,toASCII:Xe,toUnicode:Ye},r&&i)if(n.exports==r)i.exports=a;else for(z in a)a.hasOwnProperty(z)&&(r[z]=a[z]);else t.punycode=a})(Mi)})(up,up.exports);var Kee=up.exports,Yee={isString:o(function(n){return typeof n=="string"},"isString"),isObject:o(function(n){return typeof n=="object"&&n!==null},"isObject"),isNull:o(function(n){return n===null},"isNull"),isNullOrUndefined:o(function(n){return n==null},"isNullOrUndefined")},Ql={};function Xee(n,e){return Object.prototype.hasOwnProperty.call(n,e)}o(Xee,"hasOwnProperty");var Jee=o(function(n,e,t,r){e=e||"&",t=t||"=";var i={};if(typeof n!="string"||n.length===0)return i;var s=/\+/g;n=n.split(e);var a=1e3;r&&typeof r.maxKeys=="number"&&(a=r.maxKeys);var u=n.length;a>0&&u>a&&(u=a);for(var l=0;l<u;++l){var c=n[l].replace(s,"%20"),d=c.indexOf(t),f,h,g,p;d>=0?(f=c.substr(0,d),h=c.substr(d+1)):(f=c,h=""),g=decodeURIComponent(f),p=decodeURIComponent(h),Xee(i,g)?Array.isArray(i[g])?i[g].push(p):i[g]=[i[g],p]:i[g]=p}return i},"decode"),Nl=o(function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}},"stringifyPrimitive"),Zee=o(function(n,e,t,r){return e=e||"&",t=t||"=",n===null&&(n=void 0),typeof n=="object"?Object.keys(n).map(function(i){var s=encodeURIComponent(Nl(i))+t;return Array.isArray(n[i])?n[i].map(function(a){return s+encodeURIComponent(Nl(a))}).join(e):s+encodeURIComponent(Nl(n[i]))}).join(e):r?encodeURIComponent(Nl(r))+t+encodeURIComponent(Nl(n)):""},"encode");Ql.decode=Ql.parse=Jee;Ql.encode=Ql.stringify=Zee;var Qee=Kee,Ni=Yee,As=dL;function ki(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}o(ki,"Url");var ete=/^([a-z0-9.+-]+:)/i,tte=/:[0-9]*$/,nte=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,rte=["<",">",'"',"`"," ","\r",`
`,"	"],ite=["{","}","|","\\","^","`"].concat(rte),pT=["'"].concat(ite),tD=["%","/","?",";","#"].concat(pT),nD=["/","?","#"],ste=255,rD=/^[+a-z0-9A-Z_-]{0,63}$/,ote=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ate={javascript:!0,"javascript:":!0},mT={javascript:!0,"javascript:":!0},mu={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},vT=Ql;function dL(n,e,t){if(n&&Ni.isObject(n)&&n instanceof ki)return n;var r=new ki;return r.parse(n,e,t),r}o(dL,"urlParse");ki.prototype.parse=function(n,e,t){if(!Ni.isString(n))throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var r=n.indexOf("?"),i=r!==-1&&r<n.indexOf("#")?"?":"#",s=n.split(i),a=/\\/g;s[0]=s[0].replace(a,"/"),n=s.join(i);var u=n;if(u=u.trim(),!t&&n.split("#").length===1){var l=nte.exec(u);if(l)return this.path=u,this.href=u,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=vT.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=ete.exec(u);if(c){c=c[0];var d=c.toLowerCase();this.protocol=d,u=u.substr(c.length)}if(t||c||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=u.substr(0,2)==="//";f&&!(c&&mT[c])&&(u=u.substr(2),this.slashes=!0)}if(!mT[c]&&(f||c&&!mu[c])){for(var h=-1,g=0;g<nD.length;g++){var p=u.indexOf(nD[g]);p!==-1&&(h===-1||p<h)&&(h=p)}var m,w;h===-1?w=u.lastIndexOf("@"):w=u.lastIndexOf("@",h),w!==-1&&(m=u.slice(0,w),u=u.slice(w+1),this.auth=decodeURIComponent(m)),h=-1;for(var g=0;g<tD.length;g++){var p=u.indexOf(tD[g]);p!==-1&&(h===-1||p<h)&&(h=p)}h===-1&&(h=u.length),this.host=u.slice(0,h),u=u.slice(h),this.parseHost(),this.hostname=this.hostname||"";var E=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!E)for(var _=this.hostname.split(/\./),g=0,T=_.length;g<T;g++){var R=_[g];if(R&&!R.match(rD)){for(var D="",B=0,z=R.length;B<z;B++)R.charCodeAt(B)>127?D+="x":D+=R[B];if(!D.match(rD)){var j=_.slice(0,g),Y=_.slice(g+1),q=R.match(ote);q&&(j.push(q[1]),Y.unshift(q[2])),Y.length&&(u="/"+Y.join(".")+u),this.hostname=j.join(".");break}}}this.hostname.length>ste?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=Qee.toASCII(this.hostname));var P=this.port?":"+this.port:"",Z=this.hostname||"";this.host=Z+P,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!ate[d])for(var g=0,T=pT.length;g<T;g++){var oe=pT[g];if(u.indexOf(oe)!==-1){var S=encodeURIComponent(oe);S===oe&&(S=escape(oe)),u=u.split(oe).join(S)}}var K=u.indexOf("#");K!==-1&&(this.hash=u.substr(K),u=u.slice(0,K));var U=u.indexOf("?");if(U!==-1?(this.search=u.substr(U),this.query=u.substr(U+1),e&&(this.query=vT.parse(this.query)),u=u.slice(0,U)):e&&(this.search="",this.query={}),u&&(this.pathname=u),mu[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",Oe=this.search||"";this.path=P+Oe}return this.href=this.format(),this};ki.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var e=this.protocol||"",t=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=n+this.host:this.hostname&&(i=n+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Ni.isObject(this.query)&&Object.keys(this.query).length&&(s=vT.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||mu[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),a&&a.charAt(0)!=="?"&&(a="?"+a),t=t.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),a=a.replace("#","%23"),e+i+t+a+r};ki.prototype.resolve=function(n){return this.resolveObject(dL(n,!1,!0)).format()};ki.prototype.resolveObject=function(n){if(Ni.isString(n)){var e=new ki;e.parse(n,!1,!0),n=e}for(var t=new ki,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];t[s]=this[s]}if(t.hash=n.hash,n.href==="")return t.href=t.format(),t;if(n.slashes&&!n.protocol){for(var a=Object.keys(n),u=0;u<a.length;u++){var l=a[u];l!=="protocol"&&(t[l]=n[l])}return mu[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(n.protocol&&n.protocol!==t.protocol){if(!mu[n.protocol]){for(var c=Object.keys(n),d=0;d<c.length;d++){var f=c[d];t[f]=n[f]}return t.href=t.format(),t}if(t.protocol=n.protocol,!n.host&&!mT[n.protocol]){for(var T=(n.pathname||"").split("/");T.length&&!(n.host=T.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),T[0]!==""&&T.unshift(""),T.length<2&&T.unshift(""),t.pathname=T.join("/")}else t.pathname=n.pathname;if(t.search=n.search,t.query=n.query,t.host=n.host||"",t.auth=n.auth,t.hostname=n.hostname||n.host,t.port=n.port,t.pathname||t.search){var h=t.pathname||"",g=t.search||"";t.path=h+g}return t.slashes=t.slashes||n.slashes,t.href=t.format(),t}var p=t.pathname&&t.pathname.charAt(0)==="/",m=n.host||n.pathname&&n.pathname.charAt(0)==="/",w=m||p||t.host&&n.pathname,E=w,_=t.pathname&&t.pathname.split("/")||[],T=n.pathname&&n.pathname.split("/")||[],R=t.protocol&&!mu[t.protocol];if(R&&(t.hostname="",t.port=null,t.host&&(_[0]===""?_[0]=t.host:_.unshift(t.host)),t.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(T[0]===""?T[0]=n.host:T.unshift(n.host)),n.host=null),w=w&&(T[0]===""||_[0]==="")),m)t.host=n.host||n.host===""?n.host:t.host,t.hostname=n.hostname||n.hostname===""?n.hostname:t.hostname,t.search=n.search,t.query=n.query,_=T;else if(T.length)_||(_=[]),_.pop(),_=_.concat(T),t.search=n.search,t.query=n.query;else if(!Ni.isNullOrUndefined(n.search)){if(R){t.hostname=t.host=_.shift();var D=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;D&&(t.auth=D.shift(),t.host=t.hostname=D.shift())}return t.search=n.search,t.query=n.query,(!Ni.isNull(t.pathname)||!Ni.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!_.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var B=_.slice(-1)[0],z=(t.host||n.host||_.length>1)&&(B==="."||B==="..")||B==="",j=0,Y=_.length;Y>=0;Y--)B=_[Y],B==="."?_.splice(Y,1):B===".."?(_.splice(Y,1),j++):j&&(_.splice(Y,1),j--);if(!w&&!E)for(;j--;j)_.unshift("..");w&&_[0]!==""&&(!_[0]||_[0].charAt(0)!=="/")&&_.unshift(""),z&&_.join("/").substr(-1)!=="/"&&_.push("");var q=_[0]===""||_[0]&&_[0].charAt(0)==="/";if(R){t.hostname=t.host=q?"":_.length?_.shift():"";var D=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;D&&(t.auth=D.shift(),t.host=t.hostname=D.shift())}return w=w||t.host&&_.length,w&&!q&&_.unshift(""),_.length?t.pathname=_.join("/"):(t.pathname=null,t.path=null),(!Ni.isNull(t.pathname)||!Ni.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=n.auth||t.auth,t.slashes=t.slashes||n.slashes,t.href=t.format(),t};ki.prototype.parseHost=function(){var n=this.host,e=tte.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};var ute="_self",cte=o(function(n){var e=window.open(n,ute);return e?Promise.resolve(e):Promise.reject()},"launchUri"),lte=o(function(n){window.sessionStorage.setItem("oauth_state",n)},"setState"),dte=o(function(){var n=window.sessionStorage.getItem("oauth_state");return window.sessionStorage.removeItem("oauth_state"),n},"getState"),fte=o(function(n){window.sessionStorage.setItem("ouath_pkce_key",n)},"setPKCE"),hte=o(function(){var n=window.sessionStorage.getItem("ouath_pkce_key");return window.sessionStorage.removeItem("ouath_pkce_key"),n},"getPKCE"),gte=typeof Symbol!="undefined"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",JE=o(function(n,e,t){Pi.dispatch("auth",{event:n,data:e,message:t},"Auth",gte)},"dispatchAuthEvent$1"),ru=new Mr("OAuth"),pte=(function(){function n(e){var t=e.config,r=e.cognitoClientId,i=e.scopes,s=i===void 0?[]:i;if(this._urlOpener=t.urlOpener||cte,this._config=t,this._cognitoClientId=r,!this.isValidScopes(s))throw Error("scopes must be a String Array");this._scopes=s}return o(n,"OAuth"),n.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(t){return typeof t=="string"})},n.prototype.oauthSignIn=function(e,t,r,i,s,a){e===void 0&&(e="code"),s===void 0&&(s=Qg.Cognito);var u=this._generateState(32),l=a?u+"-"+GJ(a):u;lte(l);var c=this._generateRandom(128);fte(c);var d=this._generateChallenge(c),f="S256",h=this._scopes.join(" "),g=Object.entries(qt(qt({redirect_uri:r,response_type:e,client_id:i,identity_provider:s,scope:h,state:l},e==="code"?{code_challenge:d}:{}),e==="code"?{code_challenge_method:f}:{})).map(function(m){var w=fr(m,2),E=w[0],_=w[1];return encodeURIComponent(E)+"="+encodeURIComponent(_)}).join("&"),p="https://"+t+"/oauth2/authorize?"+g;ru.debug("Redirecting to "+p),this._urlOpener(p,r)},n.prototype._handleCodeFlow=function(e){return be(this,void 0,void 0,function(){var t,r,i,s,a,u,l,c,d,f,h,g,p,m,w,E;return Ze(this,function(_){switch(_.label){case 0:return t=(As(e).query||"").split("&").map(function(T){return T.split("=")}).reduce(function(T,R){var D,B=fr(R,2),z=B[0],j=B[1];return qt(qt({},T),(D={},D[z]=j,D))},{code:void 0}).code,r=As(e).pathname||"/",i=As(this._config.redirectSignIn).pathname||"/",!t||r!==i?[2]:(s="https://"+this._config.domain+"/oauth2/token",JE("codeFlow",{},"Retrieving tokens from "+s),a=Oo(this._config)?this._cognitoClientId:this._config.clientID,u=Oo(this._config)?this._config.redirectSignIn:this._config.redirectUri,l=hte(),c=qt({grant_type:"authorization_code",code:t,client_id:a,redirect_uri:u},l?{code_verifier:l}:{}),ru.debug("Calling token endpoint: "+s+" with",c),d=Object.entries(c).map(function(T){var R=fr(T,2),D=R[0],B=R[1];return encodeURIComponent(D)+"="+encodeURIComponent(B)}).join("&"),f={category:nT.Auth,action:rT.FederatedSignIn},[4,fetch(s,{method:"POST",headers:(E={"Content-Type":"application/x-www-form-urlencoded"},E[IQ]=kT(f),E),body:d})]);case 1:return[4,_.sent().json()];case 2:if(h=_.sent(),g=h.access_token,p=h.refresh_token,m=h.id_token,w=h.error,w)throw new Error(w);return[2,{accessToken:g,refreshToken:p,idToken:m}]}})})},n.prototype._handleImplicitFlow=function(e){return be(this,void 0,void 0,function(){var t,r,i;return Ze(this,function(s){return t=(As(e).hash||"#").substr(1).split("&").map(function(a){return a.split("=")}).reduce(function(a,u){var l,c=fr(u,2),d=c[0],f=c[1];return qt(qt({},a),(l={},l[d]=f,l))},{id_token:void 0,access_token:void 0}),r=t.id_token,i=t.access_token,JE("implicitFlow",{},"Got tokens from "+e),ru.debug("Retrieving implicit tokens from "+e+" with"),[2,{accessToken:i,idToken:r,refreshToken:null}]})})},n.prototype.handleAuthResponse=function(e){return be(this,void 0,void 0,function(){var t,r,i,s,a,u,l;return Ze(this,function(c){switch(c.label){case 0:if(c.trys.push([0,5,,6]),t=e?qt(qt({},(As(e).hash||"#").substr(1).split("&").map(function(d){return d.split("=")}).reduce(function(d,f){var h=fr(f,2),g=h[0],p=h[1];return d[g]=p,d},{})),(As(e).query||"").split("&").map(function(d){return d.split("=")}).reduce(function(d,f){var h=fr(f,2),g=h[0],p=h[1];return d[g]=p,d},{})):{},r=t.error,i=t.error_description,r)throw new Error(i);return s=this._validateState(t),ru.debug("Starting "+this._config.responseType+" flow with "+e),this._config.responseType!=="code"?[3,2]:(a=[{}],[4,this._handleCodeFlow(e)]);case 1:return[2,qt.apply(void 0,[qt.apply(void 0,a.concat([c.sent()])),{state:s}])];case 2:return u=[{}],[4,this._handleImplicitFlow(e)];case 3:return[2,qt.apply(void 0,[qt.apply(void 0,u.concat([c.sent()])),{state:s}])];case 4:return[3,6];case 5:throw l=c.sent(),ru.debug("Error handling auth response.",l),l;case 6:return[2]}})})},n.prototype._validateState=function(e){if(e){var t=dte(),r=e.state;if(t&&t!==r)throw new Error("Invalid state in OAuth flow");return r}},n.prototype.signOut=function(){return be(this,void 0,void 0,function(){var e,t,r;return Ze(this,function(i){return e="https://"+this._config.domain+"/logout?",t=Oo(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=Oo(this._config)?this._config.redirectSignOut:this._config.returnTo,e+=Object.entries({client_id:t,logout_uri:encodeURIComponent(r)}).map(function(s){var a=fr(s,2),u=a[0],l=a[1];return u+"="+l}).join("&"),JE("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+e),ru.debug("Signing out from "+e),[2,this._urlOpener(e,r)]})})},n.prototype._generateState=function(e){for(var t="",r=e,i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";r>0;--r)t+=i[Math.round(Math.random()*(i.length-1))];return t},n.prototype._generateChallenge=function(e){var t=new No.Sha256;t.update(e);var r=t.digestSync(),i=_t.Buffer.from(r).toString("base64"),s=this._base64URL(i);return s},n.prototype._base64URL=function(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},n.prototype._generateRandom=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=new Uint8Array(e);if(typeof window!="undefined"&&window.crypto)window.crypto.getRandomValues(r);else for(var i=0;i<e;i+=1)r[i]=Math.random()*t.length|0;return this._bufferToString(r)},n.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=[],i=0;i<e.byteLength;i+=1){var s=e[i]%t.length;r.push(t[s])}return r.join("")},n})(),mte=o(function(n){if(Fi().isBrowser&&window.location){var e=window.location.href;n({url:e})}else if(!Fi().isNode)throw new Error("Not supported")},"urlListener"),hn;(function(n){n.DEFAULT_MSG="Authentication Error",n.EMPTY_EMAIL="Email cannot be empty",n.EMPTY_PHONE="Phone number cannot be empty",n.EMPTY_USERNAME="Username cannot be empty",n.INVALID_USERNAME="The username should either be a string or one of the sign in types",n.EMPTY_PASSWORD="Password cannot be empty",n.EMPTY_CODE="Confirmation code cannot be empty",n.SIGN_UP_ERROR="Error creating account",n.NO_MFA="No valid MFA method provided",n.INVALID_MFA="Invalid MFA type",n.EMPTY_CHALLENGE="Challenge response cannot be empty",n.NO_USER_SESSION="Failed to get the session because the user is empty",n.NETWORK_ERROR="Network Error",n.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",n.AUTOSIGNIN_ERROR="Please use your credentials to sign in"})(hn||(hn={}));var vte=new Mr("AuthError"),bs=(function(n){_p(e,n);function e(t){var r=this,i=_te[t],s=i.message,a=i.log;return r=n.call(this,s)||this,r.constructor=e,Object.setPrototypeOf(r,e.prototype),r.name="AuthError",r.log=a||s,vte.error(r.log),r}return o(e,"AuthError"),e})(Error),yte=(function(n){_p(e,n);function e(t){var r=n.call(this,t)||this;return r.constructor=e,Object.setPrototypeOf(r,e.prototype),r.name="NoUserPoolError",r}return o(e,"NoUserPoolError"),e})(bs),_te={noConfig:{message:hn.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `},missingAuthConfig:{message:hn.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `},emptyUsername:{message:hn.EMPTY_USERNAME},invalidUsername:{message:hn.INVALID_USERNAME},emptyPassword:{message:hn.EMPTY_PASSWORD},emptyCode:{message:hn.EMPTY_CODE},signUpError:{message:hn.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:hn.NO_MFA},invalidMFA:{message:hn.INVALID_MFA},emptyChallengeResponse:{message:hn.EMPTY_CHALLENGE},noUserSession:{message:hn.NO_USER_SESSION},deviceConfig:{message:hn.DEVICE_CONFIG},networkError:{message:hn.NETWORK_ERROR},autoSignInError:{message:hn.AUTOSIGNIN_ERROR},default:{message:hn.DEFAULT_MSG}},le=new Mr("AuthClass"),iD="aws.cognito.signin.user.admin",wte=10*1e3,Ete=typeof Symbol!="undefined"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",qe=o(function(n,e,t){Pi.dispatch("auth",{event:n,data:e,message:t},"Auth",Ete)},"dispatchAuthEvent"),Tte=60,bte=180*1e3,Ste=(function(){function n(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.autoSignInInitiated=!1,this.inflightSessionPromise=null,this.inflightSessionPromiseCounter=0,this.Credentials=rL,this.wrapRefreshSessionCallback=function(r){var i=o(function(s,a){return a?qe("tokenRefresh",void 0,"New token retrieved"):qe("tokenRefresh_failure",s,"Failed to retrieve new token"),r(s,a)},"wrapped");return i},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),Pi.listen("auth",function(r){var i=r.payload,s=i.event;switch(s){case"verify":case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true");break}}),Uee(),eD(WE.framework),WE.observeFrameworkChanges(function(){eD(WE.framework)})}return o(n,"AuthClass"),n.prototype.getModuleName=function(){return"Auth"},n.prototype.configure=function(e){var t=this;if(!e)return this._config||{};le.debug("configure Auth");var r=Object.assign({},this._config,qD(e).Auth,e);this._config=r;var i=this._config,s=i.userPoolId,a=i.userPoolWebClientId,u=i.cookieStorage,l=i.oauth,c=i.region,d=i.identityPoolId,f=i.mandatorySignIn,h=i.refreshHandlers,g=i.identityPoolRegion,p=i.clientMetadata,m=i.endpoint,w=i.storage;if(!w)u?this._storage=new qee(u):this._storage=e.ssr?new AQ:new KD().getStorage();else{if(!this._isValidAuthStorage(w))throw le.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=w}if(this._storageSync=Promise.resolve(),typeof this._storage.sync=="function"&&(this._storageSync=this._storage.sync()),s){var E={UserPoolId:s,ClientId:a,endpoint:m};E.Storage=this._storage,this.userPool=new zee(E,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:f,region:c,userPoolId:s,identityPoolId:d,refreshHandlers:h,storage:this._storage,identityPoolRegion:g});var _=l?Oo(this._config.oauth)?l:l.awsCognito:void 0;if(_){var T=Object.assign({cognitoClientId:a,UserPoolId:s,domain:_.domain,scopes:_.scope,redirectSignIn:_.redirectSignIn,redirectSignOut:_.redirectSignOut,responseType:_.responseType,Storage:this._storage,urlOpener:_.urlOpener,clientMetadata:p},_.options);this._oAuthHandler=new pte({scopes:T.scopes,config:T,cognitoClientId:T.cognitoClientId});var R={};mte(function(B){var z=B.url;R[z]||(R[z]=!0,t._handleAuthResponse(z))})}if(qe("configured",null,"The Auth category has been configured successfully"),!this.autoSignInInitiated&&typeof this._storage.getItem=="function"){var D=this.isTrueStorageValue("amplify-polling-started");D&&(qe("autoSignIn_failure",null,at.AutoSignInError),this._storage.removeItem("amplify-auto-sign-in")),this._storage.removeItem("amplify-polling-started")}return this._config},n.prototype.signUp=function(e){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s,a,u;if(!this.userPool)return this.rejectNoUserPool();var l=null,c=null,d=[],f=null,h,g={enabled:!1},p={},m={};if(e&&typeof e=="string"){l=e,c=r?r[0]:null;var w=r?r[1]:null,E=r?r[2]:null;w&&d.push(new iu({Name:"email",Value:w})),E&&d.push(new iu({Name:"phone_number",Value:E}))}else if(e&&typeof e=="object"){l=e.username,c=e.password,e&&e.clientMetadata?h=e.clientMetadata:this._config.clientMetadata&&(h=this._config.clientMetadata);var _=e.attributes;_&&Object.keys(_).map(function(R){d.push(new iu({Name:R,Value:_[R]}))});var T=e.validationData;T&&(f=[],Object.keys(T).map(function(R){f.push(new iu({Name:R,Value:T[R]}))})),g=(s=e.autoSignIn)!==null&&s!==void 0?s:{enabled:!1},g.enabled&&(this._storage.setItem("amplify-auto-sign-in","true"),p=(a=g.validationData)!==null&&a!==void 0?a:{},m=(u=g.clientMetaData)!==null&&u!==void 0?u:{})}else return this.rejectAuthError(at.SignUpError);return l?c?(le.debug("signUp attrs:",d),le.debug("signUp validation data:",f),new Promise(function(R,D){t.userPool.signUp(l,c,d,f,function(B,z){B?(qe("signUp_failure",B,l+" failed to signup"),D(B)):(qe("signUp",z,l+" has signed up successfully"),g.enabled&&t.handleAutoSignIn(l,c,p,m,z),R(z))},h)})):this.rejectAuthError(at.EmptyPassword):this.rejectAuthError(at.EmptyUsername)},n.prototype.handleAutoSignIn=function(e,t,r,i,s){this.autoSignInInitiated=!0;var a=new qN({Username:e,Password:t,ValidationData:r,ClientMetadata:i});s.userConfirmed?this.signInAfterUserConfirmed(a):this._config.signUpVerificationMethod==="link"?this.handleLinkAutoSignIn(a):this.handleCodeAutoSignIn(a)},n.prototype.handleCodeAutoSignIn=function(e){var t=this,r=o(function(i){var s=i.payload;s.event==="confirmSignUp"&&t.signInAfterUserConfirmed(e,r)},"listenEvent");Pi.listen("auth",r)},n.prototype.handleLinkAutoSignIn=function(e){var t=this;this._storage.setItem("amplify-polling-started","true");var r=Date.now(),i=setInterval(function(){Date.now()-r>bte?(clearInterval(i),qe("autoSignIn_failure",null,"Please confirm your account and use your credentials to sign in."),t._storage.removeItem("amplify-auto-sign-in")):t.signInAfterUserConfirmed(e,null,i)},5e3)},n.prototype.signInAfterUserConfirmed=function(e,t,r){return be(this,void 0,void 0,function(){var i,s,a=this;return Ze(this,function(u){switch(u.label){case 0:i=this.createCognitoUser(e.getUsername()),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,i.authenticateUser(e,this.authCallbacks(i,function(l){qe("autoSignIn",l,e.getUsername()+" has signed in successfully"),t&&Pi.remove("auth",t),r&&(clearInterval(r),a._storage.removeItem("amplify-polling-started")),a._storage.removeItem("amplify-auto-sign-in")},function(l){le.error(l),a._storage.removeItem("amplify-auto-sign-in")}))];case 2:return u.sent(),[3,4];case 3:return s=u.sent(),le.error(s),[3,4];case 4:return[2]}})})},n.prototype.confirmSignUp=function(e,t,r){var i=this;if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(at.EmptyUsername);if(!t)return this.rejectAuthError(at.EmptyCode);var s=this.createCognitoUser(e),a=r&&typeof r.forceAliasCreation=="boolean"?r.forceAliasCreation:!0,u;return r&&r.clientMetadata?u=r.clientMetadata:this._config.clientMetadata&&(u=this._config.clientMetadata),new Promise(function(l,c){s.confirmRegistration(t,a,function(d,f){if(d)c(d);else{qe("confirmSignUp",f,e+" has been confirmed successfully");var h=i.isTrueStorageValue("amplify-auto-sign-in");h&&!i.autoSignInInitiated&&(qe("autoSignIn_failure",null,at.AutoSignInError),i._storage.removeItem("amplify-auto-sign-in")),l(f)}},u)})},n.prototype.isTrueStorageValue=function(e){var t=this._storage.getItem(e);return t?t==="true":!1},n.prototype.resendSignUp=function(e,t){if(t===void 0&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(at.EmptyUsername);var r=this.createCognitoUser(e);return new Promise(function(i,s){r.resendConfirmationCode(function(a,u){a?s(a):i(u)},t)})},n.prototype.signIn=function(e,t,r){if(r===void 0&&(r=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var i=null,s=null,a={};if(typeof e=="string")i=e,s=t;else if(iJ(e))typeof t!="undefined"&&le.warn("The password should be defined under the first parameter object!"),i=e.username,s=e.password,a=e.validationData;else return this.rejectAuthError(at.InvalidUsername);if(!i)return this.rejectAuthError(at.EmptyUsername);var u=new qN({Username:i,Password:s,ValidationData:a,ClientMetadata:r});return s?this.signInWithPassword(u):this.signInWithoutPassword(u)},n.prototype.authCallbacks=function(e,t,r){var i=this,s=this;return{onSuccess:o(function(a){return be(i,void 0,void 0,function(){var u,l,c,d;return Ze(this,function(f){switch(f.label){case 0:le.debug(a),delete e.challengeName,delete e.challengeParam,f.label=1;case 1:return f.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return f.sent(),[4,this.Credentials.set(a,"session")];case 3:return u=f.sent(),le.debug("succeed to get cognito credentials",u),[3,9];case 4:return l=f.sent(),le.debug("cannot get cognito credentials",l),[3,9];case 5:return f.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return c=f.sent(),s.user=c,qe("signIn",c,"A user "+e.getUsername()+" has been signed in"),t(c),[3,8];case 7:return d=f.sent(),le.error("Failed to get the signed in user",d),r(d),[3,8];case 8:return[7];case 9:return[2]}})})},"onSuccess"),onFailure:o(function(a){le.debug("signIn failure",a),qe("signIn_failure",a,e.getUsername()+" failed to signin"),r(a)},"onFailure"),customChallenge:o(function(a){le.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=a,t(e)},"customChallenge"),mfaRequired:o(function(a,u){le.debug("signIn MFA required"),e.challengeName=a,e.challengeParam=u,t(e)},"mfaRequired"),mfaSetup:o(function(a,u){le.debug("signIn mfa setup",a),e.challengeName=a,e.challengeParam=u,t(e)},"mfaSetup"),newPasswordRequired:o(function(a,u){le.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:a,requiredAttributes:u},t(e)},"newPasswordRequired"),totpRequired:o(function(a,u){le.debug("signIn totpRequired"),e.challengeName=a,e.challengeParam=u,t(e)},"totpRequired"),selectMFAType:o(function(a,u){le.debug("signIn selectMFAType",a),e.challengeName=a,e.challengeParam=u,t(e)},"selectMFAType")}},n.prototype.signInWithPassword=function(e){var t=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var r=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise(function(i,s){r.authenticateUser(e,t.authCallbacks(r,function(a){t.pendingSignIn=null,i(a)},function(a){t.pendingSignIn=null,s(a)}))}),this.pendingSignIn},n.prototype.signInWithoutPassword=function(e){var t=this,r=this.createCognitoUser(e.getUsername());return r.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(i,s){r.initiateAuth(e,t.authCallbacks(r,i,s))})},n.prototype.getMFAOptions=function(e){return new Promise(function(t,r){e.getMFAOptions(function(i,s){if(i){le.debug("get MFA Options failed",i),r(i);return}le.debug("get MFA options success",s),t(s)})})},n.prototype.getPreferredMFA=function(e,t){var r=this,i=this;return new Promise(function(s,a){var u=r._config.clientMetadata,l=t?t.bypassCache:!1;e.getUserData(function(c,d){return be(r,void 0,void 0,function(){var f,h;return Ze(this,function(g){switch(g.label){case 0:if(!c)return[3,5];if(le.debug("getting preferred mfa failed",c),!this.isSessionInvalid(c))return[3,4];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return g.sent(),[3,4];case 3:return f=g.sent(),a(new Error("Session is invalid due to: "+c.message+" and failed to clean up invalid session: "+f.message)),[2];case 4:return a(c),[2];case 5:return h=i._getMfaTypeFromUserData(d),h?(s(h),[2]):(a("invalid MFA Type"),[2])}})})},{bypassCache:l,clientMetadata:u})})},n.prototype._getMfaTypeFromUserData=function(e){var t=null,r=e.PreferredMfaSetting;if(r)t=r;else{var i=e.UserMFASettingList;if(i)i.length===0?t="NOMFA":le.debug("invalid case for getPreferredMFA",e);else{var s=e.MFAOptions;s?t="SMS_MFA":t="NOMFA"}}return t},n.prototype._getUserData=function(e,t){var r=this;return new Promise(function(i,s){e.getUserData(function(a,u){return be(r,void 0,void 0,function(){var l;return Ze(this,function(c){switch(c.label){case 0:if(!a)return[3,5];if(le.debug("getting user data failed",a),!this.isSessionInvalid(a))return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return c.sent(),[3,4];case 3:return l=c.sent(),s(new Error("Session is invalid due to: "+a.message+" and failed to clean up invalid session: "+l.message)),[2];case 4:return s(a),[2];case 5:i(u),c.label=6;case 6:return[2]}})})},t)})},n.prototype.setPreferredMFA=function(e,t){return be(this,void 0,void 0,function(){var r,i,s,a,u,l,c,d=this;return Ze(this,function(f){switch(f.label){case 0:return r=this._config.clientMetadata,[4,this._getUserData(e,{bypassCache:!0,clientMetadata:r})];case 1:switch(i=f.sent(),s=null,a=null,u=t,u){case"TOTP":return[3,2];case"SOFTWARE_TOKEN_MFA":return[3,2];case"SMS":return[3,3];case"SMS_MFA":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return a={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return s={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return l=i.UserMFASettingList,[4,this._getMfaTypeFromUserData(i)];case 5:if(c=f.sent(),c==="NOMFA")return[2,Promise.resolve("No change for mfa type")];if(c==="SMS_MFA")s={PreferredMfa:!1,Enabled:!1};else if(c==="SOFTWARE_TOKEN_MFA")a={PreferredMfa:!1,Enabled:!1};else return[2,this.rejectAuthError(at.InvalidMFA)];return l&&l.length!==0&&l.forEach(function(h){h==="SMS_MFA"?s={PreferredMfa:!1,Enabled:!1}:h==="SOFTWARE_TOKEN_MFA"&&(a={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return le.debug("no validmfa method provided"),[2,this.rejectAuthError(at.NoMFA)];case 7:return[2,new Promise(function(h,g){e.setUserMfaPreference(s,a,function(p,m){if(p)return le.debug("Set user mfa preference error",p),g(p);le.debug("Set user mfa success",m),le.debug("Caching the latest user data into local"),e.getUserData(function(w,E){return be(d,void 0,void 0,function(){var _;return Ze(this,function(T){switch(T.label){case 0:if(!w)return[3,5];if(le.debug("getting user data failed",w),!this.isSessionInvalid(w))return[3,4];T.label=1;case 1:return T.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return T.sent(),[3,4];case 3:return _=T.sent(),g(new Error("Session is invalid due to: "+w.message+" and failed to clean up invalid session: "+_.message)),[2];case 4:return[2,g(w)];case 5:return[2,h(m)]}})})},{bypassCache:!0,clientMetadata:r})})})]}})})},n.prototype.disableSMS=function(e){return new Promise(function(t,r){e.disableMFA(function(i,s){if(i){le.debug("disable mfa failed",i),r(i);return}le.debug("disable mfa succeed",s),t(s)})})},n.prototype.enableSMS=function(e){return new Promise(function(t,r){e.enableMFA(function(i,s){if(i){le.debug("enable mfa failed",i),r(i);return}le.debug("enable mfa succeed",s),t(s)})})},n.prototype.setupTOTP=function(e){return new Promise(function(t,r){e.associateSoftwareToken({onFailure:o(function(i){le.debug("associateSoftwareToken failed",i),r(i)},"onFailure"),associateSecretCode:o(function(i){le.debug("associateSoftwareToken success",i),t(i)},"associateSecretCode")})})},n.prototype.verifyTotpToken=function(e,t){le.debug("verification totp token",e,t);var r;e&&typeof e.getSignInUserSession=="function"&&(r=e.getSignInUserSession());var i=r==null?void 0:r.isValid();return new Promise(function(s,a){e.verifySoftwareToken(t,"My TOTP device",{onFailure:o(function(u){le.debug("verifyTotpToken failed",u),a(u)},"onFailure"),onSuccess:o(function(u){i||qe("signIn",e,"A user "+e.getUsername()+" has been signed in"),qe("verify",e,"A user "+e.getUsername()+" has been verified"),le.debug("verifyTotpToken success",u),s(u)},"onSuccess")})})},n.prototype.confirmSignIn=function(e,t,r,i){var s=this;if(i===void 0&&(i=this._config.clientMetadata),!t)return this.rejectAuthError(at.EmptyCode);var a=this;return new Promise(function(u,l){e.sendMFACode(t,{onSuccess:o(function(c){return be(s,void 0,void 0,function(){var d,f,h,g;return Ze(this,function(p){switch(p.label){case 0:le.debug(c),p.label=1;case 1:return p.trys.push([1,4,5,10]),[4,this.Credentials.clear()];case 2:return p.sent(),[4,this.Credentials.set(c,"session")];case 3:return d=p.sent(),le.debug("succeed to get cognito credentials",d),[3,10];case 4:return f=p.sent(),le.debug("cannot get cognito credentials",f),[3,10];case 5:a.user=e,p.label=6;case 6:return p.trys.push([6,8,,9]),[4,this.currentUserPoolUser()];case 7:return h=p.sent(),e.attributes=h.attributes,[3,9];case 8:return g=p.sent(),le.debug("cannot get updated Cognito User",g),[3,9];case 9:return qe("signIn",e,"A user "+e.getUsername()+" has been signed in"),u(e),[7];case 10:return[2]}})})},"onSuccess"),onFailure:o(function(c){le.debug("confirm signIn failure",c),l(c)},"onFailure")},r,i)})},n.prototype.completeNewPassword=function(e,t,r,i){var s=this;if(r===void 0&&(r={}),i===void 0&&(i=this._config.clientMetadata),!t)return this.rejectAuthError(at.EmptyPassword);var a=this;return new Promise(function(u,l){e.completeNewPasswordChallenge(t,r,{onSuccess:o(function(c){return be(s,void 0,void 0,function(){var d,f;return Ze(this,function(h){switch(h.label){case 0:le.debug(c),h.label=1;case 1:return h.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return h.sent(),[4,this.Credentials.set(c,"session")];case 3:return d=h.sent(),le.debug("succeed to get cognito credentials",d),[3,6];case 4:return f=h.sent(),le.debug("cannot get cognito credentials",f),[3,6];case 5:return a.user=e,qe("signIn",e,"A user "+e.getUsername()+" has been signed in"),u(e),[7];case 6:return[2]}})})},"onSuccess"),onFailure:o(function(c){le.debug("completeNewPassword failure",c),qe("completeNewPassword_failure",c,s.user+" failed to complete the new password flow"),l(c)},"onFailure"),mfaRequired:o(function(c,d){le.debug("signIn MFA required"),e.challengeName=c,e.challengeParam=d,u(e)},"mfaRequired"),mfaSetup:o(function(c,d){le.debug("signIn mfa setup",c),e.challengeName=c,e.challengeParam=d,u(e)},"mfaSetup"),totpRequired:o(function(c,d){le.debug("signIn mfa setup",c),e.challengeName=c,e.challengeParam=d,u(e)},"totpRequired")},i)})},n.prototype.sendCustomChallengeAnswer=function(e,t,r){var i=this;return r===void 0&&(r=this._config.clientMetadata),this.userPool?t?new Promise(function(s,a){e.sendCustomChallengeAnswer(t,i.authCallbacks(e,s,a),r)}):this.rejectAuthError(at.EmptyChallengeResponse):this.rejectNoUserPool()},n.prototype.deleteUserAttributes=function(e,t){var r=this;return new Promise(function(i,s){r.userSession(e).then(function(a){e.deleteAttributes(t,function(u,l){return u?s(u):i(l)})})})},n.prototype.deleteUser=function(){return be(this,void 0,void 0,function(){var e,t,r=this;return Ze(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._storageSync];case 1:return i.sent(),[3,3];case 2:throw e=i.sent(),le.debug("Failed to sync cache info into memory",e),new Error(e);case 3:return t=this._oAuthHandler&&this._storage.getItem("amplify-signin-with-hostedUI")==="true",[2,new Promise(function(s,a){return be(r,void 0,void 0,function(){var u,l=this;return Ze(this,function(c){if(this.userPool)if(u=this.userPool.getCurrentUser(),u)u.getSession(function(d,f){return be(l,void 0,void 0,function(){var h,g=this;return Ze(this,function(p){switch(p.label){case 0:if(!d)return[3,5];if(le.debug("Failed to get the user session",d),!this.isSessionInvalid(d))return[3,4];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(u)];case 2:return p.sent(),[3,4];case 3:return h=p.sent(),a(new Error("Session is invalid due to: "+d.message+" and failed to clean up invalid session: "+h.message)),[2];case 4:return[2,a(d)];case 5:u.deleteUser(function(m,w){if(m)a(m);else{qe("userDeleted",w,"The authenticated user has been deleted."),u.signOut(),g.user=null;try{g.cleanCachedItems()}catch(E){le.debug("failed to clear cached items")}t?g.oAuthSignOutRedirect(s,a):(qe("signOut",g.user,"A user has been signed out"),s(w))}}),p.label=6;case 6:return[2]}})})});else return le.debug("Failed to get user from user pool"),[2,a(new Error("No current user."))];else le.debug("no Congito User pool"),a(new Error("Cognito User pool does not exist"));return[2]})})})]}})})},n.prototype.updateUserAttributes=function(e,t,r){var i=this;r===void 0&&(r=this._config.clientMetadata);var s=[],a=this;return new Promise(function(u,l){a.userSession(e).then(function(c){for(var d in t)if(d!=="sub"&&d.indexOf("_verified")<0){var f={Name:d,Value:t[d]};s.push(f)}e.updateAttributes(s,function(h,g,p){if(h)return qe("updateUserAttributes_failure",h,"Failed to update attributes"),l(h);var m=i.createUpdateAttributesResultList(t,p==null?void 0:p.CodeDeliveryDetailsList);return qe("updateUserAttributes",m,"Attributes successfully updated"),u(g)},r)})})},n.prototype.createUpdateAttributesResultList=function(e,t){var r={};return Object.keys(e).forEach(function(i){r[i]={isUpdated:!0};var s=t==null?void 0:t.find(function(a){return a.AttributeName===i});s&&(r[i].isUpdated=!1,r[i].codeDeliveryDetails=s)}),r},n.prototype.userAttributes=function(e){var t=this;return new Promise(function(r,i){t.userSession(e).then(function(s){e.getUserAttributes(function(a,u){a?i(a):r(u)})})})},n.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then(function(r){var i=t.attributesToObject(r),s={},a={};return i.email&&(i.email_verified?a.email=i.email:s.email=i.email),i.phone_number&&(i.phone_number_verified?a.phone_number=i.phone_number:s.phone_number=i.phone_number),{verified:a,unverified:s}})},n.prototype.isErrorWithMessage=function(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"message")},n.prototype.isTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&e.message==="Access Token has been revoked"},n.prototype.isRefreshTokenRevokedError=function(e){return this.isErrorWithMessage(e)&&e.message==="Refresh Token has been revoked"},n.prototype.isUserDisabledError=function(e){return this.isErrorWithMessage(e)&&e.message==="User is disabled."},n.prototype.isUserDoesNotExistError=function(e){return this.isErrorWithMessage(e)&&e.message==="User does not exist."},n.prototype.isRefreshTokenExpiredError=function(e){return this.isErrorWithMessage(e)&&e.message==="Refresh Token has expired"},n.prototype.isPasswordResetRequiredError=function(e){return this.isErrorWithMessage(e)&&e.message==="Password reset required for the user"},n.prototype.isSignedInHostedUI=function(){return this._oAuthHandler&&this._storage.getItem("amplify-signin-with-hostedUI")==="true"},n.prototype.isSessionInvalid=function(e){return this.isUserDisabledError(e)||this.isUserDoesNotExistError(e)||this.isTokenRevokedError(e)||this.isRefreshTokenRevokedError(e)||this.isRefreshTokenExpiredError(e)||this.isPasswordResetRequiredError(e)},n.prototype.cleanUpInvalidSession=function(e){return be(this,void 0,void 0,function(){var t=this;return Ze(this,function(r){switch(r.label){case 0:e.signOut(),this.user=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.cleanCachedItems()];case 2:return r.sent(),[3,4];case 3:return r.sent(),le.debug("failed to clear cached items"),[3,4];case 4:return this.isSignedInHostedUI()?[2,new Promise(function(i,s){t.oAuthSignOutRedirect(i,s)})]:(qe("signOut",this.user,"A user has been signed out"),[2])}})})},n.prototype.currentUserPoolUser=function(e){var t=this;return this.userPool?new Promise(function(r,i){t._storageSync.then(function(){return be(t,void 0,void 0,function(){var s,a,u,l,c,d,f,h=this;return Ze(this,function(g){switch(g.label){case 0:return this.isOAuthInProgress()?(le.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(p){var m=setTimeout(function(){le.debug("OAuth signIn in progress timeout"),Pi.remove("auth",w),p()},wte);Pi.listen("auth",w);function w(E){var _=E.payload,T=_.event;(T==="cognitoHostedUI"||T==="cognitoHostedUI_failure")&&(le.debug("OAuth signIn resolved: "+T),clearTimeout(m),Pi.remove("auth",w),p())}o(w,"hostedUISignCallback")})]):[3,2];case 1:g.sent(),g.label=2;case 2:if(s=this.userPool.getCurrentUser(),!s)return le.debug("Failed to get user from user pool"),i("No current user"),[2];g.label=3;case 3:return g.trys.push([3,7,,8]),[4,this._userSession(s)];case 4:return a=g.sent(),u=e?e.bypassCache:!1,u?[4,this.Credentials.clear()]:[3,6];case 5:g.sent(),g.label=6;case 6:if(l=this._config.clientMetadata,c=a.getAccessToken().decodePayload().scope,d=c===void 0?"":c,d.split(" ").includes(iD))s.getUserData(function(p,m){return be(h,void 0,void 0,function(){var w,E,_,T,R,D,B;return Ze(this,function(z){switch(z.label){case 0:if(!p)return[3,7];if(le.debug("getting user data failed",p),!this.isSessionInvalid(p))return[3,5];z.label=1;case 1:return z.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(s)];case 2:return z.sent(),[3,4];case 3:return w=z.sent(),i(new Error("Session is invalid due to: "+p.message+" and failed to clean up invalid session: "+w.message)),[2];case 4:return i(p),[3,6];case 5:r(s),z.label=6;case 6:return[2];case 7:for(E=m.PreferredMfaSetting||"NOMFA",_=[],T=0;T<m.UserAttributes.length;T++)R={Name:m.UserAttributes[T].Name,Value:m.UserAttributes[T].Value},D=new iu(R),_.push(D);return B=this.attributesToObject(_),Object.assign(s,{attributes:B,preferredMFA:E}),[2,r(s)]}})})},{bypassCache:u,clientMetadata:l});else return le.debug("Unable to get the user data because the "+iD+" is not in the scopes of the access token"),[2,r(s)];return[3,8];case 7:return f=g.sent(),i(f),[3,8];case 8:return[2]}})})}).catch(function(s){return le.debug("Failed to sync cache info into memory",s),i(s)})}):this.rejectNoUserPool()},n.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},n.prototype.currentAuthenticatedUser=function(e){return be(this,void 0,void 0,function(){var t,r,i,s,a;return Ze(this,function(u){switch(u.label){case 0:le.debug("getting current authenticated user"),t=null,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this._storageSync];case 2:return u.sent(),[3,4];case 3:throw r=u.sent(),le.debug("Failed to sync cache info into memory",r),r;case 4:try{i=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")),i&&(t=qt(qt({},i.user),{token:i.token}))}catch(l){le.debug("cannot load federated user from auth storage")}return t?(this.user=t,le.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:le.debug("get current authenticated userpool user"),s=null,u.label=6;case 6:return u.trys.push([6,8,,9]),[4,this.currentUserPoolUser(e)];case 7:return s=u.sent(),[3,9];case 8:return a=u.sent(),a==="No userPool"&&le.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),le.debug("The user is not authenticated by the error",a),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=s,[2,this.user]}})})},n.prototype.currentSession=function(){var e=this;return le.debug("Getting current session"),this.userPool?new Promise(function(t,r){e.currentUserPoolUser().then(function(i){e.userSession(i).then(function(s){t(s)}).catch(function(s){le.debug("Failed to get the current session",s),r(s)})}).catch(function(i){le.debug("Failed to get the current user",i),r(i)})}):Promise.reject(new Error("No User Pool in the configuration."))},n.prototype._userSession=function(e){return be(this,void 0,void 0,function(){var t,r,i=this;return Ze(this,function(s){switch(s.label){case 0:if(!e)return le.debug("the user is null"),[2,this.rejectAuthError(at.NoUserSession)];t=this._config.clientMetadata,this.inflightSessionPromiseCounter===0&&(this.inflightSessionPromise=new Promise(function(a,u){e.getSession(function(l,c){return be(i,void 0,void 0,function(){var d;return Ze(this,function(f){switch(f.label){case 0:if(!l)return[3,5];if(le.debug("Failed to get the session from user",e),!this.isSessionInvalid(l))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(e)];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),u(new Error("Session is invalid due to: "+l.message+" and failed to clean up invalid session: "+d.message)),[2];case 4:return u(l),[2];case 5:return le.debug("Succeed to get the user session",c),a(c),[2]}})})},{clientMetadata:t})})),this.inflightSessionPromiseCounter++,s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.inflightSessionPromise];case 2:return r=s.sent(),e.signInUserSession=r,[2,r];case 3:return this.inflightSessionPromiseCounter--,[7];case 4:return[2]}})})},n.prototype.userSession=function(e){return this._userSession(e)},n.prototype.currentUserCredentials=function(){return be(this,void 0,void 0,function(){var e,t,r=this;return Ze(this,function(i){switch(i.label){case 0:le.debug("Getting current user credentials"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._storageSync];case 2:return i.sent(),[3,4];case 3:throw e=i.sent(),le.debug("Failed to sync cache info into memory",e),e;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(s){le.debug("failed to get or parse item aws-amplify-federatedInfo",s)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then(function(s){return le.debug("getting session success",s),r.Credentials.set(s,"session")}).catch(function(){return le.debug("getting guest credentials"),r.Credentials.set(null,"guest")})]}})})},n.prototype.currentCredentials=function(){return le.debug("getting current credentials"),this.Credentials.get()},n.prototype.verifyUserAttribute=function(e,t,r){return r===void 0&&(r=this._config.clientMetadata),new Promise(function(i,s){e.getAttributeVerificationCode(t,{onSuccess:o(function(a){return i(a)},"onSuccess"),onFailure:o(function(a){return s(a)},"onFailure")},r)})},n.prototype.verifyUserAttributeSubmit=function(e,t,r){return r?new Promise(function(i,s){e.verifyAttribute(t,r,{onSuccess:o(function(a){i(a)},"onSuccess"),onFailure:o(function(a){s(a)},"onFailure")})}):this.rejectAuthError(at.EmptyCode)},n.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then(function(r){return t.verifyUserAttribute(r,e)})},n.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var r=this;return r.currentUserPoolUser().then(function(i){return r.verifyUserAttributeSubmit(i,e,t)})},n.prototype.cognitoIdentitySignOut=function(e,t){return be(this,void 0,void 0,function(){var r,i,s=this;return Ze(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this._storageSync];case 1:return a.sent(),[3,3];case 2:throw r=a.sent(),le.debug("Failed to sync cache info into memory",r),r;case 3:return i=this._oAuthHandler&&this._storage.getItem("amplify-signin-with-hostedUI")==="true",[2,new Promise(function(u,l){if(e&&e.global){le.debug("user global sign out",t);var c=s._config.clientMetadata;t.getSession(function(d,f){return be(s,void 0,void 0,function(){var h,g=this;return Ze(this,function(p){switch(p.label){case 0:if(!d)return[3,5];if(le.debug("failed to get the user session",d),!this.isSessionInvalid(d))return[3,4];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,this.cleanUpInvalidSession(t)];case 2:return p.sent(),[3,4];case 3:return h=p.sent(),l(new Error("Session is invalid due to: "+d.message+" and failed to clean up invalid session: "+h.message)),[2];case 4:return[2,l(d)];case 5:return t.globalSignOut({onSuccess:o(function(m){if(le.debug("global sign out success"),i)g.oAuthSignOutRedirect(u,l);else return u()},"onSuccess"),onFailure:o(function(m){return le.debug("global sign out failed",m),l(m)},"onFailure")}),[2]}})})},{clientMetadata:c})}else le.debug("user sign out",t),t.signOut(function(){if(i)s.oAuthSignOutRedirect(u,l);else return u()})})]}})})},n.prototype.oAuthSignOutRedirect=function(e,t){var r=Fi().isBrowser;r?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},n.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},n.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e(Error("Signout timeout fail"))},3e3)},n.prototype.signOut=function(e){return e===void 0&&(e={}),be(this,void 0,void 0,function(){var t,r;return Ze(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return i.sent(),[3,3];case 2:return i.sent(),le.debug("failed to clear cached items"),[3,3];case 3:if(!this.userPool)return[3,11];i.label=4;case 4:return i.trys.push([4,6,,7]),[4,this._storageSync];case 5:return i.sent(),[3,7];case 6:throw t=i.sent(),le.debug("Failed to sync cache info into memory",t),t;case 7:return r=this.userPool.getCurrentUser(),r?[4,this.cognitoIdentitySignOut(e,r)]:[3,9];case 8:return i.sent(),[3,10];case 9:le.debug("no current Cognito user"),i.label=10;case 10:return[3,12];case 11:le.debug("no Cognito User pool"),i.label=12;case 12:return qe("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},n.prototype.cleanCachedItems=function(){return be(this,void 0,void 0,function(){return Ze(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},n.prototype.changePassword=function(e,t,r,i){var s=this;return i===void 0&&(i=this._config.clientMetadata),new Promise(function(a,u){s.userSession(e).then(function(l){e.changePassword(t,r,function(c,d){return c?(le.debug("change password failure",c),u(c)):a(d)},i)})})},n.prototype.forgotPassword=function(e,t){if(t===void 0&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(at.EmptyUsername);var r=this.createCognitoUser(e);return new Promise(function(i,s){r.forgotPassword({onSuccess:o(function(){i()},"onSuccess"),onFailure:o(function(a){le.debug("forgot password failure",a),qe("forgotPassword_failure",a,e+" forgotPassword failed"),s(a)},"onFailure"),inputVerificationCode:o(function(a){qe("forgotPassword",r,e+" has initiated forgot password flow"),i(a)},"inputVerificationCode")},t)})},n.prototype.forgotPasswordSubmit=function(e,t,r,i){if(i===void 0&&(i=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(at.EmptyUsername);if(!t)return this.rejectAuthError(at.EmptyCode);if(!r)return this.rejectAuthError(at.EmptyPassword);var s=this.createCognitoUser(e);return new Promise(function(a,u){s.confirmPassword(t,r,{onSuccess:o(function(l){qe("forgotPasswordSubmit",s,e+" forgotPasswordSubmit successful"),a(l)},"onSuccess"),onFailure:o(function(l){qe("forgotPasswordSubmit_failure",l,e+" forgotPasswordSubmit failed"),u(l)},"onFailure")},i)})},n.prototype.currentUserInfo=function(){return be(this,void 0,void 0,function(){var e,l,t,r,i,s,a,u,l;return Ze(this,function(c){switch(c.label){case 0:return e=this.Credentials.getCredSource(),!e||e==="aws"||e==="userPool"?[4,this.currentUserPoolUser().catch(function(d){return le.error(d)})]:[3,9];case 1:if(l=c.sent(),!l)return[2,null];c.label=2;case 2:return c.trys.push([2,8,,9]),[4,this.userAttributes(l)];case 3:t=c.sent(),r=this.attributesToObject(t),i=null,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return i=c.sent(),[3,7];case 6:return s=c.sent(),le.debug("Failed to retrieve credentials while getting current user info",s),[3,7];case 7:return a={id:i?i.identityId:void 0,username:l.getUsername(),attributes:r},[2,a];case 8:return u=c.sent(),le.error("currentUserInfo error",u),[2,{}];case 9:return e==="federated"?(l=this.user,[2,l||{}]):[2]}})})},n.prototype.federatedSignIn=function(e,t,r){return be(this,void 0,void 0,function(){var i,l,s,a,u,l,c,d,f,h,g,p;return Ze(this,function(m){switch(m.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(typeof e=="undefined"&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return HE(e)||nJ(e)||rJ(e)||typeof e=="undefined"?(i=e||{provider:Qg.Cognito},l=HE(i)?i.provider:i.customProvider,s=(HE(i),i.customState),this._config.userPoolId&&(a=Oo(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,u=Oo(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,u,a,l,s)),[3,4]):[3,1];case 1:l=e;try{c=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user),c&&le.warn("There is already a signed in user: "+c+` in your app.
																	You should not call Auth.federatedSignIn method again as it may cause unexpected behavior.`)}catch(w){}return d=t.token,f=t.identity_id,h=t.expires_at,[4,this.Credentials.set({provider:l,token:d,identity_id:f,user:r,expires_at:h},"federation")];case 2:return g=m.sent(),[4,this.currentAuthenticatedUser()];case 3:return p=m.sent(),qe("signIn",p,"A user "+p.username+" has been signed in"),le.debug("federated sign in credentials",g),[2,g];case 4:return[2]}})})},n.prototype._handleAuthResponse=function(e){return be(this,void 0,void 0,function(){var t,r,i,s,a,u,l,c,d,f,h,g,p,m;return Ze(this,function(w){switch(w.label){case 0:if(this.oAuthFlowInProgress)return le.debug("Skipping URL "+e+" current flow in progress"),[2];w.label=1;case 1:if(w.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(qe("parsingCallbackUrl",{url:e},"The callback url is being parsed"),t=e||(Fi().isBrowser?window.location.href:""),r=!!(As(t).query||"").split("&").map(function(E){return E.split("=")}).find(function(E){var _=fr(E,1),T=_[0];return T==="code"||T==="error"}),i=!!(As(t).hash||"#").substr(1).split("&").map(function(E){return E.split("=")}).find(function(E){var _=fr(E,1),T=_[0];return T==="access_token"||T==="error"}),!(r||i))return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),w.label=2;case 2:return w.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return s=w.sent(),a=s.accessToken,u=s.idToken,l=s.refreshToken,c=s.state,d=new dT({IdToken:new cT({IdToken:u}),RefreshToken:new lT({RefreshToken:l}),AccessToken:new aT({AccessToken:a})}),f=void 0,this._config.identityPoolId?[4,this.Credentials.set(d,"session")]:[3,5];case 4:f=w.sent(),le.debug("AWS credentials",f),w.label=5;case 5:return h=/-/.test(c),g=this.createCognitoUser(d.getIdToken().decodePayload()["cognito:username"]),g.setSignInUserSession(d),window&&typeof window.history!="undefined"&&window.history.replaceState(window.history.state,"",this._config.oauth.redirectSignIn),qe("signIn",g,"A user "+g.getUsername()+" has been signed in"),qe("cognitoHostedUI",g,"A user "+g.getUsername()+" has been signed in via Cognito Hosted UI"),h&&(p=c.split("-").splice(1).join("-"),qe("customOAuthState",zJ(p),"State for user "+g.getUsername())),[2,f];case 6:return m=w.sent(),le.debug("Error in cognito hosted auth response",m),window&&typeof window.history!="undefined"&&window.history.replaceState(window.history.state,"",this._config.oauth.redirectSignIn),qe("signIn_failure",m,"The OAuth response flow failed"),qe("cognitoHostedUI_failure",m,"A failure occurred when returning to the Cognito Hosted UI"),qe("customState_failure",m,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},n.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},n.prototype.attributesToObject=function(e){var t=this,r={};return e&&e.map(function(i){i.Name==="email_verified"||i.Name==="phone_number_verified"?r[i.Name]=t.isTruthyString(i.Value)||i.Value===!0:r[i.Name]=i.Value}),r},n.prototype.isTruthyString=function(e){return typeof e.toLowerCase=="function"&&e.toLowerCase()==="true"},n.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var r=this._config.authenticationFlowType,i=new fT(t);return r&&i.setAuthenticationFlowType(r),i},n.prototype._isValidAuthStorage=function(e){return!!e&&typeof e.getItem=="function"&&typeof e.setItem=="function"&&typeof e.removeItem=="function"&&typeof e.clear=="function"},n.prototype.noUserPoolErrorHandler=function(e){return e&&(!e.userPoolId||!e.identityPoolId)?at.MissingAuthConfig:at.NoConfig},n.prototype.rejectAuthError=function(e){return Promise.reject(new bs(e))},n.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new yte(e))},n.prototype.rememberDevice=function(){return be(this,void 0,void 0,function(){var e,t;return Ze(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=r.sent(),[3,3];case 2:return t=r.sent(),le.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(i,s){e.setDeviceStatusRemembered({onSuccess:o(function(a){i(a)},"onSuccess"),onFailure:o(function(a){a.code==="InvalidParameterException"?s(new bs(at.DeviceConfig)):a.code==="NetworkError"?s(new bs(at.NetworkError)):s(a)},"onFailure")})})]}})})},n.prototype.forgetDevice=function(){return be(this,void 0,void 0,function(){var e,t;return Ze(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=r.sent(),[3,3];case 2:return t=r.sent(),le.debug("The user is not authenticated by the error",t),[2,Promise.reject("The user is not authenticated")];case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(i,s){e.forgetDevice({onSuccess:o(function(a){i(a)},"onSuccess"),onFailure:o(function(a){a.code==="InvalidParameterException"?s(new bs(at.DeviceConfig)):a.code==="NetworkError"?s(new bs(at.NetworkError)):s(a)},"onFailure")})})]}})})},n.prototype.fetchDevices=function(){return be(this,void 0,void 0,function(){var e,t;return Ze(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.currentUserPoolUser()];case 1:return e=r.sent(),[3,3];case 2:throw t=r.sent(),le.debug("The user is not authenticated by the error",t),new Error("The user is not authenticated");case 3:return e.getCachedDeviceKeyAndPassword(),[2,new Promise(function(i,s){var a={onSuccess:o(function(u){var l=u.Devices.map(function(c){var d=c.DeviceAttributes.find(function(h){var g=h.Name;return g==="device_name"})||{},f={id:c.DeviceKey,name:d.Value};return f});i(l)},"onSuccess"),onFailure:o(function(u){u.code==="InvalidParameterException"?s(new bs(at.DeviceConfig)):u.code==="NetworkError"?s(new bs(at.NetworkError)):s(u)},"onFailure")};e.listDevices(Tte,null,a)})]}})})},n})(),xr=new Ste(null);td.register(xr);var ed="client_runtime",Ate="os-runtime",Ite="identity-endpoints",Cte="token",Rte="currentAuthType",Ote="currentAuthConfig",su,KT=class KT{constructor(e){su.set(this,void 0),Ae(this,su,e,"f")}read(){return localStorage.getItem(H(this,su,"f"))}write(e){localStorage.setItem(H(this,su,"f"),e)}clear(){localStorage.removeItem(H(this,su,"f"))}};o(KT,"LocalStorageItem");var du=KT;su=new WeakMap;var ou,au,uu,Dl,YT=class YT{constructor(){let{prefix:e=Ate,localEndpointKey:t=Ite,tokenKey:r=Cte,currentAuthTypeKey:i=Rte,currentAuthConfigKey:s=Ote}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ou.set(this,void 0),au.set(this,void 0),uu.set(this,void 0),Dl.set(this,void 0),Ae(this,ou,new du(`${e}-${t}`),"f"),Ae(this,au,new du(`${e}-${r}`),"f"),Ae(this,uu,new du(`${e}-${i}`),"f"),Ae(this,Dl,new du(`${e}-${s}`),"f")}storeEndpoints(e){H(this,ou,"f").write(JSON.stringify(e))}readEndpoints(){let e=H(this,ou,"f").read();return e?JSON.parse(e):null}storeToken(e){H(this,au,"f").write(JSON.stringify(e))}readToken(){let e=H(this,au,"f").read();return e?JSON.parse(e):null}readAccessToken(){var e;let t=this.readToken();return(e=t==null?void 0:t.access_token)!==null&&e!==void 0?e:null}readRefreshToken(){var e;let t=this.readToken();return(e=t==null?void 0:t.refresh_token)!==null&&e!==void 0?e:null}readIdToken(){var e;let t=this.readToken();return(e=t==null?void 0:t.id_token)!==null&&e!==void 0?e:null}storeCurrentAuthType(e){H(this,uu,"f").write(e)}readCurrentAuthType(){var e;return(e=H(this,uu,"f").read())!==null&&e!==void 0?e:null}storeCurrentAuthConfig(e){H(this,Dl,"f").write(JSON.stringify(e))}readCurrentAuthConfig(){let e=H(this,Dl,"f").read();return e?JSON.parse(e):null}clearAuthData(){H(this,ou,"f").clear(),H(this,au,"f").clear(),H(this,uu,"f").clear()}};o(YT,"LocalStorageAuthData");var Do=YT;ou=new WeakMap,au=new WeakMap,uu=new WeakMap,Dl=new WeakMap;var yT;(function(n){n.InvalidCredentials="InvalidCredentials",n.TooManyFailedAttempts="TooManyFailedAttempts",n.UnknownFailure="UnknownFailure",n.PasswordComplexityPolicyFailed="PasswordComplexityPolicyFailed",n.InvalidToken="InvalidToken",n.IdentityTokenEndpointFailed="IdentityTokenEndpointFailed",n.InvalidVerificationCode="InvalidVerificationCode"})(yT||(yT={}));var Qe=yT,XT=class XT extends Error{constructor(e,t){super(t),this.errorCode=e}};o(XT,"AuthError");var ni=XT,JT=class JT{static create(e){let{name:t,message:r,code:i="OS-CLRT-40100"}=e,s=new ni(i,r);return s.name=t,s}};o(JT,"ErrorFactory");var rn=JT;function _T(n){this.message=n}o(_T,"e");_T.prototype=new Error,_T.prototype.name="InvalidCharacterError";var sD=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(n){var e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new _T("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,r,i=0,s=0,a="";r=e.charAt(s++);~r&&(t=i%4?64*t+r:r,i++%4)?a+=String.fromCharCode(255&t>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function Pte(n){var e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return(function(t){return decodeURIComponent(sD(t).replace(/(.)/g,function(r,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))})(e)}catch(t){return sD(e)}}o(Pte,"t");function cp(n){this.message=n}o(cp,"n");function Nte(n,e){if(typeof n!="string")throw new cp("Invalid token specified");var t=(e=e||{}).header===!0?0:1;try{return JSON.parse(Pte(n.split(".")[t]))}catch(r){throw new cp("Invalid token specified: "+r.message)}}o(Nte,"o");cp.prototype=new Error,cp.prototype.name="InvalidTokenError";var fL="JWT_DECODING",Dte=1e4,nd=o(function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nte)(n)},"jwtDecoder"),Lte=o(n=>{let{jwtEncoded:e,decoder:t=nd,logger:r}=n;try{return t(e)}catch(i){r==null||r.error({category:fL,message:"Issue decoding token",error:i});return}},"safeJwtDecoder"),xte=o(n=>n?`${n.token_type} ${n.access_token}`:null,"formatAccessToken"),$g=o(n=>{let{token:e,now:t=Date.now,tokenDecoder:r,logger:i}=n;if(!e)return!1;try{let a=r(e).exp*1e3-Dte;return t()<a}catch(s){return i==null||i.error({category:fL,message:"Issue validating token",error:s}),!1}},"isTokenValid"),lp={exports:{}};lp.exports;(function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,u="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",h="[object Error]",g="[object Function]",p="[object GeneratorFunction]",m="[object Map]",w="[object Number]",E="[object Null]",_="[object Object]",T="[object Promise]",R="[object Proxy]",D="[object RegExp]",B="[object Set]",z="[object String]",j="[object Symbol]",Y="[object Undefined]",q="[object WeakMap]",P="[object ArrayBuffer]",Z="[object DataView]",oe="[object Float32Array]",S="[object Float64Array]",K="[object Int8Array]",U="[object Int16Array]",Oe="[object Int32Array]",Ye="[object Uint8Array]",Xe="[object Uint8ClampedArray]",de="[object Uint16Array]",N="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,x=/^\[object .+?Constructor\]$/,ve=/^(?:0|[1-9]\d*)$/,Ee={};Ee[oe]=Ee[S]=Ee[K]=Ee[U]=Ee[Oe]=Ee[Ye]=Ee[Xe]=Ee[de]=Ee[N]=!0,Ee[u]=Ee[l]=Ee[P]=Ee[d]=Ee[Z]=Ee[f]=Ee[h]=Ee[g]=Ee[m]=Ee[w]=Ee[_]=Ee[D]=Ee[B]=Ee[z]=Ee[q]=!1;var Me=typeof Mi=="object"&&Mi&&Mi.Object===Object&&Mi,tt=typeof self=="object"&&self&&self.Object===Object&&self,Le=Me||tt||Function("return this")(),fe=e&&!e.nodeType&&e,$=fe&&!0&&n&&!n.nodeType&&n,J=$&&$.exports===fe,W=J&&Me.process,ne=(function(){try{return W&&W.binding&&W.binding("util")}catch(I){}})(),_e=ne&&ne.isTypedArray;function we(I,F){for(var ae=-1,Te=I==null?0:I.length,At=0,ke=[];++ae<Te;){var Lt=I[ae];F(Lt,ae,I)&&(ke[At++]=Lt)}return ke}o(we,"arrayFilter");function Ie(I,F){for(var ae=-1,Te=F.length,At=I.length;++ae<Te;)I[At+ae]=F[ae];return I}o(Ie,"arrayPush");function xe(I,F){for(var ae=-1,Te=I==null?0:I.length;++ae<Te;)if(F(I[ae],ae,I))return!0;return!1}o(xe,"arraySome");function A(I,F){for(var ae=-1,Te=Array(I);++ae<I;)Te[ae]=F(ae);return Te}o(A,"baseTimes");function v(I){return function(F){return I(F)}}o(v,"baseUnary");function y(I,F){return I.has(F)}o(y,"cacheHas");function C(I,F){return I==null?void 0:I[F]}o(C,"getValue");function V(I){var F=-1,ae=Array(I.size);return I.forEach(function(Te,At){ae[++F]=[At,Te]}),ae}o(V,"mapToArray");function se(I,F){return function(ae){return I(F(ae))}}o(se,"overArg");function ce(I){var F=-1,ae=Array(I.size);return I.forEach(function(Te){ae[++F]=Te}),ae}o(ce,"setToArray");var We=Array.prototype,nt=Function.prototype,rt=Object.prototype,yt=Le["__core-js_shared__"],gt=nt.toString,Ft=rt.hasOwnProperty,ts=(function(){var I=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""})(),ns=rt.toString,Ys=RegExp("^"+gt.call(Ft).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kn=J?Le.Buffer:void 0,Pn=Le.Symbol,FC=Le.Uint8Array,$C=rt.propertyIsEnumerable,xF=We.splice,Xs=Pn?Pn.toStringTag:void 0,BC=Object.getOwnPropertySymbols,UF=kn?kn.isBuffer:void 0,MF=se(Object.keys,Object),Gv=oa(Le,"DataView"),yc=oa(Le,"Map"),zv=oa(Le,"Promise"),qv=oa(Le,"Set"),Kv=oa(Le,"WeakMap"),_c=oa(Object,"create"),kF=Qs(Gv),FF=Qs(yc),$F=Qs(zv),BF=Qs(qv),VF=Qs(Kv),VC=Pn?Pn.prototype:void 0,Yv=VC?VC.valueOf:void 0;function Js(I){var F=-1,ae=I==null?0:I.length;for(this.clear();++F<ae;){var Te=I[F];this.set(Te[0],Te[1])}}o(Js,"Hash");function HF(){this.__data__=_c?_c(null):{},this.size=0}o(HF,"hashClear");function jF(I){var F=this.has(I)&&delete this.__data__[I];return this.size-=F?1:0,F}o(jF,"hashDelete");function WF(I){var F=this.__data__;if(_c){var ae=F[I];return ae===r?void 0:ae}return Ft.call(F,I)?F[I]:void 0}o(WF,"hashGet");function GF(I){var F=this.__data__;return _c?F[I]!==void 0:Ft.call(F,I)}o(GF,"hashHas");function zF(I,F){var ae=this.__data__;return this.size+=this.has(I)?0:1,ae[I]=_c&&F===void 0?r:F,this}o(zF,"hashSet"),Js.prototype.clear=HF,Js.prototype.delete=jF,Js.prototype.get=WF,Js.prototype.has=GF,Js.prototype.set=zF;function di(I){var F=-1,ae=I==null?0:I.length;for(this.clear();++F<ae;){var Te=I[F];this.set(Te[0],Te[1])}}o(di,"ListCache");function qF(){this.__data__=[],this.size=0}o(qF,"listCacheClear");function KF(I){var F=this.__data__,ae=of(F,I);if(ae<0)return!1;var Te=F.length-1;return ae==Te?F.pop():xF.call(F,ae,1),--this.size,!0}o(KF,"listCacheDelete");function YF(I){var F=this.__data__,ae=of(F,I);return ae<0?void 0:F[ae][1]}o(YF,"listCacheGet");function XF(I){return of(this.__data__,I)>-1}o(XF,"listCacheHas");function JF(I,F){var ae=this.__data__,Te=of(ae,I);return Te<0?(++this.size,ae.push([I,F])):ae[Te][1]=F,this}o(JF,"listCacheSet"),di.prototype.clear=qF,di.prototype.delete=KF,di.prototype.get=YF,di.prototype.has=XF,di.prototype.set=JF;function Zs(I){var F=-1,ae=I==null?0:I.length;for(this.clear();++F<ae;){var Te=I[F];this.set(Te[0],Te[1])}}o(Zs,"MapCache");function ZF(){this.size=0,this.__data__={hash:new Js,map:new(yc||di),string:new Js}}o(ZF,"mapCacheClear");function QF(I){var F=af(this,I).delete(I);return this.size-=F?1:0,F}o(QF,"mapCacheDelete");function e2(I){return af(this,I).get(I)}o(e2,"mapCacheGet");function t2(I){return af(this,I).has(I)}o(t2,"mapCacheHas");function n2(I,F){var ae=af(this,I),Te=ae.size;return ae.set(I,F),this.size+=ae.size==Te?0:1,this}o(n2,"mapCacheSet"),Zs.prototype.clear=ZF,Zs.prototype.delete=QF,Zs.prototype.get=e2,Zs.prototype.has=t2,Zs.prototype.set=n2;function sf(I){var F=-1,ae=I==null?0:I.length;for(this.__data__=new Zs;++F<ae;)this.add(I[F])}o(sf,"SetCache");function r2(I){return this.__data__.set(I,r),this}o(r2,"setCacheAdd");function i2(I){return this.__data__.has(I)}o(i2,"setCacheHas"),sf.prototype.add=sf.prototype.push=r2,sf.prototype.has=i2;function rs(I){var F=this.__data__=new di(I);this.size=F.size}o(rs,"Stack");function s2(){this.__data__=new di,this.size=0}o(s2,"stackClear");function o2(I){var F=this.__data__,ae=F.delete(I);return this.size=F.size,ae}o(o2,"stackDelete");function a2(I){return this.__data__.get(I)}o(a2,"stackGet");function u2(I){return this.__data__.has(I)}o(u2,"stackHas");function c2(I,F){var ae=this.__data__;if(ae instanceof di){var Te=ae.__data__;if(!yc||Te.length<t-1)return Te.push([I,F]),this.size=++ae.size,this;ae=this.__data__=new Zs(Te)}return ae.set(I,F),this.size=ae.size,this}o(c2,"stackSet"),rs.prototype.clear=s2,rs.prototype.delete=o2,rs.prototype.get=a2,rs.prototype.has=u2,rs.prototype.set=c2;function l2(I,F){var ae=uf(I),Te=!ae&&A2(I),At=!ae&&!Te&&Xv(I),ke=!ae&&!Te&&!At&&XC(I),Lt=ae||Te||At||ke,Zt=Lt?A(I.length,String):[],cn=Zt.length;for(var Pt in I)Ft.call(I,Pt)&&!(Lt&&(Pt=="length"||At&&(Pt=="offset"||Pt=="parent")||ke&&(Pt=="buffer"||Pt=="byteLength"||Pt=="byteOffset")||w2(Pt,cn)))&&Zt.push(Pt);return Zt}o(l2,"arrayLikeKeys");function of(I,F){for(var ae=I.length;ae--;)if(zC(I[ae][0],F))return ae;return-1}o(of,"assocIndexOf");function d2(I,F,ae){var Te=F(I);return uf(I)?Te:Ie(Te,ae(I))}o(d2,"baseGetAllKeys");function wc(I){return I==null?I===void 0?Y:E:Xs&&Xs in Object(I)?y2(I):S2(I)}o(wc,"baseGetTag");function HC(I){return Ec(I)&&wc(I)==u}o(HC,"baseIsArguments");function jC(I,F,ae,Te,At){return I===F?!0:I==null||F==null||!Ec(I)&&!Ec(F)?I!==I&&F!==F:f2(I,F,ae,Te,jC,At)}o(jC,"baseIsEqual");function f2(I,F,ae,Te,At,ke){var Lt=uf(I),Zt=uf(F),cn=Lt?l:is(I),Pt=Zt?l:is(F);cn=cn==u?_:cn,Pt=Pt==u?_:Pt;var Kn=cn==_,Cr=Pt==_,vn=cn==Pt;if(vn&&Xv(I)){if(!Xv(F))return!1;Lt=!0,Kn=!1}if(vn&&!Kn)return ke||(ke=new rs),Lt||XC(I)?WC(I,F,ae,Te,At,ke):m2(I,F,cn,ae,Te,At,ke);if(!(ae&i)){var ir=Kn&&Ft.call(I,"__wrapped__"),sr=Cr&&Ft.call(F,"__wrapped__");if(ir||sr){var ss=ir?I.value():I,fi=sr?F.value():F;return ke||(ke=new rs),At(ss,fi,ae,Te,ke)}}return vn?(ke||(ke=new rs),v2(I,F,ae,Te,At,ke)):!1}o(f2,"baseIsEqualDeep");function h2(I){if(!YC(I)||T2(I))return!1;var F=qC(I)?Ys:x;return F.test(Qs(I))}o(h2,"baseIsNative");function g2(I){return Ec(I)&&KC(I.length)&&!!Ee[wc(I)]}o(g2,"baseIsTypedArray");function p2(I){if(!b2(I))return MF(I);var F=[];for(var ae in Object(I))Ft.call(I,ae)&&ae!="constructor"&&F.push(ae);return F}o(p2,"baseKeys");function WC(I,F,ae,Te,At,ke){var Lt=ae&i,Zt=I.length,cn=F.length;if(Zt!=cn&&!(Lt&&cn>Zt))return!1;var Pt=ke.get(I);if(Pt&&ke.get(F))return Pt==F;var Kn=-1,Cr=!0,vn=ae&s?new sf:void 0;for(ke.set(I,F),ke.set(F,I);++Kn<Zt;){var ir=I[Kn],sr=F[Kn];if(Te)var ss=Lt?Te(sr,ir,Kn,F,I,ke):Te(ir,sr,Kn,I,F,ke);if(ss!==void 0){if(ss)continue;Cr=!1;break}if(vn){if(!xe(F,function(fi,eo){if(!y(vn,eo)&&(ir===fi||At(ir,fi,ae,Te,ke)))return vn.push(eo)})){Cr=!1;break}}else if(!(ir===sr||At(ir,sr,ae,Te,ke))){Cr=!1;break}}return ke.delete(I),ke.delete(F),Cr}o(WC,"equalArrays");function m2(I,F,ae,Te,At,ke,Lt){switch(ae){case Z:if(I.byteLength!=F.byteLength||I.byteOffset!=F.byteOffset)return!1;I=I.buffer,F=F.buffer;case P:return!(I.byteLength!=F.byteLength||!ke(new FC(I),new FC(F)));case d:case f:case w:return zC(+I,+F);case h:return I.name==F.name&&I.message==F.message;case D:case z:return I==F+"";case m:var Zt=V;case B:var cn=Te&i;if(Zt||(Zt=ce),I.size!=F.size&&!cn)return!1;var Pt=Lt.get(I);if(Pt)return Pt==F;Te|=s,Lt.set(I,F);var Kn=WC(Zt(I),Zt(F),Te,At,ke,Lt);return Lt.delete(I),Kn;case j:if(Yv)return Yv.call(I)==Yv.call(F)}return!1}o(m2,"equalByTag");function v2(I,F,ae,Te,At,ke){var Lt=ae&i,Zt=GC(I),cn=Zt.length,Pt=GC(F),Kn=Pt.length;if(cn!=Kn&&!Lt)return!1;for(var Cr=cn;Cr--;){var vn=Zt[Cr];if(!(Lt?vn in F:Ft.call(F,vn)))return!1}var ir=ke.get(I);if(ir&&ke.get(F))return ir==F;var sr=!0;ke.set(I,F),ke.set(F,I);for(var ss=Lt;++Cr<cn;){vn=Zt[Cr];var fi=I[vn],eo=F[vn];if(Te)var JC=Lt?Te(eo,fi,vn,F,I,ke):Te(fi,eo,vn,I,F,ke);if(!(JC===void 0?fi===eo||At(fi,eo,ae,Te,ke):JC)){sr=!1;break}ss||(ss=vn=="constructor")}if(sr&&!ss){var cf=I.constructor,lf=F.constructor;cf!=lf&&"constructor"in I&&"constructor"in F&&!(typeof cf=="function"&&cf instanceof cf&&typeof lf=="function"&&lf instanceof lf)&&(sr=!1)}return ke.delete(I),ke.delete(F),sr}o(v2,"equalObjects");function GC(I){return d2(I,R2,_2)}o(GC,"getAllKeys");function af(I,F){var ae=I.__data__;return E2(F)?ae[typeof F=="string"?"string":"hash"]:ae.map}o(af,"getMapData");function oa(I,F){var ae=C(I,F);return h2(ae)?ae:void 0}o(oa,"getNative");function y2(I){var F=Ft.call(I,Xs),ae=I[Xs];try{I[Xs]=void 0;var Te=!0}catch(ke){}var At=ns.call(I);return Te&&(F?I[Xs]=ae:delete I[Xs]),At}o(y2,"getRawTag");var _2=BC?function(I){return I==null?[]:(I=Object(I),we(BC(I),function(F){return $C.call(I,F)}))}:O2,is=wc;(Gv&&is(new Gv(new ArrayBuffer(1)))!=Z||yc&&is(new yc)!=m||zv&&is(zv.resolve())!=T||qv&&is(new qv)!=B||Kv&&is(new Kv)!=q)&&(is=o(function(I){var F=wc(I),ae=F==_?I.constructor:void 0,Te=ae?Qs(ae):"";if(Te)switch(Te){case kF:return Z;case FF:return m;case $F:return T;case BF:return B;case VF:return q}return F},"getTag"));function w2(I,F){return F=F==null?a:F,!!F&&(typeof I=="number"||ve.test(I))&&I>-1&&I%1==0&&I<F}o(w2,"isIndex");function E2(I){var F=typeof I;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?I!=="__proto__":I===null}o(E2,"isKeyable");function T2(I){return!!ts&&ts in I}o(T2,"isMasked");function b2(I){var F=I&&I.constructor,ae=typeof F=="function"&&F.prototype||rt;return I===ae}o(b2,"isPrototype");function S2(I){return ns.call(I)}o(S2,"objectToString");function Qs(I){if(I!=null){try{return gt.call(I)}catch(F){}try{return I+""}catch(F){}}return""}o(Qs,"toSource");function zC(I,F){return I===F||I!==I&&F!==F}o(zC,"eq");var A2=HC((function(){return arguments})())?HC:function(I){return Ec(I)&&Ft.call(I,"callee")&&!$C.call(I,"callee")},uf=Array.isArray;function I2(I){return I!=null&&KC(I.length)&&!qC(I)}o(I2,"isArrayLike");var Xv=UF||P2;function C2(I,F){return jC(I,F)}o(C2,"isEqual");function qC(I){if(!YC(I))return!1;var F=wc(I);return F==g||F==p||F==c||F==R}o(qC,"isFunction");function KC(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=a}o(KC,"isLength");function YC(I){var F=typeof I;return I!=null&&(F=="object"||F=="function")}o(YC,"isObject");function Ec(I){return I!=null&&typeof I=="object"}o(Ec,"isObjectLike");var XC=_e?v(_e):g2;function R2(I){return I2(I)?l2(I):p2(I)}o(R2,"keys");function O2(){return[]}o(O2,"stubArray");function P2(){return!1}o(P2,"stubFalse"),n.exports=C2})(lp,lp.exports);var Ute=lp.exports,Mte=WJ(Ute),ZT=class ZT{serialize(e){if(!(e===null||typeof e=="undefined"))return JSON.stringify(e)}deserialize(e){if(!(e===null||typeof e=="undefined"))return JSON.parse(e)}};o(ZT,"JsonSerializer");var wT=ZT,ti,hr,Di,Vl,dp,Bg,Hl,jl,Wl,fp,hL,oD,aD,gL,pL,uD,ET,QT=class QT{get validityKey(){return`${H(this,Di,"f")}__expires`}constructor(e){let{storage:t=localStorage,key:r,timespan:i=0,canFetch:s,fetch:a,serializer:u=new wT,serialize:l=!0,validate:c=o(()=>!0,"validate"),logger:d}=e;ti.add(this),hr.set(this,void 0),Di.set(this,void 0),Vl.set(this,void 0),dp.set(this,void 0),Bg.set(this,void 0),Hl.set(this,void 0),jl.set(this,void 0),Wl.set(this,void 0),fp.set(this,void 0),Ae(this,hr,t,"f"),Ae(this,Di,r,"f"),Ae(this,Vl,i,"f"),Ae(this,dp,s,"f"),Ae(this,Bg,a,"f"),Ae(this,Hl,u,"f"),Ae(this,jl,l,"f"),Ae(this,Wl,c,"f"),Ae(this,fp,d,"f")}get(){return be(this,void 0,void 0,function*(){let[e,t]=yield H(this,ti,"m",pL).call(this);if(e)return t;let r=yield H(this,Bg,"f").call(this);return typeof r=="undefined"?t:(H(this,ti,"m",hL).call(this,r),H(this,ti,"m",gL).call(this),r)})}invalidate(){H(this,hr,"f").removeItem(this.validityKey)}getCached(){return H(this,ti,"m",ET).call(this)[1]}clear(){H(this,hr,"f").removeItem(H(this,Di,"f")),H(this,hr,"f").removeItem(this.validityKey)}};o(QT,"CachedData");var TT=QT;hr=new WeakMap,Di=new WeakMap,Vl=new WeakMap,dp=new WeakMap,Bg=new WeakMap,Hl=new WeakMap,jl=new WeakMap,Wl=new WeakMap,fp=new WeakMap,ti=new WeakSet,hL=o(function(e){let t=H(this,ti,"m",aD).call(this,e);typeof t=="string"?H(this,hr,"f").setItem(H(this,Di,"f"),t):H(this,hr,"f").removeItem(H(this,Di,"f"))},"_CachedData_updateCache"),oD=o(function(e){return H(this,jl,"f")?H(this,Hl,"f").deserialize(e):e},"_CachedData_parseValue"),aD=o(function(e){return H(this,jl,"f")?H(this,Hl,"f").serialize(e):e},"_CachedData_formatValue"),gL=o(function(){if(H(this,Vl,"f")===0){H(this,hr,"f").setItem(this.validityKey,"0");return}let e=(new Date().getTime()+H(this,Vl,"f")).toString();H(this,hr,"f").setItem(this.validityKey,e)},"_CachedData_updateValidity"),pL=o(function(){return be(this,void 0,void 0,function*(){var e;let[t,r]=H(this,ti,"m",ET).call(this);return H(this,dp,"f").call(this)?typeof t=="undefined"?[!1,void 0]:H(this,ti,"m",uD).call(this)?[!1,r]:typeof H(this,Wl,"f")=="function"?[yield H(this,Wl,"f").call(this,r),r]:[!0,r]:(r||(e=H(this,fp,"f"))===null||e===void 0||e.warning({category:"CachedData",message:`[${H(this,Di,"f")}] No value in cache (${r}) and can't fetch new data`}),[!0,r])})},"_CachedData_validateCacheValue"),uD=o(function(){let e=H(this,hr,"f").getItem(this.validityKey),t=parseInt(e!=null?e:"",10);return isNaN(t)||t<0?!0:t>0&&t<=new Date().getTime()},"_CachedData_cacheHasExpired"),ET=o(function(){var e;let t=(e=H(this,hr,"f").getItem(H(this,Di,"f")))!==null&&e!==void 0?e:void 0,r=H(this,ti,"m",oD).call(this,t);return[t,r]},"_CachedData_readCachedValue");var Ug="/api/user-information/v1/claims";function kte(n){return be(this,arguments,void 0,function(e){let{getAccessToken:t,httpClient:r}=e;return(function*(){let i=yield t();if(!i)throw new Error("Missing access token");let s;try{s=yield r.get({url:Ug,headers:{Authorization:i}})}catch(a){throw a instanceof Error?(a.message=`Failed to fetch user claims [${Ug}]: ${a.message}`,a):new Error(`Failed to fetch user claims [${Ug}]: ${a}`)}if(s===void 0)throw new Error(`Couldn't get any response from server while fetching user claims url: ${Ug}`);return s})()})}o(kte,"fetchUserClaims");var Mg="/api/user-information/v1/profiles/me";function Fte(n){return be(this,arguments,void 0,function(e){let{getAccessToken:t,httpClient:r}=e;return(function*(){let i=yield t();if(!i)throw new Error("Missing access token");let s;try{s=yield r.get({url:Mg,headers:{Authorization:i},params:{embed:"UserIdentityProviders"}})}catch(a){throw a instanceof Error?(a.message=`Failed to fetch user info [${Mg}]: ${a.message}`,a):new Error(`Failed to fetch user info [${Mg}]: ${a}`)}if(s===void 0)throw new Error(`Couldn't get any response from server while fetching user info url: ${Mg}`);return s})()})}o(Fte,"fetchUserProfile");function $te(n){let{getAccessToken:e,logger:t,httpClient:r,canFetch:i,key:s="user_info",timespan:a=1e3*60*5,decodeJwt:u=Lte}=n;return new TT({fetch:o(()=>be(this,void 0,void 0,function*(){var l;try{let[c,d,f]=yield Promise.all([Fte({getAccessToken:e,httpClient:r}),kte({getAccessToken:e,httpClient:r}),e()]);if(!f)throw new Error("Missing access token");let h=(l=u({jwtEncoded:f}))===null||l===void 0?void 0:l.idp_id;return Bte({userProfile:c,userClaims:d,idpId:h})}catch(c){t==null||t.error({message:"Failed to load user info",error:c instanceof Error?c:new Error("Unknown error"),category:"UserInfoCache"});return}}),"fetch"),canFetch:i,key:s,timespan:a,logger:t})}o($te,"createUserInfoCache");function Bte(n){let{userProfile:e,userClaims:t,idpId:r}=n;return{email:e.email,name:e.name,picture:e.photoUrl,os_access:{userId:e.id,roles:t.claims}}}o(Bte,"mapToUserInfo");var bT;(function(n){n[n.Internal=0]="Internal",n[n.External=1]="External",n[n.Client=2]="Client"})(bT||(bT={}));var pr=bT,Vg,Hg,jg,fu,hp,Wg,ST,Vte="AuthenticationSynchronizer",Hte=6e4,eb=class eb{constructor(e){let{synchronize:t,logger:r,setTimeoutOverride:i=setTimeout,clearTimeoutOverride:s=clearTimeout,timeout:a,start:u=!0}=e;Vg.add(this),Hg.set(this,void 0),jg.set(this,void 0),fu.set(this,void 0),hp.set(this,void 0),Wg.set(this,void 0),Ae(this,Hg,t,"f"),Ae(this,jg,r,"f"),Ae(this,hp,i,"f"),Ae(this,Wg,s,"f"),Ae(this,fu,a,"f"),u&&H(this,Vg,"m",ST).call(this)}trySynchronize(){return be(this,void 0,void 0,function*(){var e;H(this,fu,"f")&&H(this,Wg,"f").call(this,H(this,fu,"f"));try{yield H(this,Hg,"f").call(this)}catch(t){(e=H(this,jg,"f"))===null||e===void 0||e.error({category:Vte,message:"Error while synchronizing information.",error:t,code:"OS-CLRT-40300"}),H(this,Vg,"m",ST).call(this)}})}};o(eb,"Synchronizer");var AT=eb;Hg=new WeakMap,jg=new WeakMap,fu=new WeakMap,hp=new WeakMap,Wg=new WeakMap,Vg=new WeakSet,ST=o(function(){Ae(this,fu,H(this,hp,"f").call(this,()=>this.trySynchronize(),Hte),"f")},"_Synchronizer_retry");function jte(n){return typeof n=="string"?new Error(n):n instanceof Error?n:new Error("Unknown error")}o(jte,"sanitizeError");var hu,cu,vu,Ur,Ll,xl,Li,mL,vL,cD,yL,gu="authentication-token-handler",lD="[]",tb=class tb{constructor(e){let{authData:t,decodeJwt:r=nd,logger:i,tokenValidator:s=$g}=e;hu.add(this),cu.set(this,void 0),vu.set(this,void 0),Ur.set(this,void 0),Ll.set(this,void 0),xl.set(this,void 0),Li.set(this,void 0),Ae(this,cu,t,"f"),Ae(this,Ll,r,"f"),Ae(this,Li,i,"f"),Ae(this,xl,s,"f")}invalidateAccessToken(e){typeof e=="string"&&e.length>0&&Ae(this,vu,e,"f")}isAccessTokenValid(e,t){return typeof e=="string"&&e!==H(this,vu,"f")&&(t!=null?t:H(this,xl,"f"))({token:e,tokenDecoder:H(this,Ll,"f")})}isRefreshTokenValid(e,t){let r=e!=null?e:H(this,cu,"f").readRefreshToken();return typeof r=="string"&&r!==H(this,Ur,"f")&&(t!=null?t:H(this,xl,"f"))({token:r,tokenDecoder:H(this,Ll,"f")})}refreshToken(e){return be(this,arguments,void 0,function(t){var r=this;let{refreshEndpoint:i,client:s,scope:a,clientId:u,timeoutHandler:l}=t;return(function*(){var c,d,f;r.invalidateAccessToken((c=H(r,cu,"f").readAccessToken())!==null&&c!==void 0?c:"");let h=H(r,cu,"f").readRefreshToken();if(!h)return H(r,Ur,"f")!==lD&&((d=H(r,Li,"f"))===null||d===void 0||d.info({category:gu,message:"No refresh token stored. Could not refresh the tokens.",visibility:pr.Internal}),Ae(r,Ur,lD,"f")),{type:"invalid-state"};if(!r.isRefreshTokenValid(h))return h===H(r,Ur,"f")?{type:"invalid-state"}:{type:"error",error:H(r,hu,"m",mL).call(r,h)};try{let g=yield s.post({url:i,payload:{grant_type:"refresh_token",refresh_token:h,client_id:u,scope:a},timeoutHandler:l});if(g===void 0){let p=new Error("Couldn't get any response from server while refreshing tokens.");throw(f=H(r,Li,"f"))===null||f===void 0||f.error({category:gu,code:"OS-CLRT-40100",error:p,visibility:pr.Internal}),p}return Ae(r,Ur,h,"f"),H(r,hu,"m",yL).call(r,g),{type:"success",token:g}}catch(g){let p=H(r,hu,"m",vL).call(r,g);return p.errorCode!=="OS-CLRT-40112"&&Ae(r,Ur,h,"f"),{type:"error",error:p}}})()})}};o(tb,"TokenHandler");var IT=tb;cu=new WeakMap,vu=new WeakMap,Ur=new WeakMap,Ll=new WeakMap,xl=new WeakMap,Li=new WeakMap,hu=new WeakSet,mL=o(function(e){var t;Ae(this,Ur,e,"f");let r=new ni("OS-CLRT-40103","Refresh token not valid.");return(t=H(this,Li,"f"))===null||t===void 0||t.error({error:r,category:gu,code:r.errorCode}),r},"_TokenHandler_createInvalidTokenError"),vL=o(function(e){var t;let r=jte(e);if(r instanceof ni)return r;let i=H(this,hu,"m",cD).call(this,r),s=`Failed to call refresh token endpoint: ${r.message}`;return(t=H(this,Li,"f"))===null||t===void 0||t.error({error:r,category:gu,code:i,message:s}),new ni(i,s)},"_TokenHandler_createRequestFailedError"),cD=o(function(e){return e instanceof Fn?b1(e)?"OS-CLRT-40112":"OS-CLRT-40100":"OS-CLRT-40112"},"_TokenHandler_calcRefreshTokenErrorCode"),yL=o(function(e){var t,r;e.access_token!==H(this,vu,"f")?Ae(this,vu,void 0,"f"):(t=H(this,Li,"f"))===null||t===void 0||t.warning({category:gu,message:"Access token already invalidated."}),e.refresh_token!==H(this,Ur,"f")?Ae(this,Ur,void 0,"f"):(r=H(this,Li,"f"))===null||r===void 0||r.warning({category:gu,message:"Refresh token already invalidated."})},"_TokenHandler_assertToken");var zT="/moduleservices/users/userinfosync",Wte="/moduleservices/users/registration",Gte="/moduleservices/users/passwordrecovery",zte="/moduleservices/users/updateemail",dD;(function(n){n.Authorization="authorization_endpoint",n.Token="token_endpoint",n.Logout="end_session_endpoint",n.Refresh="token_endpoint",n.UserInfo="userinfo_endpoint"})(dD||(dD={}));var Gl,Ul,Gg,Co,_L,fD,wL,qte="/identity/.well-known/openid-configuration",wt="Authentication",nb=class nb{constructor(e){let{scope:t="",identityEndpoint:r=qte,appUrl:i,appSyncEndpoint:s=zT,authData:a,httpClient:u,decodeJwt:l=nd,logger:c,validator:d=$g,tokenHandler:f=new IT({authData:a,decodeJwt:l,logger:c,tokenValidator:d}),synchronizer:h,userInfo:g,isOnline:p=o(()=>!0,"isOnline"),changeEmailEndpoint:m=zte}=e;Gl.add(this),Ul.set(this,void 0),Gg.set(this,void 0),Co.set(this,void 0),this.scope=t,Ae(this,Ul,r,"f"),this.appUrl=i,this.appSyncEndpoint=s,this.authData=a,this.httpClient=u,this.decodeJwt=l,this.logger=c,this.tokenHandler=f,this.isOnline=p,this.changeEmailEndpoint=m,Ae(this,Gg,h!=null?h:new AT({synchronize:o(()=>this.synchronizeUserInfo(),"synchronize"),logger:c}),"f"),this.userInfo=g!=null?g:$te({canFetch:o(()=>this.isAuthenticated()&&p(),"canFetch"),getAccessToken:o(()=>this.getValidAccessToken(),"getAccessToken"),httpClient:u,logger:c})}getValidAccessToken(){return be(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var i,s;let a=r?e.logger:void 0;if(!e.isOnline())return a==null||a.info({category:wt,message:"Device is offline, using last known access token."}),(i=e.getAccessToken())!==null&&i!==void 0?i:void 0;if(!e.authData.readToken()){a==null||a.info({category:wt,message:"Cannot get access token because there is no token stored."});return}return(t||!e.isAccessTokenValid())&&(a==null||a.debug({category:wt,message:"Refreshing tokens."}),yield e.refreshTokens()),(s=e.getAccessToken())!==null&&s!==void 0?s:void 0})()})}fetchEndpoints(){return be(this,void 0,void 0,function*(){var e,t;let r=this.authData.readEndpoints();if(r)return r;{let i;try{i=yield this.httpClient.get({url:H(this,Ul,"f")})}catch(s){throw(e=this.logger)===null||e===void 0||e.error({category:wt,code:"OS-CLRT-40300",message:`Failed to fetch endpoints from ${H(this,Ul,"f")}`,error:s instanceof Error?s:new Error(`Unknown error: ${s}`)}),s}if(i===void 0){let s=new Error("Couldn't get any response from server while fetching tokens.");throw(t=this.logger)===null||t===void 0||t.error({category:wt,code:"OS-CLRT-40100",error:s}),s}return this.authData.storeEndpoints(i),i}})}getUserId(){var e,t;if(!this.isAuthenticated())return null;let r=this.userInfo.getCached();return(t=(e=r==null?void 0:r.os_access)===null||e===void 0?void 0:e.userId)!==null&&t!==void 0?t:null}isAuthenticated(){let e=this.authData.readToken();return!!(e!=null&&e.access_token)&&!!(e!=null&&e.refresh_token)&&!!(e!=null&&e.id_token)}getAccessToken(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xte,t=this.authData.readToken();return e(t)}isAccessTokenValid(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$g,t=this.getAccessToken();return this.tokenHandler.isAccessTokenValid(t!=null?t:"",e)}isRefreshTokenValid(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$g,t=this.authData.readRefreshToken();return this.tokenHandler.isRefreshTokenValid(t!=null?t:"",e)}refreshTokens(){return H(this,Co,"f")||Ae(this,Co,H(this,Gl,"m",_L).call(this),"f"),H(this,Co,"f")}logout(){return be(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>xr.signOut();return(function*(){var r,i,s;let a=yield e.fetchEndpoints(),u=e.authData.readIdToken();if(e.authData.clearAuthData(),e.userInfo.clear(),!u){(r=e.logger)===null||r===void 0||r.info({category:wt,message:"No id token stored. Logout not completed.",visibility:pr.Internal});return}try{yield t()}catch(c){(i=e.logger)===null||i===void 0||i.error({category:wt,message:"Error calling the auth signout",error:c,code:"OS-CLRT-40108"})}let l={id_token_hint:u};try{yield e.httpClient.post({url:a.end_session_endpoint,payload:l})}catch(c){(s=e.logger)===null||s===void 0||s.error({category:wt,message:"Error calling the logout endpoint",error:c,code:"OS-CLRT-40108"})}})()})}clearAuthenticationData(){Ae(this,Co,void 0,"f"),this.authData.clearAuthData(),this.userInfo.clear()}hasRole(e){var t,r,i;let s=this.userInfo.getCached();return(i=(r=(t=s==null?void 0:s.os_access)===null||t===void 0?void 0:t.roles)===null||r===void 0?void 0:r.includes(e))!==null&&i!==void 0?i:!1}buildUrl(e){return`/${this.appUrl}/${e}`.replace(/\/(\/)+/gm,"/")}getUserSyncUrl(){return this.buildUrl(this.appSyncEndpoint)}storeUserInfo(e){return be(this,void 0,void 0,function*(){var t,r,i;if(!this.tokenHandler.isAccessTokenValid(e.access_token)){let c=new ni("OS-CLRT-40113","Access token provided by the Identity Service is invalid. System clock might be set to the wrong time.");throw(t=this.logger)===null||t===void 0||t.error({category:wt,error:c}),c}let s=this.authData.readToken();this.authData.storeToken(e);let a=this.userInfo.getCached();this.userInfo.invalidate();let u=yield H(this,Gl,"m",wL).call(this);if(u.type==="error"){let c=u.error instanceof Error?u.error.message:"Unknown error";throw new ni("OS-CLRT-40113",c)}let l=(i=(r=u.user)===null||r===void 0?void 0:r.os_access)===null||i===void 0?void 0:i.userId;if(!l)throw new ni("OS-CLRT-40111","User ID is missing.");return(!s||!Mte(a,u.user))&&H(this,Gg,"f").trySynchronize(),l})}synchronizeUserInfo(){return be(this,void 0,void 0,function*(){if(this.isOnline()&&this.isAuthenticated()){let e=yield this.getValidAccessToken();if(!e)throw new Error("No token available to synchronize user info.");yield this.httpClient.post({url:this.getUserSyncUrl(),headers:{Authorization:e}})}})}getUserInfo(){return be(this,void 0,void 0,function*(){var e,t,r;let i=yield this.userInfo.get();return{email:(e=i==null?void 0:i.email)!==null&&e!==void 0?e:"",username:"",name:(t=i==null?void 0:i.name)!==null&&t!==void 0?t:"",pictureUrl:(r=i==null?void 0:i.picture)!==null&&r!==void 0?r:""}})}isAuthEndpoint(e){var t;let[r]=e.split("?"),i=(t=this.authData.readEndpoints())!==null&&t!==void 0?t:{};for(let s of Object.values(i))if(r===s)return!0;return!1}changeEmail(e){return be(this,void 0,void 0,function*(){var t,r,i,s,a,u,l,c,d,f;if(typeof e!="string"||e.trim()==="")throw rn.create({name:Qe.InvalidVerificationCode,message:"Verification code is empty",code:"OS-CLRT-40114"});try{return yield this.httpClient.post({payload:{verificationCode:e,accessToken:(t=this.authData.readAccessToken())!==null&&t!==void 0?t:""},url:this.buildUrl(this.changeEmailEndpoint),contentType:nn.Json,headers:{Authorization:(r=this.getAccessToken())!==null&&r!==void 0?r:""}}),this.userInfo.invalidate(),{success:!0}}catch(h){let g=h,p=(s=(i=g==null?void 0:g.response)===null||i===void 0?void 0:i.errorCode)!==null&&s!==void 0?s:"OS-CLRT-40115",m=(d=(c=(u=(a=g==null?void 0:g.response)===null||a===void 0?void 0:a.detail)!==null&&u!==void 0?u:(l=g==null?void 0:g.response)===null||l===void 0?void 0:l.title)!==null&&c!==void 0?c:g.message)!==null&&d!==void 0?d:"Unknown error";return(f=this.logger)===null||f===void 0||f.error({category:wt,message:m,error:g instanceof Error?g:new Error("Error calling the change email endpoint"),code:p}),{success:!1,errorCode:p,errorMessage:m}}})}};o(nb,"BaseAuth");var gp=nb;Ul=new WeakMap,Gg=new WeakMap,Co=new WeakMap,Gl=new WeakSet,_L=o(function(){return be(this,void 0,void 0,function*(){try{let e=yield this.fetchEndpoints(),t=yield this.tokenHandler.refreshToken({refreshEndpoint:e.token_endpoint,client:this.httpClient,clientId:ed,scope:this.scope});switch(t.type){case"success":yield this.storeUserInfo(t.token);break;case"error":throw t.error;case"invalid-state":this.clearAuthenticationData();break;default:}}catch(e){throw H(this,Gl,"m",fD).call(this,e)&&this.clearAuthenticationData(),e}finally{Ae(this,Co,void 0,"f")}})},"_BaseAuth_refreshTokens"),fD=o(function(e){if(!(e instanceof ni))return!1;switch(e.errorCode){case"OS-CLRT-40112":return!1;default:return!0}},"_BaseAuth_shouldClearAuthData"),wL=o(function(){return be(this,void 0,void 0,function*(){var e;try{let t=yield this.userInfo.get();if(!t)throw this.isAuthenticated()?this.isOnline()?new Error("User info is missing."):new Error("Device is offline, cannot get user info."):new Error("User is not authenticated, cannot get user info.");return{type:"success",user:t}}catch(t){return(e=this.logger)===null||e===void 0||e.error({category:wt,message:"Error getting user info",error:t instanceof Error?t:new Error("Unknown error"),code:"OS-CLRT-40100",visibility:pr.Internal}),{type:"error",error:t}}})},"_BaseAuth_tryGetUserInfo");var zg,rb=class rb extends gp{constructor(e){let{appKey:t,identityProvider:r,appUrl:i,baseUrl:s,region:a,poolId:u,clientId:l,scope:c="",identityEndpoint:d,httpClient:f=new vi({baseUrl:s}),appSyncEndpoint:h=zT,authData:g=new Do,decodeJwt:p=nd,configureAmplify:m=o(z=>td.configure(z),"configureAmplify"),logger:w,validator:E,tokenHandler:_,synchronizer:T,isOnline:R,userInfo:D}=e;var B;if(super({scope:c,identityEndpoint:d,appUrl:i,appSyncEndpoint:h,authData:g,httpClient:f,decodeJwt:p,logger:w,validator:E,tokenHandler:_,synchronizer:T,isOnline:R,userInfo:D}),zg.set(this,void 0),Ae(this,zg,r,"f"),a&&u&&l)try{m({Auth:{region:a,userPoolId:u,userPoolWebClientId:l}})}catch(z){(B=this.logger)===null||B===void 0||B.error({category:wt,message:"Error while configuring Amplify",error:z,code:"OS-CLRT-40110"})}}isExternalUser(){return!0}getLoginUrl(e){return be(this,arguments,void 0,function(t){var r=this;let{redirectUri:i,callbackUrl:s}=t;return(function*(){let a=yield r.fetchEndpoints(),u=new URLSearchParams(s?{callback_url:s}:{}).toString(),l={client_id:ed,scope:r.scope,redirect_uri:u?`${i}?${u}`:i,response_type:"code",kc_idp_hint:H(r,zg,"f")},c=new URLSearchParams(l).toString();return`${a.authorization_endpoint}?${c}`})()})}login(e){return be(this,arguments,void 0,function(t){var r=this;let{redirectUri:i,callbackUrl:s,navigationHandler:a=o(u=>window.location.replace(u),"navigationHandler")}=t;return(function*(){let u=yield r.getLoginUrl({redirectUri:i,callbackUrl:s});a(u)})()})}resumeLogin(e){return be(this,arguments,void 0,function(t){var r=this;let{url:i,redirectUri:s}=t;return(function*(){let a=yield r.fetchEndpoints(),u=new URL(i).searchParams,l=u.get("code"),c=u.get("callback_url"),d=new URLSearchParams(c?{callback_url:c}:{}).toString();if(!l)throw r.authData.clearAuthData(),r.userInfo.clear(),Error(`Missing mandatory parameters to continue the login: authz_code: ${l}`);try{let f=d?`${s}?${d}`:s,h=yield r.requestToken(a.token_endpoint,f,l);yield r.storeUserInfo(h)}catch(f){throw r.authData.clearAuthData(),r.userInfo.clear(),f}return c})()})}requestToken(e,t,r){return be(this,void 0,void 0,function*(){var i;try{let s=yield this.httpClient.post({url:e,payload:{grant_type:"authorization_code",code:r,redirect_uri:t,client_id:ed}});if(s===void 0){let a=new Error("Couldn't get any response from server while getting tokens.");throw(i=this.logger)===null||i===void 0||i.error({category:wt,code:"OS-CLRT-40100",error:a}),a}return s}catch(s){throw rn.create({name:Qe.IdentityTokenEndpointFailed,message:"Error calling the external auth token endpoint",code:"OS-ID-BIZ-40021"})}})}getLogoutUrl(e){return be(this,arguments,void 0,function(t){var r=this;let{redirectUri:i,callbackUrl:s}=t;return(function*(){let a=yield r.fetchEndpoints(),u=r.authData.readIdToken();if(!u)throw new Error("No id token stored. Could not logout.");let l=new URLSearchParams(s?{callback_url:s}:{}).toString(),c={id_token_hint:u,post_logout_redirect_uri:l?`${i}?${l}`:i},d=new URLSearchParams(c).toString();return`${a.end_session_endpoint}?${d}`})()})}resumeLogout(e){return be(this,arguments,void 0,function(t){var r=this;let{url:i,authSignOut:s=o(()=>xr.signOut(),"authSignOut")}=t;return(function*(){var a;let l=new URL(i).searchParams.get("callback_url");try{yield s()}catch(c){throw(a=r.logger)===null||a===void 0||a.error({category:wt,message:"Error calling the external auth signout",error:c,code:"OS-CLRT-40108"}),c}return r.authData.clearAuthData(),r.userInfo.clear(),l?decodeURIComponent(l):null})()})}};o(rb,"ExternalAuth");var CT=rb;zg=new WeakMap;var Qn,Oi,qg,pp,Kg,Yg,mp,vp,RT,EL,TL,bL,SL,hD,OT,AL,gD,Kte={minimumLength:12,upperCaseLetterRequired:!0,lowerCaseLetterRequired:!0,numberRequired:!0,specialCharacterRequired:!0},Yte=["OS-ID-BIZ-40001","OS-ID-BIZ-40051","OS-ID-BIZ-50047","OS-ID-BIZ-40415","OS-ID-BIZ-40052"],Xte=["OS-ID-BIZ-40401"],ib=class ib extends gp{constructor(e){let{appKey:t,identityProvider:r,region:i,poolId:s,clientId:a,appUrl:u,baseUrl:l,scope:c,appSyncEndpoint:d=zT,passwordComplexityPolicy:f=Kte,authData:h=new Do,httpClient:g=new vi({baseUrl:l}),decodeJwt:p=nd,configureAmplify:m=o(q=>td.configure(q),"configureAmplify"),logger:w,persistentStorage:E=localStorage,temporaryStorage:_=sessionStorage,endpointRegistration:T=Wte,endpointResetPass:R=Gte,synchronizer:D,isOnline:B,userInfo:z,tokenHandler:j}=e;var Y;super({authData:h,httpClient:g,appUrl:u,appSyncEndpoint:d,scope:c,decodeJwt:p,logger:w,synchronizer:D,isOnline:B,userInfo:z,tokenHandler:j}),Qn.add(this),Oi.set(this,void 0),qg.set(this,void 0),pp.set(this,void 0),Kg.set(this,void 0),Yg.set(this,void 0),mp.set(this,void 0),vp.set(this,void 0),Ae(this,Kg,E,"f"),Ae(this,Yg,_,"f"),Ae(this,pp,r,"f"),Ae(this,qg,a,"f"),Ae(this,Oi,f,"f"),Ae(this,mp,T,"f"),Ae(this,vp,R,"f");try{m({Auth:{region:i,userPoolId:s,userPoolWebClientId:a}})}catch(q){(Y=this.logger)===null||Y===void 0||Y.error({category:wt,message:"Error while configuring Amplify",error:q,code:"OS-CLRT-40110"})}}login(e){return be(this,arguments,void 0,function(t){var r=this;let{username:i,password:s,newPassword:a,redirectUri:u=`${window.location.protocol}//${window.location.host}/identity`,persistLogin:l=!0,configureAuth:c=o(g=>xr.configure(g),"configureAuth"),authSignIn:d=o((g,p)=>xr.signIn(g,p),"authSignIn"),completeNewPassword:f=o((g,p)=>xr.completeNewPassword(g,p),"completeNewPassword"),changePassword:h=o((g,p,m)=>xr.changePassword(g,p,m),"changePassword")}=t;return(function*(){var g,p,m,w,E;try{if(s===""||i==="")throw rn.create({name:Qe.InvalidCredentials,message:`${i===""?"Username":"Password"} cannot be empty.`,code:"OS-CLRT-40104"});let _=H(r,Qn,"m",SL).call(r,u);c({storage:l?H(r,Kg,"f"):H(r,Yg,"f")});let T=yield r.fetchEndpoints(),R=yield H(r,Qn,"m",TL).call(r,T.authorization_endpoint,_),D=new URL(R).searchParams,B=D.get("code"),z=yield d(i,s);if((z==null?void 0:z.challengeName)==="NEW_PASSWORD_REQUIRED"&&a?yield f(z,a):a&&(yield h(z,s,a)),!B){let Y=z==null?void 0:z.getSignInUserSession();if(!Y){let U=new Error("Couldn't find current user session.");throw(g=r.logger)===null||g===void 0||g.error({category:wt,code:"OS-CLRT-40101",error:U,visibility:pr.Internal}),U}let q=yield r.httpClient.post({url:H(r,Qn,"m",EL).call(r),payload:{clientId:H(r,qg,"f"),idToken:Y.getIdToken().getJwtToken(),accessToken:Y.getAccessToken().getJwtToken(),refreshToken:Y.getRefreshToken().getToken()},contentType:nn.Json});if(q===void 0){let U=new Error("Couldn't get any response from server while exchanging tokens.");throw(p=r.logger)===null||p===void 0||p.error({category:wt,code:"OS-CLRT-40100",error:U}),U}let P=q.authCode,Z=(m=D.get("redirect_uri"))!==null&&m!==void 0?m:"",oe=(w=D.get("state"))!==null&&w!==void 0?w:"",S=yield H(r,Qn,"m",bL).call(r,Z,P,oe);B=(E=new URL(S).searchParams.get("code"))!==null&&E!==void 0?E:""}let j=yield H(r,Qn,"m",AL).call(r,T.token_endpoint,B,_);return yield r.storeUserInfo(j)}catch(_){throw r.authData.clearAuthData(),r.userInfo.clear(),H(r,Qn,"m",RT).call(r,_)}})()})}sendResetPasswordEmail(e){return be(this,arguments,void 0,function(t){let{username:r,authForgotPassword:i=o(s=>xr.forgotPassword(s),"authForgotPassword")}=t;return(function*(){return i(r)})()})}confirmRegistration(e){return be(this,arguments,void 0,function(t){var r=this;let{username:i,password:s,code:a}=t;return(function*(){var u;if(!r.validatePasswordComplexityPolicy(s).isValid)throw rn.create({name:Qe.PasswordComplexityPolicyFailed,message:"Password complexity policy failed.",code:"OS-CLRT-40106"});let c=yield H(r,Qn,"m",OT).call(r,{email:i,verificationCode:a},"REGISTRATION");try{yield r.login({username:i,password:c,newPassword:s})}catch(d){let f=d;throw(u=r.logger)===null||u===void 0||u.error({category:wt,message:"Error confirming user registration",error:f,code:"OS-CLRT-40100",visibility:pr.External}),f.name===Qe.InvalidCredentials||f.name===Qe.TooManyFailedAttempts?rn.create({name:Qe.InvalidToken,message:"Invalid temporary password.",code:"OS-CLRT-40107"}):f}})()})}changePassword(e){return be(this,arguments,void 0,function(t){var r=this;let{username:i,oldPassword:s,newPassword:a,authCurrentAuthenticatedUser:u=o(()=>xr.currentAuthenticatedUser(),"authCurrentAuthenticatedUser"),authChangePassword:l=o((c,d,f)=>xr.changePassword(c,d,f),"authChangePassword")}=t;return(function*(){var c,d,f;let h=null;try{h=yield u()}catch(p){let m=rn.create({name:Qe.InvalidCredentials,message:typeof p=="string"?p:p.message,code:"OS-CLRT-40101"});(c=r.logger)===null||c===void 0||c.error({category:wt,message:"Error in current authenticated user",error:m,code:m.errorCode})}if(!h||i!==((d=h==null?void 0:h.attributes)===null||d===void 0?void 0:d.preferred_username))throw rn.create({name:Qe.InvalidCredentials,message:"Invalid credentials",code:"OS-CLRT-40104"});let g=r.validatePasswordComplexityPolicy(a);if(!a||!g.isValid)throw rn.create({name:Qe.PasswordComplexityPolicyFailed,message:"Password complexity policy failed.",code:"OS-CLRT-40106"});try{yield l(h,s,a)}catch(p){let m=H(r,Qn,"m",RT).call(r,p);throw(f=r.logger)===null||f===void 0||f.error({category:wt,message:"Error changing password",error:m,code:m.errorCode,visibility:pr.External}),m}})()})}finishResetPassword(e){return be(this,arguments,void 0,function(t){var r=this;let{username:i,resetToken:s,newPassword:a,changePassword:u=o((l,c,d)=>this.login({username:l,password:c,newPassword:d}),"changePassword")}=t;return(function*(){var l;let c=r.validatePasswordComplexityPolicy(a);if(!a||!c.isValid)throw rn.create({name:Qe.PasswordComplexityPolicyFailed,message:"Password complexity policy failed.",code:"OS-CLRT-40106"});let d=yield H(r,Qn,"m",OT).call(r,{email:i,verificationCode:s},"RESET_PASSWORD");try{yield u(i,d,a)}catch(f){throw(l=r.logger)===null||l===void 0||l.error({category:wt,message:"Error resetting password",error:f,code:"OS-CLRT-40107",visibility:pr.External}),rn.create({name:Qe.InvalidToken,message:"Invalid password reset token.",code:"OS-CLRT-40107"})}})()})}resetPassword(e){return be(this,arguments,void 0,function(t){var r=this;let{username:i,resetToken:s,newPassword:a,authForgotPassword:u=o((l,c,d)=>xr.forgotPasswordSubmit(l,c,d),"authForgotPassword")}=t;return(function*(){var l;let c=r.validatePasswordComplexityPolicy(a);if(!a||!c.isValid)throw rn.create({name:Qe.PasswordComplexityPolicyFailed,message:"Password complexity policy failed.",code:"OS-CLRT-40106"});try{yield u(i,s,a)}catch(d){throw(l=r.logger)===null||l===void 0||l.error({category:wt,message:"Error resetting password",error:d,code:"OS-CLRT-40107",visibility:pr.External}),rn.create({name:Qe.InvalidToken,message:"Invalid password reset token.",code:"OS-CLRT-40107"})}})()})}getPasswordComplexityPolicy(){return H(this,Oi,"f")}validatePasswordComplexityPolicy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.length<H(this,Oi,"f").minimumLength,r=H(this,Oi,"f").upperCaseLetterRequired&&!/[A-Z]/.test(e),i=H(this,Oi,"f").lowerCaseLetterRequired&&!/[a-z]/.test(e),s=H(this,Oi,"f").numberRequired&&!/\d/.test(e),a=H(this,Oi,"f").specialCharacterRequired&&!/[\^$*.[\]{}()?"!@#%&/\\,><':;|_~`=+\- ]/.test(e);return{isValid:!t&&!r&&!i&&!s&&!s&&!a,missingMinimumLength:t,missingUpperCaseLetter:r,missingLowerCaseLetter:i,missingNumber:s,missingSpecialCharacter:a}}isExternalUser(){return!1}};o(ib,"BuiltinAuth");var PT=ib;Oi=new WeakMap,qg=new WeakMap,pp=new WeakMap,Kg=new WeakMap,Yg=new WeakMap,mp=new WeakMap,vp=new WeakMap,Qn=new WeakSet,RT=o(function(e){var t,r,i;let s=e,a=(t=s.name)!==null&&t!==void 0?t:Qe.UnknownFailure,u=!s.errorCode||s.errorCode.startsWith("OS-CLRT-6")?"OS-CLRT-40100":s.errorCode;return s.name==="NotAuthorizedException"?!((r=s.message)===null||r===void 0)&&r.includes("Incorrect username or password")?(a=Qe.InvalidCredentials,u="OS-CLRT-40104"):!((i=s.message)===null||i===void 0)&&i.includes("Password attempts exceeded")&&(a=Qe.TooManyFailedAttempts,u="OS-CLRT-40105"):s.name==="LimitExceededException"&&(a=Qe.TooManyFailedAttempts,u="OS-CLRT-40105"),rn.create({name:a,message:s.message,code:u})},"_BuiltinAuth_sanitizeError"),EL=o(function(){return"/identityapi/v1alpha1/oidc/store-token"},"_BuiltinAuth_getTokenExchangeUrl"),TL=o(function(e,t){return be(this,void 0,void 0,function*(){let r={client_id:ed,scope:this.scope,redirect_uri:t!=null?t:"",response_type:"code",kc_idp_hint:H(this,pp,"f")};return this.httpClient.getResponseUrl({url:e,params:r})})},"_BuiltinAuth_getRedirectUrl"),bL=o(function(e,t,r){return be(this,void 0,void 0,function*(){let i={code:t,state:r};return this.httpClient.getResponseUrl({url:e,params:i})})},"_BuiltinAuth_getAuthCode"),SL=o(function(e){return e.replace("outsystems://","https://")},"_BuiltinAuth_getSafeRedirectUri"),hD=o(function(e){return e&&Yte.includes(e)?Qe.InvalidToken:e&&Xte.includes(e)?Qe.InvalidCredentials:Qe.UnknownFailure},"_BuiltinAuth_mapErrorCodeToFailureReason"),OT=o(function(e,t){return be(this,void 0,void 0,function*(){var r,i,s,a,u,l,c;try{let d=t==="REGISTRATION"?this.buildUrl(H(this,mp,"f")):this.buildUrl(H(this,vp,"f")),f=yield this.httpClient.post({url:d,payload:e,contentType:nn.Json});if(f===void 0){let h=new Error("Couldn't get any response from server while getting temporary password.");throw(r=this.logger)===null||r===void 0||r.error({category:wt,code:"OS-CLRT-40100",error:h}),h}return f.registrationToken}catch(d){let f=d,h=(i=f.response)===null||i===void 0?void 0:i.detail,g="Error getting temporary password";throw(s=this.logger)===null||s===void 0||s.error({category:wt,error:f,message:`${g}: ${h!=null?h:""}`,visibility:pr.Client}),(a=this.logger)===null||a===void 0||a.error({category:wt,error:new Error(`[${t}]${g}: code = ${(l=(u=f.response)===null||u===void 0?void 0:u.errorCode)!==null&&l!==void 0?l:"UNKNOWN"}`),visibility:pr.Internal}),rn.create({name:H(this,Qn,"m",hD).call(this,(c=f.response)===null||c===void 0?void 0:c.errorCode),message:g})}})},"_BuiltinAuth_getTemporaryPassword"),AL=o(function(e,t,r){return be(this,void 0,void 0,function*(){var i;try{let s=yield this.httpClient.post({url:e,payload:{grant_type:"authorization_code",code:t,client_id:ed,redirect_uri:r}});if(s===void 0){let a=new Error("Couldn't get any response from server while getting tokens.");throw(i=this.logger)===null||i===void 0||i.error({category:wt,code:"OS-CLRT-40100",error:a}),a}return s}catch(s){throw H(this,Qn,"m",gD).call(this,s)}})},"_BuiltinAuth_requestToken"),gD=o(function(e){var t;let r=e instanceof Error?`[Token endpoint] ${e.message}`:"Token endpoint call failed",i=(t=e==null?void 0:e.response)===null||t===void 0?void 0:t.error_description;return i&&(r+=`: ${i}`),rn.create({name:Qe.IdentityTokenEndpointFailed,code:"OS-ID-BIZ-40021",message:r})},"_BuiltinAuth_parseTokenError");var NT;(function(n){n.External="external",n.Builtin="builtin"})(NT||(NT={}));var Kt=NT,fn,zl,xi,lu,Xg,DT,Ml,IL,CL,Jg,RL,sb=class sb{constructor(e){let{info:t,data:r=new Do}=e;fn.add(this),zl.set(this,void 0),xi.set(this,void 0),lu.set(this,""),Ae(this,zl,t,"f"),Ae(this,xi,r,"f")}setAuthInfo(e,t){Ae(this,zl,e,"f"),Ae(this,xi,new Do,"f"),H(this,fn,"m",Jg).call(this,e)!==H(this,lu,"f")&&(Ae(this,lu,"","f"),H(this,xi,"f").clearAuthData()),t&&Ae(this,fn,t,"a",DT)}getBuiltinAuthInfo(){let e=H(this,fn,"m",Ml).call(this);if(H(this,fn,"m",IL).call(this,e))return e}getExternalAuthInfo(e){let t=H(this,fn,"m",Ml).call(this,e,!0);if(H(this,fn,"m",CL).call(this,t))return t}saveConfig(e,t){let r=H(this,fn,"m",RL).call(this,t);r&&H(this,xi,"f").storeCurrentAuthConfig(r),Ae(this,fn,e,"a",DT),Ae(this,lu,H(this,fn,"m",Jg).call(this,t),"f")}getAuthType(){return H(this,fn,"a",Xg)}hasChanges(e,t){if(e&&e!==H(this,fn,"a",Xg))return!0;let r=H(this,fn,"a",Xg)===Kt.Builtin?H(this,fn,"m",Ml).call(this):H(this,fn,"m",Ml).call(this,t,!0);return H(this,lu,"f")!==H(this,fn,"m",Jg).call(this,r)}};o(sb,"ConfigHandler");var LT=sb;zl=new WeakMap,xi=new WeakMap,lu=new WeakMap,fn=new WeakSet,Xg=o(function(){var e;return(e=H(this,xi,"f").readCurrentAuthType())!==null&&e!==void 0?e:void 0},"_ConfigHandler_authType_get"),DT=o(function(e){e&&H(this,xi,"f").storeCurrentAuthType(e)},"_ConfigHandler_authType_set"),Ml=o(function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;var r;let i=e;return t&&typeof i=="undefined"&&(i=(r=H(this,xi,"f").readCurrentAuthConfig())!==null&&r!==void 0?r:void 0),Object.assign(Object.assign({},H(this,zl,"f")),i!=null?i:{})},"_ConfigHandler_getAuthInfo"),IL=o(function(e){return e.region!==void 0&&e.poolId!==void 0&&e.clientId!==void 0&&e.identityProvider!==void 0},"_ConfigHandler_isBuiltinAuthInfo"),CL=o(function(e){return e.clientId!==void 0&&e.identityProvider!==void 0},"_ConfigHandler_isExternalAuthInfo"),Jg=o(function(e){let{identityProvider:t,clientId:r,passwordComplexityPolicy:i,poolId:s,region:a}=e,{lowerCaseLetterRequired:u,minimumLength:l,numberRequired:c,specialCharacterRequired:d,upperCaseLetterRequired:f}=i!=null?i:{},h=`${u}${l}|${c}|${d}|${f}`;return`${t}|${r}|${h}|${s}|${a}`},"_ConfigHandler_buildHash"),RL=o(function(e){let{region:t,poolId:r,clientId:i,identityProvider:s}=e;if(i&&s)return{region:t,poolId:r,clientId:i,identityProvider:s}},"_ConfigHandler_getAuthConfig");var Qr,ql,Kl,Ro,pu,Yl,Ui,Xl,xT,ZE,pD,mD,QE,ob=class ob{constructor(e){let{appKey:t,identityProvider:r,appUrl:i,region:s,poolId:a,clientId:u,scope:l="",passwordComplexityPolicy:c,authData:d=new Do,authInstance:f,logger:h,httpClient:g,configHandler:p=new LT({info:{identityProvider:r,clientId:u,passwordComplexityPolicy:c,poolId:a,region:s,scope:l},data:d}),isOnline:m}=e;Qr.add(this),ql.set(this,void 0),Kl.set(this,void 0),Ro.set(this,void 0),pu.set(this,void 0),Yl.set(this,void 0),Ui.set(this,void 0),Xl.set(this,void 0),Ae(this,ql,t,"f"),Ae(this,Kl,i,"f"),Ae(this,Ro,f,"f"),Ae(this,pu,h,"f"),Ae(this,Yl,g,"f"),Ae(this,Ui,p,"f"),Ae(this,Xl,m,"f")}getInstance(e,t){var r;let i=e!=null?e:H(this,Ui,"f").getAuthType(),s=H(this,Ui,"f").hasChanges(e,t),a=!!(!((r=H(this,Ro,"f"))===null||r===void 0)&&r.isAuthenticated());if(!H(this,Ro,"f")&&i)H(this,Qr,"m",xT).call(this,i,t);else if(!a&&i&&s)H(this,Qr,"m",xT).call(this,i,t);else if(a&&s)throw new Error("Error getting new instance of auth because a user is already authenticated using another mechanism");return H(this,Ro,"f")}updateConfig(e,t){H(this,Ui,"f").setAuthInfo(e,t)}};o(ob,"AuthFactory");var yp=ob;ql=new WeakMap,Kl=new WeakMap,Ro=new WeakMap,pu=new WeakMap,Yl=new WeakMap,Ui=new WeakMap,Xl=new WeakMap,Qr=new WeakSet,xT=o(function(e,t){switch(e){case Kt.External:return H(this,Qr,"m",pD).call(this,t);case Kt.Builtin:return H(this,Qr,"m",mD).call(this);default:throw new Error(`Invalid new auth type: ${e}`)}},"_AuthFactory_createInstance"),ZE=o(function(e,t,r){Ae(this,Ro,e,"f"),H(this,Ui,"f").saveConfig(t,r)},"_AuthFactory_setInstance"),pD=o(function(e){let t=H(this,Ui,"f").getExternalAuthInfo(e);H(this,Qr,"m",QE).call(this,t);let r=new CT({appKey:H(this,ql,"f"),appUrl:H(this,Kl,"f"),scope:t.scope,region:t.region,poolId:t.poolId,clientId:t.clientId,identityProvider:t.identityProvider,logger:H(this,pu,"f"),httpClient:H(this,Yl,"f"),isOnline:H(this,Xl,"f")});H(this,Qr,"m",ZE).call(this,r,Kt.External,t)},"_AuthFactory_createExternalAuth"),mD=o(function(){let e=H(this,Ui,"f").getBuiltinAuthInfo();H(this,Qr,"m",QE).call(this,e);let t=new PT({appKey:H(this,ql,"f"),appUrl:H(this,Kl,"f"),scope:e.scope,region:e.region,poolId:e.poolId,clientId:e.clientId,identityProvider:e.identityProvider,passwordComplexityPolicy:e.passwordComplexityPolicy,logger:H(this,pu,"f"),httpClient:H(this,Yl,"f"),isOnline:H(this,Xl,"f")});H(this,Qr,"m",ZE).call(this,t,Kt.Builtin,e)},"_AuthFactory_createBuiltinAuth"),QE=o(function(e){var t;if(!e){let r=rn.create({name:"Error loading auth configuration",message:"Identity provider configurations missing.",code:"OS-CLRT-40109"});throw(t=H(this,pu,"f"))===null||t===void 0||t.error({category:wt,message:r.message,error:r,code:r.errorCode,visibility:pr.External}),r}},"_AuthFactory_validateAuthInfo");var vD;(function(n){n.Auth_Default="OS-CLRT-40100",n.Auth_No_Login="OS-CLRT-40101",n.Auth_Invalid_Mechanism="OS-CLRT-40102",n.Auth_Invalid_RefreshToken="OS-CLRT-40103",n.Auth_Invalid_Credentials="OS-CLRT-40104",n.Auth_Login_Attempts="OS-CLRT-40105",n.Auth_Password_Policy="OS-CLRT-40106",n.Auth_Invalid_Inputs="OS-CLRT-40107",n.Auth_Logout_Failed="OS-CLRT-40108",n.Auth_No_Configuration="OS-CLRT-40109",n.Auth_Configuration_Failed="OS-CLRT-40110",n.Auth_UserIdMissing="OS-CLRT-40111",n.Auth_RefreshToken_Unavailable="OS-CLRT-40112",n.Auth_FailedToGetUserInfo="OS-CLRT-40113",n.Auth_ChangeEmailEmptyVerificationCode="OS-CLRT-40114",n.Auth_CallingChangeEmail_Failed="OS-CLRT-40115",n.AuthZ_Default="OS-CLRT-40300",n.AuthZ_Screen_No_Roles="OS-CLRT-40301",n.AuthZ_No_Permissions="OS-CLRT-40302",n.AuthZ_Not_Registered="OS-CLRT-40303",n.IdentityTokenFailure="OS-ID-BIZ-40021"})(vD||(vD={}));var rA=new Map,vx="Client Runtime Packages",$p;function iA(n,e){$p=null,rA.set(n,e)}o(iA,"registerPackage");var yx=o(n=>{let{versionsMap:e=rA,packageKey:t}=n;var r;return(r=e==null?void 0:e.get(t))!==null&&r!==void 0?r:null},"getPackageVersion");function Jte(){if(!$p){let n={"Client Runtime Packages":""};rA.forEach((e,t)=>{e&&t&&(n[vx]+=`${t}= ${e};`)}),$p=n}return $p}o(Jte,"toObject$1");var Zte=Object.freeze({__proto__:null,clientRuntimeKey:vx,getPackageVersion:yx,registerPackage:iA,toObject:Jte});function fc(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var u=n.length-1;u>=0;u--)(a=n[u])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}o(fc,"__decorate");function M(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function u(d){try{c(r.next(d))}catch(f){a(f)}}o(u,"fulfilled");function l(d){try{c(r.throw(d))}catch(f){a(f)}}o(l,"rejected");function c(d){d.done?s(d.value):i(d.value).then(u,l)}o(c,"step"),c((r=r.apply(n,e||[])).next())})}o(M,"__awaiter");function ie(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}o(ie,"__classPrivateFieldGet");function lt(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}o(lt,"__classPrivateFieldSet");var me;(function(n){n.CustomError=function(J){let W=Error.call(this,J);typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(W,this.constructor.prototype):W.__proto__=this.constructor.prototype,(!("stack"in this)||this.stack==="")&&(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=W.stack)},n.CustomError.prototype=Error.prototype;let j=class j extends n.CustomError{constructor(W,ne,_e,we){super(W!=null?W:""),this.extraStack=ne,this.message=W!=null?W:"",this.name="Exception",this.errorCode=_e,this.category=we}};o(j,"Exception");let e=j;n.Exception=e;let Y=class Y extends e{constructor(W,ne,_e,we){super(ne,_e,we),this.specificType=W,this.name=W}};o(Y,"ServerException");let t=Y;n.ServerException=t;let q=class q extends e{constructor(W,ne,_e,we){super(ne,_e,we),this.specificType=W,this.name=W}};o(q,"DataBaseException");let r=q;n.DataBaseException=r;let P=class P extends r{constructor(W,ne,_e){super("OpenDatabaseException",W,ne,_e)}};o(P,"OpenDatabaseException");let i=P;n.OpenDatabaseException=i;let Z=class Z extends e{constructor(W,ne,_e,we){super(W,ne,_e,we),this.name="CommunicationException"}};o(Z,"CommunicationException");let s=Z;n.CommunicationException=s;let oe=class oe extends e{constructor(W,ne){super(W,ne),this.name="NumberOverflowException"}valueOf(){return this.name+": "+this.message}};o(oe,"NumberOverflowException");let a=oe;n.NumberOverflowException=a;let S=class S extends e{constructor(W,ne){super(W,ne),this.name="InvalidJavascriptType"}valueOf(){return this.name+": "+this.message}};o(S,"InvalidJavascriptType");let u=S;n.InvalidJavascriptType=u;let K=class K extends e{constructor(W,ne,_e){super(W,ne,_e),this.name="SecurityException"}};o(K,"SecurityException");let l=K;n.SecurityException=l;let U=class U extends l{constructor(W,ne,_e){super(W,ne,_e),this.name="InvalidLoginException"}};o(U,"InvalidLoginException");let c=U;n.InvalidLoginException=c;let Oe=class Oe extends l{constructor(W,ne,_e,we){super(ne,_e,we),this.specificType=W,this.name=W}};o(Oe,"NotRegisteredException");let d=Oe;n.NotRegisteredException=d;let Ye=class Ye extends e{constructor(W,ne){super(W,ne),this.name="SystemException"}};o(Ye,"SystemException");let f=Ye;n.SystemException=f;let Xe=class Xe extends f{constructor(W,ne){super(W,ne),this.name="IgnorableSystemException"}};o(Xe,"IgnorableSystemException");let h=Xe;n.IgnorableSystemException=h;let de=class de extends h{constructor(W,ne){super(W,ne),this.name="ViewHasChangedException"}};o(de,"ViewHasChangedException");let g=de;n.ViewHasChangedException=g;let N=class N extends h{constructor(W,ne){super(W,ne),this.name="OutOfContextException"}};o(N,"OutOfContextException");let p=N;n.OutOfContextException=p;let L=class L extends h{constructor(W,ne){super(W,ne),this.name="RedirectOccurredException"}};o(L,"RedirectOccurredException");let m=L;n.RedirectOccurredException=m;let x=class x extends h{constructor(W,ne){super(W,ne),this.name="UnhandledOrIgnoredErrorInEventException"}get handleErrorResult(){return this._handleErrorResult}static create(W,ne,_e){let we=new x(ne,_e);return we._handleErrorResult=W,we}static ignore(W){if(!jr(W,x))throw W}};o(x,"UnhandledOrIgnoredErrorInEventException");let w=x;n.UnhandledOrIgnoredErrorInEventException=w;let ve=class ve extends h{constructor(W,ne){super(W,ne),this.name="AbortedRequestException"}};o(ve,"AbortedRequestException");let E=ve;n.AbortedRequestException=E;let Ee=class Ee extends f{constructor(W,ne){super(W,ne),this.name="ApplicationBackendUnavailableException"}};o(Ee,"ApplicationBackendUnavailableException");let _=Ee;n.ApplicationBackendUnavailableException=_;let Me=class Me extends f{constructor(W,ne){super(W,ne),this.name="LicensingException"}};o(Me,"LicensingException");let T=Me;n.LicensingException=T;let tt=class tt extends f{constructor(W,ne){super(W,ne),this.name="IncompatibleProducerException"}};o(tt,"IncompatibleProducerException");let R=tt;n.IncompatibleProducerException=R;let Le=class Le extends h{constructor(W,ne){super(W,ne),this.name="ControllerDisposedException"}};o(Le,"ControllerDisposedException");let D=Le;n.ControllerDisposedException=D;let fe=class fe extends e{constructor(W,ne,_e){super(W,ne,_e),this.name="AbortActivityChangeException"}};o(fe,"AbortActivityChangeException");let B=fe;n.AbortActivityChangeException=B;let $=class $ extends e{constructor(W,ne,_e,we,Ie){super(ne,_e,we,Ie),this.specificType=W,this.name=W}};o($,"UserException");let z=$;n.UserException=z})(me||(me={}));function jr(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return e===me.Exception?!0:n instanceof e?t!==""?n.specificType?n.specificType===t:!1:!0:!1}o(jr,"isInstanceOf");function Bs(n){if(n===void 0)return"";if(n instanceof Error)return n.message;{let e=n.toString();return e==="[object SQLError]"?n.message.toString():e}}o(Bs,"getMessage");function Ki(n){return(n.extraStack!==void 0?n.extraStack+`\r
 `:"")+(n.stack||"")||""}o(Ki,"getStack");function _x(n){var e,t,r;return{name:n.name,message:Bs(n),stack:Ki(n),extraStack:(e=n.extraStack)!==null&&e!==void 0?e:void 0,errorCode:(t=n.errorCode)!==null&&t!==void 0?t:"OS-CLRT-00000",category:(r=n.category)!==null&&r!==void 0?r:void 0}}o(_x,"getExceptionInfo");function wx(n){return n.name?n.specificType?new me[n.name](n.specificType,n.message,n.extraStack,n.errorCode,n.category):new me[n.name](n.message,n.extraStack,n.errorCode,n.category):new me.Exception(n.message,n.extraStack,n.errorCode,n.category)}o(wx,"getException");function sA(n){return jr(n,me.SystemException)}o(sA,"isSystem");function oA(n){return jr(n,me.LicensingException)}o(oA,"isApplicationOffline");var Qte=Object.freeze({__proto__:null,get Exceptions(){return me},getException:wx,getExceptionInfo:_x,getMessage:Bs,getStack:Ki,isApplicationOffline:oA,isInstanceOf:jr,isSystem:sA}),OL="Injector",aA={},Fs={};function uA(n,e){try{ee(OL,`Registering ${n} service`);let t=e();return aA[n]=t,n in Fs&&Fs[n].forEach(r=>r(n,t)),!0}catch(t){return it(OL,`Failed to initialize ${n} service: ${t}`),!1}}o(uA,"register");function Ex(n){delete aA[n]}o(Ex,"unregister");function Tx(n,e){n in Fs?Fs[n].push(e):Fs[n]=[e]}o(Tx,"addRegistrationListener");function bx(n,e){n in Fs&&(Fs[n]=Fs[n].filter(t=>t!==e))}o(bx,"removeRegistrationListener");function hc(n){return aA[n]}o(hc,"resolve$1");var pe={register:uA,unregister:Ex,resolve:hc,addRegistrationListener:Tx,removeRegistrationListener:bx},ene=Object.freeze({__proto__:null,addRegistrationListener:Tx,default:pe,register:uA,removeRegistrationListener:bx,resolve:hc,unregister:Ex}),X;(function(n){n.DeviceHelperClassProvider="DeviceHelperClassProvider",n.ClientVariablesService="ClientVariablesService",n.TranslationsService="TranslationsService",n.LocaleService="LocaleService",n.EntityService="EntityService",n.GlobalExceptionHandler="GlobalExceptionHandler",n.SettingsManager="SettingsManager",n.AuthConfigsManager="AuthConfigsManager",n.Auth="Auth",n.HttpClient="HttpClient",n.UnauthenticatedHttpClient="UnauthenticatedHttpClient",n.DebuggerHttpClient="DebuggerHttpClient",n.NonDebuggerHttpClient="NonDebuggerHttpClient",n.LoggerHttpClient="LoggerHttpClient",n.NativeStatus="NativeStatus",n.LifecycleEventsManager="LifecycleEventsManager",n.Debugger="Debugger",n.InstrumentationFactory="InstrumentationFactory",n.BinaryUrlCache="BinaryUrlCache",n.OfflineDataSync="OfflineDataSync"})(X||(X={}));var vv=o((n,e)=>!!n&&!!e,"isMethodEnabled"),tne=o(function(){let{instrumentationFactory:n=pe.resolve(X.InstrumentationFactory)}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vv(n,n==null?void 0:n.logDebug)},"isDebugEnabled$1"),ee=o(function(n,e,t,r){for(var i=arguments.length,s=new Array(i>4?i-4:0),a=4;a<i;a++)s[a-4]=arguments[a];return M(void 0,[n,e,t,r,...s],void 0,function(u,l,c,d){let f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:pe.resolve(X.InstrumentationFactory);return(function*(){let h=sne(u),g=PL(l);yv(f,f==null?void 0:f.logDebug,h!=null?h:"",g!=null?g:"")||(yield f==null?void 0:f.logDebug({category:h,message:PL(l),visibility:c,attributes:d}))})()})},"debug$1"),nne=o(function(){let{instrumentationFactory:n=pe.resolve(X.InstrumentationFactory)}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vv(n,n==null?void 0:n.logInfo)},"isLogEnabled"),nr=o(function(n,e,t,r){for(var i=arguments.length,s=new Array(i>4?i-4:0),a=4;a<i;a++)s[a-4]=arguments[a];return M(void 0,[n,e,t,r,...s],void 0,function(u,l,c,d){let f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:pe.resolve(X.InstrumentationFactory);return(function*(){yv(f,f==null?void 0:f.logInfo,u,l)||(yield f==null?void 0:f.logInfo({category:u,message:l,visibility:c,attributes:d}))})()})},"log$1"),rne=o(function(){let{instrumentationFactory:n=pe.resolve(X.InstrumentationFactory)}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vv(n,n==null?void 0:n.logWarning)},"isWarningEnabled"),it=o(function(n,e,t,r){for(var i=arguments.length,s=new Array(i>4?i-4:0),a=4;a<i;a++)s[a-4]=arguments[a];return M(void 0,[n,e,t,r,...s],void 0,function(u,l,c,d){let f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:pe.resolve(X.InstrumentationFactory);return(function*(){yv(f,f==null?void 0:f.logWarning,u,l)||(yield f==null?void 0:f.logWarning({category:u,message:l,visibility:c,attributes:d}))})()})},"warning"),ine=o(function(){let{instrumentationFactory:n=pe.resolve(X.InstrumentationFactory)}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vv(n,n==null?void 0:n.logError)},"isErrorEnabled"),De=o(function(n,e,t,r,i,s){for(var a=arguments.length,u=new Array(a>6?a-6:0),l=6;l<a;l++)u[l-6]=arguments[l];return M(void 0,[n,e,t,r,i,s,...u],void 0,function(c,d,f,h,g,p){let m=arguments.length>6&&arguments[6]!==void 0?arguments[6]:pe.resolve(X.InstrumentationFactory);return(function*(){var w;let{error:E,message:_}=one(d,h);if(!yv(m,m==null?void 0:m.logError,c,_!=null?_:"")){let D=(f==="OS-CLRT-00000"||typeof f=="undefined"||f===null)&&(w=E.errorCode)!==null&&w!==void 0?w:f;c=c!=null?c:E.category,jr(E,me.UserException)&&(g=Re.Client),yield m==null?void 0:m.logError({category:c,message:_,error:E,errorCode:D,visibility:g,attributes:p})}})()})},"error"),yv=o((n,e,t,r)=>(!n&&or.isEnabled(Rr.NoInstrumentationFactoryLogs)?console.warn(`No instrumentation factory: ${t} - ${r}`):!e&&or.isEnabled(Rr.NoInstrumentationFactoryLogs)&&console.warn(`Factory function not defined: ${t} - ${r}`),!n||!e),"noInstrumentationFactoryLog"),cA=o(function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return M(void 0,[...e],void 0,function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pe.resolve(X.InstrumentationFactory);return(function*(){yield r==null?void 0:r.flushInstrumentationData()})()})},"flush"),Sx=o(function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return M(void 0,[...e],void 0,function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pe.resolve(X.InstrumentationFactory);return(function*(){yield r==null?void 0:r.flushLogs()})()})},"flushLogs"),Ax=o(function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pe.resolve(X.InstrumentationFactory);e==null||e.setLogLevel(n)},"setLogLevel");function Ix(n,e,t,r,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:pe.resolve(X.InstrumentationFactory);return s?s.startActiveSpan(n,e,t,r,i):e(void 0)}o(Ix,"startActiveSpan");function Cx(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pe.resolve(X.InstrumentationFactory),e=n==null?void 0:n.getActiveSpan();e==null||e.setAttribute(Dr.IsNonAggregable,"true")}o(Cx,"setActiveSpanAsNonAggregable");function lA(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:pe.resolve(X.InstrumentationFactory);return i==null?void 0:i.startSpan(n,e,t,r)}o(lA,"startSpan");var sne=o(n=>{if(n){if(typeof n=="string")return n;{let e=n.constructor.name;return e==="Function"?n.name:e}}},"buildCategory"),PL=o(n=>{if(n)return typeof n=="string"?n:n()},"buildMessage"),one=o((n,e)=>{let t=e!=null?e:typeof n=="string"?new Error(n):n,r=e&&typeof n=="string"?n:void 0;return t.message===r&&(r=void 0),{error:t,message:r}},"handleDuplicatedErrorMessages"),gc=o(n=>{let{category:e,errorCode:t,clientMessage:r,internalMessage:i,instrumentationFactory:s=pe.resolve(X.InstrumentationFactory),errorObj:a,attributes:u}=n;return Promise.all([De(e,r,t,a,Re.Client,u,s),De(e,i,t,void 0,Re.Internal,u,s)])},"clientError"),Rx=Object.freeze({__proto__:null,clientError:gc,debug:ee,error:De,flush:cA,flushLogs:Sx,isDebugEnabled:tne,isErrorEnabled:ine,isLogEnabled:nne,isWarningEnabled:rne,log:nr,setActiveSpanAsNonAggregable:Cx,setLogLevel:Ax,startActiveSpan:Ix,startSpan:lA,warning:it}),sm;(function(n){n[n.None=0]="None",n[n.Default=1]="Default",n[n.Fade=2]="Fade",n[n.SlideFromLeft=3]="SlideFromLeft",n[n.SlideFromRight=4]="SlideFromRight",n[n.SlideFromBottom=5]="SlideFromBottom",n[n.SlideFromTop=6]="SlideFromTop"})(sm||(sm={}));var ane=Object.freeze({__proto__:null,get TransitionAnimation(){return sm}}),si=sm,oI=class oI{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";this.name=e}};o(oI,"Transition");var Jt=oI,une=new Jt,Ab=new Jt("fade"),Ib=new Jt("slide-from-left"),Cb=new Jt("slide-from-right"),Rb=new Jt("slide-from-bottom"),Ob=new Jt("slide-from-top"),Xd=new Jt;function Ox(n){Xd=n}o(Ox,"setDefaultTransition");function cne(n){return new Jt(n?n.name:"")}o(cne,"sanitizeTransition");function _v(n,e){if(typeof n=="string")return new Jt(n);switch(n){case si.None:return une;case si.Fade:return Ab;case si.SlideFromLeft:return Ib;case si.SlideFromRight:return Cb;case si.SlideFromBottom:return Rb;case si.SlideFromTop:return Ob;case si.Default:return Xd;default:return e}}o(_v,"createTransition");function lne(n){if(!(n!=null&&n.name))return new Jt("");switch(n.name){case Ab.name:return new Jt(Ab.name);case Rb.name:return new Jt(Ob.name);case Ib.name:return new Jt(Cb.name);case Cb.name:return new Jt(Ib.name);case Ob.name:return new Jt(Rb.name);default:return new Jt(n.name+"-back")}}o(lne,"reverseTransition");var dne=Object.freeze({__proto__:null,get Default(){return Xd},Transition:Jt,TransitionAnimation:si,createTransition:_v,reverseTransition:lne,sanitizeTransition:cne,setDefaultTransition:Ox}),$i="",fne="ApplicationInfo",st={applicationKey:$i,applicationName:$i,userProviderName:$i,debugEnabled:!1,debugUseWebSockets:!1,homeModuleName:$i,homeModuleKey:$i,modules:{},serverRequestTimeoutOverrideInSeconds:void 0,isWeb:!1,frontendBuildWorkerVersion:$i,clientRuntimeVersion:$i,appVersion:"",useBaseTag:!1};function Px(n){st=n}o(Px,"setApplicationDefinition");function zs(){return st.applicationKey}o(zs,"getApplicationKey");function wv(){return st.applicationName}o(wv,"getApplicationName");function Pb(){var n;return(n=st.databaseName)!==null&&n!==void 0?n:""}o(Pb,"getDatabaseName");function Nx(n){st.modules=n}o(Nx,"setModules");function Dx(){var n;return(n=st.modules)!==null&&n!==void 0?n:{}}o(Dx,"getModules");function Lx(n){let e=st.modules;return!(e==null?void 0:e[n])&&e&&(e[n]={moduleName:null,homeScreenName:null,splashScreenName:null,screens:[],staticEntities:{}}),e==null?void 0:e[n]}o(Lx,"getModuleFromKey");function xx(n){return n!=null&&n.homeScreenName?dA(n,n.homeScreenName):n!=null&&n.screens&&n.screens.length>0?n.screens[0]:null}o(xx,"getHomeScreen");function Ux(){return st.clientEntitiesModuleImporter}o(Ux,"getClientEntitiesModuleImporter");function Mx(n){st.databaseName=n}o(Mx,"setDatabaseName");function Gn(){return st.homeModuleName}o(Gn,"getHomeModuleName");function kx(){return st.homeModuleKey}o(kx,"getHomeModuleKey");function Ev(){if(st.homeModuleName&&st.modules){let n=st.modules[st.homeModuleKey];return n||null}return null}o(Ev,"getHomeModuleDefinition");function dA(n,e){for(let t of n.screens)if(t.screenName===e)return t;return null}o(dA,"getScreenDefinitionFromScreenName");function hne(){let n=Ev(),e=xx(n);return e?`/${n==null?void 0:n.moduleName}/${e.screenUrl}`:null}o(hne,"getDefaultModuleHomeScreenURL");function fA(){return st.userProviderName}o(fA,"getUserProviderName");function Fx(){var n;return(n=st.debugEnabled)!==null&&n!==void 0?n:!1}o(Fx,"isDebugEnabled");function $x(){var n;return(n=st.debugUseWebSockets)!==null&&n!==void 0?n:!1}o($x,"debugUseWebSockets");function Bx(){return st.homeModuleControllerImporter}o(Bx,"getHomeModuleControllerImporter");function Vx(){return st.homeModuleLanguageResourcesImporter}o(Vx,"getHomeModuleLanguageResourcesImporter");function Hx(){return st.serverRequestTimeoutOverrideInSeconds}o(Hx,"getServerRequestTimeoutOverrideInSeconds");function jx(n){st.serverRequestTimeoutOverrideInSeconds=n}o(jx,"setServerRequestTimeoutOverrideInSeconds");function Wx(){var n;let e=si[(n=st.defaultTransition)!==null&&n!==void 0?n:si.None];return _v(e)}o(Wx,"getDefaultTransition");function hA(){return st.errorPageConfig}o(hA,"getErrorPageConfig");function Jd(){var n;return(n=st.isWeb)!==null&&n!==void 0?n:!1}o(Jd,"isWebApplication");function Gx(){var n;return(n=st.frontendBuildWorkerVersion)!==null&&n!==void 0?n:$i}o(Gx,"getFrontendBuildWorkerVersion");function zx(){var n;return(n=st.clientRuntimeVersion)!==null&&n!==void 0?n:$i}o(zx,"getClientRuntimeVersion");function gne(n){var e,t;let r=(e=st.modules)!==null&&e!==void 0?e:{};return((t=Object.keys(r).map(s=>r[s]).filter(s=>s.moduleName===n)[0])===null||t===void 0?void 0:t.ownerAppKey)===zs()}o(gne,"moduleBelongsToApp");function Dt(){let{applicationHomeModule:n=Gn,useBaseTagFunc:e=Kx}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var t,r;let i="",s=typeof window!="undefined"?window:globalThis;if(e()){let a=document.querySelector("base"),u=a==null?void 0:a.getAttribute("href");if(u)return new URL(u).pathname;it(fne,"No <base> tag found in document head. Deriving base path from current URL."),i=s.location.pathname.substring(0,s.location.pathname.lastIndexOf("/")+1)}else i=(r=(t=s.OutSystemsApp)===null||t===void 0?void 0:t.basePath)!==null&&r!==void 0?r:n();return`/${i}/`.replace(/\/(\/)+/gm,"/")}o(Dt,"getBasePath");function gA(){let{windowLocation:n=window.location,applicationHomeModule:e=Gn}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return`${n.protocol}//${n.host}${Dt({applicationHomeModule:e})}`}o(gA,"getAppUrl");function pne(){return st.screensDefinition}o(pne,"getScreensDefinition");function qx(){return st.appVersion}o(qx,"getAppVersion");function pA(){return st.syncConfiguration}o(pA,"getSyncConfiguration");function Kx(){var n;return(n=st.useBaseTag)!==null&&n!==void 0?n:!1}o(Kx,"useBaseTag");var mne=Object.freeze({__proto__:null,debugUseWebSockets:$x,getAppUrl:gA,getAppVersion:qx,getApplicationKey:zs,getApplicationName:wv,getBasePath:Dt,getClientEntitiesModuleImporter:Ux,getClientRuntimeVersion:zx,getDatabaseName:Pb,getDefaultModuleHomeScreenURL:hne,getDefaultTransition:Wx,getErrorPageConfig:hA,getFrontendBuildWorkerVersion:Gx,getHomeModuleControllerImporter:Bx,getHomeModuleDefinition:Ev,getHomeModuleKey:kx,getHomeModuleLanguageResourcesImporter:Vx,getHomeModuleName:Gn,getHomeScreen:xx,getModuleFromKey:Lx,getModules:Dx,getScreenDefinitionFromScreenName:dA,getScreensDefinition:pne,getServerRequestTimeoutOverrideInSeconds:Hx,getSyncConfiguration:pA,getUserProviderName:fA,isDebugEnabled:Fx,isWebApplication:Jd,moduleBelongsToApp:gne,setApplicationDefinition:Px,setDatabaseName:Mx,setModules:Nx,setServerRequestTimeoutOverrideInSeconds:jx,useBaseTag:Kx}),Nb;(function(n){n[n.Persistent=0]="Persistent",n[n.Session=1]="Session"})(Nb||(Nb={}));var on=Nb,aI=class aI{get length(){return Object.keys(this.storageObj).length}clear(){this.storageObj={}}getItem(e){return this.storageObj.hasOwnProperty(e)?this.storageObj[e]:null}key(e){let t=Object.keys(this.storageObj);return e<t.length?t[e]:null}removeItem(e){this.storageObj.hasOwnProperty(e)&&delete this.storageObj[e]}setItem(e,t){this.storageObj[e]=t}constructor(e){if(this.storageObj={},e){let t=0,r=e.key(t);for(;r!==null;)this.storageObj[r]=e.getItem(r),r=e.key(++t)}}};o(aI,"InMemoryStorage");var Xo=aI,om="$OS_",Yx="OS";function Xx(){return Yx}o(Xx,"getDefaultStorageNamespace");function Jx(n){Yx=n}o(Jx,"setDefaultStorageNamespace");var Zx=typeof window=="undefined"?void 0:window.localStorage,Qx=typeof window=="undefined"?void 0:window.sessionStorage,mA=o(n=>n===on.Persistent?Zx:Qx,"getBuiltInStorage"),dd=eU(on.Persistent)?mA(on.Persistent):new Xo,fd=eU(on.Session)?mA(on.Session):new Xo;function eU(n){let e=om+"test",t="1";try{let r=mA(n);r.setItem(e,t);let i=r.getItem(e)===t;return r.removeItem(e),i}catch(r){return!1}}o(eU,"isSpecificStorageAvailable");function tU(){return dd}o(tU,"getPersistentStorage");function nU(){return fd}o(nU,"getSessionStorage");function vne(n){dd=n}o(vne,"setCustomPersistentStorage");function yne(n){fd=n}o(yne,"setCustomSessionStorage");function _ne(n){return n===on.Persistent&&dd!==Zx?(console.warn("The localStorage is full... Proceding with a static Javascript object"),dd=new Xo(dd),!0):n===on.Session&&fd!==Qx?(console.warn("The sessionStorage is full... Proceding with a static Javascript object"),fd=new Xo(fd),!0):!1}o(_ne,"tryExpandStorage");var NL=Object.freeze(Object()),uI=class uI{constructor(e,t,r,i){this.storageType=e,this.key=t,this.defaultValue=r,this.getStorageName=()=>Xx(),this.clearCache(),i&&(this.getStorageName=i)}get(){return this.getValue()}set(e){this.setValueInStorage(e)}remove(){this.storage.removeItem(this.storageKey),this.clearCache()}isDefined(){let e=this.storage.getItem(this.storageKey);return e!=null&&e!=="undefined"}get storageKey(){return om+this.getStorageName()+"$"+this.key}get storage(){return this.storageType===on.Persistent?tU():nU()}getValue(){return this.cachedValue===NL&&(this.cachedValue=this.getValueFromStorage()),this.cachedValue}getValueFromStorage(){let e=this.storage.getItem(this.storageKey);return e===null?this.defaultValue:e==="undefined"||e===void 0?void 0:JSON.parse(e)}setValueInStorage(e){let t=this.storageKey,r=JSON.stringify(e),i=this.storage;if(!(i!=null&&i.setItem))throw Error("The storage object for "+this.key+" is invalid.");try{i.setItem(t,r),this.cachedValue=e}catch(s){if(_ne(this.storageType))this.storage.setItem(t,r);else throw s}}clearCache(){this.cachedValue=NL}};o(uI,"StorageObject");var Er=uI,wne=Object.freeze({__proto__:null,DummyStorage:Xo,StorageObject:Er,StorageType:on,getDefaultStorageNamespace:Xx,getPersistentStorage:tU,getSessionStorage:nU,setCustomPersistentStorage:vne,setCustomSessionStorage:yne,setDefaultStorageNamespace:Jx}),cI=class cI{constructor(e){this._device=e}get device(){return this._device}};o(cI,"ClientInfo");var am=cI,lI=class lI{constructor(e,t,r,i,s,a,u,l){this._platform=e,this._version=t,this._manufacturer=r,this._model=i,this._uuid=s,this._serial=a,this._cordova=u,this._isVirtual=l}get platform(){return this._platform}get version(){return this._version}get manufacturer(){return this._manufacturer}get model(){return this._model}get uuid(){return this._uuid}get serial(){return this._serial}get cordova(){return this._cordova}get isVirtual(){return this._isVirtual}};o(lI,"DeviceInfo");var um=lI,Db;(function(n){function e(u){let l=t(u);if(l)return JSON.stringify(l)}o(e,"serializeClientInfo"),n.serializeClientInfo=e;function t(u){if(u)return{device:u.device?r(u.device):void 0}}o(t,"clientInfoToObject");function r(u){if(u)return{platform:u.platform,version:u.version,manufacturer:u.manufacturer,model:u.model,uuid:u.uuid,serial:u.serial,cordova:u.cordova,isVirtual:u.isVirtual}}o(r,"deviceInfoToObject");function i(u){let l;try{l=JSON.parse(u)}catch(c){}if(l)return s(l)}o(i,"deserializeClientInfo"),n.deserializeClientInfo=i;function s(u){if(u)return new am(a(u.device))}o(s,"objectToClientInfo");function a(u){if(u)return new um(typeof u.platform=="string"?u.platform:void 0,typeof u.version=="string"?u.version:void 0,typeof u.manufacturer=="string"?u.manufacturer:void 0,typeof u.model=="string"?u.model:void 0,typeof u.uuid=="string"?u.uuid:void 0,typeof u.serial=="string"?u.serial:void 0,typeof u.cordova=="string"?u.cordova:void 0,typeof u.isVirtual=="boolean"?u.isVirtual:void 0)}o(a,"objectToDeviceInfo")})(Db||(Db={}));var Ene=new Er(on.Persistent,"ClientInfo");function Tne(){let n=window.device;if(n){let e=new am(new um(n.platform,n.version,n.manufacturer,n.model,n.uuid,n.serial,n.cordova,n.isVirtual));Ene.set(Db.serializeClientInfo(e))}}o(Tne,"setClientInfo");function bne(n){for(var e=[],t=0;t<n.length;){var r=n[t];if(r==="*"||r==="+"||r==="?"){e.push({type:"MODIFIER",index:t,value:n[t++]});continue}if(r==="\\"){e.push({type:"ESCAPED_CHAR",index:t++,value:n[t++]});continue}if(r==="{"){e.push({type:"OPEN",index:t,value:n[t++]});continue}if(r==="}"){e.push({type:"CLOSE",index:t,value:n[t++]});continue}if(r===":"){for(var i="",s=t+1;s<n.length;){var a=n.charCodeAt(s);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||a===95){i+=n[s++];continue}break}if(!i)throw new TypeError("Missing parameter name at ".concat(t));e.push({type:"NAME",index:t,value:i}),t=s;continue}if(r==="("){var u=1,l="",s=t+1;if(n[s]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<n.length;){if(n[s]==="\\"){l+=n[s++]+n[s++];continue}if(n[s]===")"){if(u--,u===0){s++;break}}else if(n[s]==="("&&(u++,n[s+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(s));l+=n[s++]}if(u)throw new TypeError("Unbalanced pattern at ".concat(t));if(!l)throw new TypeError("Missing pattern at ".concat(t));e.push({type:"PATTERN",index:t,value:l}),t=s;continue}e.push({type:"CHAR",index:t,value:n[t++]})}return e.push({type:"END",index:t,value:""}),e}o(bne,"lexer");function Tv(n,e){e===void 0&&(e={});for(var t=bne(n),r=e.prefixes,i=r===void 0?"./":r,s=e.delimiter,a=s===void 0?"/#?":s,u=[],l=0,c=0,d="",f=o(function(Y){if(c<t.length&&t[c].type===Y)return t[c++].value},"tryConsume"),h=o(function(Y){var q=f(Y);if(q!==void 0)return q;var P=t[c],Z=P.type,oe=P.index;throw new TypeError("Unexpected ".concat(Z," at ").concat(oe,", expected ").concat(Y))},"mustConsume"),g=o(function(){for(var Y="",q;q=f("CHAR")||f("ESCAPED_CHAR");)Y+=q;return Y},"consumeText"),p=o(function(Y){for(var q=0,P=a;q<P.length;q++){var Z=P[q];if(Y.indexOf(Z)>-1)return!0}return!1},"isSafe"),m=o(function(Y){var q=u[u.length-1],P=Y||(q&&typeof q=="string"?q:"");if(q&&!P)throw new TypeError('Must have text between two parameters, missing text after "'.concat(q.name,'"'));return!P||p(P)?"[^".concat(xs(a),"]+?"):"(?:(?!".concat(xs(P),")[^").concat(xs(a),"])+?")},"safePattern");c<t.length;){var w=f("CHAR"),E=f("NAME"),_=f("PATTERN");if(E||_){var T=w||"";i.indexOf(T)===-1&&(d+=T,T=""),d&&(u.push(d),d=""),u.push({name:E||l++,prefix:T,suffix:"",pattern:_||m(T),modifier:f("MODIFIER")||""});continue}var R=w||f("ESCAPED_CHAR");if(R){d+=R;continue}d&&(u.push(d),d="");var D=f("OPEN");if(D){var T=g(),B=f("NAME")||"",z=f("PATTERN")||"",j=g();h("CLOSE"),u.push({name:B||(z?l++:""),pattern:B&&!z?m(T):z,prefix:T,suffix:j,modifier:f("MODIFIER")||""});continue}h("END")}return u}o(Tv,"parse");function Sne(n,e){return Ane(Tv(n,e),e)}o(Sne,"compile");function Ane(n,e){e===void 0&&(e={});var t=vA(e),r=e.encode,i=r===void 0?function(l){return l}:r,s=e.validate,a=s===void 0?!0:s,u=n.map(function(l){if(typeof l=="object")return new RegExp("^(?:".concat(l.pattern,")$"),t)});return function(l){for(var c="",d=0;d<n.length;d++){var f=n[d];if(typeof f=="string"){c+=f;continue}var h=l?l[f.name]:void 0,g=f.modifier==="?"||f.modifier==="*",p=f.modifier==="*"||f.modifier==="+";if(Array.isArray(h)){if(!p)throw new TypeError('Expected "'.concat(f.name,'" to not repeat, but got an array'));if(h.length===0){if(g)continue;throw new TypeError('Expected "'.concat(f.name,'" to not be empty'))}for(var m=0;m<h.length;m++){var w=i(h[m],f);if(a&&!u[d].test(w))throw new TypeError('Expected all "'.concat(f.name,'" to match "').concat(f.pattern,'", but got "').concat(w,'"'));c+=f.prefix+w+f.suffix}continue}if(typeof h=="string"||typeof h=="number"){var w=i(String(h),f);if(a&&!u[d].test(w))throw new TypeError('Expected "'.concat(f.name,'" to match "').concat(f.pattern,'", but got "').concat(w,'"'));c+=f.prefix+w+f.suffix;continue}if(!g){var E=p?"an array":"a string";throw new TypeError('Expected "'.concat(f.name,'" to be ').concat(E))}}return c}}o(Ane,"tokensToFunction");function xs(n){return n.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}o(xs,"escapeString");function vA(n){return n&&n.sensitive?"":"i"}o(vA,"flags");function Ine(n,e){return n}o(Ine,"regexpToRegexp");function Cne(n,e,t){var r=n.map(function(i){return rU(i,e,t).source});return new RegExp("(?:".concat(r.join("|"),")"),vA(t))}o(Cne,"arrayToRegexp");function Rne(n,e,t){return One(Tv(n,t),e,t)}o(Rne,"stringToRegexp");function One(n,e,t){t===void 0&&(t={});for(var r=t.strict,i=r===void 0?!1:r,s=t.start,a=s===void 0?!0:s,u=t.end,l=u===void 0?!0:u,c=t.encode,d=c===void 0?function(q){return q}:c,f=t.delimiter,h=f===void 0?"/#?":f,g=t.endsWith,p=g===void 0?"":g,m="[".concat(xs(p),"]|$"),w="[".concat(xs(h),"]"),E=a?"^":"",_=0,T=n;_<T.length;_++){var R=T[_];if(typeof R=="string")E+=xs(d(R));else{var D=xs(d(R.prefix)),B=xs(d(R.suffix));if(R.pattern)if(D||B)if(R.modifier==="+"||R.modifier==="*"){var z=R.modifier==="*"?"?":"";E+="(?:".concat(D,"((?:").concat(R.pattern,")(?:").concat(B).concat(D,"(?:").concat(R.pattern,"))*)").concat(B,")").concat(z)}else E+="(?:".concat(D,"(").concat(R.pattern,")").concat(B,")").concat(R.modifier);else{if(R.modifier==="+"||R.modifier==="*")throw new TypeError('Can not repeat "'.concat(R.name,'" without a prefix and suffix'));E+="(".concat(R.pattern,")").concat(R.modifier)}else E+="(?:".concat(D).concat(B,")").concat(R.modifier)}}if(l)i||(E+="".concat(w,"?")),E+=t.endsWith?"(?=".concat(m,")"):"$";else{var j=n[n.length-1],Y=typeof j=="string"?w.indexOf(j[j.length-1])>-1:j===void 0;i||(E+="(?:".concat(w,"(?=").concat(m,"))?")),Y||(E+="(?=".concat(w,"|").concat(m,")"))}return new RegExp(E,vA(t))}o(One,"tokensToRegexp");function rU(n,e,t){return n instanceof RegExp?Ine(n):Array.isArray(n)?Cne(n,e,t):Rne(n,e,t)}o(rU,"pathToRegexp");var dI=class dI{constructor(e){this.returnValue=e}};o(dI,"MethodSignalReturn");var cm=dI,iU=new Object,sU=new Object;function oU(n){let e=n;return e&&typeof e.then=="function"&&typeof e.catch=="function"}o(oU,"isPromiseCompatible");function Lb(n,e){switch(e){case sU:return n();case iU:return;default:return Promise.reject(e)}}o(Lb,"handleLoopSignal");function xb(n){return n()?Promise.resolve(void 0):uU()}o(xb,"createLoopCond");function aU(n){return new Promise(n)}o(aU,"promise");function Pne(n){return Promise.resolve(n)}o(Pne,"resolve");function uU(){return Promise.reject(iU)}o(uU,"breakAsync");function Nne(){return Promise.reject(sU)}o(Nne,"continueAsync");function Dne(n){return Promise.reject(new cm(n))}o(Dne,"returnAsync");function Lne(n){return Promise.reject(n)}o(Lne,"throwAsync");function wr(n){return od(n)}o(wr,"executeSequence");function od(n,e){let t,r,i=o(()=>{throw r},"raiseError"),s=o(()=>{clearTimeout(e),e=window.setTimeout(i,0)},"postponeRaiseError");function a(u,l){return r?l?(clearTimeout(e),od(()=>l(r))):(s(),od(i,e)):od(u?()=>u(t):()=>t)}o(a,"handleResult");try{t=n()}catch(u){r=u,s()}return oU(t)?t:{then(u,l){return a(u,l)},catch(u){return a(void 0,u)}}}o(od,"innerExecuteSequence");function bv(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r=>Promise.reject(r),t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:()=>Promise.resolve(void 0);return wr(n).catch(e).then(r=>wr(t).then(i=>i!=null?i:r),r=>wr(t).then(()=>Promise.reject(r)))}o(bv,"tryCatchFinally");function cU(n,e){return bv(n,e,void 0)}o(cU,"tryCatch");function lm(n,e){return bv(n,void 0,e)}o(lm,"tryFinally");function xne(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};return wr(n).catch(Fne)}o(xne,"executeAsyncFlow");function yA(n,e){function t(){return xb(n).then(e).then(t,Lb.bind(null,t))}return o(t,"loop"),t()}o(yA,"whileAsync");function Une(n,e){let t=0;return yA(()=>t<n.length,()=>{let r=n[t++];return e(r)})}o(Une,"forEachAsync");function Mne(n,e){function t(){return xb(n).then(r,Lb.bind(null,r))}o(t,"conditionAndLoop");function r(){return wr(e).then(()=>xb(n)).then(r,Lb.bind(null,t))}return o(r,"loop"),r()}o(Mne,"doWhileAsync");var kne=yA.bind(null,()=>!0);function Fne(n){return n instanceof cm?n.returnValue:Promise.reject(n)}o(Fne,"handleReturnSignal");var $ne=Object.freeze({__proto__:null,breakAsync:uU,continueAsync:Nne,doWhileAsync:Mne,executeAsyncFlow:xne,executeSequence:wr,forEachAsync:Une,isPromiseCompatible:oU,promise:aU,resolve:Pne,returnAsync:Dne,throwAsync:Lne,tryCatch:cU,tryCatchFinally:bv,tryFinally:lm,whileAsync:yA,whileTrueAsync:kne});function Bne(n){try{return n.self!==n.top}catch(e){return!0}}o(Bne,"windowInsideIframe");function Vne(n){return/^((?!chrome|android).)*safari/i.test(n)}o(Vne,"isSafari");var Hne=o(function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:navigator;var e;return(e=n==null?void 0:n.userAgent)!==null&&e!==void 0?e:""},"getUserAgent$1"),Jo=o(function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis;return n!=null?n:e},"getGlobalObject"),fI=class fI{constructor(){this.stack=[],this.map={},this.counter=0}push(e){let t=this.counter++;return this.stack.push(t),this.map[t]=e,t}remove(e){let t=this.stack.indexOf(e),r=t>-1;return r&&(this.stack.splice(t,1),delete this.map[e]),r}pop(){if(this.stack.length===0)throw new Error("IndexedStack: pop from empty stack.");let e=this.stack.pop(),t=this.map[e];return delete this.map[e],t}clear(){this.stack=[],this.map={}}get isEmpty(){return this.stack.length===0}};o(fI,"IndexedStack");var Ub=fI,hI=class hI{constructor(e,t){this._groups=e,this._index=t-this._groups[0].length}get value(){return this._groups[0]}get index(){return this._index}get length(){return this._groups[0].length}get groups(){return this._groups}};o(hI,"Match");var Mb=hI;function dm(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=[],i=new RegExp(e,"g"+(t?"i":"")),s=i.exec(n);for(;s;)r.push(new Mb(s,i.lastIndex)),s=i.exec(n);return r}o(dm,"matches");function fm(n,e,t,r){let i=dm(n,e,t),s=n,a=0;for(let u=0;u<i.length;u++){let l=i[u],c=r(l);s=s.substr(0,l.index+a)+c+s.substr(a+l.index+l.length),a+=c.length-l.length}return s}o(fm,"replace$1");function qo(n){return n&&n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}o(qo,"escape");var Sv=o((n,e,t)=>{if(e.toLowerCase()===t.toLowerCase())return n;let r=new RegExp(`^${qo(e)}`,"i");return n.replace(r,t)},"replaceBasePath"),Av=o((n,e)=>`${n}${e}`,"buildURLFromVersionedResource"),lU=o(function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;var e,t;return(t=(e=n==null?void 0:n.location)===null||e===void 0?void 0:e.href)!==null&&t!==void 0?t:""},"getCurrentUrl"),dU=o(function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;var e,t,r;return(r=(t=(e=n==null?void 0:n.location)===null||e===void 0?void 0:e.protocol)===null||t===void 0?void 0:t.replace(/:/g,""))!==null&&r!==void 0?r:""},"getHttpScheme"),kb=o(n=>n.replace(/([^:]\/)\/+/g,"$1"),"sanitizeUrl"),Zd=o(n=>n.replace(/((outsystems|https|http):\/\/[^ ]*?)\?[^ ]*/g,"$1"),"removeQueryParametersFromUrls"),jne=Object.freeze({__proto__:null,buildURLFromVersionedResource:Av,getCurrentUrl:lU,getHttpScheme:dU,removeQueryParametersFromUrls:Zd,replaceBasePath:Sv,sanitizeUrl:kb}),ab="NativeStatus",gI=class gI{constructor(){let{win:e=window,isRunningOnNativeFn:t=In,deviceReadyPromise:r=wA}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.cachedReadyValue=null,this.win=e,this.isRunningOnNativeFn=t,this.deviceReadyPromise=r}raiseCordovaNotLoadedError(){let e="Running on native but cordova wasn't loaded";throw De(ab,e,"OS-CLRT-00000",void 0,Re.External),new Error(e)}ensureIsReady(){return M(this,void 0,void 0,function*(){return this.cachedReadyValue===null?(ee(ab,"Waiting for 'deviceready' event"),this.isRunningOnNativeFn()?this.win.cordova===void 0?(this.cachedReadyValue=!1,this.raiseCordovaNotLoadedError()):(yield this.deviceReadyPromise(),this.cachedReadyValue=!0,!0):(ee(ab,"'deviceready' event wait ignored"),this.cachedReadyValue=!0,!0)):this.cachedReadyValue?!0:this.raiseCordovaNotLoadedError()})}};o(gI,"NativeStatus");var Fb=gI,Wne="OutSystemsApp",fU={Android:"Android",iOS:"iOS"},In=o(function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:navigator;return!!(n&&new RegExp(Wne,"i").test(n.userAgent))},"isRunningOnNative"),_A=o(function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;var e;return(e=n==null?void 0:n.device)===null||e===void 0?void 0:e.platform},"getPlatformName"),hU=o(function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:In,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window,r=_A(t);return e()&&typeof r=="string"&&r.toLowerCase()===n.toLowerCase()},"isRunningOnPlatform"),gU=o(function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:In,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return hU(fU.Android,n,e)},"isAndroid"),Gne=o(function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:In,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return hU(fU.iOS,n,e)},"isIOS"),pU=o(function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return t!=null&&t.addEventListener?(t.addEventListener(n,e),!0):!1},"addEventListener"),wA=o(function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return new Promise((e,t)=>{pU("deviceready",()=>e(),n)||e()})},"whenDeviceReady"),br=o(()=>{let n=pe.resolve(X.NativeStatus);return n||(pe.register(X.NativeStatus,()=>new Fb),n=pe.resolve(X.NativeStatus)),n.ensureIsReady()},"ensureNativeReady"),$b=o(function(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];return M(void 0,[n,e,...r],void 0,function(s,a){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:br,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:pU;return(function*(){yield u(),l(s,a)})()})},"addNativeEventListener"),mU=o(function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gU,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:navigator;return n()?(e.app.exitApp(),!0):!1},"exitApp"),vU=o(function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return M(void 0,[...e],void 0,function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:br,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zne;return(function*(){var s,a;try{yield r();let u=i();return(a=(s=u==null?void 0:u.OutSystemsNative)===null||s===void 0?void 0:s.OTLogger)!==null&&a!==void 0?a:null}catch(u){return console.error("Native is not ready",u),null}})()})},"getNativeOTLogger"),zne=o(()=>window,"getOutSystemsNativeHost"),Iv=o(n=>!!(n!=null&&n.OutSystemsNative),"isIOutSystemsNativeHost"),qne=Object.freeze({__proto__:null,addNativeEventListener:$b,ensureNativeReady:br,exitApp:mU,getNativeOTLogger:vU,getPlatformName:_A,isAndroid:gU,isIOS:Gne,isIOutSystemsNativeHost:Iv,isRunningOnNative:In,whenDeviceReady:wA}),Kne="NativeAuthPlugin",Yne=o(n=>M(void 0,[n],void 0,function(e){let{w:t=window,awaitNative:r=br}=e;return(function*(){if(yield r(),Iv(t)&&t.OutSystemsNative.Auth)return t.OutSystemsNative.Auth;throw new Error("Could not find the OSAuth plugin.")})()}),"getNativeAuthPlugin"),Xne=o(n=>M(void 0,[n],void 0,function(e){let{url:t,redirectUri:r,w:i,awaitNative:s}=e;return(function*(){var a;let u=yield Yne({w:i,awaitNative:s});try{return yield u.startFlow(t,r)}catch(l){throw De(Kne,(a=l.message)!==null&&a!==void 0?a:"Error starting the external auth flow","OS-CLRT-40100",l instanceof Error?l:void 0),new Error("Error starting the external auth flow")}})()}),"startExternalAuthFlow"),Qd="Navigation",Jne=new RegExp("/([^/]*)"),Zne=new RegExp(/\/(\/)+/gm),Bb="?",yU="#",_U="&",wU="_ts",Qne=10,ere=1e3,tre=["localhost","10.0.2.2"],nre="PUSH",EU="POP",rre="-",rd=[],Zo=[],hd=new Ub,Vb;function Cv(n){if(!EA(n))throw new me.OutOfContextException}o(Cv,"validateContext");function EA(n){return!(n&&n.isOutOfContext)}o(EA,"isValidContext");function Rv(n){if(n)throw new me.RedirectOccurredException}o(Rv,"throwRedirectOccurredExceptionIfNeeded");function TU(n){Zo.push(n)}o(TU,"setNavigationCallbacks");function Qo(){return Zo[Zo.length-1]}o(Qo,"getNavigationCallbacks");function bU(){return Zo.pop()}o(bU,"removeNavigationCallbacks");var ku=!1,TA=!1;function SU(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;ee(Qd,"Next navigation will force a reload..."),ku=!0,TA=n}o(SU,"forceReloadOnNextNavigation");function ire(){return ku}o(ire,"willReloadInNextNavigation");function sre(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ku=n,TA=e}o(sre,"resetReloadState");var Ov=o(()=>{let{protocol:n,pathname:e,href:t,search:r}=window.location,i=window.location.hostname||window.location.host.split(":")[0];return{protocol:n,pathname:e,href:t,search:r,hostname:i}},"getCurrentLocation"),AU=o(n=>{if(n===void 0)return null;let e=window.location.search.substr(1);return UU(e)[n]},"getSearchParameterValue"),IU=o(function(n){let{getLocation:e=Ov,getBasePath:t=Dt}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(n.protocol==="http:"||n.protocol==="https:"||n.protocol==="outsystems:"))return!1;let i=e().hostname,s=n.hostname!==""?n.hostname:i;if(i!==s)return!1;let a=Jne.exec(n.pathname);return!a||a.length<2?!1:new RegExp(`^${qo(t())}`,"i").test(`${n.pathname}/`)},"urlBelongsToCurrentApplication"),CU=o(function(n){let e=document.createElement("a");return e.href=n,e},"getLocationFromUrl"),RU=!1;function bA(){return RU}o(bA,"hasPendingReload");var Zi=o(function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Jo();e&&(n=PU(n));let i=Zd(n);ee(Qd,`Reloading application with url: '${i}' (replace = ${t})`);let s=o(()=>{t?r.location.replace(n):r.location.href=n},"redirect");return RU=!0,Sx().then(s).catch(s)},"changeWindowLocation");function OU(){return typeof window!="undefined"&&window.location.search.indexOf(wU)>=0}o(OU,"currentLocationHasTimestamp");function PU(n){let t=`${n.indexOf(Bb)<0?Bb:_U}${wU}=${new Date().valueOf()}`,r=n.indexOf(yU);return r>=0?[n.slice(0,r),t,n.slice(r)].join(""):`${n}${t}`}o(PU,"addInvalidationSuffixToUrl");function SA(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=Vs();Zi(e,n)}o(SA,"reloadApplication$1");function NU(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Zi(Ov().href,n,!0)}o(NU,"reloadCurrentLocation");function ore(n){return Vs(Dt(),n)}o(ore,"concatApplicationToRelativeURL");function are(n){let e=new Date().getTime(),t=e-ere;for(;rd.length>0&&rd[0].timestamp<t;)rd.shift();if(rd.reduce(function(i,s){return s.url===n?i+1:i},0)<Qne)return rd.push({timestamp:e,url:n}),!1;{let i=Zd(n);return nr(Qd,`Identified a recursive navigation to '${i}'.`,Re.Internal),!0}}o(are,"isRecursiveNavigation");function DU(n){return hd.push(n)}o(DU,"registerBackNavigationHandler");function LU(n){hd.remove(n)}o(LU,"unregisterBackNavigationHandler");function xU(n){Vb=n}o(xU,"registerNavigationHandler");var AA=o(function(n){let e=!1,t,r="",i=n,s=n.indexOf(":")!==-1||n.indexOf("/")===0,a=i.indexOf(yU);a!==-1&&(t=i.substr(a+1).trim(),i=i.substr(0,a));let u=i.indexOf(Bb);if(u!==-1&&(r=i.substr(u+1).trim(),i=i.substr(0,u)),s){let c=CU(i);e=IU(c),e&&(i=c.pathname)}else i=ore(i),e=!0;let l=UU(r);return{url:n,isInternal:e,path:i,queryParams:l,hash:t}},"getUrlInfo");function UU(n){let e={};return n.length>0&&n.split(_U).forEach(t=>{let r=t.split("=");if(r.length===2){let i=DL(r[0]),s=DL(r[1]);e[i]=s}}),e}o(UU,"getQueryParameterParts");function DL(n){return decodeURIComponent(n.replace(/\+/g," "))}o(DL,"safeDecodeURIComponent");function ure(n,e){if(!lre(n.pathname+n.search))return!1;let t=ku;if(ku&&(ku=!1),e&&!hd.isEmpty){let i=hd.pop();return cU(i,s=>{De(Gn(),"Error while navigating back without an empty stack","OS-CLRT-00000",s)}),!1}let r=BU(n);if(r||t){let i=AA(n.pathname),s=Dx(),a=Dt(),u;if(i.isInternal){u=!0;for(let l in s)if(s.hasOwnProperty(l)){let c=i.url.replace(/\/$/,""),d=s[l];if(Hb(c,Vs(a),d)||d.moduleName!==Gn()&&d.moduleName&&Hb(c,d.moduleName,d)){u=!1;break}}}else u=!1;if(t||u){let l;if(u)l=Vs();else{let c=n.search||"";a===n.pathname&&c===""?l=/\/$/.test(n.pathname)?n.pathname:`${n.pathname}/`:l=n.pathname+c}return Zi(l,TA,r),!u}}return hd.clear(),!0}o(ure,"onBeforeNavigate");function Hb(n,e,t){return e.replace(/\/$/,"")===n||t.screens.some(r=>{let i=Vs(e,r.screenUrl);return rU(i).test(n)})}o(Hb,"urlBelongsToPrefix");function IA(){Jd()&&window.stop&&document.readyState==="complete"&&(ee(Qd,"Stopping all currently pending resources."),window.stop())}o(IA,"cancelAllPendingResources");function cre(n){return M(this,void 0,void 0,function*(){var e,t,r;let i=(e=n.queryParams.redirect_uri)!==null&&e!==void 0?e:n.queryParams.post_logout_redirect_uri;if(!i)throw new Error("Can't perform an external login without a redirect URI");let s=yield Xne({url:n.url,redirectUri:i}),[a]=i.split("?"),u=Dt(),l=(r=(t=a.match(new RegExp(`${u}.*`)))===null||t===void 0?void 0:t[0])!==null&&r!==void 0?r:"";Zi(s?`${l}?${s}`:l)})}o(cre,"startNativeExternalAuthFlow");function lre(n){var e;if(n&&Vb)try{return(e=Vb(n,o((r,i,s)=>Pv(r,_v(i,Xd),null,!1,s),"navigationMethod")))!==null&&e!==void 0?e:!1}catch(t){let r="Error while executing navigation callback";return gc({category:Gn(),errorCode:"OS-CLRT-00000",clientMessage:r,internalMessage:r,errorObj:t instanceof Error?t:void 0}),!1}return!0}o(lre,"handleNavigationCallback");function Pv(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(Cv(t),are(n))throw Error("Too many redirects.");r||IA();let s=AA(n);if(Zo&&Qo().goTo&&s.isInternal)Qo().goTo(s,e,i);else{if(In()&&iM({url:n}))return cre(s);Zi(n)}Rv(r)}o(Pv,"navigateTo");function MU(n,e,t){Cv(e),t||IA(),Zo&&Qo().goBack?Qo().goBack(n):window.history.back(),Rv(t)}o(MU,"navigateBack");function kU(n,e,t){Cv(e),t||IA(),Zo&&Qo().goForward?Qo().goForward(n):window.history.forward(),Rv(t)}o(kU,"navigateForward");function FU(n,e,t){return t+n.substring(e.length)}o(FU,"switchUrlProtocol");function $U(){let n=Ov();if(n.protocol.toLocaleLowerCase()==="http:"){let e=n.hostname.toLocaleLowerCase();if(tre.includes(e))console.warn(Qd,`Accessing through http://${e} is not supported. Please access the application using the hostname instead.`);else{let t=FU(n.href,n.protocol,"https:");return Zi(t,!1,!0),!0}}return!1}o($U,"ensureRequestSecurity");function BU(n){return n.action.toUpperCase()===EU}o(BU,"locationReachedFromHistory");function dre(n,e,t){let r=n,i=n,s;return typeof e=="string"?(i=e,s=fre(r,i,t)):(t=e,r="",s=hre(i,t)),s}o(dre,"generateScreenURL");function fre(n,e,t){let r=mre(t!=null?t:{},e),i=vre(t!=null?t:{},r);return gre(i,e),pre(n,e,i,r)}o(fre,"generateScreenURLWithModuleName");function hre(n,e){let t=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&");return`${n}${t.length>0?`?${t}`:""}`}o(hre,"generateGenericURL");function gre(n,e){let r=Tv(e).filter(a=>typeof a!="string"&&a.modifier==="?").map(a=>{var u;return{name:a.name,value:(u=n[a.name])!==null&&u!==void 0?u:""}}),i=!1,s;r.forEach(a=>{if(i&&!LL(a.value))throw new Error(`Error processing optional parameters on path ${e}. The parameter ${s.name} has an empty value while ${a.name} has a non-empty value. All optional parameters before ${a.name} must have a value when ${a.name} has a value.`);LL(a.value)&&(s=a,i=!0)})}o(gre,"detectEmptyValueOptionalParameterError");function LL(n){return n===""||n===null||n===void 0}o(LL,"isEmptyValue");function pre(n,e,t,r){let i=Object.keys(r).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(r[s])}`).join("&");try{let s=Object.fromEntries(Object.entries(t).map(c=>{let[d,f]=c;return[d,encodeURIComponent(f)]})),l=`${Sne(e,{validate:!1})(s)}${i.length>0?`?${i}`:""}`;return yre(n,l)}catch(s){let a=new RegExp('^Expected "(.*)" to be a string$',"g").exec(s.message);if(a){let u=a[1],l=`Error building URL for ${e}. Parameter ${u} is missing or has an empty value`,c=`Error building URL: parameter ${u} is missing or has an empty value`;gc({category:n,errorCode:"OS-CLRT-00000",clientMessage:l,internalMessage:c,errorObj:s instanceof Error?s:void 0});return}throw s}}o(pre,"innerBuildURL");function mre(n,e){let t=Tv(e);return Object.keys(n).filter(r=>!t.some(i=>typeof i!="string"&&i.name===r)).reduce((r,i)=>(r[i]=n[i],r),{})}o(mre,"selectQueryStringParameters");function vre(n,e){return Object.keys(n).filter(t=>n[t]!==""&&!(t in e)).reduce((t,r)=>(t[r]=n[r],t),{})}o(vre,"selectPathParameters");function Vs(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return(e.length===0?Dt():"/"+e.join("/")).replace(Zne,"/")}o(Vs,"buildApplicationRelativeUrl");function yre(n,e){let t=Dt(),r=e.replace(/^\//,""),i=Gn();return n===i?`${t}${r}`:`/${n}/${r}`}o(yre,"generateBaseUrl");var Ku;(function(n){let e=o(i=>i,"urlVersionProvider");function t(i){e=i}o(t,"setUrlVersionProvider"),n.setUrlVersionProvider=t;function r(i){return e(i)}o(r,"getVersionedUrl"),n.getVersionedUrl=r})(Ku||(Ku={}));var _re=Object.freeze({__proto__:null,NAVIGATE_FROM_HISTORY_ACTION:EU,NAVIGATE_TO_URL_ACTION:nre,SCREEN_URL_PART_SEPARATOR:rre,get VersionedURL(){return Ku},addInvalidationSuffixToUrl:PU,buildApplicationRelativeUrl:Vs,changeWindowLocation:Zi,currentLocationHasTimestamp:OU,ensureRequestSecurity:$U,forceReloadOnNextNavigation:SU,generateScreenURL:dre,getCurrentLocation:Ov,getLocationFromUrl:CU,getNavigationCallbacks:Qo,getSearchParameterValue:AU,getUrlInfo:AA,hasPendingReload:bA,isValidContext:EA,locationReachedFromHistory:BU,navigateBack:MU,navigateForward:kU,navigateTo:Pv,onBeforeNavigate:ure,registerBackNavigationHandler:DU,registerNavigationHandler:xU,reloadApplication:SA,reloadCurrentLocation:NU,removeNavigationCallbacks:bU,resetReloadState:sre,setNavigationCallbacks:TU,switchUrlProtocol:FU,throwRedirectOccurredExceptionIfNeeded:Rv,unregisterBackNavigationHandler:LU,urlBelongsToCurrentApplication:IU,urlBelongsToPrefix:Hb,validateContext:Cv,willReloadInNextNavigation:ire});function VU(){var n;let e=window;if(!((n=e==null?void 0:e.OutSystemsNative)===null||n===void 0)&&n.ApplicationInfo)return e.OutSystemsNative.ApplicationInfo}o(VU,"getNativeApplicationInfo");var wre=o(function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return M(void 0,[...e],void 0,function(){let{nativeReady:r=br,nativeApplicationInfo:i=VU}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){return yield r(),new Promise((s,a)=>{let u=i();return u?u.getAppPackageIdentifier(s,a):a(new Error("NativeAppInfo API is not available"))})})()})},"getAppPackageIdentifier");function Ere(n){return M(this,arguments,void 0,function(e){let{version:t,ensureReady:r=br,getNativeAppInfo:i=VU}=e;return(function*(){yield r();let s=i();if(typeof(s==null?void 0:s.setOSApplicationVersion)=="function")try{s.setOSApplicationVersion(t)}catch(a){yield nr("Native","Failed to set app version",Re.Internal)}})()})}o(Ere,"setAppVersion");var ft="Authentication",HU="_RedirectLogin",jU="_RedirectLogout",Wt;(function(n){n.NotAuthenticated="User is not authenticated.",n.Unavailable="Authentication mechanism is unavailable."})(Wt||(Wt={}));var Tre=o(n=>n.resumeLogin!==void 0,"isExternalAuth"),bre=o(n=>n.finishResetPassword!==void 0,"isBuiltinAuth"),WU=o(n=>M(void 0,[n],void 0,function(e){let{path:t,params:r={isRunningOnNative:In,getAppUrl:gA,getHost:o(()=>{var i;return(i=window==null?void 0:window.location)===null||i===void 0?void 0:i.host},"getHost"),getPlatform:o(()=>_A(),"getPlatform"),getPackageId:o(()=>M(void 0,void 0,void 0,function*(){return(yield wre()).toLowerCase()}),"getPackageId"),getBasePath:Dt}}=e;return(function*(){var i,s,a,u,l;if(r.isRunningOnNative()){let c=yield(i=r.getPackageId)===null||i===void 0?void 0:i.call(r),d=(s=r.getHost)===null||s===void 0?void 0:s.call(r),f=(a=r.getPlatform)===null||a===void 0?void 0:a.call(r),h=(u=r.getBasePath)===null||u===void 0?void 0:u.call(r);if(c)if(d)if(f){if(!h)throw new Error("Could not get the base path")}else throw new Error("Could not get the platform");else throw new Error("Could not get host name");else throw new Error("Could not get the package id");return kb(`${c}://${d}/${f}/${h}/${t}`)}else{let c=(l=r.getAppUrl)===null||l===void 0?void 0:l.call(r);if(!c)throw new Error("Could not get the application url");return kb(`${c}/${t}`)}})()}),"getRedirectUrl"),CA=o(n=>M(void 0,void 0,void 0,function*(){return WU({path:HU,params:n})}),"getLoginRedirectUrl"),Sre=o(n=>M(void 0,void 0,void 0,function*(){return WU({path:jU,params:n})}),"getLogoutRedirectUrl"),GU=o(n=>M(void 0,void 0,void 0,function*(){var e,{callbackUrl:t="",redirectUrlParams:r,redirectUri:i=CA(r),authConfigs:s,auth:a=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.External,s),actionName:u="getExternalLoginUrl"}=n===void 0?{}:n;try{if(ee(ft,"Retrieving the external login url."),!a)throw un(u,Wt.Unavailable);let l=ef(u,a),c=yield i;return l.getLoginUrl({redirectUri:c,callbackUrl:t})}catch(l){throw De(ft,"Error retrieving the external login url.","OS-CLRT-40100",l),l}}),"getExternalLoginUrl"),zU=o(n=>M(void 0,void 0,void 0,function*(){var e,{callbackUrl:t="",redirectUrlParams:r,redirectUri:i=CA(r),auth:s=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.External),actionName:a="externalLogin"}=n===void 0?{}:n;try{if(ee(ft,"External login flow started."),!s)throw un(a,Wt.Unavailable);let u=ef(a,s),l=yield i;yield u.login({redirectUri:l,callbackUrl:t,navigationHandler:Pv})}catch(u){throw De(ft,"Error in the external login flow.","OS-CLRT-40100",u),new me.InvalidLoginException("Login Failed",Ki(u))}}),"externalLogin"),qU=o(n=>M(void 0,void 0,void 0,function*(){var e,t,{username:r,password:i,persistLogin:s,auth:a=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.Builtin),actionName:u="builtinLogin"}=n;try{if(ee(ft,"Builtin login flow started."),!a)throw un(u,Wt.Unavailable);return yield Qi(u,a).login({username:r,password:i,persistLogin:s})}catch(l){throw De(ft,"Error in the builtin login flow.",(t=l.errorCode)!==null&&t!==void 0?t:"OS-CLRT-40100",l),l}}),"builtinLogin"),Are=o(n=>M(void 0,void 0,void 0,function*(){var e,{url:t,redirectUrlParams:r,redirectUri:i=CA(r),auth:s=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.External),actionName:a="resumeLogin"}=n;try{if(ee(ft,"Login flow resumed."),!s)throw un(a,Wt.Unavailable);let u=yield i;return yield ef(a,s).resumeLogin({url:t,redirectUri:u})}catch(u){throw De(ft,"Error while resuming login.","OS-CLRT-40100",u),new me.InvalidLoginException("Login Failed",Ki(u))}}),"resumeLogin"),KU=o(n=>M(void 0,void 0,void 0,function*(){var e,{auth:t=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(),actionName:r="logout"}=n===void 0?{}:n;try{if(ee(ft,"Logout flow started."),!t)throw un(r,Wt.NotAuthenticated);yield Qi(r,t,"Use GetExternalLogoutURL instead.").logout()}catch(i){throw De(ft,"Error in the logout flow.","OS-CLRT-40100",i),i}}),"logout$1"),YU=o(n=>M(void 0,void 0,void 0,function*(){var e,{callbackUrl:t="",redirectUrlParams:r,redirectUri:i=Sre(r),auth:s=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.External),actionName:a="getExternalLogoutUrl"}=n===void 0?{}:n;try{if(ee(ft,"Retrieving the external logout url."),!s)throw un(a,Wt.NotAuthenticated);let u=yield i;return yield ef(a,s).getLogoutUrl({redirectUri:u,callbackUrl:t})}catch(u){throw De(ft,"Error retrieving the external logout url.","OS-CLRT-40100",u),u}}),"getExternalLogoutUrl"),Ire=o(n=>M(void 0,void 0,void 0,function*(){var e,{url:t,auth:r=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.External),actionName:i="resumeLogout"}=n;try{if(ee(ft,"Logout flow resumed."),!r)throw un("resumeLogout",Wt.NotAuthenticated);return yield ef(i,r).resumeLogout({url:t})}catch(s){throw De(ft,"Error while resuming logout.","OS-CLRT-40100",s),new me.InvalidLoginException("Logout Failed",Ki(s))}}),"resumeLogout"),XU=o(n=>M(void 0,void 0,void 0,function*(){var e,{auth:t=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance()}=n===void 0?{}:n;try{if(ee(ft,"Refresh flow started."),!t)throw un("refreshTokens",Wt.NotAuthenticated);yield t.refreshTokens()}catch(r){throw De(ft,"Error in the refresh flow.","OS-CLRT-40103",r),r}}),"refreshTokens"),Ko=o(n=>{var e,t,{auth:r=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance()}=n===void 0?{}:n;return(t=r==null?void 0:r.getUserId())!==null&&t!==void 0?t:""},"getUserId$1"),JU=o(n=>{var e,t,{auth:r=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance()}=n===void 0?{}:n;return(t=r==null?void 0:r.isAuthenticated())!==null&&t!==void 0?t:!1},"isAuthenticated"),ZU=o(n=>{var e,{auth:t=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.Builtin),actionName:r="getPasswordComplexityPolicy"}=n===void 0?{}:n;try{if(!t)throw un(r,Wt.Unavailable);return Qi(r,t).getPasswordComplexityPolicy()}catch(i){throw De(ft,"Error getting the password complexity policy","OS-CLRT-40100",i),i}},"getPasswordComplexityPolicy$1"),QU=o(n=>{var e,{password:t,auth:r=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.Builtin),actionName:i="validatePasswordComplexity"}=n;try{if(!r)throw un("validatePasswordComplexity",Wt.Unavailable);return Qi(i,r).validatePasswordComplexityPolicy(t)}catch(s){throw De(ft,"Error validating the password complexity","OS-CLRT-40100",s),s}},"validatePasswordComplexity$1"),Cre=o(n=>M(void 0,void 0,void 0,function*(){var e,{username:t,resetToken:r,newPassword:i,auth:s=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.Builtin),actionName:a="resetPassword"}=n;try{if(!s)throw un(a,Wt.Unavailable);return yield Qi(a,s).resetPassword({username:t,resetToken:r,newPassword:i})}catch(u){throw De(ft,"Error resetting password","OS-CLRT-40100",u),u}}),"resetPassword"),eM=o(n=>M(void 0,void 0,void 0,function*(){var e,{username:t,resetToken:r,newPassword:i,auth:s=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.Builtin),actionName:a="finishResetPassword"}=n;try{if(!s)throw un(a,Wt.Unavailable);return yield Qi(a,s).finishResetPassword({username:t,resetToken:r,newPassword:i})}catch(u){throw De(ft,"Error finishing reset password","OS-CLRT-40100",u),u}}),"finishResetPassword$1"),tM=o(n=>{var e,{auth:t=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(),actionName:r="isExternalUser"}=n===void 0?{}:n;try{if(!t)throw un(r,Wt.NotAuthenticated);return t.isExternalUser()}catch(i){throw De(ft,"Error determining if user is external","OS-CLRT-40100",i),i}},"isExternalUser$1"),nM=o(n=>M(void 0,void 0,void 0,function*(){var e,{username:t,password:r,temporaryPassword:i,auth:s=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.Builtin),actionName:a="finishUserRegistration"}=n;try{if(!s)throw un(a,Wt.Unavailable);return yield Qi(a,s).confirmRegistration({username:t,password:r,code:i})}catch(u){throw De(ft,"Error completing user registration","OS-CLRT-40100",u),u}}),"finishUserRegistration$1"),Rre=o(n=>M(void 0,void 0,void 0,function*(){var e,{username:t,auth:r=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.Builtin),actionName:i="sendResetPasswordEmail"}=n;try{if(!r)throw un(i,Wt.Unavailable);return yield Qi(i,r).sendResetPasswordEmail({username:t})}catch(s){throw De(ft,"Error sending reset password email","OS-CLRT-40100",s),s}}),"sendResetPasswordEmail"),rM=o(n=>M(void 0,void 0,void 0,function*(){var e,{username:t,oldPassword:r,newPassword:i,auth:s=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(Kt.Builtin),actionName:a="changePassword"}=n;try{if(!s)throw un("changePassword",Wt.NotAuthenticated);return yield Qi(a,s).changePassword({username:t,oldPassword:r,newPassword:i})}catch(u){throw De(ft,"Error changing password","OS-CLRT-40100",u),u}}),"changePassword$1"),RA=o(n=>M(void 0,void 0,void 0,function*(){var e,{auth:t=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(),actionName:r="getUserProfile"}=n===void 0?{}:n;try{if(!t)throw un(r,Wt.NotAuthenticated);return yield t.getUserInfo()}catch(i){throw De(ft,"Error getting user profile","OS-CLRT-40100",i),i}}),"getUserProfile$1"),iM=o(n=>{var e,t,{url:r,auth:i=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance(),actionName:s="isAuthEndpoint"}=n;try{return(t=i==null?void 0:i.isAuthEndpoint(r))!==null&&t!==void 0?t:!1}catch(a){throw De(ft,"Error checking if a url corresponds to an auth endpoint","OS-CLRT-40100",a),a}},"isAuthEndpoint"),un=o((n,e)=>{let t=`Error '${n}': ${e}`,r=new Error(t);return De(ft,t,"OS-CLRT-40100",r,Re.External),r},"createMissingAuthError"),ef=o((n,e,t)=>{if(!Tre(e)){let r=`Error '${n}': only supported for external authentication. `,i=new Error(r);throw De(ft,r,"OS-CLRT-40100",i,Re.External),i}return e},"getExternalAuth"),Qi=o((n,e,t)=>{if(!bre(e)){let r=`Error '${n}': only supported for builtin authentication. ${t!=null?t:""}`,i=new Error(r);throw De(ft,r,"OS-CLRT-40100",i,Re.External),i}return e},"getBuiltInAuth"),sM=o(n=>M(void 0,void 0,void 0,function*(){var e,{code:t,auth:r=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance()}=n;if(!r)throw un("changeEmail",Wt.NotAuthenticated);return yield r.changeEmail(t)}),"changeEmail"),Ore=Object.freeze({__proto__:null,LOGIN_REDIRECT_PATH:HU,LOGOUT_REDIRECT_PATH:jU,builtinLogin:qU,changeEmail:sM,changePassword:rM,externalLogin:zU,finishResetPassword:eM,finishUserRegistration:nM,getExternalLoginUrl:GU,getExternalLogoutUrl:YU,getPasswordComplexityPolicy:ZU,getUserId:Ko,getUserProfile:RA,isAuthEndpoint:iM,isAuthenticated:JU,isExternalUser:tM,logout:KU,refreshTokens:XU,resetPassword:Cre,resumeLogin:Are,resumeLogout:Ire,sendResetPasswordEmail:Rre,validatePasswordComplexity:QU}),oM="_error.html",Pd={errorCode:"UNHANDLED"},OA={errorCode:"IGNORED"},PA="ErrorHandling",oi={errorPageMessage:new Er(on.Session,"ErrorPageMessage",""),errorPageExtraMessage:new Er(on.Session,"ErrorPageExtraMessage",""),errorPageExceptionInfo:new Er(on.Session,"ErrorPageExceptionInfo")};function Nv(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0;var i,s;if(!bA()&&(n&&De((i=n.category)!==null&&i!==void 0?i:PA,n.message||"Navigating to Error page",(s=n.errorCode)!==null&&s!==void 0?s:"OS-CLRT-00000",n,Re.External),EA(r))){let a=Ku.getVersionedUrl(oM);oi.errorPageMessage.set(e),oi.errorPageExtraMessage.set(t),n?oi.errorPageExceptionInfo.set(_x(n)):oi.errorPageExceptionInfo.remove(),Zi(a)}}o(Nv,"navigateToErrorPage");function aM(n,e){var t;let r=hA(),i=(t=r==null?void 0:r.messages)===null||t===void 0?void 0:t.incompatibleProducer;Nv(n,i||n.message,void 0,e)}o(aM,"navigateToIncompatibleProducer");function NA(n){var e;let t=hA(),r=(e=t==null?void 0:t.messages)===null||e===void 0?void 0:e.appOffline;Nv(void 0,r||"This application is temporarily unavailable. Try reloading or contact the administrator.",void 0,n)}o(NA,"navigateToAppOffline");function Us(n,e){ee(PA,"Error thrown by the application: "+n,Re.Client),oA(n)?NA(e):jr(n,me.IncompatibleProducerException)?aM(n,e):Nv(n,void 0,void 0,e)}o(Us,"handleError");function Pre(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(i,s)=>Us(i,s),r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:(i,s)=>DA(i,s);return Bs(n)&&it(PA,Bs(n)),n instanceof me.NotRegisteredException?(zU({callbackUrl:Dt()}),Pd):r(n,e)?OA:(t(n,e),Pd)}o(Pre,"defaultErrorHandler");function DA(n,e){return jr(n,me.IgnorableSystemException)?!0:oA(n)?(NA(e),!0):!1}o(DA,"ignoreError");function uM(n){return n===Pd||n===OA}o(uM,"isSpecialHandleErrorResult");var Nre=Object.freeze({__proto__:null,ERROR_PAGE_HTML:oM,ErrorHandlingStorage:oi,IGNORED_ERROR_RESULT:OA,UNHANDLED_ERROR_RESULT:Pd,defaultErrorHandler:Pre,handleError:Us,ignoreError:DA,isSpecialHandleErrorResult:uM,navigateToAppOffline:NA,navigateToErrorPage:Nv,navigateToIncompatibleProducer:aM}),Nd,gd,LA=!0;function Dre(n){Nd=n,gd&&(gd(),gd=null)}o(Dre,"registerFeedbackMessageService");function cM(n){LA=n}o(cM,"setEnabled");function xA(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5?arguments[5]:void 0;if(!LA)return;let a=o(()=>Nd.showMessage(n,e,t,r,i,s),"show");Nd?a():gd=a}o(xA,"showFeedbackMessage");function lM(){if(!LA)return;Nd?o(()=>Nd.closeMessage(),"close")():gd=null}o(lM,"closeFeedbackMessage");var Lre=Object.freeze({__proto__:null,closeFeedbackMessage:lM,registerFeedbackMessageService:Dre,setEnabled:cM,showFeedbackMessage:xA});function UA(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Jo;var e;let t=n();return(t==null?void 0:t.cordova)&&((e=t==null?void 0:t.navigator)===null||e===void 0?void 0:e.connection)?t.navigator.connection.type!=="none":t.navigator.onLine}o(UA,"isOnline");function dM(n){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:window).addEventListener("online",n)}o(dM,"addOnOnlineEventListener");var xL="Argument 'handler' cannot be null or undefined",pI=class pI{constructor(e,t){this.moduleName=e,this.context=t,this.subscribers=[]}subscribe(e){if(!e)throw new Error(xL);for(let t=0;t<this.subscribers.length;t++)if(this.subscribers[t]===e)return!1;return this.subscribers.push(e),ee(this.moduleName,`Subscribing handler for ${this.context}`),!0}unsubscribe(e){if(!e)throw new Error(xL);for(let t=0;t<this.subscribers.length;t++)if(this.subscribers[t]===e)return this.subscribers.splice(t,1),ee(this.moduleName,`Unsubscribing handler for ${this.context}`),!0;return!1}publish(e){for(let t of this.subscribers)t(e);ee(this.moduleName,`Notifying subscribers for ${this.context}`)}};o(pI,"Publisher");var Dd=pI,pd,md,Ms,vd,Fu,Os,bn,$o,Hi,fM,UL,ML,mI=class mI{constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];var s,a;pd.add(this),md.set(this,void 0),Ms.set(this,void 0),vd.set(this,!1),Fu.set(this,30),Os.set(this,void 0),bn.set(this,[]),$o.set(this,!1),Hi.set(this,!1),lt(this,md,t,"f"),lt(this,Ms,new Dd("SyncQueue",e),"f"),lt(this,vd,(s=r.retryOnError)!==null&&s!==void 0?s:ie(this,vd,"f"),"f"),lt(this,Fu,(a=r.retryIntervalInSeconds)!==null&&a!==void 0?a:ie(this,Fu,"f"),"f"),lt(this,bn,i,"f")}getQueue(){return ie(this,bn,"f")}suspendSync(){lt(this,Hi,!1,"f"),lt(this,$o,!1,"f")}isSyncing(){return ie(this,Hi,"f")}startSync(e,t){return ie(this,pd,"m",fM).call(this,e,t),Promise.resolve()}subscribe(e){return ie(this,Ms,"f").subscribe(e)}unsubscribe(e){return ie(this,Ms,"f").unsubscribe(e)}};o(mI,"SyncQueue");var jb=mI;md=new WeakMap,Ms=new WeakMap,vd=new WeakMap,Fu=new WeakMap,Os=new WeakMap,bn=new WeakMap,$o=new WeakMap,Hi=new WeakMap,pd=new WeakSet,fM=o(function(e,t){return M(this,void 0,void 0,function*(){var r;if(!ie(this,md,"f"))return;let i=!0,s=ie(this,bn,"f")[0];if(t?lt(this,bn,ie(this,Hi,"f")&&s?[s]:[],"f"):ie(this,bn,"f").some((a,u)=>a===e&&(!this.isSyncing()||u!==0))&&(i=!1),i&&(ie(this,bn,"f").push(e),lt(this,$o,!0,"f")),ie(this,Os,"f")&&(clearTimeout(ie(this,Os,"f")),lt(this,Os,null,"f")),!ie(this,Hi,"f")){lt(this,Hi,!0,"f");try{if(ie(this,Ms,"f").publish({type:"SyncStart",context:ie(this,bn,"f")[0]}),UA())yield ie(this,md,"f").call(this,ie(this,bn,"f")[0]),ie(this,pd,"m",UL).call(this);else throw this.suspendSync(),new me.CommunicationException("Unable to synchronize data. Device has no network connectivity.")}catch(a){ie(this,pd,"m",ML).call(this,{errorMessage:(r=a.message)!==null&&r!==void 0?r:String(a),allowRetry:!(a instanceof me.SecurityException)})}}})},"_SyncQueue_doSync"),UL=o(function(){ie(this,Ms,"f").publish({type:"SyncComplete",context:ie(this,bn,"f")[0]}),ie(this,bn,"f").shift(),lt(this,Hi,!1,"f"),ie(this,$o,"f")&&ie(this,bn,"f").length>0?this.startSync(ie(this,bn,"f")[0]):lt(this,$o,!1,"f")},"_SyncQueue_finishSync"),ML=o(function(e){let{errorMessage:t,allowRetry:r}=e;ie(this,Ms,"f").publish({type:"SyncError",context:ie(this,bn,"f")[0],message:t}),r&&ie(this,vd,"f")&&ie(this,Fu,"f")>0&&lt(this,Os,setTimeout(()=>{lt(this,Os,null,"f"),this.startSync(ie(this,bn,"f")[0])},ie(this,Fu,"f")*1e3),"f"),lt(this,Hi,!1,"f"),ie(this,Os,"f")||lt(this,$o,!1,"f")},"_SyncQueue_finishSyncWithError");function xre(n){let{applicationName:e,moduleController:t,syncConfiguration:r,regOnOnlineHandler:i=dM,injector:s=pe}=n;s.register(X.OfflineDataSync,()=>new jb(e,t.default.onSyncHandler,{retryOnError:r==null?void 0:r.retryOnError,retryIntervalInSeconds:r==null?void 0:r.retryIntervalInSeconds})),r!=null&&r.syncOnOnline&&i(()=>{s.resolve(X.OfflineDataSync).startSync("")})}o(xre,"initOfflineDataSyncService");var vI=class vI{constructor(e,t){this.databaseName=e,this.databaseEngineName=t,this.isInitialized=!1,this.allInitializers=[],this.initializersToRun=[]}get name(){return this.databaseName}get engineName(){var e;return(e=this.databaseEngineName)!==null&&e!==void 0?e:"Unknown"}registerInitializer(e){if(this.isInitialized)throw new me.DataBaseException("",`Cannot register a database initializer on the already initialized database '${this.name}'`);this.allInitializers.push(e)}initialize(){return M(this,void 0,void 0,function*(){if(this.isInitialized)throw new me.DataBaseException("",`Cannot initialize the already initialized database '${this.name}'`);this.markInitialized(),yield this.identifyNeededInitializers(),yield this.runNeededInitializers()})}initializerCleanup(){return M(this,void 0,void 0,function*(){if(!this.isInitialized)throw new me.DataBaseException("",`Cannot perform database initializer cleanup on the non-initialized database '${this.name}'`);yield this.cleanupNeededInitializers()})}identifyNeededInitializers(){return M(this,void 0,void 0,function*(){this.allInitializers&&this.allInitializers.length>0&&(yield this.executeReadTransaction(e=>M(this,void 0,void 0,function*(){for(let t of this.allInitializers)(yield t.isNeeded(e))&&this.initializersToRun.push(t)}))),this.releaseUnneededInitializers()})}runNeededInitializers(){return M(this,void 0,void 0,function*(){this.initializersToRun.length>0&&(yield this.executeUpgradeTransaction(e=>M(this,void 0,void 0,function*(){for(let t of this.initializersToRun)yield t.run(e)})))})}cleanupNeededInitializers(){return M(this,void 0,void 0,function*(){this.initializersToRun.length>0&&(yield this.executeUpgradeTransaction(e=>M(this,void 0,void 0,function*(){for(let t of this.initializersToRun)t.cleanup&&(yield t.cleanup(e))})),this.releaseNeededInitializers())})}markInitialized(){this.isInitialized=!0}releaseUnneededInitializers(){this.allInitializers=[]}releaseNeededInitializers(){this.initializersToRun=[]}};o(vI,"Database");var hm=vI;function Ure(n){if(n===void 0||n==="")return n;let e=[],t=32,r=10,i="\xA0";n.charCodeAt(0)===t?e[0]=i:e[0]=n.charAt(0);for(let s=1;s<n.length-1;++s)n.charCodeAt(s)===t&&(n.charCodeAt(s-1)===r||n.charCodeAt(s+1)===t)?e[s]=i:e[s]=n.charAt(s);return n.length!==1&&(n.charCodeAt(n.length-1)===t?e[n.length-1]=i:e[n.length-1]=n.charAt(n.length-1)),e.join("")}o(Ure,"fixHtmlSpaces");function Mre(n){let e=[];for(let t=0;t<n.length;++t){let r=n.charCodeAt(t);r===60?e.push("&lt;"):r===62?e.push("&gt;"):r===38?e.push("&amp;"):r===34?e.push("&quot;"):r===39?e.push("&#39;"):r>=160&&r<=255?e.push("&#"+r+";"):e.push(n.charAt(t))}return e.join("")}o(Mre,"encode");var Ru=9e15,qs=1e9,Wb="0123456789abcdef",gm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",pm="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Gb={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ru,maxE:Ru,crypto:!1},hM,zi,Ue=!0,Dv="[DecimalError] ",Hs=Dv+"Invalid argument: ",gM=Dv+"Precision limit exceeded",pM=Dv+"crypto unavailable",mM="[object Decimal]",Rn=Math.floor,Xt=Math.pow,kre=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Fre=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,$re=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,vM=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hr=1e7,Ne=7,Bre=9007199254740991,Vre=gm.length-1,zb=pm.length-1,ue={toStringTag:mM};ue.absoluteValue=ue.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Ce(n)};ue.ceil=function(){return Ce(new this.constructor(this),this.e+1,2)};ue.clampedTo=ue.clamp=function(n,e){var t,r=this,i=r.constructor;if(n=new i(n),e=new i(e),!n.s||!e.s)return new i(NaN);if(n.gt(e))throw Error(Hs+e);return t=r.cmp(n),t<0?n:r.cmp(e)>0?e:new i(r)};ue.comparedTo=ue.cmp=function(n){var e,t,r,i,s=this,a=s.d,u=(n=new s.constructor(n)).d,l=s.s,c=n.s;if(!a||!u)return!l||!c?NaN:l!==c?l:a===u?0:!a^l<0?1:-1;if(!a[0]||!u[0])return a[0]?l:u[0]?-c:0;if(l!==c)return l;if(s.e!==n.e)return s.e>n.e^l<0?1:-1;for(r=a.length,i=u.length,e=0,t=r<i?r:i;e<t;++e)if(a[e]!==u[e])return a[e]>u[e]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1};ue.cosine=ue.cos=function(){var n,e,t=this,r=t.constructor;return t.d?t.d[0]?(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+Ne,r.rounding=1,t=Hre(r,TM(r,t)),r.precision=n,r.rounding=e,Ce(zi==2||zi==3?t.neg():t,n,e,!0)):new r(1):new r(NaN)};ue.cubeRoot=ue.cbrt=function(){var n,e,t,r,i,s,a,u,l,c,d=this,f=d.constructor;if(!d.isFinite()||d.isZero())return new f(d);for(Ue=!1,s=d.s*Xt(d.s*d,1/3),!s||Math.abs(s)==1/0?(t=pn(d.d),n=d.e,(s=(n-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=Xt(t,1/3),n=Rn((n+1)/3)-(n%3==(n<0?-1:2)),s==1/0?t="5e"+n:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),r=new f(t),r.s=d.s):r=new f(s.toString()),a=(n=f.precision)+3;;)if(u=r,l=u.times(u).times(u),c=l.plus(d),r=Et(c.plus(d).times(u),c.plus(l),a+2,1),pn(u.d).slice(0,a)===(t=pn(r.d)).slice(0,a))if(t=t.slice(a-3,a+1),t=="9999"||!i&&t=="4999"){if(!i&&(Ce(u,n+1,0),u.times(u).times(u).eq(d))){r=u;break}a+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ce(r,n+1,1),e=!r.times(r).times(r).eq(d));break}return Ue=!0,Ce(r,n,f.rounding,e)};ue.decimalPlaces=ue.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-Rn(this.e/Ne))*Ne,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};ue.dividedBy=ue.div=function(n){return Et(this,new this.constructor(n))};ue.dividedToIntegerBy=ue.divToInt=function(n){var e=this,t=e.constructor;return Ce(Et(e,new t(n),0,1,1),t.precision,t.rounding)};ue.equals=ue.eq=function(n){return this.cmp(n)===0};ue.floor=function(){return Ce(new this.constructor(this),this.e+1,3)};ue.greaterThan=ue.gt=function(n){return this.cmp(n)>0};ue.greaterThanOrEqualTo=ue.gte=function(n){var e=this.cmp(n);return e==1||e===0};ue.hyperbolicCosine=ue.cosh=function(){var n,e,t,r,i,s=this,a=s.constructor,u=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return u;t=a.precision,r=a.rounding,a.precision=t+Math.max(s.e,s.sd())+4,a.rounding=1,i=s.d.length,i<32?(n=Math.ceil(i/3),e=(1/xv(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),s=Yu(a,1,s.times(e),new a(1),!0);for(var l,c=n,d=new a(8);c--;)l=s.times(s),s=u.minus(l.times(d.minus(l.times(d))));return Ce(s,a.precision=t,a.rounding=r,!0)};ue.hyperbolicSine=ue.sinh=function(){var n,e,t,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=Yu(s,2,i,i,!0);else{n=1.4*Math.sqrt(r),n=n>16?16:n|0,i=i.times(1/xv(5,n)),i=Yu(s,2,i,i,!0);for(var a,u=new s(5),l=new s(16),c=new s(20);n--;)a=i.times(i),i=i.times(u.plus(a.times(l.times(a).plus(c))))}return s.precision=e,s.rounding=t,Ce(i,e,t,!0)};ue.hyperbolicTangent=ue.tanh=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+7,r.rounding=1,Et(t.sinh(),t.cosh(),r.precision=n,r.rounding=e)):new r(t.s)};ue.inverseCosine=ue.acos=function(){var n=this,e=n.constructor,t=n.abs().cmp(1),r=e.precision,i=e.rounding;return t!==-1?t===0?n.isNeg()?ai(e,r,i):new e(0):new e(NaN):n.isZero()?ai(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,n=new e(1).minus(n).div(n.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,n.times(2))};ue.inverseHyperbolicCosine=ue.acosh=function(){var n,e,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(n=r.precision,e=r.rounding,r.precision=n+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,Ue=!1,t=t.times(t).minus(1).sqrt().plus(t),Ue=!0,r.precision=n,r.rounding=e,t.ln()):new r(t)};ue.inverseHyperbolicSine=ue.asinh=function(){var n,e,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,Ue=!1,t=t.times(t).plus(1).sqrt().plus(t),Ue=!0,r.precision=n,r.rounding=e,t.ln())};ue.inverseHyperbolicTangent=ue.atanh=function(){var n,e,t,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(n=s.precision,e=s.rounding,r=i.sd(),Math.max(r,n)<2*-i.e-1?Ce(new s(i),n,e,!0):(s.precision=t=r-i.e,i=Et(i.plus(1),new s(1).minus(i),t+n,1),s.precision=n+4,s.rounding=1,i=i.ln(),s.precision=n,s.rounding=e,i.times(.5))):new s(NaN)};ue.inverseSine=ue.asin=function(){var n,e,t,r,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),t=s.precision,r=s.rounding,e!==-1?e===0?(n=ai(s,t+4,r).times(.5),n.s=i.s,n):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=r,i.times(2)))};ue.inverseTangent=ue.atan=function(){var n,e,t,r,i,s,a,u,l,c=this,d=c.constructor,f=d.precision,h=d.rounding;if(c.isFinite()){if(c.isZero())return new d(c);if(c.abs().eq(1)&&f+4<=zb)return a=ai(d,f+4,h).times(.25),a.s=c.s,a}else{if(!c.s)return new d(NaN);if(f+4<=zb)return a=ai(d,f+4,h).times(.5),a.s=c.s,a}for(d.precision=u=f+10,d.rounding=1,t=Math.min(28,u/Ne+2|0),n=t;n;--n)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(Ue=!1,e=Math.ceil(u/Ne),r=1,l=c.times(c),a=new d(c),i=c;n!==-1;)if(i=i.times(l),s=a.minus(i.div(r+=2)),i=i.times(l),a=s.plus(i.div(r+=2)),a.d[e]!==void 0)for(n=e;a.d[n]===s.d[n]&&n--;);return t&&(a=a.times(2<<t-1)),Ue=!0,Ce(a,d.precision=f,d.rounding=h,!0)};ue.isFinite=function(){return!!this.d};ue.isInteger=ue.isInt=function(){return!!this.d&&Rn(this.e/Ne)>this.d.length-2};ue.isNaN=function(){return!this.s};ue.isNegative=ue.isNeg=function(){return this.s<0};ue.isPositive=ue.isPos=function(){return this.s>0};ue.isZero=function(){return!!this.d&&this.d[0]===0};ue.lessThan=ue.lt=function(n){return this.cmp(n)<0};ue.lessThanOrEqualTo=ue.lte=function(n){return this.cmp(n)<1};ue.logarithm=ue.log=function(n){var e,t,r,i,s,a,u,l,c=this,d=c.constructor,f=d.precision,h=d.rounding,g=5;if(n==null)n=new d(10),e=!0;else{if(n=new d(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new d(NaN);e=n.eq(10)}if(t=c.d,c.s<0||!t||!t[0]||c.eq(1))return new d(t&&!t[0]?-1/0:c.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(i=t[0];i%10===0;)i/=10;s=i!==1}if(Ue=!1,u=f+g,a=ks(c,u),r=e?mm(d,u+10):ks(n,u),l=Et(a,r,u,1),Ld(l.d,i=f,h))do if(u+=10,a=ks(c,u),r=e?mm(d,u+10):ks(n,u),l=Et(a,r,u,1),!s){+pn(l.d).slice(i+1,i+15)+1==1e14&&(l=Ce(l,f+1,0));break}while(Ld(l.d,i+=10,h));return Ue=!0,Ce(l,f,h)};ue.minus=ue.sub=function(n){var e,t,r,i,s,a,u,l,c,d,f,h,g=this,p=g.constructor;if(n=new p(n),!g.d||!n.d)return!g.s||!n.s?n=new p(NaN):g.d?n.s=-n.s:n=new p(n.d||g.s!==n.s?g:NaN),n;if(g.s!=n.s)return n.s=-n.s,g.plus(n);if(c=g.d,h=n.d,u=p.precision,l=p.rounding,!c[0]||!h[0]){if(h[0])n.s=-n.s;else if(c[0])n=new p(g);else return new p(l===3?-0:0);return Ue?Ce(n,u,l):n}if(t=Rn(n.e/Ne),d=Rn(g.e/Ne),c=c.slice(),s=d-t,s){for(f=s<0,f?(e=c,s=-s,a=h.length):(e=h,t=d,a=c.length),r=Math.max(Math.ceil(u/Ne),a)+2,s>r&&(s=r,e.length=1),e.reverse(),r=s;r--;)e.push(0);e.reverse()}else{for(r=c.length,a=h.length,f=r<a,f&&(a=r),r=0;r<a;r++)if(c[r]!=h[r]){f=c[r]<h[r];break}s=0}for(f&&(e=c,c=h,h=e,n.s=-n.s),a=c.length,r=h.length-a;r>0;--r)c[a++]=0;for(r=h.length;r>s;){if(c[--r]<h[r]){for(i=r;i&&c[--i]===0;)c[i]=Hr-1;--c[i],c[r]+=Hr}c[r]-=h[r]}for(;c[--a]===0;)c.pop();for(;c[0]===0;c.shift())--t;return c[0]?(n.d=c,n.e=Lv(c,t),Ue?Ce(n,u,l):n):new p(l===3?-0:0)};ue.modulo=ue.mod=function(n){var e,t=this,r=t.constructor;return n=new r(n),!t.d||!n.s||n.d&&!n.d[0]?new r(NaN):!n.d||t.d&&!t.d[0]?Ce(new r(t),r.precision,r.rounding):(Ue=!1,r.modulo==9?(e=Et(t,n.abs(),0,3,1),e.s*=n.s):e=Et(t,n,0,r.modulo,1),e=e.times(n),Ue=!0,t.minus(e))};ue.naturalExponential=ue.exp=function(){return qb(this)};ue.naturalLogarithm=ue.ln=function(){return ks(this)};ue.negated=ue.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Ce(n)};ue.plus=ue.add=function(n){var e,t,r,i,s,a,u,l,c,d,f=this,h=f.constructor;if(n=new h(n),!f.d||!n.d)return!f.s||!n.s?n=new h(NaN):f.d||(n=new h(n.d||f.s===n.s?f:NaN)),n;if(f.s!=n.s)return n.s=-n.s,f.minus(n);if(c=f.d,d=n.d,u=h.precision,l=h.rounding,!c[0]||!d[0])return d[0]||(n=new h(f)),Ue?Ce(n,u,l):n;if(s=Rn(f.e/Ne),r=Rn(n.e/Ne),c=c.slice(),i=s-r,i){for(i<0?(t=c,i=-i,a=d.length):(t=d,r=s,a=c.length),s=Math.ceil(u/Ne),a=s>a?s+1:a+1,i>a&&(i=a,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(a=c.length,i=d.length,a-i<0&&(i=a,t=d,d=c,c=t),e=0;i;)e=(c[--i]=c[i]+d[i]+e)/Hr|0,c[i]%=Hr;for(e&&(c.unshift(e),++r),a=c.length;c[--a]==0;)c.pop();return n.d=c,n.e=Lv(c,r),Ue?Ce(n,u,l):n};ue.precision=ue.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(Hs+n);return t.d?(e=yM(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};ue.round=function(){var n=this,e=n.constructor;return Ce(new e(n),n.e+1,e.rounding)};ue.sine=ue.sin=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+Math.max(t.e,t.sd())+Ne,r.rounding=1,t=Wre(r,TM(r,t)),r.precision=n,r.rounding=e,Ce(zi>2?t.neg():t,n,e,!0)):new r(NaN)};ue.squareRoot=ue.sqrt=function(){var n,e,t,r,i,s,a=this,u=a.d,l=a.e,c=a.s,d=a.constructor;if(c!==1||!u||!u[0])return new d(!c||c<0&&(!u||u[0])?NaN:u?a:1/0);for(Ue=!1,c=Math.sqrt(+a),c==0||c==1/0?(e=pn(u),(e.length+l)%2==0&&(e+="0"),c=Math.sqrt(e),l=Rn((l+1)/2)-(l<0||l%2),c==1/0?e="5e"+l:(e=c.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),r=new d(e)):r=new d(c.toString()),t=(l=d.precision)+3;;)if(s=r,r=s.plus(Et(a,s,t+2,1)).times(.5),pn(s.d).slice(0,t)===(e=pn(r.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ce(s,l+1,0),s.times(s).eq(a))){r=s;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ce(r,l+1,1),n=!r.times(r).eq(a));break}return Ue=!0,Ce(r,l,d.rounding,n)};ue.tangent=ue.tan=function(){var n,e,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(n=r.precision,e=r.rounding,r.precision=n+10,r.rounding=1,t=t.sin(),t.s=1,t=Et(t,new r(1).minus(t.times(t)).sqrt(),n+10,0),r.precision=n,r.rounding=e,Ce(zi==2||zi==4?t.neg():t,n,e,!0)):new r(NaN)};ue.times=ue.mul=function(n){var e,t,r,i,s,a,u,l,c,d=this,f=d.constructor,h=d.d,g=(n=new f(n)).d;if(n.s*=d.s,!h||!h[0]||!g||!g[0])return new f(!n.s||h&&!h[0]&&!g||g&&!g[0]&&!h?NaN:!h||!g?n.s/0:n.s*0);for(t=Rn(d.e/Ne)+Rn(n.e/Ne),l=h.length,c=g.length,l<c&&(s=h,h=g,g=s,a=l,l=c,c=a),s=[],a=l+c,r=a;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)u=s[i]+g[r]*h[i-r-1]+e,s[i--]=u%Hr|0,e=u/Hr|0;s[i]=(s[i]+e)%Hr|0}for(;!s[--a];)s.pop();return e?++t:s.shift(),n.d=s,n.e=Lv(s,t),Ue?Ce(n,f.precision,f.rounding):n};ue.toBinary=function(n,e){return MA(this,2,n,e)};ue.toDecimalPlaces=ue.toDP=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(zn(n,0,qs),e===void 0?e=r.rounding:zn(e,0,8),Ce(t,n+t.e+1,e))};ue.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=ui(r,!0):(zn(n,0,qs),e===void 0?e=i.rounding:zn(e,0,8),r=Ce(new i(r),n+1,e),t=ui(r,!0,n+1)),r.isNeg()&&!r.isZero()?"-"+t:t};ue.toFixed=function(n,e){var t,r,i=this,s=i.constructor;return n===void 0?t=ui(i):(zn(n,0,qs),e===void 0?e=s.rounding:zn(e,0,8),r=Ce(new s(i),n+i.e+1,e),t=ui(r,!1,n+r.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};ue.toFraction=function(n){var e,t,r,i,s,a,u,l,c,d,f,h,g=this,p=g.d,m=g.constructor;if(!p)return new m(g);if(c=t=new m(1),r=l=new m(0),e=new m(r),s=e.e=yM(p)-g.e-1,a=s%Ne,e.d[0]=Xt(10,a<0?Ne+a:a),n==null)n=s>0?e:c;else{if(u=new m(n),!u.isInt()||u.lt(c))throw Error(Hs+u);n=u.gt(e)?s>0?e:c:u}for(Ue=!1,u=new m(pn(p)),d=m.precision,m.precision=s=p.length*Ne*2;f=Et(u,e,0,1,1),i=t.plus(f.times(r)),i.cmp(n)!=1;)t=r,r=i,i=c,c=l.plus(f.times(i)),l=i,i=e,e=u.minus(f.times(i)),u=i;return i=Et(n.minus(t),r,0,1,1),l=l.plus(i.times(c)),t=t.plus(i.times(r)),l.s=c.s=g.s,h=Et(c,r,s,1).minus(g).abs().cmp(Et(l,t,s,1).minus(g).abs())<1?[c,r]:[l,t],m.precision=d,Ue=!0,h};ue.toHexadecimal=ue.toHex=function(n,e){return MA(this,16,n,e)};ue.toNearest=function(n,e){var t=this,r=t.constructor;if(t=new r(t),n==null){if(!t.d)return t;n=new r(1),e=r.rounding}else{if(n=new r(n),e===void 0?e=r.rounding:zn(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(Ue=!1,t=Et(t,n,0,e,1).times(n),Ue=!0,Ce(t)):(n.s=t.s,t=n),t};ue.toNumber=function(){return+this};ue.toOctal=function(n,e){return MA(this,8,n,e)};ue.toPower=ue.pow=function(n){var e,t,r,i,s,a,u=this,l=u.constructor,c=+(n=new l(n));if(!u.d||!n.d||!u.d[0]||!n.d[0])return new l(Xt(+u,c));if(u=new l(u),u.eq(1))return u;if(r=l.precision,s=l.rounding,n.eq(1))return Ce(u,r,s);if(e=Rn(n.e/Ne),e>=n.d.length-1&&(t=c<0?-c:c)<=Bre)return i=_M(l,u,t,r),n.s<0?new l(1).div(i):Ce(i,r,s);if(a=u.s,a<0){if(e<n.d.length-1)return new l(NaN);if((n.d[e]&1)==0&&(a=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=a,u}return t=Xt(+u,c),e=t==0||!isFinite(t)?Rn(c*(Math.log("0."+pn(u.d))/Math.LN10+u.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?a/0:0):(Ue=!1,l.rounding=u.s=1,t=Math.min(12,(e+"").length),i=qb(n.times(ks(u,r+t)),r),i.d&&(i=Ce(i,r+5,1),Ld(i.d,r,s)&&(e=r+10,i=Ce(qb(n.times(ks(u,e+t)),e),e+5,1),+pn(i.d).slice(r+1,r+15)+1==1e14&&(i=Ce(i,r+1,0)))),i.s=a,Ue=!0,l.rounding=s,Ce(i,r,s))};ue.toPrecision=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=ui(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(zn(n,1,qs),e===void 0?e=i.rounding:zn(e,0,8),r=Ce(new i(r),n,e),t=ui(r,n<=r.e||r.e<=i.toExpNeg,n)),r.isNeg()&&!r.isZero()?"-"+t:t};ue.toSignificantDigits=ue.toSD=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(zn(n,1,qs),e===void 0?e=r.rounding:zn(e,0,8)),Ce(new r(t),n,e)};ue.toString=function(){var n=this,e=n.constructor,t=ui(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};ue.truncated=ue.trunc=function(){return Ce(new this.constructor(this),this.e+1,1)};ue.valueOf=ue.toJSON=function(){var n=this,e=n.constructor,t=ui(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function pn(n){var e,t,r,i=n.length-1,s="",a=n[0];if(i>0){for(s+=a,e=1;e<i;e++)r=n[e]+"",t=Ne-r.length,t&&(s+=Ns(t)),s+=r;a=n[e],r=a+"",t=Ne-r.length,t&&(s+=Ns(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}o(pn,"digitsToString");function zn(n,e,t){if(n!==~~n||n<e||n>t)throw Error(Hs+n)}o(zn,"checkInt32");function Ld(n,e,t,r){var i,s,a,u;for(s=n[0];s>=10;s/=10)--e;return--e<0?(e+=Ne,i=0):(i=Math.ceil((e+1)/Ne),e%=Ne),s=Xt(10,Ne-e),u=n[i]%s|0,r==null?e<3?(e==0?u=u/100|0:e==1&&(u=u/10|0),a=t<4&&u==99999||t>3&&u==49999||u==5e4||u==0):a=(t<4&&u+1==s||t>3&&u+1==s/2)&&(n[i+1]/s/100|0)==Xt(10,e-2)-1||(u==s/2||u==0)&&(n[i+1]/s/100|0)==0:e<4?(e==0?u=u/1e3|0:e==1?u=u/100|0:e==2&&(u=u/10|0),a=(r||t<4)&&u==9999||!r&&t>3&&u==4999):a=((r||t<4)&&u+1==s||!r&&t>3&&u+1==s/2)&&(n[i+1]/s/1e3|0)==Xt(10,e-3)-1,a}o(Ld,"checkRoundingDigits");function Bp(n,e,t){for(var r,i=[0],s,a=0,u=n.length;a<u;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=Wb.indexOf(n.charAt(a++)),r=0;r<i.length;r++)i[r]>t-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/t|0,i[r]%=t)}return i.reverse()}o(Bp,"convertBase");function Hre(n,e){var t,r,i;if(e.isZero())return e;r=e.d.length,r<32?(t=Math.ceil(r/3),i=(1/xv(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),n.precision+=t,e=Yu(n,1,e.times(i),new n(1));for(var s=t;s--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return n.precision-=t,e}o(Hre,"cosine");var Et=(function(){function n(r,i,s){var a,u=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+u,r[l]=a%s|0,u=a/s|0;return u&&r.unshift(u),r}o(n,"multiplyInteger");function e(r,i,s,a){var u,l;if(s!=a)l=s>a?1:-1;else for(u=l=0;u<s;u++)if(r[u]!=i[u]){l=r[u]>i[u]?1:-1;break}return l}o(e,"compare");function t(r,i,s,a){for(var u=0;s--;)r[s]-=u,u=r[s]<i[s]?1:0,r[s]=u*a+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return o(t,"subtract"),function(r,i,s,a,u,l){var c,d,f,h,g,p,m,w,E,_,T,R,D,B,z,j,Y,q,P,Z,oe=r.constructor,S=r.s==i.s?1:-1,K=r.d,U=i.d;if(!K||!K[0]||!U||!U[0])return new oe(!r.s||!i.s||(K?U&&K[0]==U[0]:!U)?NaN:K&&K[0]==0||!U?S*0:S/0);for(l?(g=1,d=r.e-i.e):(l=Hr,g=Ne,d=Rn(r.e/g)-Rn(i.e/g)),P=U.length,Y=K.length,E=new oe(S),_=E.d=[],f=0;U[f]==(K[f]||0);f++);if(U[f]>(K[f]||0)&&d--,s==null?(B=s=oe.precision,a=oe.rounding):u?B=s+(r.e-i.e)+1:B=s,B<0)_.push(1),p=!0;else{if(B=B/g+2|0,f=0,P==1){for(h=0,U=U[0],B++;(f<Y||h)&&B--;f++)z=h*l+(K[f]||0),_[f]=z/U|0,h=z%U|0;p=h||f<Y}else{for(h=l/(U[0]+1)|0,h>1&&(U=n(U,h,l),K=n(K,h,l),P=U.length,Y=K.length),j=P,T=K.slice(0,P),R=T.length;R<P;)T[R++]=0;Z=U.slice(),Z.unshift(0),q=U[0],U[1]>=l/2&&++q;do h=0,c=e(U,T,P,R),c<0?(D=T[0],P!=R&&(D=D*l+(T[1]||0)),h=D/q|0,h>1?(h>=l&&(h=l-1),m=n(U,h,l),w=m.length,R=T.length,c=e(m,T,w,R),c==1&&(h--,t(m,P<w?Z:U,w,l))):(h==0&&(c=h=1),m=U.slice()),w=m.length,w<R&&m.unshift(0),t(T,m,R,l),c==-1&&(R=T.length,c=e(U,T,P,R),c<1&&(h++,t(T,P<R?Z:U,R,l))),R=T.length):c===0&&(h++,T=[0]),_[f++]=h,c&&T[0]?T[R++]=K[j]||0:(T=[K[j]],R=1);while((j++<Y||T[0]!==void 0)&&B--);p=T[0]!==void 0}_[0]||_.shift()}if(g==1)E.e=d,hM=p;else{for(f=1,h=_[0];h>=10;h/=10)f++;E.e=f+d*g-1,Ce(E,u?s+E.e+1:s,a,p)}return E}})();function Ce(n,e,t,r){var i,s,a,u,l,c,d,f,h,g=n.constructor;e:if(e!=null){if(f=n.d,!f)return n;for(i=1,u=f[0];u>=10;u/=10)i++;if(s=e-i,s<0)s+=Ne,a=e,d=f[h=0],l=d/Xt(10,i-a-1)%10|0;else if(h=Math.ceil((s+1)/Ne),u=f.length,h>=u)if(r){for(;u++<=h;)f.push(0);d=l=0,i=1,s%=Ne,a=s-Ne+1}else break e;else{for(d=u=f[h],i=1;u>=10;u/=10)i++;s%=Ne,a=s-Ne+i,l=a<0?0:d/Xt(10,i-a-1)%10|0}if(r=r||e<0||f[h+1]!==void 0||(a<0?d:d%Xt(10,i-a-1)),c=t<4?(l||r)&&(t==0||t==(n.s<0?3:2)):l>5||l==5&&(t==4||r||t==6&&(s>0?a>0?d/Xt(10,i-a):0:f[h-1])%10&1||t==(n.s<0?8:7)),e<1||!f[0])return f.length=0,c?(e-=n.e+1,f[0]=Xt(10,(Ne-e%Ne)%Ne),n.e=-e||0):f[0]=n.e=0,n;if(s==0?(f.length=h,u=1,h--):(f.length=h+1,u=Xt(10,Ne-s),f[h]=a>0?(d/Xt(10,i-a)%Xt(10,a)|0)*u:0),c)for(;;)if(h==0){for(s=1,a=f[0];a>=10;a/=10)s++;for(a=f[0]+=u,u=1;a>=10;a/=10)u++;s!=u&&(n.e++,f[0]==Hr&&(f[0]=1));break}else{if(f[h]+=u,f[h]!=Hr)break;f[h--]=0,u=1}for(s=f.length;f[--s]===0;)f.pop()}return Ue&&(n.e>g.maxE?(n.d=null,n.e=NaN):n.e<g.minE&&(n.e=0,n.d=[0])),n}o(Ce,"finalise");function ui(n,e,t){if(!n.isFinite())return EM(n);var r,i=n.e,s=pn(n.d),a=s.length;return e?(t&&(r=t-a)>0?s=s.charAt(0)+"."+s.slice(1)+Ns(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(n.e<0?"e":"e+")+n.e):i<0?(s="0."+Ns(-i-1)+s,t&&(r=t-a)>0&&(s+=Ns(r))):i>=a?(s+=Ns(i+1-a),t&&(r=t-i-1)>0&&(s=s+"."+Ns(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),t&&(r=t-a)>0&&(i+1===a&&(s+="."),s+=Ns(r))),s}o(ui,"finiteToString");function Lv(n,e){var t=n[0];for(e*=Ne;t>=10;t/=10)e++;return e}o(Lv,"getBase10Exponent");function mm(n,e,t){if(e>Vre)throw Ue=!0,t&&(n.precision=t),Error(gM);return Ce(new n(gm),e,1,!0)}o(mm,"getLn10");function ai(n,e,t){if(e>zb)throw Error(gM);return Ce(new n(pm),e,t,!0)}o(ai,"getPi");function yM(n){var e=n.length-1,t=e*Ne+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}o(yM,"getPrecision");function Ns(n){for(var e="";n--;)e+="0";return e}o(Ns,"getZeroString");function _M(n,e,t,r){var i,s=new n(1),a=Math.ceil(r/Ne+4);for(Ue=!1;;){if(t%2&&(s=s.times(e),FL(s.d,a)&&(i=!0)),t=Rn(t/2),t===0){t=s.d.length-1,i&&s.d[t]===0&&++s.d[t];break}e=e.times(e),FL(e.d,a)}return Ue=!0,s}o(_M,"intPow");function kL(n){return n.d[n.d.length-1]&1}o(kL,"isOdd");function wM(n,e,t){for(var r,i,s=new n(e[0]),a=0;++a<e.length;){if(i=new n(e[a]),!i.s){s=i;break}r=s.cmp(i),(r===t||r===0&&s.s===t)&&(s=i)}return s}o(wM,"maxOrMin");function qb(n,e){var t,r,i,s,a,u,l,c=0,d=0,f=0,h=n.constructor,g=h.rounding,p=h.precision;if(!n.d||!n.d[0]||n.e>17)return new h(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(Ue=!1,l=p):l=e,u=new h(.03125);n.e>-2;)n=n.times(u),f+=5;for(r=Math.log(Xt(2,f))/Math.LN10*2+5|0,l+=r,t=s=a=new h(1),h.precision=l;;){if(s=Ce(s.times(n),l,1),t=t.times(++d),u=a.plus(Et(s,t,l,1)),pn(u.d).slice(0,l)===pn(a.d).slice(0,l)){for(i=f;i--;)a=Ce(a.times(a),l,1);if(e==null)if(c<3&&Ld(a.d,l-r,g,c))h.precision=l+=10,t=s=u=new h(1),d=0,c++;else return Ce(a,h.precision=p,g,Ue=!0);else return h.precision=p,a}a=u}}o(qb,"naturalExponential");function ks(n,e){var t,r,i,s,a,u,l,c,d,f,h,g=1,p=10,m=n,w=m.d,E=m.constructor,_=E.rounding,T=E.precision;if(m.s<0||!w||!w[0]||!m.e&&w[0]==1&&w.length==1)return new E(w&&!w[0]?-1/0:m.s!=1?NaN:w?0:m);if(e==null?(Ue=!1,d=T):d=e,E.precision=d+=p,t=pn(w),r=t.charAt(0),Math.abs(s=m.e)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)m=m.times(n),t=pn(m.d),r=t.charAt(0),g++;s=m.e,r>1?(m=new E("0."+t),s++):m=new E(r+"."+t.slice(1))}else return c=mm(E,d+2,T).times(s+""),m=ks(new E(r+"."+t.slice(1)),d-p).plus(c),E.precision=T,e==null?Ce(m,T,_,Ue=!0):m;for(f=m,l=a=m=Et(m.minus(1),m.plus(1),d,1),h=Ce(m.times(m),d,1),i=3;;){if(a=Ce(a.times(h),d,1),c=l.plus(Et(a,new E(i),d,1)),pn(c.d).slice(0,d)===pn(l.d).slice(0,d))if(l=l.times(2),s!==0&&(l=l.plus(mm(E,d+2,T).times(s+""))),l=Et(l,new E(g),d,1),e==null)if(Ld(l.d,d-p,_,u))E.precision=d+=p,c=a=m=Et(f.minus(1),f.plus(1),d,1),h=Ce(m.times(m),d,1),i=u=1;else return Ce(l,E.precision=T,_,Ue=!0);else return E.precision=T,l;l=c,i+=2}}o(ks,"naturalLogarithm");function EM(n){return String(n.s*n.s/0)}o(EM,"nonFiniteToString");function Vp(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,n.e=t=t-r-1,n.d=[],r=(t+1)%Ne,t<0&&(r+=Ne),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=Ne;r<i;)n.d.push(+e.slice(r,r+=Ne));e=e.slice(r),r=Ne-e.length}else r-=i;for(;r--;)e+="0";n.d.push(+e),Ue&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}o(Vp,"parseDecimal");function jre(n,e){var t,r,i,s,a,u,l,c,d;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),vM.test(e))return Vp(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(Fre.test(e))t=16,e=e.toLowerCase();else if(kre.test(e))t=2;else if($re.test(e))t=8;else throw Error(Hs+e);for(s=e.search(/p/i),s>0?(l=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),a=s>=0,r=n.constructor,a&&(e=e.replace(".",""),u=e.length,s=u-s,i=_M(r,new r(t),s,s*2)),c=Bp(e,t,Hr),d=c.length-1,s=d;c[s]===0;--s)c.pop();return s<0?new r(n.s*0):(n.e=Lv(c,d),n.d=c,Ue=!1,a&&(n=Et(n,i,u*4)),l&&(n=n.times(Math.abs(l)<54?Xt(2,l):ea.pow(2,l))),Ue=!0,n)}o(jre,"parseOther");function Wre(n,e){var t,r=e.d.length;if(r<3)return e.isZero()?e:Yu(n,2,e,e);t=1.4*Math.sqrt(r),t=t>16?16:t|0,e=e.times(1/xv(5,t)),e=Yu(n,2,e,e);for(var i,s=new n(5),a=new n(16),u=new n(20);t--;)i=e.times(e),e=e.times(s.plus(i.times(a.times(i).minus(u))));return e}o(Wre,"sine");function Yu(n,e,t,r,i){var s,a,u,l,c=n.precision,d=Math.ceil(c/Ne);for(Ue=!1,l=t.times(t),u=new n(r);;){if(a=Et(u.times(l),new n(e++*e++),c,1),u=i?r.plus(a):r.minus(a),r=Et(a.times(l),new n(e++*e++),c,1),a=u.plus(r),a.d[d]!==void 0){for(s=d;a.d[s]===u.d[s]&&s--;);if(s==-1)break}s=u,u=r,r=a,a=s}return Ue=!0,a.d.length=d+1,a}o(Yu,"taylorSeries");function xv(n,e){for(var t=n;--e;)t*=n;return t}o(xv,"tinyPow");function TM(n,e){var t,r=e.s<0,i=ai(n,n.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return zi=r?4:1,e;if(t=e.divToInt(i),t.isZero())zi=r?3:2;else{if(e=e.minus(t.times(i)),e.lte(s))return zi=kL(t)?r?2:3:r?4:1,e;zi=kL(t)?r?1:4:r?3:2}return e.minus(i).abs()}o(TM,"toLessThanHalfPi");function MA(n,e,t,r){var i,s,a,u,l,c,d,f,h,g=n.constructor,p=t!==void 0;if(p?(zn(t,1,qs),r===void 0?r=g.rounding:zn(r,0,8)):(t=g.precision,r=g.rounding),!n.isFinite())d=EM(n);else{for(d=ui(n),a=d.indexOf("."),p?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,a>=0&&(d=d.replace(".",""),h=new g(1),h.e=d.length-a,h.d=Bp(ui(h),10,i),h.e=h.d.length),f=Bp(d,10,i),s=l=f.length;f[--l]==0;)f.pop();if(!f[0])d=p?"0p+0":"0";else{if(a<0?s--:(n=new g(n),n.d=f,n.e=s,n=Et(n,h,t,r,0,i),f=n.d,s=n.e,c=hM),a=f[t],u=i/2,c=c||f[t+1]!==void 0,c=r<4?(a!==void 0||c)&&(r===0||r===(n.s<0?3:2)):a>u||a===u&&(r===4||c||r===6&&f[t-1]&1||r===(n.s<0?8:7)),f.length=t,c)for(;++f[--t]>i-1;)f[t]=0,t||(++s,f.unshift(1));for(l=f.length;!f[l-1];--l);for(a=0,d="";a<l;a++)d+=Wb.charAt(f[a]);if(p){if(l>1)if(e==16||e==8){for(a=e==16?4:3,--l;l%a;l++)d+="0";for(f=Bp(d,i,e),l=f.length;!f[l-1];--l);for(a=1,d="1.";a<l;a++)d+=Wb.charAt(f[a])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>l)for(s-=l;s--;)d+="0";else s<l&&(d=d.slice(0,s)+"."+d.slice(s))}d=(e==16?"0x":e==2?"0b":e==8?"0o":"")+d}return n.s<0?"-"+d:d}o(MA,"toStringBinary");function FL(n,e){if(n.length>e)return n.length=e,!0}o(FL,"truncate");function Gre(n){return new this(n).abs()}o(Gre,"abs$1");function zre(n){return new this(n).acos()}o(zre,"acos");function qre(n){return new this(n).acosh()}o(qre,"acosh");function Kre(n,e){return new this(n).plus(e)}o(Kre,"add");function Yre(n){return new this(n).asin()}o(Yre,"asin");function Xre(n){return new this(n).asinh()}o(Xre,"asinh");function Jre(n){return new this(n).atan()}o(Jre,"atan");function Zre(n){return new this(n).atanh()}o(Zre,"atanh");function Qre(n,e){n=new this(n),e=new this(e);var t,r=this.precision,i=this.rounding,s=r+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=ai(this,s,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?ai(this,r,i):new this(0),t.s=n.s):!n.d||e.isZero()?(t=ai(this,s,1).times(.5),t.s=n.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(Et(n,e,s,1)),e=ai(this,s,1),this.precision=r,this.rounding=i,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(Et(n,e,s,1)),t}o(Qre,"atan2");function eie(n){return new this(n).cbrt()}o(eie,"cbrt");function tie(n){return Ce(n=new this(n),n.e+1,2)}o(tie,"ceil");function nie(n,e,t){return new this(n).clamp(e,t)}o(nie,"clamp");function rie(n){if(!n||typeof n!="object")throw Error(Dv+"Object expected");var e,t,r,i=n.defaults===!0,s=["precision",1,qs,"rounding",0,8,"toExpNeg",-Ru,0,"toExpPos",0,Ru,"maxE",0,Ru,"minE",-Ru,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],i&&(this[t]=Gb[t]),(r=n[t])!==void 0)if(Rn(r)===r&&r>=s[e+1]&&r<=s[e+2])this[t]=r;else throw Error(Hs+t+": "+r);if(t="crypto",i&&(this[t]=Gb[t]),(r=n[t])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(pM);else this[t]=!1;else throw Error(Hs+t+": "+r);return this}o(rie,"config");function iie(n){return new this(n).cos()}o(iie,"cos");function sie(n){return new this(n).cosh()}o(sie,"cosh");function bM(n){var e,t,r;function i(s){var a,u,l,c=this;if(!(c instanceof i))return new i(s);if(c.constructor=i,$L(s)){c.s=s.s,Ue?!s.d||s.e>i.maxE?(c.e=NaN,c.d=null):s.e<i.minE?(c.e=0,c.d=[0]):(c.e=s.e,c.d=s.d.slice()):(c.e=s.e,c.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){c.s=1/s<0?-1:1,c.e=0,c.d=[0];return}if(s<0?(s=-s,c.s=-1):c.s=1,s===~~s&&s<1e7){for(a=0,u=s;u>=10;u/=10)a++;Ue?a>i.maxE?(c.e=NaN,c.d=null):a<i.minE?(c.e=0,c.d=[0]):(c.e=a,c.d=[s]):(c.e=a,c.d=[s]);return}if(s*0!==0){s||(c.s=NaN),c.e=NaN,c.d=null;return}return Vp(c,s.toString())}if(l==="string")return(u=s.charCodeAt(0))===45?(s=s.slice(1),c.s=-1):(u===43&&(s=s.slice(1)),c.s=1),vM.test(s)?Vp(c,s):jre(c,s);if(l==="bigint")return s<0?(s=-s,c.s=-1):c.s=1,Vp(c,s.toString());throw Error(Hs+s)}if(o(i,"Decimal"),i.prototype=ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=rie,i.clone=bM,i.isDecimal=$L,i.abs=Gre,i.acos=zre,i.acosh=qre,i.add=Kre,i.asin=Yre,i.asinh=Xre,i.atan=Jre,i.atanh=Zre,i.atan2=Qre,i.cbrt=eie,i.ceil=tie,i.clamp=nie,i.cos=iie,i.cosh=sie,i.div=oie,i.exp=aie,i.floor=uie,i.hypot=cie,i.ln=lie,i.log=die,i.log10=hie,i.log2=fie,i.max=gie,i.min=pie,i.mod=mie,i.mul=vie,i.pow=yie,i.random=_ie,i.round=wie,i.sign=Eie,i.sin=Tie,i.sinh=bie,i.sqrt=Sie,i.sub=Aie,i.sum=Iie,i.tan=Cie,i.tanh=Rie,i.trunc=Oie,n===void 0&&(n={}),n&&n.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}o(bM,"clone");function oie(n,e){return new this(n).div(e)}o(oie,"div");function aie(n){return new this(n).exp()}o(aie,"exp");function uie(n){return Ce(n=new this(n),n.e+1,3)}o(uie,"floor");function cie(){var n,e,t=new this(0);for(Ue=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Ue=!0,new this(1/0);t=e}return Ue=!0,t.sqrt()}o(cie,"hypot");function $L(n){return n instanceof ea||n&&n.toStringTag===mM||!1}o($L,"isDecimalInstance");function lie(n){return new this(n).ln()}o(lie,"ln");function die(n,e){return new this(n).log(e)}o(die,"log");function fie(n){return new this(n).log(2)}o(fie,"log2");function hie(n){return new this(n).log(10)}o(hie,"log10");function gie(){return wM(this,arguments,-1)}o(gie,"max$1");function pie(){return wM(this,arguments,1)}o(pie,"min$1");function mie(n,e){return new this(n).mod(e)}o(mie,"mod$1");function vie(n,e){return new this(n).mul(e)}o(vie,"mul");function yie(n,e){return new this(n).pow(e)}o(yie,"pow");function _ie(n){var e,t,r,i,s=0,a=new this(1),u=[];if(n===void 0?n=this.precision:zn(n,1,qs),r=Math.ceil(n/Ne),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));s<r;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:u[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);s<r;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(u.push(i%1e7),s+=4);s=r/4}else throw Error(pM);else for(;s<r;)u[s++]=Math.random()*1e7|0;for(r=u[--s],n%=Ne,r&&n&&(i=Xt(10,Ne-n),u[s]=(r/i|0)*i);u[s]===0;s--)u.pop();if(s<0)t=0,u=[0];else{for(t=-1;u[0]===0;t-=Ne)u.shift();for(r=1,i=u[0];i>=10;i/=10)r++;r<Ne&&(t-=Ne-r)}return a.e=t,a.d=u,a}o(_ie,"random");function wie(n){return Ce(n=new this(n),n.e+1,this.rounding)}o(wie,"round$1");function Eie(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}o(Eie,"sign$1");function Tie(n){return new this(n).sin()}o(Tie,"sin");function bie(n){return new this(n).sinh()}o(bie,"sinh");function Sie(n){return new this(n).sqrt()}o(Sie,"sqrt$1");function Aie(n,e){return new this(n).sub(e)}o(Aie,"sub");function Iie(){var n=0,e=arguments,t=new this(e[n]);for(Ue=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return Ue=!0,Ce(t,this.precision,this.rounding)}o(Iie,"sum");function Cie(n){return new this(n).tan()}o(Cie,"tan");function Rie(n){return new this(n).tanh()}o(Rie,"tanh");function Oie(n){return Ce(n=new this(n),n.e+1,1)}o(Oie,"trunc$1");ue[Symbol.for("nodejs.util.inspect.custom")]=ue.toString;ue[Symbol.toStringTag]="Decimal";var ea=ue.constructor=bM(Gb);gm=new ea(gm);pm=new ea(pm);function Pie(n){Nie(n)}o(Pie,"applyToFormat");function Nie(n){return n.prototype.toFormat=o(function(t,r,i){if(!this.e&&this.e!==0)return this.toString();let s,a,u,l,c,d,f,h,g,p,m,w,E,_,T,R=this.format||{},D=this.constructor.format||{};if(t!=c?typeof t=="object"?(i=t,t=c):r!=c?typeof r=="object"?(i=r,r=c):typeof i!="object"&&(i={}):i={}:i={},s=this.toFixed(t,r).split("."),h=s[0],g=s[1],f=this.s<0?h.slice(1):h,d=f.length,p=i.decimalSeparator,p==c&&(p=R.decimalSeparator,p==c&&(p=D.decimalSeparator,p==c&&(p="."))),m=i.groupSeparator,m==c&&(m=R.groupSeparator,m==c&&(m=D.groupSeparator)),m&&(w=i.groupSize,w==c&&(w=R.groupSize,w==c&&(w=D.groupSize,w==c&&(w=0))),E=i.secondaryGroupSize,E==c&&(E=R.secondaryGroupSize,E==c&&(E=D.secondaryGroupSize,E==c&&(E=0))),E?(a=+E,u=+w,d-=u):(a=+w,u=+E),a>0&&d>0)){for(l=d%a||a,h=f.substr(0,l);l<d;l+=a)h+=m+f.substr(l,a);u>0&&(h+=m+f.slice(l)),this.s<0&&(h="-"+h)}return g?(_=i.fractionGroupSeparator,_==c&&(_=R.fractionGroupSeparator,_==c&&(_=D.fractionGroupSeparator)),_&&(T=i.fractionGroupSize,T==c&&(T=R.fractionGroupSize,T==c&&(T=D.fractionGroupSize,T==c&&(T=0))),T=+T,T&&(g=g.replace(new RegExp("\\d{"+T+"}\\B","g"),"$&"+_))),h+p+g):h},"toFormat"),n.format={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"",fractionGroupSize:0},n}o(Nie,"toFormat");Pie(ea);var BL;(function(n){n[n.roundUp=0]="roundUp",n[n.roundDown=1]="roundDown",n[n.roundCeil=2]="roundCeil",n[n.roundFloor=3]="roundFloor",n[n.roundHalfUp=4]="roundHalfUp",n[n.roundHalfDown=5]="roundHalfDown",n[n.roundHalfEven=6]="roundHalfEven",n[n.roundHalfCeil=7]="roundHalfCeil",n[n.roundHalfFloor=8]="roundHalfFloor"})(BL||(BL={}));var ad=ea.config({precision:30,toExpNeg:-1024,toExpPos:1024,rounding:ea.ROUND_HALF_EVEN}),et=class et{constructor(e){this.add=this.plus,this.sub=this.minus,this.eq=this.equals,this.fastEquals=this.equals,this.lt=this.lessThan,this.lte=this.lessThanOrEqualTo,this.gt=this.greaterThan,this.gte=this.greaterThanOrEqualTo;let t=et.unwrapInputValue(e);this.internalValue=et.unsignedZeroOrValue(new ad(t))}static unsignedZeroOrValue(e){return e.isZero()?new ad(0):e}static unwrapInputValue(e){return typeof e=="string"||typeof e=="number"?e:"internalValue"in e?e.internalValue:e}static max(e,t){let[r,i]=[et.unwrapInputValue(e),et.unwrapInputValue(t)],s=ad.max(r,i);return new et(s)}static min(e,t){let[r,i]=[et.unwrapInputValue(e),et.unwrapInputValue(t)],s=ad.min(r,i);return new et(s)}abs(){let e=this.internalValue.abs();return new et(e)}neg(){let e=this.internalValue.neg();return new et(e)}sqrt(){let e=this.internalValue.sqrt();return new et(e)}trunc(){let e=this.internalValue.trunc();return new et(e)}round(){let e=this.internalValue.round();return new et(e)}isNaN(){return this.internalValue.isNaN()}isInteger(){return this.internalValue.isInteger()}decimalPlaces(){return this.internalValue.decimalPlaces()}plus(e){let t=et.unwrapInputValue(e),r=this.internalValue.plus(t);return new et(r)}minus(e){let t=et.unwrapInputValue(e),r=this.internalValue.minus(t);return new et(r)}times(e){let t=et.unwrapInputValue(e),r=this.internalValue.times(t);return new et(r)}div(e){let t=et.unwrapInputValue(e),r=this.internalValue.div(t);return new et(r)}pow(e){let t=et.unwrapInputValue(e),r=this.internalValue.pow(t);return new et(r)}mod(e){let t=et.unwrapInputValue(e),r=this.internalValue.mod(t);return new et(r)}equals(e){let t=et.unwrapInputValue(e);return this.internalValue.equals(t)}lessThan(e){let t=et.unwrapInputValue(e);return this.internalValue.lessThan(t)}lessThanOrEqualTo(e){let t=et.unwrapInputValue(e);return this.internalValue.lessThanOrEqualTo(t)}greaterThan(e){let t=et.unwrapInputValue(e);return this.internalValue.greaterThan(t)}greaterThanOrEqualTo(e){let t=et.unwrapInputValue(e);return this.internalValue.greaterThanOrEqualTo(t)}toString(){return this.internalValue.toString()}toNumber(){return this.internalValue.toNumber()}valueOf(){return this.internalValue.valueOf()}toFixed(e){return this.internalValue.toFixed(e)}toFormat(){return this.internalValue.toFormat(...arguments)}toDecimalPlaces(e){let t=this.internalValue.toDecimalPlaces(e);return new et(t)}};o(et,"Decimal");var Fe=et;Fe.rounding=ad.rounding;Fe.defaultValue=new Fe(0);function Rs(n){let e=n.length,t=new Array(e);for(;e-- >0;)t[e]=n[e];return t}o(Rs,"copyArray");function SM(n){var i;let e=Object.keys(n);function t(s){e.forEach(a=>{this[a]=s[a]})}o(t,"CloneOfRecordProps");let r=(i=class{constructor(a){this._=a!=null?a:n}get(a){return this._[a]}set(a,u){let l=new t(this._);return l[a]=u,new r(l)}toJS(){let a={};return e.forEach(u=>{a[u]=this._[u]}),a}},o(i,"NewImmutableRecord"),i);return r}o(SM,"defineRecordClass");var Lo=128,jn=class jn{constructor(e,t){if(typeof t!="undefined")this._values=e,this._lengths=t;else if(typeof e!="undefined"){let r=jn.fromJS(e);this._values=r._values,this._lengths=r._lengths}else this._values=[],this._lengths=[]}clear(){return new jn}clone(){return this}count(){let e=0,t=this._lengths.length;for(;t-- >0;)e+=this._lengths[t];return e}isEmpty(){return this._lengths.length===0}get(e){let t=0,r=e,i=this._lengths.length;for(;t<i&&e>=0;){if(r<this._lengths[t])return this._values[t][r];r-=this._lengths[t],t++}}set(e,t){let r=0,i=e,s=Rs(this._values),a=this._lengths,u=a.length;for(;r<u&&e>=0;){if(i<this._lengths[r])return s[r]=Rs(s[r]),s[r][i]=t,new jn(s,a);i-=a[r],r++}}push(e){let t=this._values.length-1,r,i;t<0?(t=0,r=[[]],i=[0]):(r=Rs(this._values),i=Rs(this._lengths));let s=r[t];if(s.length<Lo){let a=s.length,u=new Array(a+1),l=a;for(;l-- >0;)u[l]=s[l];u[a]=e,r[t]=u,i[t]++}else{let a=[e];r.push(a),i.push(1)}return new jn(r,i)}insert(e,t){let r=0,i=e,s=Rs(this._values),a=Rs(this._lengths),u=a.length;for(;r<u&&i>=0;){if(i<a[r]){if(a[r]===Lo){let g=Lo/2|0,p=Lo-g;a.splice(r,1,g,p);let m=new Array(g),w=new Array(p);for(let E=0;E<g;E++)m[E]=s[r][E];for(let E=0,_=g;E<p;)w[E++]=s[r][_++];s.splice(r,1,m,w),u++;continue}let l=0,c=a[r],d=new Array(c+1),f=s[r];for(;l<i;l++)d[l]=f[l];d[i]=t;let h=l+1;for(;l<c;)d[h++]=f[l++];return a[r]++,s[r]=d,new jn(s,a)}i-=a[r],r++}return a.push(1),s.push([t]),new jn(s,a)}remove(e){let t=0,r=e,i=Rs(this._lengths),s=Rs(this._values),a=i.length;for(;t<a&&r>=0;){if(r<i[t]){let u=--i[t],l=new Array(u),c=0,d=0;for(;c<u;)c===r&&d++,l[c++]=s[t][d++];return s[t]=l,i[t]===0&&(i.splice(t,1),s.splice(t,1)),new jn(s,i)}r-=i[t],t++}}reduce(e,t){for(let r=0;r<this._values.length;r++){let i=this._values[r];for(let s=0;s<i.length;s++)t=e(t,i[s])}return t}map(e){let t=new Array(this.count()),r=0;for(let i=0;i<this._values.length;i++){let s=this._values[i];for(let a=0;a<s.length;a++)t[r]=e(s[a],r),r++}return t}pushAll(e){if(e.length===0)return this;let t=new jn(e),r=this._values.concat(t._values),i=this._lengths.concat(t._lengths);return new jn(r,i)}forEach(e){for(let t=0;t<this._values.length;t++){let r=this._values[t];for(let i=0;i<r.length;i++)e(r[i])}}addFromOther(e){if(e.count()===0)return this;if(this._values.length===0)return e;let t=new Array(this._lengths.length+e._lengths.length),r=new Array(this._values.length+e._values.length),i=0,s=0;for(;i<this._values.length;)r[i]=this._values[i],t[i]=this._lengths[i],i++;for(;s<e._values.length;)r[i]=e._values[s],t[i]=e._lengths[s],i++,s++;return new jn(r,t)}static fromJS(e){let t=Math.ceil(e.length/Lo)|0,r=new Array(t),i=new Array(t),s=0,a=0;for(let u=0;u<t;u++){a=e.length-s;let l=a>Lo?Lo:a;i[u]=l,r[u]=new Array(l);for(let c=0;c<l;c++)r[u][c]=e[s+c];s+=l}return new jn(r,i)}};o(jn,"ImmutableList");var ji=jn,Die=Object.freeze({__proto__:null,ImmutableList:ji,defineRecordClass:SM}),Pe,Yt,kA,FA,Fr,yI=class yI{constructor(e){Yt.set(this,void 0),this.neg=this.negate,this.eq=this.equals,this.fastEquals=this.equals,this.lt=this.lessThan,this.lte=this.lessThanOrEqual,this.gt=this.greaterThan,this.gte=this.greaterThanOrEqual;let t;try{typeof e=="bigint"?t=e:typeof e=="number"?t=BigInt(Math.trunc(e)):t=BigInt(e)}catch(r){t=BigInt(0)}if(t<ie(Pe,Pe,"f",kA)||t>ie(Pe,Pe,"f",FA))throw new Error("Value is out of bounds for a 64-bit signed integer");lt(this,Yt,t,"f")}static fromNumber(e){return new Pe(e)}static fromString(e){return new Pe(e)}static fromValue(e){return new Pe(e instanceof Pe?ie(e,Yt,"f"):e)}negate(){return new Pe(-ie(this,Yt,"f"))}add(e){let t=ie(Pe,Pe,"m",Fr).call(Pe,e);return new Pe(ie(this,Yt,"f")+BigInt(t))}sub(e){let t=ie(Pe,Pe,"m",Fr).call(Pe,e);return new Pe(ie(this,Yt,"f")-BigInt(t))}mul(e){let t=ie(Pe,Pe,"m",Fr).call(Pe,e);return new Pe(ie(this,Yt,"f")*BigInt(t))}div(e){let t=ie(Pe,Pe,"m",Fr).call(Pe,e);return new Pe(ie(this,Yt,"f")/BigInt(t))}and(e){let t=ie(Pe,Pe,"m",Fr).call(Pe,e);return new Pe(ie(this,Yt,"f")&BigInt(t))}equals(e){let t=ie(Pe,Pe,"m",Fr).call(Pe,e);return ie(this,Yt,"f")===BigInt(t)}lessThan(e){let t=ie(Pe,Pe,"m",Fr).call(Pe,e);return ie(this,Yt,"f")<BigInt(t)}lessThanOrEqual(e){let t=ie(Pe,Pe,"m",Fr).call(Pe,e);return ie(this,Yt,"f")<=BigInt(t)}greaterThan(e){let t=ie(Pe,Pe,"m",Fr).call(Pe,e);return ie(this,Yt,"f")>BigInt(t)}greaterThanOrEqual(e){let t=ie(Pe,Pe,"m",Fr).call(Pe,e);return ie(this,Yt,"f")>=BigInt(t)}toNumber(){return Number(ie(this,Yt,"f"))}toString(){return ie(this,Yt,"f").toString()}valueOf(){return ie(this,Yt,"f").valueOf()}};o(yI,"LongInteger");var Tt=yI;Pe=Tt,Yt=new WeakMap,Fr=o(function(e){return e instanceof Pe?ie(e,Yt,"f"):e},"_LongInteger_unwrapInputValue");kA={value:BigInt("-9223372036854775808")};FA={value:BigInt("9223372036854775807")};Tt.defaultValue=new Pe(0);Tt.MIN_VALUE=new Pe(ie(Pe,Pe,"f",kA));Tt.MAX_VALUE=new Pe(ie(Pe,Pe,"f",FA));var VL={};function AM(n,e){let t=VL[n];if(typeof t!="undefined")return t;let r=n.replace(new RegExp("["+e.join("")+"]","gi"),"").substr(0,1),i=[],s;for(s=0;s<e.length;s++)i.push({index:n.toLowerCase().indexOf(e[s]),character:e[s],length:n.replace(new RegExp("[^"+e[s]+"]","gi"),"").length});i.sort((u,l)=>u.index<l.index?-1:1);let a={format:n,separator:r,parts:{},regExp:"^"};for(s=0;s<i.length;s++){let u="";switch(i[s].character.toLowerCase()){case"h":case"m":case"d":u="1,2";break;case"s":a.regExp+="(?"+r,u="1,2";break;default:u=i[s].length}s>0&&(a.regExp+="\\"+r),a.regExp+="([0-9]{"+u+"})"+(i[s].character==="s"?")?":""),a.parts[i[s].character+"Index"]=s,a.parts[i[s].character+"Format"]=n.slice(i[s].index,i[s].index+i[s].length)}return a.regExp+="$",VL[n]=a,a}o(AM,"parseComponentFormat");function Lie(n){return AM(n,["y","m","d"])}o(Lie,"parseDateFormat");function xie(n){return AM(n,["h","m","s"])}o(xie,"parseTimeFormat");var tr=class tr{static getDayName(e){return tr.DayNames[e]}static getShortDayName(e){return tr.DayNames[e].slice(0,3)}static getMonthName(e){return tr.MonthNames[e-1]}static getShortMonthName(e){return tr.MonthNames[e-1].slice(0,3)}static get12HourNotation(e){return e<12?"AM":"PM"}static getTimezoneInformationFull(e){return e=-e,tr.getTimezoneSignal(e)+tr.padLeadingZeros(Math.floor(e/60).toString(),2)+":"+tr.padLeadingZeros(Math.floor(e%60).toString(),2)}static getTimezoneInformationHoursFull(e){return e=-e,tr.getTimezoneSignal(e)+tr.padLeadingZeros(Math.floor(e/60).toString(),2)}static getTimezoneInformationHoursShort(e){return e=-e,tr.getTimezoneSignal(e)+Math.floor(e/60)}static getTimezoneSignal(e){return e<0?"-":"+"}static padLeadingZeros(e,t){let r=e||"";for(;r.length<t;)r="0"+r;return r}static removeTrailingZeros(e){return(e||"").replace(/0+$/gm,"")}constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:" ",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";this.dateFmt=Lie(e),this.timeFmt=xie(t),this.dateTimeSep=r,this.tzInformation=i}get dateFormat(){return this.dateFmt.format}get timeFormat(){return this.timeFmt.format}get dateTimeFormat(){return this.dateFmt.format+this.dateTimeSeparator+this.timeFmt.format}getRegExpForDate(){return new RegExp(this.dateFmt.regExp,"i")}get yearIndexForDate(){return this.dateFmt.parts.yIndex}get monthIndexForDate(){return this.dateFmt.parts.mIndex}get dayIndexForDate(){return this.dateFmt.parts.dIndex}get yearFormatForDate(){return this.dateFmt.parts.yFormat}get monthFormatForDate(){return this.dateFmt.parts.mFormat}get dayFormatForDate(){return this.dateFmt.parts.dFormat}get dateSeparator(){return this.dateFmt.separator}getRegExpForTime(){return new RegExp(this.timeFmt.regExp,"i")}get hoursIndexForTime(){return this.timeFmt.parts.hIndex}get minutesIndexForTime(){return this.timeFmt.parts.mIndex}get secondsIndexForTime(){return this.timeFmt.parts.sIndex}get timeSeparator(){return this.timeFmt.separator}get dateTimeSeparator(){return this.dateTimeSep}getRegExpForDateTime(){return new RegExp(this.dateFmt.regExp.substring(0,this.dateFmt.regExp.length-1)+this.dateTimeSeparator+this.timeFmt.regExp.substring(1,this.timeFmt.regExp.length-1)+this.tzInformation+"$","i")}get yearIndexForDateTime(){return this.dateFmt.parts.yIndex}get monthIndexForDateTime(){return this.dateFmt.parts.mIndex}get dayIndexForDateTime(){return this.dateFmt.parts.dIndex}get hoursIndexForDateTime(){return this.timeFmt.parts.hIndex+3}get hoursFormatForTime(){return this.timeFmt.parts.hFormat}get minutesFormatForTime(){return this.timeFmt.parts.mFormat}get secondsFormatForTime(){return this.timeFmt.parts.sFormat}get minutesIndexForDateTime(){return this.timeFmt.parts.mIndex+3}get secondsIndexForDateTime(){return this.timeFmt.parts.sIndex+3}};o(tr,"DateTimeFormatInfo");var dt=tr;dt.DayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];dt.MonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];var _I=class _I{constructor(e,t){this.decimalSep=e,this.groupSep=t,this.generateFormatRegExps(e,t)}generateFormatRegExps(e,t){let r="\\"+e,i="(([0-9]{1,3}("+(t?"\\"+t:"")+"[0-9]{3})*)|([0-9]+))",s="[0-9]+";this.integerFmtRegExp="^[-]?"+i+"$",this.decimalFmtRegExp="^[-]?(("+i+"("+r+"("+s+")?)?)|(("+i+")?"+r+s+"))$"}get decimalSeparator(){return this.decimalSep}get groupSeparator(){return this.groupSep}getRegExpForInteger(){return new RegExp(this.integerFmtRegExp,"i")}getRegExpForDecimal(){return new RegExp(this.decimalFmtRegExp,"i")}getRegExpForJSNumber(){return new RegExp("^-?(?:0|[1-9]\\d*)(?:\\.\\d+)?(?:[eE][+-]?\\d+)?$","i")}};o(_I,"NumberFormatInfo");var vm=_I,wI=class wI{constructor(e,t){this.defaultDateTimeFormats=[new dt("yyyy-MM-dd","HH:mm:ss"),new dt("yyyy-MM-dd","HH:mm:ss"),new dt("yyyy/MM/dd","HH:mm:ss"),new dt("yyyy.MM.dd","HH:mm:ss")],this.defaultNumberFmt=t,this.currentNumberFmt=t,this.defaultDateTimeFormats[0]=e}get defaultDateTimeFormat(){return this.defaultDateTimeFormats[0]}get dateTimeFormats(){return this.defaultDateTimeFormats}set dateTimeFormat(e){this.defaultDateTimeFormats[0]=e}get defaultNumberFormat(){return this.defaultNumberFmt}get numberFormat(){return this.currentNumberFmt}set numberFormat(e){this.currentNumberFmt=e}};o(wI,"ApplicationFormatInfo");var ym=wI,Uie=Object.freeze({__proto__:null,ApplicationFormatInfo:ym,DateTimeFormatInfo:dt,NumberFormatInfo:vm}),$A="outsystems-";function IM(n,e){if(e=e!=null?e:$A,typeof n!="object"||n===null)return;let t={};for(let[r,i]of Object.entries(n))t[e+r]=i;return t}o(IM,"buildCustomHeaders");function CM(n,e){e=e!=null?e:$A;let t=e.toLowerCase();if(typeof n!="object"||n===null)return{};let r={};for(let[i,s]of Object.entries(n))i.toLowerCase().startsWith(t)&&(r[i.substring(e.length)]=s);return r}o(CM,"extractCustomHeaders");var Mie=Object.freeze({__proto__:null,buildCustomHeaders:IM,extractCustomHeaders:CM}),Xu="Communication",kie="http.status_code",RM=250,Uv=o(n=>M(void 0,[n],void 0,function(e){let{url:t,params:r,headers:i,responseType:s,useLocaleInfo:a,timeout:u,timeoutHandler:l,baseURL:c,httpClient:d=pe.resolve(X.HttpClient)}=e;return(function*(){if(!d)throw new Error("Could not resolve the http client instance.");try{return yield d.get({url:t,params:r,headers:i,responseType:s,useLocaleInfo:a,timeout:u,timeoutHandler:l,baseURL:c})}catch(f){throw DM(f)}})()}),"get"),Fie=o(n=>M(void 0,[n],void 0,function(e){let{url:t,params:r,headers:i,useLocaleInfo:s,timeout:a,timeoutHandler:u,baseURL:l,httpClient:c=pe.resolve(X.HttpClient)}=e;return(function*(){if(!c)throw new Error("Could not resolve the http client instance.");return c.getResponseUrl({url:t,params:r,headers:i,useLocaleInfo:s,timeout:a,timeoutHandler:u,baseURL:l})})()}),"getResponseUrl"),OM=o(n=>$ie(n)||NM(n),"isWellFormedResponsePayload"),PM=o(n=>n!==null&&typeof n=="object"&&typeof n.hasApiVersionChanged=="boolean"&&typeof n.hasModuleVersionChanged=="boolean","isVersionInfo"),$ie=o(n=>n!==null&&typeof n=="object"&&(!n.hasOwnProperty("exception")||n.exception===void 0)&&typeof n.clientSettingsHash=="string"&&typeof n.shouldRefreshToken=="boolean"&&PM(n.versionInfo),"isSuccessResponsePayload"),NM=o(n=>n!==null&&typeof n=="object"&&typeof n.exception=="object"&&typeof n.clientSettingsHash=="string"&&(typeof n.status=="number"||typeof n.status=="undefined")&&typeof n.shouldRefreshToken=="boolean"&&PM(n.versionInfo),"isErrorResponsePayload"),Bie=o(n=>{let e=[];if(OM(n)&&!n.versionInfo.hasModuleVersionChanged&&n.versionInfo.hasApiVersionChanged){let t="The application was unable to make a request to the server - the API version changed, but the module version did not.";e.push({clientMessage:t,internalMessage:t})}return e},"validateResponsePayload"),BA=o(n=>M(void 0,[n],void 0,function(e){let{url:t,payload:r,params:i,headers:s,contentType:a,timeout:u,timeoutHandler:l,useLocaleInfo:c,baseURL:d,abortCommand:f,responseHandler:h,refreshAuthTokens:g=XU,httpClient:p=pe.resolve(X.HttpClient),lifecycleEventsManager:m=pe.resolve(X.LifecycleEventsManager),actionOrAggregateName:w}=e;return(function*(){if(!p)throw new Error("Could not resolve the http client instance.");let E=IM(s),_=Object.assign(Object.assign({},E),{"content-type":"application/json; charset=UTF-8"}),T=[];try{let R=yield p.post({url:t,payload:r,params:i,headers:_,contentType:a!=null?a:nn.Json,timeout:u,timeoutHandler:l,useLocaleInfo:c,baseURL:d,abortCommand:f,responseHandler:Vie(h)});if(R!=null&&R.shouldRefreshToken&&(nr(Xu,"Refresh Tokens initiated: Response from the server indicates that tokens should be refreshed.",Re.Internal),yield g()),T=Bie(R),OM(R)&&jie(R,D=>m==null?void 0:m.onNewVersion(D)),NM(R))throw Wie(R,w);return R==null?void 0:R.data}catch(R){throw DM(R)}finally{for(let{clientMessage:R,internalMessage:D}of T)gc({category:Xu,clientMessage:R,internalMessage:D,errorCode:Ve.Communication_Internal_Server_Error})}})()}),"post"),Vie=o(n=>{if(typeof n=="function")return e=>{let{data:t,responseHeaders:r}=e,i=CM(r);n({data:t,responseHeaders:i})}},"buildResponseHandler"),Hie=o(n=>n&&Object.values(Ve).includes(n),"isCommunicationError"),DM=o(n=>{var e,t,r,i,s;if(n.errorCode==="OS-CLRT-40103")throw De(Xu,"User is not logged in",n.errorCode,n,Re.Internal),new me.SecurityException("Not authorized",Ki(n));if(Hie(n.errorCode)){let a=(t=(e=n.response)===null||e===void 0?void 0:e.exception)!==null&&t!==void 0?t:n;throw new me.CommunicationException(`CommunicationException: ${(r=a.message)!==null&&r!==void 0?r:n.message}`,Ki(a),n.errorCode,n.category)}return n.errorCode=(i=n.errorCode)!==null&&i!==void 0?i:Ve.Communication_Default,n.category=(s=n.category)!==null&&s!==void 0?s:Xu,n},"mappedException"),jie=o((n,e)=>{if(n.versionInfo.hasModuleVersionChanged){if(n.versionInfo.hasApiVersionChanged)throw e(!0),new me.ViewHasChangedException("View has changed.");e(!1)}},"handleVersionInfoChanges"),Wie=o((n,e)=>{var t,r;let i=wx(n.exception),s=`Post request ${e?`issued by '${e}' `:""}failed: ${i.message}`,a="Post request failed",u={};return n.status&&(u[kie]=n.status),n.status===RM?De(Xu,a,(t=i.errorCode)!==null&&t!==void 0?t:Ve.Communication_Default,void 0,Re.Internal,u):gc({category:Xu,clientMessage:s,internalMessage:a,errorCode:(r=i.errorCode)!==null&&r!==void 0?r:Ve.Communication_Default,errorObj:i,attributes:u}),i},"processExceptionFromResponse"),Gie=Object.freeze({__proto__:null,SCREEN_SERVICES_EXCEPTION_HTTP_STATUS_CODE:RM,get:Uv,getResponseUrl:Fie,post:BA}),Pu=class Pu{constructor(e,t,r){this._url=t,this.getOfflineContent=r,this._cachedBlob=null,this.authenticatedUrlsRegex=[/screenservices\/.*\/_BinaryContent\/.*/],typeof Blob!="undefined"&&e instanceof Blob?(this._cachedBlob=e,this.getOfflineContent=()=>this._content?Promise.resolve(this._content):Pu.blobToBase64(this._cachedBlob)):this._content=e||null}get url(){return this._url}set url(e){this._url=e,this.clearCachedBlob()}get cachedBlob(){return this._cachedBlob}get content(){return this._content}set content(e){this._content=e,this.clearCachedBlob()}needsAuthentication(){var e;let t=(e=this._url)!==null&&e!==void 0?e:"";return this.authenticatedUrlsRegex.some(r=>r.test(t))}loadBlobData(){return M(this,void 0,void 0,function*(){var e;let t=yield Uv({url:(e=this._url)!==null&&e!==void 0?e:"",responseType:"blob"});return t!=null?t:new Blob})}loadContent(){return M(this,void 0,void 0,function*(){return this.needsAuthentication()?this.loadBlobData().then(e=>(this._cachedBlob=e,Promise.resolve(this))):this.getOfflineContent?this.getOfflineContent().then(e=>(this.content=e,Promise.resolve(this))):wr(()=>this)})}hasContent(){return!!(this._url&&!this.needsAuthentication()||this._content)}fastEquals(e){return e&&this.constructor===e.constructor&&this._url===e._url&&this._content===e._content&&(!!this.getOfflineContent&&!!e.getOfflineContent||!this.getOfflineContent&&!e.getOfflineContent)}base64toHex(e){let t=atob(e),r="";for(let i=0;i<t.length;i++){let s=t.charCodeAt(i).toString(16);r+=s.length===2?s:"0"+s}return r}getContentType(){if(this._content){let e=this.base64toHex(this._content.substr(0,16));return e.substr(0,8)==="00000100"?"image/x-icon":e.substr(0,8)==="ffd8ffdb"||e.substr(0,8)==="ffd8ffe0"||e.substr(0,8)==="ffd8ffe1"?"image/jpeg":e.substr(0,8)==="49492a00"||e.substr(0,8)==="4d4d002a"?"image/tiff":e.substr(0,4)==="424d"?"image/bmp":e.substr(0,6)==="474946"?"image/gif":e.substr(0,8)==="89504e47"?"image/png":"application/octet-stream"}else return null}toDataURI(){return this._content?`data:${this.getContentType()};base64,${this._content}`:null}toBlob(){var e;if(!this._cachedBlob&&this._content){let t=(e=this.getContentType())!==null&&e!==void 0?e:void 0;this._cachedBlob=Pu.base64toBlob(this._content,t)}return this._cachedBlob}toArrayBuffer(){return this._content?Pu.base64ToArrayBuffer(this._content):null}get length(){let e=this.toBlob();return e?e.size:0}static blobToBase64(e){return new Promise((t,r)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=()=>{let s=i.result;t(s.substring(s.indexOf(",")+1))},i.onerror=()=>{r(i.error)}})}static base64toBlob(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:512,i=atob((e||"").replace(/\s/g,"")),s=[];for(let a=0;a<i.length;a+=r){let u=i.slice(a,a+r),l=new Array(u.length);for(let d=0;d<u.length;d++)l[d]=u.charCodeAt(d);let c=new Uint8Array(l);s.push(c)}return new Blob(s,{type:t})}static base64ToArrayBuffer(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0)).buffer}clearCachedBlob(){this._cachedBlob=null}requestUrl(){return M(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>pe.resolve(X.BinaryUrlCache);return(function*(){return e._url&&!e.needsAuthentication()?e._url:(yield e.loadContent(),!e.hasContent()&&!e.cachedBlob?null:t().getUrl(e))})()})}releaseUrl(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>pe.resolve(X.BinaryUrlCache))().releaseUrl(this)}};o(Pu,"BinaryData");var On=Pu;On.defaultValue=new On;function Ln(n,e){return n==null?e:n}o(Ln,"coalesce");var vt=class vt{static get defaultValue(){return vt.defaultValueField}constructor(e,t,r,i,s,a,u){if(arguments.length===0)this.date=new Date(1900,0,1,0,0,0,0);else if(arguments.length===1)if(e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"){let l=e.getTime();isNaN(l)?this.date=new Date(1900,0,1,0,0,0,0):this.date=new Date(l)}else this.date=new Date(e);else Ln(e,1900)<100?(this.date=new Date(100,0,1,0,0,0,0),this.date.setFullYear(Ln(e,1900)),this.date.setMonth(Ln(t,1)-1),this.date.setDate(Ln(r,1)),this.date.setHours(Ln(i,0)),this.date.setMinutes(Ln(s,0)),this.date.setSeconds(Ln(a,0)),this.date.setMilliseconds(Ln(u,0))):this.date=new Date(Ln(e,1900),Ln(t,1)-1,Ln(r,1),Ln(i,0),Ln(s,0),Ln(a,0),Ln(u,0))}get year(){return this.date.getFullYear()}get month(){return this.date.getMonth()+1}get day(){return this.date.getDate()}get hours(){return this.date.getHours()}get minutes(){return this.date.getMinutes()}get seconds(){return this.date.getSeconds()}get milliseconds(){return this.date.getMilliseconds()}get weekDay(){return this.date.getDay()}addYears(e){let t=new vt(this.year+e,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds);return this.month===2&&this.day===29&&t.month===3?new vt(t.year,2,28,t.hours,t.minutes,t.seconds,t.milliseconds):t}daysInMonth(e,t){return new Date(t,e,0).getDate()}addMonths(e){let t=new vt(this.year,this.month+e,this.day,this.hours,this.minutes,this.seconds,this.milliseconds);return t.day===this.day?t:new vt(t.year,t.month-1,this.daysInMonth(t.month-1,t.year),t.hours,t.minutes,t.seconds,t.milliseconds)}addDays(e){return new vt(this.year,this.month,this.day+e,this.hours,this.minutes,this.seconds,this.milliseconds)}addHours(e){return new vt(this.year,this.month,this.day,this.hours+e,this.minutes,this.seconds,this.milliseconds)}addMinutes(e){return new vt(this.year,this.month,this.day,this.hours,this.minutes+e,this.seconds,this.milliseconds)}addSeconds(e){return new vt(this.year,this.month,this.day,this.hours,this.minutes,this.seconds+e,this.milliseconds)}addMilliseconds(e){return new vt(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds+e)}equals(e){return!!e&&this.date.getTime()===e.date.getTime()}eq(e){return this.equals(e)}fastEquals(e){return this.equals(e)}greaterThan(e){return this.date>e.date}gt(e){return this.greaterThan(e)}greaterThanOrEqualTo(e){return this.date>=e.date}gte(e){return this.greaterThanOrEqualTo(e)}lessThan(e){return this.date<e.date}lt(e){return this.lessThan(e)}lessThanOrEqualTo(e){return this.date<=e.date}lte(e){return this.lessThanOrEqualTo(e)}toNative(){return new Date(this.date.getTime())}getTime(){return this.date.getTime()}valueOf(){return this.date.valueOf()}static fromISODate(e){return vt.RFC3339_DATEPART.test(e)?vt.internalFromUTCWithoutConversion(e+"T00:00:00Z"):vt.defaultValue}toISODate(){return this.toString(vt.RFC3339_DATEPART_FORMAT)}static fromISOTime(e){return vt.RFC3339_TIMEPART.test(e)?vt.internalFromUTCWithoutConversion("1900-01-01T"+e+"Z"):vt.defaultValue}toISOTime(){return this.toString(vt.RFC3339_TIMEPART_FORMAT)}static fromISODateTime(e){if(e=e||"",e===""||e.indexOf("1900-01-01")>=0&&e.indexOf("00:00:00")>=0)return vt.defaultValue;let t=/([+\-]\d{2}((:\d{2})|(\d{2})?)|Z)$/;if(e.indexOf("T")>0&&!t.test(e))return vt.internalFromUTCWithoutConversion(e.trim()+"Z");e=e.replace(/([+-]\d{2})$/,o(function(s){return s+"00"},"fun"));let r=Date.parse(e);return isNaN(r)?vt.defaultValue:new vt(r)}static internalFromUTCWithoutConversion(e){let t=Date.parse(e);if(!isNaN(t)){let r=new Date(t);return new vt(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())}return vt.defaultValue}getMillisecondsString(){return(this.milliseconds/1e3).toFixed(3).substring(2,5)}toString(e){return e===void 0?this.equals(vt.defaultValue)?"1900-01-01T00:00:00":this.date.toISOString():e.replace(/(\\.)|dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|ff?f?|FF?F?|\.FF?F?|tt?|zz?z?/g,t=>{if(t.indexOf("\\")===0)return t.substring(1);switch(t){case"hh":case"h":let r=this.hours<13?this.hours:this.hours-12;return dt.padLeadingZeros((this.hours===0?12:r).toString(),t.length);case"HH":case"H":return dt.padLeadingZeros(this.hours.toString(),t.length);case"mm":case"m":return dt.padLeadingZeros(this.minutes.toString(),t.length);case"ss":case"s":return dt.padLeadingZeros(this.seconds.toString(),t.length);case"fff":return this.getMillisecondsString();case"ff":return this.getMillisecondsString().substring(0,2);case"f":return this.getMillisecondsString().substring(0,1);case".FFF":case".FF":case".F":return this.milliseconds===0?"":"."+dt.removeTrailingZeros(this.getMillisecondsString());case"FFF":return dt.removeTrailingZeros(this.getMillisecondsString());case"FF":return dt.removeTrailingZeros(this.getMillisecondsString()).substring(0,2);case"F":return dt.removeTrailingZeros(this.getMillisecondsString()).substring(0,1);case"yyyy":case"yyy":let i=this.year.toString();return i.charAt(0)==="0"?this.year.toString().substring(1):i;case"yy":return this.year.toString().substring(2,4);case"y":return Number(this.year.toString().substring(2,4)).toString();case"dddd":return dt.getDayName(this.weekDay);case"ddd":return dt.getShortDayName(this.weekDay);case"dd":case"d":return dt.padLeadingZeros(this.day.toString(),t.length);case"MMMM":return dt.getMonthName(this.month);case"MMM":return dt.getShortMonthName(this.month);case"MM":case"M":return dt.padLeadingZeros(this.month.toString(),t.length);case"t":return dt.get12HourNotation(this.hours).substring(0,1);case"tt":return dt.get12HourNotation(this.hours);case"zzz":return dt.getTimezoneInformationFull(this.date.getTimezoneOffset());case"zz":return dt.getTimezoneInformationHoursFull(this.date.getTimezoneOffset());case"z":return dt.getTimezoneInformationHoursShort(this.date.getTimezoneOffset());default:return t}})}};o(vt,"DateTime");var he=vt;he.RFC3339_TIMEPART=/^([01][0-9]|2[0-3]):([0-5][0-9])(:[0-5][0-9](\.\d+)?)?$/;he.RFC3339_DATEPART=/^\d{4,}-(0\d|1[012])-([0-2]\d|3[01])$/;he.RFC3339_TIMEPART_FORMAT="HH:mm:ss";he.RFC3339_DATEPART_FORMAT="yyyy-MM-dd";he.defaultValueField=new he;var b;(function(n){n[n.Integer=0]="Integer",n[n.LongInteger=1]="LongInteger",n[n.Decimal=2]="Decimal",n[n.Currency=3]="Currency",n[n.Text=4]="Text",n[n.PhoneNumber=5]="PhoneNumber",n[n.Email=6]="Email",n[n.Boolean=7]="Boolean",n[n.Date=8]="Date",n[n.DateTime=9]="DateTime",n[n.Time=10]="Time",n[n.Record=11]="Record",n[n.RecordList=12]="RecordList",n[n.BinaryData=13]="BinaryData",n[n.Object=14]="Object"})(b||(b={}));var k;(function(n){n.RFC3339_TIMEPART=he.RFC3339_TIMEPART,n.RFC3339_DATEPART=he.RFC3339_DATEPART,n.RFC3339_TIMEPART_FORMAT=he.RFC3339_TIMEPART_FORMAT,n.RFC3339_DATEPART_FORMAT=he.RFC3339_DATEPART_FORMAT,n.MIN_INTEGER_VALUE=-2147483648,n.MAX_INTEGER_VALUE=2147483647,n.MIN_LONGINTEGER_VALUE=Tt.MIN_VALUE,n.MAX_LONGINTEGER_VALUE=Tt.MAX_VALUE,n.MIN_DECIMAL_VALUE=new Fe("2").pow(96).neg(),n.MAX_DECIMAL_VALUE=new Fe("2").pow(96).minus(1),n.MIN_DATE_VALUE=new he(1753,1,1),n.MAX_DATE_VALUE=new he(9999,12,31),n.MIN_TIME_VALUE=he.defaultValue,n.MAX_TIME_VALUE=he.defaultValue.addHours(23).addMinutes(59).addSeconds(59),n.MIN_DATETIME_VALUE=new he(1753,1,1,0,0,0),n.MAX_DATETIME_VALUE=new he(9999,12,31,23,59,59),n.DEFAULT_INTEGER=0,n.DEFAULT_LONGINTEGER=Tt.defaultValue,n.DEFAULT_DECIMAL=Fe.defaultValue,n.DEFAULT_CURRENCY=Fe.defaultValue,n.DEFAULT_TEXT="",n.DEFAULT_PHONENUMBER="",n.DEFAULT_EMAIL="",n.DEFAULT_BOOLEAN=!1,n.DEFAULT_DATE=he.defaultValue,n.DEFAULT_DATETIME=he.defaultValue,n.DEFAULT_TIME=he.defaultValue,n.DEFAULT_BINARYDATA=On.defaultValue,n.DEFAULT_OBJECT=null,n.FORMAT=new ym(new dt("yyyy-MM-dd","HH:mm:ss"),new vm(".","")),n.ISO_DATE_FORMAT_REGEXP=/^\d{4,}-(0\d|1[012])-([0-2]\d|3[01])([T ]\d{2}:\d{2}(:\d{2}(\.\d+)?(([+\-]\d{2}((:\d{2})|(\d{2})?))|Z)?)?)?$/i})(k||(k={}));function Cn(n){switch(n){case b.Integer:return k.DEFAULT_INTEGER;case b.LongInteger:return k.DEFAULT_LONGINTEGER;case b.Decimal:return k.DEFAULT_DECIMAL;case b.Currency:return k.DEFAULT_CURRENCY;case b.Text:return k.DEFAULT_TEXT;case b.PhoneNumber:return k.DEFAULT_PHONENUMBER;case b.Email:return k.DEFAULT_EMAIL;case b.Date:return k.DEFAULT_DATE;case b.DateTime:return k.DEFAULT_DATETIME;case b.Time:return k.DEFAULT_TIME;case b.Boolean:return k.DEFAULT_BOOLEAN;case b.BinaryData:return k.DEFAULT_BINARYDATA;case b.Object:return k.DEFAULT_OBJECT;default:throw new TypeError("Records and Record lists are not basic types")}}o(Cn,"defaultForType");var dv=class dv{constructor(){this.map={}}getItem(e){return this.map[e]}setItem(e,t){this.map[e]=t}invalidate(e){e===void 0?this.map={}:this.setItem(e,void 0)}clone(){let e=new dv;for(let t in this.map)e.setItem(t,this.map[t]);return e}};o(dv,"Cache");var Ju=dv,EI=class EI{constructor(){this.list=[]}getItem(e){if(!(e>=this.length))return this.list[e]}append(e){this.list.push(e)}appendMultiple(e){this.list=this.list.concat(new Array(e))}setItem(e,t){this.list[e]=t}insert(e,t){this.list.splice(e,0,t)}invalidate(e){e===void 0?this.list=[]:this.list.splice(e,1)}get length(){return this.list.length}};o(EI,"ListCache");var _m=EI;function Mv(n,e){if(typeof n=="string"){let t=n,r=e;return t.localeCompare(r)}return typeof n=="number"?n-e:typeof n=="boolean"?!n&&e?-1:n&&!e?1:0:n.lessThan(e)?-1:n.greaterThan(e)?1:0}o(Mv,"compare");var En=class En{constructor(e,t,r,i,s){if(this.emptyListItem=e,this.data=t!=null?t:new ji,this.itemIds=r!=null?r:new ji,this._itemIdSeed=i!=null?i:0,this._modelId=s||En.nextModelId++,t&&!r)for(let a=0,u=this.data.count();a<u;a++)this.itemIds=this.itemIds.push(this._itemIdSeed),this._itemIdSeed=this._itemIdSeed+1|0}get modelId(){return this._modelId}push(e){return new En(this.emptyListItem,this.data.push(e),this.itemIds.push(this._itemIdSeed),this._itemIdSeed+1|0,this._modelId)}addFromOther(e){return new En(this.emptyListItem,this.data.addFromOther(e.data),this.itemIds.pushAll(e.data.map(()=>this._itemIdSeed++)),this._itemIdSeed,this._modelId)}pushAll(e){return new En(this.emptyListItem,this.data.pushAll(e),this.itemIds.pushAll(e.map(()=>this._itemIdSeed++)),this._itemIdSeed,this._modelId)}remove(e){return new En(this.emptyListItem,this.data.remove(e),this.itemIds.remove(e),this._itemIdSeed,this._modelId)}insert(e,t){return new En(this.emptyListItem,this.data.insert(e,t),this.itemIds.insert(e,this._itemIdSeed),this._itemIdSeed+1|0,this._modelId)}sort(e,t,r){let i=this.data.map((l,c)=>({item:e(c),itemId:this.itemIds.get(c),by:t(e(c))})),s=r?1:-1;i.sort((l,c)=>s*Mv(l.by,c.by));let a=ji.fromJS(i.map(l=>l.item)),u=ji.fromJS(i.map(l=>l.itemId));return new En(this.emptyListItem,a,u,this._itemIdSeed,this._modelId)}getEmptyListItem(){return this.emptyListItem}setEmptyListItem(e){return new En(e,this.data,this.itemIds,this._itemIdSeed,this._modelId)}get(e){return this.data.get(e)}getId(e){return`${this.modelId}_${this.itemIds.get(e)}`}count(){return this.data.count()}isEmpty(){return this.data.isEmpty()}set(e,t){return new En(this.emptyListItem,this.data.set(e,t),this.itemIds,this._itemIdSeed,this._modelId)}clear(){return new En(this.emptyListItem,this.data.clear(),this.itemIds.clear(),this._itemIdSeed,this._modelId)}forEach(e){this.data.forEach(e)}reduce(e,t){return this.data.reduce(e,t)}static fromJS(e,t){return new En(t,ji.fromJS(e))}static fromJSON(e,t){return new En(t,ji.fromJS(e))}clone(){return new En(this.emptyListItem,this.data.clone(),this.itemIds.clone(),this._itemIdSeed)}};o(En,"ImmutableListWithTracking");var ta=En;ta.nextModelId=1;var Ed=class Ed{constructor(){this.writePropagateHandler=this.defaultWritePropagate,this.propagationParent=this}static getData(e){if(!(e===void 0||e.constructor===ta))return e.data}static setPropagationHandler(e,t,r,i){e.writePropagateHandler=i,Ed.setPropagationParent(e,t),Ed.setPropagationKey(e,r)}static setPropagationParent(e,t){e.propagationParent=t}static setPropagationKey(e,t){e.propagationKey=t}writePropagate(e,t){var r;if(((r=this.data)===null||r===void 0?void 0:r.constructor)!==(e==null?void 0:e.constructor))throw new Error("Unexpected new data type");this.data=e,this.writePropagateHandler.apply(this.propagationParent,[this.propagationKey,e,t])}defaultWritePropagate(e,t,r){this.onDefaultWritePropagate(r)}onDefaultWritePropagate(e){}};o(Ed,"ImmutableBase");var Sr=Ed,TI=class TI{constructor(e,t,r,i,s,a,u,l,c){this.name=e,this.attrName=t,this.nameForJson=r,this.mandatory=i,this.ignoreForServer=s,this.dataType=a,this.defaultValueGetter=u,this.optimizeList=l,this.complexType=c}get defaultValue(){return this.defaultValueGetter()}};o(TI,"DynamicAttrDefinition");var Kb=TI,bI=class bI{constructor(e,t,r,i,s,a,u,l,c){this.name=e,this.attrName=t,this.nameForJson=r,this.mandatory=i,this.ignoreForServer=s,this.dataType=a,this.optimizeList=l,this.complexType=c,this.defaultValue=u()}};o(bI,"StaticAttrDefinition");var Yb=bI;function VA(n){let{name:e,attrName:t,nameForJson:r,mandatory:i,ignoreForServer:s,dataType:a,defaultValue:u,optimizeList:l,complexType:c}=n;return a===b.DateTime||a===b.Date||a===b.Time?new Kb(e,t,r,i,s,a,u,l,c):new Yb(e,t,r,i,s,a,u,l,c)}o(VA,"declareAttribute");var Np="__cache",HA=o(n=>{switch(n){case b.Integer:return"Integer";case b.LongInteger:return"Long Integer";case b.Decimal:return"Decimal";case b.Currency:return"Currency";case b.Text:return"Text";case b.PhoneNumber:return"Phone Number";case b.Email:return"Email";case b.Boolean:return"Boolean";case b.Date:return"Date";case b.DateTime:return"Date Time";case b.Time:return"Time";case b.Record:return"Record";case b.RecordList:return"List";case b.BinaryData:return"Binary Data";case b.Object:return"Object";default:return`Unknown: ${n}`}},"mapDataTypeToName");function Tr(n,e){return!n||!e||!(e.equals instanceof Function)?e===n:e.equals(n)}o(Tr,"equals");function zie(n,e){return!n.hasContent()&&!e.hasContent()}o(zie,"areBinaryNulls");var Ht=class Ht extends Sr{constructor(e,t){super(),this.cache=t!=null?t:new Ju,e?this.data=e:this.data=this.constructor.createDefaultData()}static createDefaultData(){let t=this.RecordClass;if(t)return new t}getBasicProperty(e){return this.data.get(e)}setBasicProperty(e,t,r,i){this.data.get(e)!==t&&(Ht.checkType(r,t,i),this.writePropagate(this.data.set(e,t),this.cache),this.onPropertyValueChanged(e))}onPropertyValueChanged(e){}getComplexProperty(e,t){let r=this.cache.getItem(e);if(r)return Ht.setPropagationParent(r,this),r;let i=this.data.get(e),s=this.cache.getItem(e+Np);return r=new t(i,s||null),this.cache.setItem(e,r),s&&this.cache.invalidate(e+Np),Ht.setPropagationHandler(r,this,e,this.internalSetComplexProperty),r}setComplexProperty(e,t,r,i){this.setProperties([{name:e,value:t,expectedType:r,valueType:i,isBasicType:!1}])}internalSetComplexProperty(e,t,r){this.internalSetProperties([{name:e,value:t,isBasicType:!1}],r)}setProperties(e){var t;let r=[];for(let i of e){let s=(t=Ht.getData(i.value))!==null&&t!==void 0?t:i.value;this.data.get(i.name)!==s&&(i.expectedType!==void 0&&Ht.checkType(i.expectedType,i.value,i.valueType),r.push({name:i.name,value:s,isBasicType:i.isBasicType}))}r.length>0&&this.internalSetProperties(r)}internalSetProperties(e,t){let r=this.data,i=this.cloneCache();for(let s of e)r=r.set(s.name,s.value),s.isBasicType||(i.invalidate(s.name),i.invalidate(s.name+Np),t&&i.setItem(s.name+Np,t));this.writePropagate(r,i);for(let s of e)this.onPropertyValueChanged(s.name)}cloneCache(){return this.cache.clone()}onDefaultWritePropagate(e){this.cache=e}static checkType(e,t,r){switch(e){case b.Integer:Ht.ensureValidInteger(t);break;case b.LongInteger:Ht.ensureValidLongInteger(t);break;case b.Decimal:case b.Currency:Ht.ensureValidDecimal(t);break;case b.Text:case b.PhoneNumber:Ht.ensureValidText(t);break;case b.Email:Ht.ensureValidEmail(t);break;case b.Boolean:Ht.ensureValidBoolean(t);break;case b.Date:Ht.ensureValidDate(t);break;case b.Time:Ht.ensureValidTime(t);break;case b.DateTime:Ht.ensureValidDateTime(t);break;case b.Record:case b.RecordList:Ht.ensureValidComplexType(t,r);break;case b.BinaryData:Ht.ensureValidBinaryData(t);break;case b.Object:break;default:throw new TypeError("Unexpected data type: "+e)}}static ensureValidBinaryData(e){if(!(typeof e=="string"||e instanceof On))throw new TypeError("Expecting a Binary Data, found: "+e)}static ensureValidInteger(e){if(typeof e=="number"&&!isNaN(e)&&e%1===0){if(e<k.MIN_INTEGER_VALUE)throw new TypeError("Integers must be greater than "+k.MIN_INTEGER_VALUE+", found: "+e);if(e>k.MAX_INTEGER_VALUE)throw new TypeError("Integers must be lower than "+k.MAX_INTEGER_VALUE+", found: "+e)}else throw new TypeError("Expecting an Integer, found: "+e)}static ensureValidLongInteger(e){if(e&&e.constructor===Tt){if(e.lessThan(k.MIN_LONGINTEGER_VALUE))throw new TypeError("Long Integers must be greater than "+k.MIN_LONGINTEGER_VALUE.toString()+", found: "+e.toString());if(e.greaterThan(k.MAX_LONGINTEGER_VALUE))throw new TypeError("Long Integers must be lower than "+k.MAX_LONGINTEGER_VALUE.toString()+", found: "+e.toString())}else throw new TypeError("Expecting a LongInteger, found: "+e)}static ensureValidDecimal(e){if(e&&e.constructor===Fe){if(e.lessThan(k.MIN_DECIMAL_VALUE))throw new TypeError("Decimals must be greater than "+k.MIN_DECIMAL_VALUE.toString()+", found: "+e.toString());if(e.greaterThan(k.MAX_DECIMAL_VALUE))throw new TypeError("Decimals must be lower than "+k.MAX_DECIMAL_VALUE.toString()+", found: "+e.toString())}else throw new TypeError(`Expecting a Decimal, found: ${e}`)}static ensureValidText(e){if(typeof e!="string")throw new TypeError(`Expecting a Text, found: ${e}`)}static ensureValidEmail(e){if(typeof e!="string")throw new TypeError(`Expecting an Email, found: ${e}`)}static ensureValidBoolean(e){if(typeof e!="boolean")throw new TypeError(`Expecting a Boolean, found: ${e}`)}static ensureValidDate(e){if(!(e&&e.constructor===he))throw new TypeError(`Expecting a Date, found: ${e}`)}static ensureValidTime(e){if(!(e&&e.constructor===he))throw new TypeError(`Expecting a Time, found: ${e}`)}static ensureValidDateTime(e){if(!(e&&e.constructor===he))throw new TypeError(`Expecting a DateTime, found: ${e}`)}static ensureValidComplexType(e,t){if(e){if(e.constructor===t)return;if(e.isCompatibleWith!==void 0){if(e.isCompatibleWith(t))return;throw new TypeError(`Expecting a ${t.name} type, found:  ${e.constructor.name}`)}}throw new TypeError(`Expecting a Record or RecordList, found: ${e}`)}replaceWith(e){let t=Ht.getData(e);this.writePropagate(t,new Ju)}fastEquals(e){return this===e}equals(e){return!(!e||this.constructor!==e.constructor)}static defineRecordClass(e){return SM(e)}clone(){let e=this.constructor;return new e(this.data,this.cloneCache())}};o(Ht,"Record");var an=Ht;function qie(n){return n===b.Record||n===b.RecordList||n===b.LongInteger||n===b.Decimal||n===b.Currency||n===b.DateTime||n===b.Time||n===b.Date}o(qie,"dataTypeImplementsEquals");var Td=class Td extends an{static get isGenericRecordType(){return!0}getAttributes(){return this.constructor.Attributes||[]}static getAttributes(){return this.Attributes||[]}static isAnonymousRecord(){return this._isAnonymousRecord}constructor(e,t){super(e,t)}static attr(e,t,r,i,s,a,u){let l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!0,c=arguments.length>8?arguments[8]:void 0,d;return typeof l!="boolean"?(c=l,d=!0):d=l,VA({name:e,attrName:t,nameForJson:r,mandatory:i,ignoreForServer:s,dataType:a,defaultValue:u,optimizeList:d,complexType:c})}static attributesToDeclare(){return[]}static init(){let e=this,t=e.attributesToDeclare();e.Attributes=t,t.forEach(r=>{r.attrName in e.prototype||(r.dataType===b.Record||r.dataType===b.RecordList?e.defineComplexProperty(r.attrName,r.dataType,r.complexType):e.defineBasicProperty(r.attrName,r.dataType))}),e.RecordClass=an.defineRecordClass(t.reduce((r,i)=>(r[i.attrName]=null,r),{})),e.prototype.equals=function(r){let i=Td.prototype.equals.call(this,r);return t.forEach(s=>{qie(s.dataType)?i&&(i=this[s.attrName].equals(r[s.attrName])):i&&(i=this[s.attrName]===r[s.attrName])}),i}}static createDefaultData(){let e=this,t=e.RecordClass;if(t){let r={};for(let i of e.Attributes)i.dataType===b.Record||i.dataType===b.RecordList?r[i.attrName]=an.getData(i.defaultValue):r[i.attrName]=i.defaultValue;return new t(r)}}static defineBasicProperty(e,t){Object.defineProperty(this.prototype,e,{enumerable:!0,configurable:!0,get(){return this.getBasicProperty(e)},set(r){this.setBasicProperty(e,r,t)}})}static defineComplexProperty(e,t,r){Object.defineProperty(this.prototype,e,{enumerable:!0,configurable:!0,get(){return this.getComplexProperty(e,r)},set(i){this.setComplexProperty(e,i,t,r)}})}static isCompatibleWith(e){return this===e?!0:this.isAnonymousRecord()&&e.isAnonymousRecord()&&this.UniqueId===e.UniqueId}isCompatibleWith(e){return e.prototype instanceof Td&&this.constructor.isCompatibleWith(e)}getNonSerializableAttributes(){return this.getAttributes().filter(e=>e.dataType===b.Object).map(e=>e.attrName)}};o(Td,"GenericRecord");var Ke=Td;Ke.UniqueId="";Ke._isAnonymousRecord=!1;var SI=class SI extends Sr{static getItemType(){return this.itemType}getCache(){return null}newItem(e){throw new Error("@abstract")}resetEmptyListItem(){this.data=this.data.setEmptyListItem(this.newItem())}get emptyListItem(){return this.isEmpty?this.data.getEmptyListItem():this.data.get(0)}set emptyListItem(e){if(this.isEmpty){if(this.data.getEmptyListItem()===e)return;this.writePropagate(this.data.setEmptyListItem(e),this.getCache())}else{if(this.data.get(0)===e)return;this.writePropagate(this.data.set(0,e),this.getCache())}}get modelId(){return this.data.modelId}get isEmpty(){return this.data.isEmpty()}get length(){return this.data.count()}isValidIndex(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return e%1===0&&e>=0&&e<this.length+(t?1:0)}checkIndex(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.isValidIndex(e,t)){let r="Index out of bounds. Index "+e+" for ";throw this.isEmpty?r+="empty list.":r+="bounds [0, "+(this.length-1)+"].",new Error(r)}}idOf(e){return this.checkIndex(e),this.data.getId(e)}append(e){this.writePropagate(this.data.push(e),this.getCache())}appendAll(e){e.length>0&&this.writePropagate(this.data.addFromOther(e.data),this.getCache())}pushAll(e){e.length>0&&this.writePropagate(this.data.pushAll(e),this.getCache())}insert(e,t){this.checkIndex(e,!0),this.writePropagate(this.data.insert(e,t),this.getCache())}remove(e){this.checkIndex(e),this.length===1&&this.resetEmptyListItem(),this.writePropagate(this.data.remove(e),this.getCache())}clear(){this.resetEmptyListItem(),this.writePropagate(this.data.clear(),this.getCache())}indexOf(e){for(let t=0;t<this.length;t++)if(e(this.getItem(t)))return t;return-1}any(e){return this.indexOf(e)!==-1}all(e){return!this.any(t=>!e(t))}filter(e){let t=new this.constructor,r=[];for(let i=0;i<this.length;i++){let s=this.getItem(i);e(s)&&r.push(s)}return t.pushAll(r),t}distinct(){let e=new this.constructor,t=new Array;for(let r=0;r<this.length;r++){let i=this.getItem(r),s=!0;for(let a=0;a<t.length;a++)if(Tr(i,this.getItem(t[a]))){s=!1;break}s&&(t.push(r),e.append(i))}return e}sort(e,t){let r=[];for(let s=0;s<this.length;s++)r[s]=this.getItem(s);let i=t?1:-1;r.sort((s,a)=>i*Mv(e(s),e(a))),this.clear(),this.pushAll(r)}getCurrent(e){if(this.isEmpty)return this.emptyListItem;{let t=this.getCurrentRowNumber(e);return this.getItem(t)}}getCurrentRowNumber(e){return e.getCurrentRowNumber(this)}getItem(e){return this.checkIndex(e),this.data.get(e)}setCurrent(e,t){if(this.isEmpty)this.emptyListItem=t;else{let r=this.getCurrentRowNumber(e);this.setItem(r,t)}}setItem(e,t){this.checkIndex(e),this.data.get(e)!==t&&this.writePropagate(this.data.set(e,t),this.getCache())}fastEquals(e){return this===e}equals(e){if(!e||this.constructor!==e.constructor||this.length!==e.length)return!1;if(this.isEmpty){let t=this.emptyListItem,r=e.emptyListItem;return Tr(t,r)}else for(let t=0;t<this.length;t++){let r=this.getItem(t),i=e.getItem(t);if(!Tr(r,i))return!1}return!0}};o(SI,"List");var Yi=SI,AI=class AI extends Yi{constructor(e){super(),this.data=e||new ta(this.newItem())}static get isBasicTypeListType(){return!0}static getTypeDefaultValue(){throw new Error("Not implemented: getTypeDefaultValue")}newItem(){return this.constructor.getTypeDefaultValue()}clone(){let e=this.constructor,t=this.data.clone();return new e(t)}};o(AI,"BasicTypeList");var Mn=AI,Ls=class Ls extends Yi{constructor(e,t){if(super(),this._recordType=this.constructor.getItemType(),!this._recordType)throw new TypeError("GenericRecordLists must define a RecordType");e?this.data=e:this.data=new ta(Ke.getData(this.newItem())),this.cache=t!=null?t:new _m}static get isGenericRecordListType(){return!0}getCache(){return this.cache}newItem(e){return new(this.getRecordType())(e)}resetEmptyListItem(){this.data=this.data.setEmptyListItem(Ke.getData(this.newItem()))}getRecordType(){return this._recordType}get emptyListItem(){return this.internalGetItem(0,this.isEmpty)}set emptyListItem(e){this.isEmpty?this.internalSetEmptyListItem(0,e):this.internalSetItem(0,e)}append(e){this.isEmpty&&this.cache.invalidate(0),super.append(Ke.getData(e)),this.cache.append(void 0)}appendAll(e){this.isEmpty&&this.cache.invalidate(0),super.appendAll(e),this.cache.appendMultiple(e.length)}pushAll(e){this.isEmpty&&this.cache.invalidate(0),super.pushAll(e.map(t=>an.getData(t))),this.cache.appendMultiple(e.length)}insert(e,t){this.checkIndex(e,!0),this.isEmpty&&this.cache.invalidate(0),super.insert(e,Ke.getData(t)),this.cache.insert(e,void 0)}getItem(e){return this.internalGetItem(e,!1)}internalGetItem(e,t){t||this.checkIndex(e);let r=this.cache.getItem(e);return r?(Ls.setPropagationParent(r,this),Ls.setPropagationKey(r,e),r):(t?(r=this.newItem(this.data.getEmptyListItem()),Ls.setPropagationHandler(r,this,e,this.internalSetEmptyListItem)):(r=this.newItem(this.data.get(e)),Ls.setPropagationHandler(r,this,e,this.internalSetItem)),this.cache.setItem(e,r),r)}setItem(e,t){this.internalSetItem(e,t)}internalSetItem(e,t,r){var i;let s=(i=Ke.getData(t))!==null&&i!==void 0?i:t;this.checkIndex(e),this.data.get(e)!==s&&(this.writePropagate(this.data.set(e,s),this.cache),this.cache.setItem(e,void 0))}internalSetEmptyListItem(e,t,r){var i;let s=(i=Ke.getData(t))!==null&&i!==void 0?i:t;this.data.getEmptyListItem()!==s&&(this.writePropagate(this.data.setEmptyListItem(s),this.cache),this.cache.setItem(e,void 0))}remove(e){super.remove(e),this.cache.invalidate(e)}clear(){super.clear(),this.cache.invalidate()}readAll(e,t){let r=[];for(let i=0;i<t.length;i++){let s=this.newItem();e(s,t.item(i)),r.push(s)}this.pushAll(r)}clone(){let e=this.constructor,t=this.data.clone();return new e(t)}static isCompatibleWith(e){return this===e?!0:this.getItemType().isCompatibleWith(e.getItemType())}isCompatibleWith(e){return e.prototype instanceof Ls&&this.constructor.isCompatibleWith(e)}};o(Ls,"GenericRecordList");var Zu=Ls,II=class II extends Mn{constructor(e){super(e)}static getTypeDefaultValue(){return k.DEFAULT_INTEGER}};o(II,"IntegerList");var wm=II;wm.itemType=b.Integer;var CI=class CI extends Mn{constructor(e){super(e)}static getTypeDefaultValue(){return k.DEFAULT_LONGINTEGER}};o(CI,"LongIntegerList");var Em=CI;Em.itemType=b.LongInteger;var RI=class RI extends Mn{constructor(e){super(e)}static getTypeDefaultValue(){return k.DEFAULT_DATE}};o(RI,"DateList");var Tm=RI;Tm.itemType=b.Date;var OI=class OI extends Mn{constructor(e){super(e)}static getTypeDefaultValue(){return k.DEFAULT_DATETIME}};o(OI,"DateTimeList");var bm=OI;bm.itemType=b.DateTime;var PI=class PI extends Mn{constructor(e){super(e)}static getTypeDefaultValue(){return k.DEFAULT_TIME}};o(PI,"TimeList");var Sm=PI;Sm.itemType=b.Time;var NI=class NI extends Mn{constructor(e){super(e)}static getTypeDefaultValue(){return k.DEFAULT_DECIMAL}};o(NI,"DecimalList");var Am=NI;Am.itemType=b.Decimal;var DI=class DI extends Mn{constructor(e){super(e)}static getTypeDefaultValue(){return k.DEFAULT_CURRENCY}};o(DI,"CurrencyList");var Im=DI;Im.itemType=b.Currency;var LI=class LI extends Mn{constructor(e){super(e)}static getTypeDefaultValue(){return k.DEFAULT_EMAIL}};o(LI,"EmailList");var Cm=LI;Cm.itemType=b.Email;var xI=class xI extends Mn{constructor(e){super(e)}static getTypeDefaultValue(){return k.DEFAULT_PHONENUMBER}};o(xI,"PhoneNumberList");var Rm=xI;Rm.itemType=b.PhoneNumber;var UI=class UI extends Mn{constructor(e){super(e)}static getTypeDefaultValue(){return k.DEFAULT_BOOLEAN}};o(UI,"BooleanList");var Om=UI;Om.itemType=b.Boolean;var MI=class MI extends Mn{constructor(e){super(e)}static getTypeDefaultValue(){return k.DEFAULT_BINARYDATA}};o(MI,"BinaryDataList");var Pm=MI;Pm.itemType=b.BinaryData;var kI=class kI extends Mn{constructor(e){super(e)}static getTypeDefaultValue(){return k.DEFAULT_TEXT}};o(kI,"TextList");var Nm=kI;Nm.itemType=b.Text;var FI=class FI{constructor(e){this.varValue=e}get value(){return this.varValue}set value(e){this.setValue(e)}setValue(e){this.varValue=e}};o(FI,"BasicVariableHolder");var Dm=FI,$I=class $I extends Dm{constructor(e){super(e)}setValue(e){super.setValue(e&&e.clone())}};o($I,"VariableHolder");var Xb=$I;function ia(){return n=>{let e=n;e.init!==void 0&&e.init()}}o(ia,"RecordWithStaticConstructor");var Vu,Jb=(Vu=class extends Ke{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("JSON","jSONOut","jSONOut",!0,!0,b.Text,()=>Cn(b.Text))].concat(super.attributesToDeclare())}},o(Vu,"JSONSerializeOutputType"),Vu);Jb=fc([ia()],Jb);var Hu,Zb=(Hu=class extends Ke{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("ExceptionMessage","exceptionMessageAttr","exceptionMessageAttr",!0,!0,b.Text,()=>Cn(b.Text))].concat(super.attributesToDeclare())}},o(Hu,"ErrorHandlerOutputType"),Hu);Zb=fc([ia()],Zb);var BI=class BI{constructor(){this.typeDefinitions=new Map,this.typeCache=new Map}isTypeRegistered(e){return this.typeDefinitions.get(e)!==void 0}registerTypeDefinition(e,t){this.typeDefinitions.set(e,t)}getType(e){var s;let t=this.typeCache.get(e);if(t)return t;let r=this.typeDefinitions.get(e);if(!r)throw new TypeError(`Type ${e} was not registered`);let i=(s=class extends Ke{constructor(u,l){super(u,l)}static attributesToDeclare(){return r?r.map(u=>{var l,c,d;return this.attr(u.name,u.attrName,u.nameForJson||u.attrName,(l=u.mandatory)!==null&&l!==void 0?l:!1,(c=u.ignoreForServer)!==null&&c!==void 0?c:!0,u.dataType,u.defaultValue,(d=u.optimizeList)!==null&&d!==void 0?d:!0,u.complexType)}).concat(super.attributesToDeclare()):[]}},o(s,"RecordType"),s);return i=fc([ia()],i),this.typeCache.set(e,i),i}};o(BI,"RecordTypeFactory");var xd=BI,VI=class VI extends xd{constructor(e,t,r){super(),this.mainAttributeName=e,this.mainAttributeAttrName=t,this.additionalAttributes=r}registerTypeDefinition(e,t){throw new Error("Invalid operation")}createMainAttributeInfo(e){return{name:this.mainAttributeName,attrName:this.mainAttributeAttrName,mandatory:!0,dataType:this.getDataType(e),defaultValue:this.getDefaultValue(e),complexType:this.getComplexType(e)}}registerTypeIfNeeded(e){if(!this.isTypeRegistered(e)){let t=[this.createMainAttributeInfo(e)];this.additionalAttributes&&(t=t.concat(this.additionalAttributes)),super.registerTypeDefinition(e,t)}}getType(e){return this.registerTypeIfNeeded(e),super.getType(e)}};o(VI,"TypeKeyedTypeFactory");var Ud=VI,HI=class HI extends Ud{constructor(e,t,r){super(e,t,r)}getDataType(e){return e}getDefaultValue(e){return()=>Cn(e)}getComplexType(e){}};o(HI,"BasicTypeKeyedTypeFactory");var js=HI,jI=class jI extends Ud{constructor(e,t,r){super(e,t,r)}getDataType(e){return b.Record}getDefaultValue(e){return()=>Sr.getData(new e)}getComplexType(e){return e}};o(jI,"ComplexTypeKeyedTypeFactory");var Xi=jI,G;(function(n){function e(U){return U&&U.constructor===Fe}o(e,"isDecimal"),n.isDecimal=e;function t(U){var Oe;return((Oe=U==null?void 0:U.value)===null||Oe===void 0?void 0:Oe.constructor)===On}o(t,"isBinaryData"),n.isBinaryData=t;function r(U){return e(U)&&!U.isNaN()}o(r,"isValidDecimal"),n.isValidDecimal=r;function i(U){return k.MIN_DECIMAL_VALUE.lessThanOrEqualTo(U)&&k.MAX_DECIMAL_VALUE.greaterThanOrEqualTo(U)}o(i,"isWithinDecimalRange"),n.isWithinDecimalRange=i;function s(U){return typeof U=="string"}o(s,"isText"),n.isText=s;function a(U){return typeof U=="boolean"}o(a,"isBoolean"),n.isBoolean=a;function u(U){return s(U)||d(U)||a(U)||w(U)||g(U)||e(U)}o(u,"isBasicType"),n.isBasicType=u;function l(U){return c(U)&&U%1===0}o(l,"isValidInteger"),n.isValidInteger=l;function c(U){return d(U)&&!isNaN(U)}o(c,"isValidJsNumber"),n.isValidJsNumber=c;function d(U){return typeof U=="number"}o(d,"isJsNumber"),n.isJsNumber=d;function f(U){return U>=k.MIN_INTEGER_VALUE&&U<=k.MAX_INTEGER_VALUE}o(f,"isWithinIntegerRange"),n.isWithinIntegerRange=f;function h(U){return g(U)}o(h,"isValidLongInteger"),n.isValidLongInteger=h;function g(U){return U&&U.constructor===Tt}o(g,"isLongInteger"),n.isLongInteger=g;function p(U){return E(U)&&U.hours===k.DEFAULT_DATE.hours&&U.minutes===k.DEFAULT_DATE.minutes&&U.seconds===k.DEFAULT_DATE.seconds}o(p,"isValidDate"),n.isValidDate=p;function m(U){return E(U)&&U.year===k.DEFAULT_TIME.year&&U.month===k.DEFAULT_TIME.month&&U.day===k.DEFAULT_TIME.day}o(m,"isValidTime"),n.isValidTime=m;function w(U){return U instanceof he}o(w,"isDateTime"),n.isDateTime=w;function E(U){return w(U)&&!isNaN(U.getTime())}o(E,"isValidDateTime"),n.isValidDateTime=E;function _(U){return U instanceof Date||Object.prototype.toString.call(U)==="[object Date]"}o(_,"isJsDate"),n.isJsDate=_;function T(U){return _(U)&&!isNaN(U.getTime())}o(T,"isValidJsDate"),n.isValidJsDate=T;function R(U){return!!U&&(U.content!==void 0||U.url!==void 0)}o(R,"hasBinaryDataInterface"),n.hasBinaryDataInterface=R;let D=9007199254740991,B=-9007199254740991;function z(U){let Oe="",Ye="";if(U.greaterThan(D))Oe="maximum",Ye=D.toString();else if(U.lessThan(B))Oe="minimum",Ye=B.toString();else return;let Xe=`Unable to convert ${U.toString()} to the Javascript Number type since exceeds the ${Oe} value allowed which is ${Ye}.`;throw new me.NumberOverflowException(Xe)}o(z,"ensureNumberInsideBounds"),n.ensureNumberInsideBounds=z;function j(U){if(U.decimalPlaces()>16){let Ye=`Unable to convert ${U.toString()} to the Javascript Number type because it will lead to precision loss. The maximum safe number of digits after the decimal point is 16.`;throw new me.NumberOverflowException(Ye)}}o(j,"ensureNumberPrecision"),n.ensureNumberPrecision=j;let K=class K{static get None(){return""}static get Minimum(){return"minimum"}static get Maximum(){return"maximum"}};o(K,"RangeBoundaries");let Y=K;function q(U,Oe,Ye,Xe){return`Unable to convert ${U} to the ${Oe} type since it exceeds the ${Ye} value allowed which is ${Xe}.`}o(q,"makeBasicTypeExceedsLimitMessage");function P(U,Oe,Ye,Xe){let de=Y.None,N="",L=Math.max(Oe,B),x=Math.min(Ye,D);if(U<L)de=Y.Minimum,N=L.toString();else if(U>x)de=Y.Maximum,N=x.toString();else return;throw new me.NumberOverflowException(q(U.toString(),Xe,de,N))}o(P,"ensureNumericPlatformTypeInsideBounds");function Z(U){P(U,k.MIN_INTEGER_VALUE,k.MAX_INTEGER_VALUE,"Integer")}o(Z,"ensureIntegerInsideBounds"),n.ensureIntegerInsideBounds=Z;function oe(U){P(U,k.MIN_LONGINTEGER_VALUE.toNumber(),k.MAX_LONGINTEGER_VALUE.toNumber(),"Long Integer")}o(oe,"ensureLongIntegerInsideBounds"),n.ensureLongIntegerInsideBounds=oe;function S(U){P(U,k.MIN_DECIMAL_VALUE.toNumber(),k.MAX_DECIMAL_VALUE.toNumber(),"Decimal")}o(S,"ensureDecimalInsideBounds"),n.ensureDecimalInsideBounds=S})(G||(G={}));var Kie=Object.freeze({__proto__:null,BasicTypeKeyedTypeFactory:js,BasicTypeList:Mn,BasicVariableHolder:Dm,BinaryData:On,BinaryDataList:Pm,BooleanList:Om,Cache:Ju,ComplexTypeKeyedTypeFactory:Xi,get Constants(){return k},CurrencyList:Im,get DataTypes(){return b},DateList:Tm,DateTime:he,DateTimeList:bm,Decimal:Fe,DecimalList:Am,EmailList:Cm,get ErrorHandlerOutputType(){return Zb},GenericRecord:Ke,GenericRecordList:Zu,ImmutableBase:Sr,ImmutableListWithTracking:ta,IntegerList:wm,get JSONSerializeOutputType(){return Jb},List:Yi,ListCache:_m,LongInteger:Tt,LongIntegerList:Em,PhoneNumberList:Rm,Record:an,RecordTypeFactory:xd,RecordWithStaticConstructor:ia,TextList:Nm,TimeList:Sm,TypeKeyedTypeFactory:Ud,get TypeValidations(){return G},VariableHolder:Xb,areBinaryNulls:zie,compare:Mv,defaultForType:Cn,equals:Tr,mapDataTypeToName:HA}),Qb="Authorization",Yie=o(n=>{var e,t,r,{roles:i,auth:s=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance()}=n;if(!(s!=null&&s.isAuthenticated()))throw ee(Qb,"Not authorized: User is not logged in"),new me.SecurityException("Not authorized","User is not logged in");if(!i.find(a=>a?s.hasRole(a.roleKey):!1))throw ee(Qb,"Not authorized: No roles found on current user"),(r=(t=i[i.length-1])===null||t===void 0?void 0:t.roleException)!==null&&r!==void 0?r:new me.SecurityException("Not authorized","User doesn't have the required role")},"ensureUserHasRole"),Xie=o(n=>{var e,{roleKey:t,auth:r=(e=pe.resolve(X.Auth))===null||e===void 0?void 0:e.getInstance()}=n;return r!=null&&r.isAuthenticated()?r.hasRole(t):(ee(Qb,"Not authorized: User is not logged in"),!1)},"hasRole"),Jie=Object.freeze({__proto__:null,ensureUserHasRole:Yie,hasRole:Xie}),Zie="RolesInfo";function LM(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:k.FORMAT.defaultDateTimeFormat;return{year:parseInt(RegExp["$"+(n.yearIndexForDate+1)],10),month:parseInt(RegExp["$"+(n.monthIndexForDate+1)],10),day:parseInt(RegExp["$"+(n.dayIndexForDate+1)],10)}}o(LM,"parseDateFromRx");function xM(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:k.FORMAT.defaultDateTimeFormat,e=parseInt(RegExp["$"+(n.secondsIndexForTime+1)],10);return{hours:parseInt(RegExp["$"+(n.hoursIndexForTime+1)],10),minutes:parseInt(RegExp["$"+(n.minutesIndexForTime+1)],10),seconds:isNaN(e)?0:e}}o(xM,"parseTimeFromRx");function UM(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:k.FORMAT.defaultDateTimeFormat,e=parseInt(RegExp["$"+(n.secondsIndexForDateTime+1)],10);return{year:parseInt(RegExp["$"+(n.yearIndexForDateTime+1)],10),month:parseInt(RegExp["$"+(n.monthIndexForDateTime+1)],10),day:parseInt(RegExp["$"+(n.dayIndexForDateTime+1)],10),hours:parseInt(RegExp["$"+(n.hoursIndexForDateTime+1)],10),minutes:parseInt(RegExp["$"+(n.minutesIndexForDateTime+1)],10),seconds:isNaN(e)?0:e}}o(UM,"parseDateTimeFromRx");function Qie(n){let e=n.abs();return e.isNaN()?k.DEFAULT_DECIMAL:e}o(Qie,"abs");function ese(n,e){let t=n.mod(e);return t.isNaN()?k.DEFAULT_DECIMAL:t}o(ese,"mod");function tse(n,e){let t=n.pow(e);return t.isNaN()?k.DEFAULT_DECIMAL:t}o(tse,"power");function nse(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=n.toDecimalPlaces(e);return t.isNaN()?k.DEFAULT_DECIMAL:t}o(nse,"round");function rse(n){try{let e=n.sqrt();return e.isNaN()?k.DEFAULT_DECIMAL:e}catch(e){return k.DEFAULT_DECIMAL}}o(rse,"sqrt");function ise(n){let e=n.trunc();return e.isNaN()?k.DEFAULT_DECIMAL:e}o(ise,"trunc");function sse(n,e){let t=Fe.max(n,e);return t.isNaN()?k.DEFAULT_DECIMAL:t}o(sse,"max");function ose(n,e){let t=Fe.min(n,e);return t.isNaN()?k.DEFAULT_DECIMAL:t}o(ose,"min");function ase(n){let e=new Fe(0);return n.eq(e)||n.isNaN()?k.DEFAULT_INTEGER:n>e?1:-1}o(ase,"sign");function use(n){return n>=0&&n<=65535?String.fromCharCode(n):k.DEFAULT_TEXT}o(use,"chr");function cse(n,e){return(n||"")+(e||"")}o(cse,"concat");function lse(n){return n===void 0?"":Ure(Mre(n)).replace(/\r/g,"").replace(/&#13;/g,"").replace(/\n/g,"<br/>").replace(/&#10;/g,"<br/>")}o(lse,"encodeHtml");function dse(n){return n.replace(/\\/g,"\\x5c").replace(/'/g,"\\x27").replace(/\"/g,"\\x22").replace("&","\\x26").replace("<","\\x3c").replace(/>/g,"\\x3e").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}o(dse,"encodeJavascript");function fse(n){return encodeURIComponent(n).replace(/'/g,"%27").replace(/%20/g,"+")}o(fse,"encodeUrl");var Lm="[\uD800-\uDBFF]",MM=new RegExp(Lm,"g");function hse(n,e,t,r,i){var s;try{if(e.length===0||t<0||t>Md(n))return-1;i&&(n=n.toLocaleLowerCase(),e=e.toLocaleLowerCase());let a;t&&t>0&&(a=(s=n.match(new RegExp("("+Lm+".|.){"+t+"}")))===null||s===void 0?void 0:s[0].length);let u=r?n.lastIndexOf(e,a||n.length):n.indexOf(e,a||0);return u<0?-1:Md(n.substr(0,u))}catch(a){return-1}}o(hse,"index");function Md(n){let e=n.match(MM);return n.length-(e?e.length:0)}o(Md,"length");function gse(n,e,t){let r=e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");return n.replace(new RegExp(r,"g"),t)}o(gse,"replace");function Hp(n,e,t){var r;let i=Md(n);if(e>=0&&t>0&&i>e)i=Math.min(i-e,t);else return k.DEFAULT_TEXT;let a=n.match(MM)?(r=n.match(new RegExp("("+Lm+".|.){"+e+"}(("+Lm+".|.){"+i+"})")))===null||r===void 0?void 0:r[2]:n.substring(e,e+i);return a!=null?a:""}o(Hp,"substr");function pse(n){return n.toLowerCase()}o(pse,"toLower");function mse(n){return n.toUpperCase()}o(mse,"toUpper");function vse(n){return n.trim()}o(vse,"trim");function yse(n){let e=0,t=" ";for(;n[e]===t;)e++;return n.substr(e)}o(yse,"trimStart");function _se(n){let e=n.length-1,t=" ";for(;n[e]===t;)e--;return n.substr(0,e+1)}o(_se,"trimEnd");function wse(n,e){if(!e)return!1;let t=e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&").replace(/%/g,"[\\s\\S]*").replace(/_/g,"[\\s\\S]");return RegExp(`^${t}$`,"gi").test(n)}o(wse,"like");function Ese(n,e){return n.addDays(e)}o(Ese,"addDays");function Tse(n,e){return n.addHours(e)}o(Tse,"addHours");function bse(n,e){return n.addMinutes(e)}o(bse,"addMinutes");function Sse(n,e){return n.addSeconds(e)}o(Sse,"addSeconds");function Ase(n,e){return n.addYears(e)}o(Ase,"addYears");function Ise(n,e){return n.addMonths(e)}o(Ise,"addMonths");function Cse(n,e){return new he(n.year,n.month,n.day,e.hours,e.minutes,e.seconds,e.milliseconds)}o(Cse,"buildDateTime");function Rse(){let n=new he(new Date);return new he(n.year,n.month,n.day)}o(Rse,"currDate");function Ose(){return new he(new Date)}o(Ose,"currDateTime");function Pse(){let n=new he(new Date);return new he(1900,1,1,n.hours,n.minutes,n.seconds)}o(Pse,"currTime");function Nse(n){return n.weekDay}o(Nse,"dayOfWeek");function HL(n){let e=new Date(n.getTime());return e.setMinutes(n.getMinutes()-n.getTimezoneOffset()),e.getTime()}o(HL,"toMilisecondsWithTimezoneOffset");function kv(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=t<=36e5,s=t<=6e4,a=t<=1e3,u=jL(n,i,s,a).toNative(),l=jL(e,i,s,a).toNative(),c=Date.UTC(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),0),d=Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),0),f=r?HL(l)-HL(u):d-c;return Math.floor(f/t)}o(kv,"diff");function jL(n,e,t,r){return new he(n.year,n.month,n.day,e?n.hours:0,t?n.minutes:0,r?n.seconds:0)}o(jL,"fixTimePart");function Dse(n,e){return kv(n,e,864e5,!0)}o(Dse,"diffDays");function Lse(n,e){return kv(n,e,36e5)}o(Lse,"diffHours");function xse(n,e){return kv(n,e,6e4)}o(xse,"diffMinutes");function Use(n,e){return kv(n,e,1e3)}o(Use,"diffSeconds");function Mse(n){return n.year}o(Mse,"year");function kse(n){return n.month}o(kse,"month");function Fse(n){return n.day}o(Fse,"day");function $se(n){return n.hours}o($se,"hour");function Bse(n){return n.minutes}o(Bse,"minute");function Vse(n){return n.seconds}o(Vse,"second");function Hse(n,e,t){return jA(n,e,t,0,0,0)?new he(n,e,t):k.DEFAULT_DATE}o(Hse,"newDate");function jse(n,e,t,r,i,s){return jA(n,e,t,r,i,s)?new he(n,e,t,r,i,s):k.DEFAULT_DATETIME}o(jse,"newDateTime");function Wse(n,e,t){return kM(n,e,t)?new he(1900,1,1,n,e,t):k.DEFAULT_TIME}o(Wse,"newTime");function kM(n,e,t){let r=new he(1900,1,1,n,e,t);return r.hours===n&&r.minutes===e&&r.seconds===t}o(kM,"validateTime");function jA(n,e,t,r,i,s){let a=new he(n,e,t,r,i,s);return a.year===n&&a.month===e&&a.day===t&&a.hours===r&&a.minutes===i&&a.seconds===s}o(jA,"validateDateTime");function FM(n){return n?1:0}o(FM,"booleanToInteger");function $M(n){return n?Tt.fromNumber(1):Tt.fromNumber(0)}o($M,"booleanToLongInteger");function BM(n){return new Fe(n?1:0)}o(BM,"booleanToDecimal");function WA(n){return n===!0?"True":n===!1?"False":k.DEFAULT_TEXT}o(WA,"booleanToText");function VM(n){return new he(n.year,n.month,n.day)}o(VM,"dateTimeToDate");function HM(n){return new he(1900,1,1,n.hours,n.minutes,n.seconds)}o(HM,"dateTimeToTime");function eS(n){return n.toString(k.FORMAT.defaultDateTimeFormat.dateTimeFormat)}o(eS,"dateTimeToText");function tS(n){return n.toString(k.FORMAT.defaultDateTimeFormat.dateFormat)}o(tS,"dateToText");function Gse(n){return n}o(Gse,"dateToDateTime");function zse(n){return!n.eq(new Fe(0))}o(zse,"decimalToBoolean");function kd(n){return G.isValidDecimal(n)?n.toString():k.DEFAULT_TEXT}o(kd,"decimalToText");function Fv(n){return n.gte(k.MIN_INTEGER_VALUE)&&n.lte(k.MAX_INTEGER_VALUE)}o(Fv,"decimalToIntegerValidate");function jM(n){return Fv(n)?n.round().toNumber():k.DEFAULT_INTEGER}o(jM,"decimalToInteger");function tf(n){return n.gte(k.MIN_LONGINTEGER_VALUE.toString())&&n.lte(k.MAX_LONGINTEGER_VALUE.toString())}o(tf,"decimalToLongIntegerValidate");function WM(n){return tf(n)?Tt.fromString(n.round().toString()):k.DEFAULT_LONGINTEGER}o(WM,"decimalToLongInteger");function qse(n){return new Fe(n.toString())}o(qse,"longIntegerToDecimal");function GM(n){return G.isWithinIntegerRange(n.toNumber())}o(GM,"longIntegerToIntegerValidate");function Kse(n){let e=n.toNumber();return G.isWithinIntegerRange(e)?e:k.DEFAULT_INTEGER}o(Kse,"longIntegerToInteger");function Yse(n){return n}o(Yse,"longIntegerToIdentifier");function GA(n){return G.isValidLongInteger(n)?n.toString():k.DEFAULT_TEXT}o(GA,"longIntegerToText");function Xse(n){return n}o(Xse,"identifierToInteger");function Jse(n){return n}o(Jse,"identifierToLongInteger");function Zse(n){return n}o(Zse,"identifierToText");function Qse(n){return Tt.fromNumber(n)}o(Qse,"integerToLongInteger");function eoe(n){return n}o(eoe,"integerToIdentifier");function toe(n){return n!==0}o(toe,"integerToBoolean");function zM(n){return G.isValidInteger(n)?n.toString():k.DEFAULT_TEXT}o(zM,"integerToText");function noe(n){return new Fe(n)}o(noe,"integerToDecimal");function roe(){return 0}o(roe,"nullIdentifier");function ioe(){return""}o(ioe,"nullTextIdentifier");function soe(){return k.DEFAULT_DATE}o(soe,"nullDate");function ooe(){return null}o(ooe,"nullObject");function aoe(){return k.DEFAULT_BINARYDATA}o(aoe,"nullBinary");function qM(n,e){let t=e.getRegExpForDate().test(n);if(t){let r=LM(e),i=new he(r.year,r.month,r.day);t=i.year===r.year&&i.month===r.month&&i.day===r.day}return t}o(qM,"internalTextToDateValidate");function uoe(n,e){if(!qM(n,e))return he.defaultValue;let t=LM(e);return new he(t.year,t.month,t.day)}o(uoe,"internalTextToDate");function KM(n,e){let t=e.getRegExpForDateTime().test(n);if(t){let r=UM(e);t=jA(r.year,r.month,r.day,r.hours,r.minutes,r.seconds)}return t}o(KM,"internalTextToDateTimeValidate");function coe(n,e){if(!KM(n,e))return he.defaultValue;let t=UM(e);return new he(t.year,t.month,t.day,t.hours,t.minutes,t.seconds)}o(coe,"internalTextToDateTime");function nf(n){return/^\d{4}-\d{2}-\d{2}(?:T|t)\d{2}:\d{2}(:\d{2}(?:\.\d+)?)?(?:Z|[+-]\d{2}:\d{2})?$/.test(n)}o(nf,"isISODateTime");function $v(n){return n.indexOf(" ")!==-1}o($v,"isSpaceSeparatedDateTime");function YM(n){let e=n.toUpperCase().search("T| ");return e!==-1&&(n=n.substring(0,e)),n}o(YM,"getDateFromDateTime");function XM(n){let e=k.FORMAT.dateTimeFormats;n=YM(n);for(let t=0;t<e.length;++t)if(qM(n,e[t]))return!0;return!1}o(XM,"textToDateValidate");function nS(n){let e=k.FORMAT.dateTimeFormats;n=YM(n);for(let t=0;t<e.length;++t){let r=uoe(n,e[t]);if(!r.eq(he.defaultValue))return r}return he.defaultValue}o(nS,"textToDate");function JM(n){return nf(n)?!isNaN(Date.parse(n)):!0}o(JM,"ISODateTimeValidate");function ZM(n){let e=k.FORMAT.dateTimeFormats;if(nf(n))return JM(n);$v(n)||(n+=" 00:00:00");for(let t=0;t<e.length;++t)if(KM(n,e[t]))return!0;return!1}o(ZM,"textToDateTimeValidate");function rS(n){let e=k.FORMAT.dateTimeFormats;if(nf(n))return he.fromISODateTime(n);$v(n)||(n+=" 00:00:00");for(let t=0;t<e.length;++t){let r=coe(n,e[t]);if(!r.eq(he.defaultValue))return r}return he.defaultValue}o(rS,"textToDateTime");function QM(n){let e=n.indexOf(" ");return e!==-1&&(n=n.substring(e+1,n.length)),n}o(QM,"getTimeFromSpaceSeparatedDateTime");function zA(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.FORMAT.defaultDateTimeFormat;if(nf(n))return JM(n);$v(n)&&(n=QM(n));let t=e.getRegExpForTime().test(n);if(t){let r=xM(e);t=kM(r.hours,r.minutes,r.seconds)}return t}o(zA,"textToTimeValidate");function ek(n){if(nf(n)){let e=he.fromISODateTime(n);return new he(1900,1,1,e.hours,e.minutes,e.seconds,e.milliseconds)}return $v(n)&&(n=QM(n)),loe(n,k.FORMAT.defaultDateTimeFormat)}o(ek,"textToTime");function loe(n,e){if(!zA(n,e))return he.defaultValue;let t=xM(e);return new he(1900,1,1,t.hours,t.minutes,t.seconds)}o(loe,"internalTextToTime");function iS(n){return n.toString(k.FORMAT.defaultDateTimeFormat.timeFormat)}o(iS,"timeToText");function tk(n){if(k.FORMAT.numberFormat.getRegExpForInteger().test(n)){let e=parseInt(n,10);if(!isNaN(e)&&e>=k.MIN_INTEGER_VALUE&&e<=k.MAX_INTEGER_VALUE)return e}return null}o(tk,"tryParseInteger");function nk(n){if(k.FORMAT.numberFormat.getRegExpForDecimal().test(n)){let e=new Fe(n);if(!e.isNaN()&&e.gte(k.MIN_DECIMAL_VALUE)&&e.lte(k.MAX_DECIMAL_VALUE))return e}return null}o(nk,"tryParseDecimal");function rk(n){if(!k.FORMAT.numberFormat.getRegExpForInteger().test(n))return null;let e=n.charAt(0)==="-";if(e&&n.length<k.MIN_LONGINTEGER_VALUE.toString().length||!e&&n.length<k.MAX_LONGINTEGER_VALUE.toString().length||tf(new Fe(n)))try{return Tt.fromString(n)}catch(t){}return null}o(rk,"tryParseLongInteger");function ik(n){return nk(n)!==null}o(ik,"textToDecimalValidate");function sk(n){return nk(n)===null?k.DEFAULT_DECIMAL:new Fe(n)}o(sk,"textToDecimal");function ok(n){return tk(n)!==null}o(ok,"textToIntegerValidate");function ak(n){let e=tk(n);return e===null?k.DEFAULT_INTEGER:e}o(ak,"textToInteger");function uk(n){return rk(n)!==null}o(uk,"textToLongIntegerValidate");function ck(n){let e=rk(n);return e===null?k.DEFAULT_LONGINTEGER:e}o(ck,"textToLongInteger");function lk(n){return n.toLowerCase()==="true"}o(lk,"textToBoolean");function doe(n){return n}o(doe,"textToIdentifier");function jp(n){if(typeof n=="number"||G.isLongInteger(n)||G.isDecimal(n))return new Fe(n.toString()).round().toNumber();throw new TypeError("Cannot convert type '"+typeof n+"' to 'Integer'")}o(jp,"objectToInteger");function Wp(n){if(typeof n=="number"||G.isLongInteger(n)||G.isDecimal(n))return Tt.fromString(new Fe(n.toString()).round().toString());throw new TypeError("Cannot convert type '"+typeof n+"' to 'LongInteger'")}o(Wp,"objectToLongInteger");function foe(n){if(typeof n=="boolean")return n;throw new TypeError("Cannot convert type '"+typeof n+"' to 'Boolean'")}o(foe,"objectToBoolean");function Gp(n){if(typeof n=="number"||G.isLongInteger(n)||G.isDecimal(n))return new Fe(n.toString());throw new TypeError("Cannot convert type '"+typeof n+"' to 'Decimal'")}o(Gp,"objectToDecimal");function hoe(n){if(typeof n=="string")return n;throw new TypeError("Cannot convert type '"+typeof n+"' to 'Text'")}o(hoe,"objectToText");function goe(n){return qA(n,!0,!1)}o(goe,"objectToDate");function poe(n){return qA(n,!1,!0)}o(poe,"objectToTime");function moe(n){return qA(n,!0,!0)}o(moe,"objectToDateTime");function qA(n,e,t){if(n instanceof he||Object.prototype.toString.call(n)==="[object Date]"){let r=new he(n.getTime()),i=e?r.year:1900,s=e?r.month:1,a=e?r.day:1,u=t?r.hours:0,l=t?r.minutes:0,c=t?r.seconds:0;return new he(i,s,a,u,l,c)}throw new TypeError("Cannot convert type '"+typeof n+"' to 'DateTime'")}o(qA,"convertObjectToDateTime");function voe(n){return n}o(voe,"toObject");function yoe(n,e){return n.toString(e)}o(yoe,"formatDateTime");function _oe(n,e,t,r,i){let s=dk(n,t,r,i);return s===k.DEFAULT_TEXT?k.DEFAULT_TEXT:e+s}o(_oe,"formatCurrency");function dk(n,e,t,r){return e<0?k.DEFAULT_TEXT:(t.length>1&&(t=t.substr(0,1)),r.length>1&&(r=r.substr(0,1)),n.toFormat(e,Fe.rounding,{decimalSeparator:t,groupSeparator:r}))}o(dk,"formatDecimal");function woe(n,e,t){try{return e<0?"":(t.length>1&&(t=t.substr(0,1)),n.times(100).toFormat(e,Fe.rounding,{decimalSeparator:t,groupSeparator:""})+"%")}catch(r){return""}}o(woe,"formatPercent");function Eoe(n,e,t,r,i,s,a){try{return!/^\d+$/.test(n)||n.length!==e+t+r?n:i+n.substr(0,e)+s+n.substr(e,t)+a+n.substr(e+t,r)}catch(u){return""}}o(Eoe,"formatPhoneNumber");function Toe(n,e,t,r,i){try{let s=Md(n);if(s<e){i=Hp(i,0,1);let a=e-s;for(;a-- >0;)r?n=i+n:n=n+i;return n}return s>t?r?Hp(n,s-t,t):Hp(n,0,t):n}catch(s){return""}}o(Toe,"formatText");var KA="[a-zA-Z0-9.!#$%&'*+\\-/=?^_`{|}~]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*",fk="([0-9a-zA-Z\\\\= ]*|=\\?([^?]*)\\?([qQbB])\\?([^?]*)\\?=)",boe=new RegExp("^"+KA+"$"),Soe=new RegExp("^"+fk+"[ ]*<"+KA+">$"),Aoe=new RegExp('^\\"'+fk+'\\"[ ]*<'+KA+">$");function Ioe(n){return n===""?!0:/\.@/.test(n)?!1:boe.test(n)||Soe.test(n)||Aoe.test(n)}o(Ioe,"emailAddressValidate");function Coe(){let{localeService:n=hc(X.LocaleService)}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n?n.getCurrentLocale():k.DEFAULT_TEXT}o(Coe,"getCurrentLocale");function Roe(){return navigator.userAgent}o(Roe,"getUserAgent");function Ooe(){return wv()}o(Ooe,"getAppName");function Poe(){return window.location.href}o(Poe,"getBookmarkableURL");function Noe(){return Vs()}o(Noe,"getOwnerURLPath");function Doe(){let n=Ko();return ee(Zie,`Checking User's ID: ${n}`),n}o(Doe,"getUserId");function Loe(n,e,t){return n?e:t}o(Loe,"iif");var YA=Object.freeze({__proto__:null,abs:Qie,addDays:Ese,addHours:Tse,addMinutes:bse,addMonths:Ise,addSeconds:Sse,addYears:Ase,booleanToDecimal:BM,booleanToInteger:FM,booleanToLongInteger:$M,booleanToText:WA,buildDateTime:Cse,chr:use,concat:cse,currDate:Rse,currDateTime:Ose,currTime:Pse,dateTimeToDate:VM,dateTimeToText:eS,dateTimeToTime:HM,dateToDateTime:Gse,dateToText:tS,day:Fse,dayOfWeek:Nse,decimalToBoolean:zse,decimalToInteger:jM,decimalToIntegerValidate:Fv,decimalToLongInteger:WM,decimalToLongIntegerValidate:tf,decimalToText:kd,diffDays:Dse,diffHours:Lse,diffMinutes:xse,diffSeconds:Use,emailAddressValidate:Ioe,encodeHtml:lse,encodeJavascript:dse,encodeUrl:fse,formatCurrency:_oe,formatDateTime:yoe,formatDecimal:dk,formatPercent:woe,formatPhoneNumber:Eoe,formatText:Toe,getAppName:Ooe,getBookmarkableURL:Poe,getCurrentLocale:Coe,getOwnerURLPath:Noe,getUserAgent:Roe,getUserId:Doe,hour:$se,identifierToInteger:Xse,identifierToLongInteger:Jse,identifierToText:Zse,iif:Loe,index:hse,integerToBoolean:toe,integerToDecimal:noe,integerToIdentifier:eoe,integerToLongInteger:Qse,integerToText:zM,length:Md,like:wse,longIntegerToDecimal:qse,longIntegerToIdentifier:Yse,longIntegerToInteger:Kse,longIntegerToIntegerValidate:GM,longIntegerToText:GA,max:sse,min:ose,minute:Bse,mod:ese,month:kse,newDate:Hse,newDateTime:jse,newTime:Wse,nullBinary:aoe,nullDate:soe,nullIdentifier:roe,nullObject:ooe,nullTextIdentifier:ioe,objectToBoolean:foe,objectToDate:goe,objectToDateTime:moe,objectToDecimal:Gp,objectToInteger:jp,objectToLongInteger:Wp,objectToText:hoe,objectToTime:poe,power:tse,replace:gse,round:nse,second:Vse,sign:ase,sqrt:rse,substr:Hp,textToBoolean:lk,textToDate:nS,textToDateTime:rS,textToDateTimeValidate:ZM,textToDateValidate:XM,textToDecimal:sk,textToDecimalValidate:ik,textToIdentifier:doe,textToInteger:ak,textToIntegerValidate:ok,textToLongInteger:ck,textToLongIntegerValidate:uk,textToTime:ek,textToTimeValidate:zA,timeToText:iS,toLower:pse,toObject:voe,toUpper:mse,trim:vse,trimEnd:_se,trimStart:yse,trunc:ise,year:Mse}),sS;(function(n){n[n.TEXT=0]="TEXT",n[n.BINARY_DATA=1]="BINARY_DATA",n[n.BOOLEAN=2]="BOOLEAN",n[n.INTEGER=3]="INTEGER",n[n.LONGINTEGER=4]="LONGINTEGER",n[n.DECIMAL=5]="DECIMAL",n[n.DATE_TIME=6]="DATE_TIME",n[n.DATE=7]="DATE",n[n.TIME=8]="TIME",n[n.UNKNOWN=9]="UNKNOWN"})(sS||(sS={}));var re=sS,hk={[b.Integer]:re.INTEGER,[b.LongInteger]:re.LONGINTEGER,[b.Decimal]:re.DECIMAL,[b.Currency]:re.DECIMAL,[b.Text]:re.TEXT,[b.PhoneNumber]:re.TEXT,[b.Email]:re.TEXT,[b.Boolean]:re.BOOLEAN,[b.Date]:re.DATE,[b.DateTime]:re.DATE_TIME,[b.Time]:re.TIME,[b.Record]:re.UNKNOWN,[b.RecordList]:re.UNKNOWN,[b.BinaryData]:re.BINARY_DATA,[b.Object]:re.UNKNOWN};function na(n){switch(n){case re.INTEGER:case re.LONGINTEGER:case re.DECIMAL:case re.TEXT:case re.BOOLEAN:case re.DATE:case re.DATE_TIME:case re.TIME:case re.BINARY_DATA:return Cn(Qu(n));default:throw new me.DataBaseException("",`Unable to determine default value for type ${XA(n)}`)}}o(na,"typeDefaultValue");function Qu(n){switch(n){case re.TEXT:return b.Text;case re.BINARY_DATA:return b.BinaryData;case re.BOOLEAN:return b.Boolean;case re.DATE:return b.Date;case re.DATE_TIME:return b.DateTime;case re.TIME:return b.Time;case re.DECIMAL:return b.Decimal;case re.INTEGER:return b.Integer;case re.LONGINTEGER:return b.LongInteger;default:throw new Error(`Missing case for conversion of DB data type '${n}' to a model data type.`)}}o(Qu,"convertToModelDataType");function XA(n){let e=Qu(n);return b[e]}o(XA,"typeDisplayName");function WL(n){let e=hk[n];return e!=null?e:re.UNKNOWN}o(WL,"convertDataTypeToDBDataType");function JA(n){return!!n.isGenericRecordType}o(JA,"isGenericRecordType");function ZA(n){return!!n.isGenericRecordListType}o(ZA,"isGenericRecordListType");function gk(n){return!!n.isBasicTypeListType}o(gk,"isBasicTypeListType");var ec;(function(n){function e(c,d,f){let h=c.getAttributes();return h.reduce((g,p,m)=>(p.ignoreForServer||(p.dataType===b.Record||p.dataType===b.RecordList?g[p.name]=r(c[p.attrName],d,p.optimizeList&&f):p.dataType!==b.Object&&(g[p.name]=u(c[p.attrName],h[m].dataType))),g),{})}o(e,"serializeRecord");function t(c,d,f){let h=c.constructor.getItemType(),g={List:[]};if(!f||!d)for(let p=0;p<c.length;p++)g.List.push(r(c.getItem(p),h));else if(c.length>0&&d){let p=d.iterationContext.getCurrentRowNumber(c);g.List.push(r(c.getItem(p),h,d,f))}return c.isEmpty&&(g.EmptyListItem=r(c.emptyListItem,h,d,f)),g}o(t,"serializeList");function r(c){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.Record,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(c==null)return;let g=b.Record,p;if(typeof d!="number"?(h=f===!0,p=d,g=b.Record):(g=d,typeof f!="boolean"&&(p=f)),c instanceof Ke)return e(c,p,h);if(c instanceof Yi)return t(c,p,h);if(g!==b.Object)return u(c,g)}o(r,"to"),n.to=r;function i(c,d){let f=c!=null?c:{},h=d.getAttributes(),g=h.reduce((p,m,w)=>(m.dataType===b.Record||m.dataType===b.RecordList?p[m.attrName]=Ke.getData(a(f[m.name],h[w].complexType)):m.dataType===b.BinaryData?p[m.attrName]=l({content:f[m.name],url:f[`_${m.name}URL`]},h[w].dataType):p[m.attrName]=l(f[m.name],h[w].dataType),p),{});return new d(new d.RecordClass(g))}o(i,"deserializeRecord");function s(c,d){if(d.getItemType()===void 0||d.getItemType()===null)throw Error("A List can only be deserialized if its ItemType is defined.");let f=d,h=new f;return c.List.length===0?h.emptyListItem=a(c.EmptyListItem,d.getItemType()):h.pushAll(c.List.map(g=>a(g,d.getItemType()))),h}o(s,"deserializeList");function a(c,d){return JA(d)?i(c,d):ZA(d)||gk(d)?s(c,d):l(c,d)}o(a,"from"),n.from=a;function u(c,d){switch(d){case b.Integer:return c;case b.LongInteger:return GA(c);case b.Decimal:case b.Currency:return kd(c);case b.Text:case b.PhoneNumber:case b.Email:return c;case b.Date:return c.toISODate();case b.DateTime:return c.toString();case b.Time:return c.toISOTime();case b.Boolean:return c;case b.Record:case b.RecordList:throw new TypeError("Records and Record lists are not basic types");case b.BinaryData:return typeof c=="string"?c:c.content;case b.Object:return c;default:return c}}o(u,"basicTypeToJS");function l(c,d){switch(d){case b.Integer:return G.ensureIntegerInsideBounds(c),c|0;case b.LongInteger:return typeof c=="string"?Tt.fromString(c):Tt.fromNumber(c);case b.Decimal:case b.Currency:return new Fe(c||"0");case b.Boolean:return typeof c=="string"?lk(c):c;case b.Text:case b.PhoneNumber:case b.Email:return c===void 0?"":c+"";case b.Date:return c instanceof Date?new he(c):he.fromISODate(c);case b.DateTime:return c instanceof Date?new he(c):he.fromISODateTime(c);case b.Time:return c instanceof Date?new he(c):he.fromISOTime(c);case b.Record:case b.RecordList:throw new TypeError("Records and Record lists are not basic types");case b.BinaryData:return G.hasBinaryDataInterface(c)?new On(c.content,c.url):new On(c);case b.Object:return c;default:return c}}o(l,"jsToBasicType")})(ec||(ec={}));var Ws;(function(n){function e(S){return G.isValidJsNumber(S)&&S>=k.MIN_INTEGER_VALUE&&S<=k.MAX_INTEGER_VALUE?!0:G.isLongInteger(S)?GM(S):G.isDecimal(S)?Fv(S):G.isText(S)?ok(S):!!G.isBoolean(S)}o(e,"isConvertibleToInteger");function t(S){return G.isValidJsNumber(S)||G.isValidLongInteger(S)?!0:G.isValidDecimal(S)?tf(S):G.isText(S)?uk(S):!!G.isBoolean(S)}o(t,"isConvertibleToLongInteger");function r(S){return G.isValidJsNumber(S)||G.isValidDecimal(S)&&k.MIN_DECIMAL_VALUE.lte(S)&&k.MAX_DECIMAL_VALUE.gte(S)||G.isValidLongInteger(S)?!0:G.isText(S)?ik(S):!!G.isBoolean(S)}o(r,"isConvertibleToDecimal");function i(S){return r(S)}o(i,"isConvertibleToCurrency");function s(S){return G.isJsNumber(S)?G.isValidJsNumber(S):G.isLongInteger(S)?G.isValidLongInteger(S):G.isDecimal(S)?G.isValidDecimal(S):G.isText(S)||G.isBoolean(S)?!0:G.isDateTime(S)?G.isValidDateTime(S):G.isJsDate(S)?G.isValidJsDate(S):!1}o(s,"isConvertibleToText");function a(S){return s(S)}o(a,"isConvertibleToPhoneNumber");function u(S){return s(S)}o(u,"isConvertibleToEmail");function l(S){return G.isJsNumber(S)?G.isValidJsNumber(S):G.isLongInteger(S)?G.isValidLongInteger(S):G.isDecimal(S)?G.isValidDecimal(S):G.isText(S)?/^(true|false)$/gi.test(S):!!G.isBoolean(S)}o(l,"isConvertibleToBoolean");function c(S){if(G.isValidDateTime(S)&&S.gte(k.MIN_DATE_VALUE)&&S.lte(k.MAX_DATE_VALUE))return!0;if(G.isValidJsDate(S)&&new he(S).gte(k.MIN_DATE_VALUE)&&new he(S).lte(k.MAX_DATE_VALUE))return!0;if(G.isText(S))if(k.ISO_DATE_FORMAT_REGEXP.test(S)){let K=new he(new Date(S));return K.gte(k.MIN_DATE_VALUE)&&K.lte(k.MAX_DATE_VALUE)}else if(XM(S)){let K=nS(S);return K.gte(k.MIN_DATE_VALUE)&&K.lte(k.MAX_DATE_VALUE)}else return!1;return!1}o(c,"isConvertibleToDate");function d(S){return G.isValidDateTime(S)||G.isValidJsDate(S)?!0:G.isText(S)?k.RFC3339_TIMEPART.test(S)||k.ISO_DATE_FORMAT_REGEXP.test(S)?!0:zA(S):!1}o(d,"isConvertibleToTime");function f(S){if(G.isValidDateTime(S)&&S.gte(k.MIN_DATETIME_VALUE)&&S.lte(k.MAX_DATETIME_VALUE))return!0;if(G.isValidJsDate(S)&&new he(S).gte(k.MIN_DATETIME_VALUE)&&new he(S).lte(k.MAX_DATETIME_VALUE))return!0;if(G.isText(S))if(k.ISO_DATE_FORMAT_REGEXP.test(S)){let K=new he(new Date(S));return K.gte(k.MIN_DATETIME_VALUE)&&K.lte(k.MAX_DATETIME_VALUE)}else if(ZM(S)){let K=rS(S);return K.gte(k.MIN_DATETIME_VALUE)&&K.lte(k.MAX_DATETIME_VALUE)}else return!1;return!1}o(f,"isConvertibleToDateTime");function h(S){return G.isBinaryData(S)}o(h,"isConvertibleToBinaryData");function g(S,K){switch(K){case b.Integer:return e(S);case b.LongInteger:return t(S);case b.Decimal:return r(S);case b.Currency:return i(S);case b.Text:return s(S);case b.PhoneNumber:return a(S);case b.Email:return u(S);case b.Boolean:return l(S);case b.Date:return c(S);case b.Time:return d(S);case b.DateTime:return f(S);case b.BinaryData:return h(S);default:return!1}}o(g,"isConvertibleTo"),n.isConvertibleTo=g;function p(S){return G.isValidJsNumber(S)&&S===k.DEFAULT_INTEGER||G.isValidLongInteger(S)&&S.equals(k.DEFAULT_LONGINTEGER)||G.isValidDecimal(S)&&S.equals(k.DEFAULT_DECIMAL)||G.isText(S)&&S===k.DEFAULT_TEXT||G.isBoolean(S)&&S===k.DEFAULT_BOOLEAN||G.isValidDateTime(S)&&S.equals(k.DEFAULT_DATETIME)}o(p,"isDefault"),n.isDefault=p;function m(S){if(e(S)){if(G.isJsNumber(S))return jp(S);if(G.isLongInteger(S))return jp(S);if(G.isDecimal(S))return jp(S);if(G.isText(S)&&S!=="")return ak(S);if(G.isBoolean(S))return FM(S)}return k.DEFAULT_INTEGER}o(m,"convertToInteger");function w(S){if(t(S)){if(G.isJsNumber(S))return Wp(S);if(G.isLongInteger(S))return Wp(S);if(G.isDecimal(S))return Wp(S);if(G.isText(S)&&S!=="")return ck(S);if(G.isBoolean(S))return $M(S)}return k.DEFAULT_LONGINTEGER}o(w,"convertToLongInteger");function E(S){if(r(S)){if(G.isJsNumber(S))return Gp(S);if(G.isLongInteger(S))return Gp(S);if(G.isDecimal(S))return Gp(S);if(G.isText(S)&&S!=="")return sk(S);if(G.isBoolean(S))return BM(S)}return k.DEFAULT_DECIMAL}o(E,"convertToDecimal");function _(S){return E(S)}o(_,"convertToCurrency");function T(S){if(s(S)){if(G.isJsNumber(S))return G.isValidInteger(S)?zM(S):kd(new Fe(S));if(G.isLongInteger(S))return GA(S);if(G.isDecimal(S))return kd(S);if(G.isText(S))return S;if(G.isBoolean(S))return WA(S);if(G.isValidDate(S))return tS(S);if(G.isValidTime(S))return iS(S);if(G.isDateTime(S))return eS(S);if(G.isJsDate(S)){let K=new he(S);return G.isValidDate(K)?tS(K):G.isValidTime(K)?iS(K):eS(K)}}return k.DEFAULT_TEXT}o(T,"convertToText");function R(S){return T(S)}o(R,"convertToPhoneNumber");function D(S){return u(S)&&G.isText(S)?S:k.DEFAULT_EMAIL}o(D,"convertToEmail");function B(S){if(l(S)){if(G.isJsNumber(S))return S!==0;if(G.isLongInteger(S))return!S.eq(0);if(G.isDecimal(S))return!S.eq(0);if(G.isText(S)&&S!=="")return!/^(false)$/gi.test(S);if(G.isBoolean(S))return S}return k.DEFAULT_BOOLEAN}o(B,"convertToBoolean");function z(S){if(c(S)){if(G.isDateTime(S)){let K=S;return new he(K.year,K.month,K.day)}else if(G.isJsDate(S)){let K=S;return new he(K.getFullYear(),K.getMonth()+1,K.getDate())}else if(G.isText(S)&&S!=="")return k.RFC3339_DATEPART.test(S)?he.fromISODate(S):k.ISO_DATE_FORMAT_REGEXP.test(S)?VM(he.fromISODateTime(S)):nS(S)}return k.DEFAULT_DATE}o(z,"convertToDate");function j(S){if(d(S)){if(G.isDateTime(S)){let K=S;return new he(null,null,null,K.hours,K.minutes,K.seconds,K.milliseconds)}else if(G.isJsDate(S)){let K=S;return new he(null,null,null,K.getHours(),K.getMinutes(),K.getSeconds())}else if(G.isText(S)&&S!=="")return k.RFC3339_TIMEPART.test(S)?he.fromISOTime(S):k.ISO_DATE_FORMAT_REGEXP.test(S)?HM(he.fromISODateTime(S)):ek(S)}return k.DEFAULT_TIME}o(j,"convertToTime");function Y(S){if(f(S)){if(G.isDateTime(S)){let K=S;return new he(K.year,K.month,K.day,K.hours,K.minutes,K.seconds,K.milliseconds)}else if(G.isJsDate(S)){let K=S;return new he(K)}else if(G.isText(S)&&S!=="")return k.ISO_DATE_FORMAT_REGEXP.test(S)?he.fromISODateTime(S):rS(S)}return k.DEFAULT_DATETIME}o(Y,"convertToDateTime");function q(S){return S}o(q,"convertToBinaryData");function P(S,K){switch(K){case b.Integer:return m(S);case b.LongInteger:return w(S);case b.Decimal:return E(S);case b.Currency:return _(S);case b.Text:return T(S);case b.PhoneNumber:return R(S);case b.Email:return D(S);case b.Boolean:return B(S);case b.Date:return z(S);case b.Time:return j(S);case b.DateTime:return Y(S);case b.BinaryData:return S;default:return null}}o(P,"convertTo"),n.convertTo=P;function Z(S,K,U){return U(S,K)}o(Z,"typeConvertRecord"),n.typeConvertRecord=Z;function oe(S,K,U){let Oe=0;for(;Oe<S.length;)K.append(U(S.getItem(Oe),K.newItem())),Oe++;return K}o(oe,"typeConvertRecordList"),n.typeConvertRecordList=oe})(Ws||(Ws={}));var oS;(function(n){function e(P){return P-P%1}o(e,"trunc");function t(P,Z){return g.get(Z)(P)}o(t,"to"),n.to=t;function r(P,Z){return q.get(Z)(P,Z)}o(r,"from"),n.from=r;function i(P){return P}o(i,"integerToJSNodeParam");function s(P){return G.ensureNumberInsideBounds(P),P.toNumber()}o(s,"longIntegerToJSNodeParam");function a(P){return G.ensureNumberPrecision(P),G.ensureNumberInsideBounds(P),P.toNumber()}o(a,"decimalToJSNodeParam");function u(P){return P}o(u,"textToJSNodeParam");function l(P){return P.toNative()}o(l,"dateTimeToJSNodeParam");function c(P){return P}o(c,"booleanToJSNodeParam");function d(P){throw new TypeError("Records and Record lists are not basic types")}o(d,"recordToJSNodeParam");function f(P){var Z;return typeof P=="string"?P:(Z=P.content)!==null&&Z!==void 0?Z:""}o(f,"binaryDataToJSNodeParam");function h(P){return P}o(h,"objectToJSNodeParam");let g=new Map([[b.Integer,i],[b.LongInteger,s],[b.Decimal,a],[b.Currency,a],[b.Text,u],[b.PhoneNumber,u],[b.Email,u],[b.Date,l],[b.DateTime,l],[b.Time,l],[b.Boolean,c],[b.Record,d],[b.RecordList,d],[b.BinaryData,f],[b.Object,h]]);function p(P,Z){throw new me.InvalidJavascriptType(`Cannot assign a JavaScript ${typeof P} with value ${P==null?JSON.stringify(P):P.toString()} to an output parameter of type ${b[Z]}`)}o(p,"throwInvalidTypeError");function m(P){return G.isValidJsNumber(P)?(G.ensureIntegerInsideBounds(P),e(P)):p(P,b.Integer)}o(m,"jsNodeParamToInteger");function w(P){return G.isValidJsNumber(P)?(G.ensureLongIntegerInsideBounds(P),Tt.fromNumber(e(P))):p(P,b.LongInteger)}o(w,"jsNodeParamToLongInteger");function E(P,Z){return G.isValidJsNumber(P)?(G.ensureDecimalInsideBounds(P),new Fe(P)):p(P,Z)}o(E,"jsNodeParamToDecimal");function _(P){return G.isBoolean(P)?P:p(P,b.Boolean)}o(_,"jsNodeParamToBoolean");function T(P,Z){return G.isText(P)?P:G.isValidJsNumber(P)?(G.ensureDecimalInsideBounds(P),kd(new Fe(P))):G.isBoolean(P)?WA(P):p(P,Z)}o(T,"jsNodeParamToText");function R(P){if(G.isValidJsDate(P)){let Z=P;return new he(Z.getFullYear(),Z.getMonth()+1,Z.getDate())}return p(P,b.Date)}o(R,"jsNodeParamToDate");function D(P){return G.isValidJsDate(P)?new he(P):p(P,b.DateTime)}o(D,"jsNodeParamToDateTime");function B(P){if(G.isValidJsDate(P)){let Z=P;return new he(null,null,null,Z.getHours(),Z.getMinutes(),Z.getSeconds(),Z.getMilliseconds())}return p(P,b.Time)}o(B,"jsNodeParamToTime");function z(P,Z){return p(P,Z)}o(z,"jsNodeParamToRecord");function j(P){return G.hasBinaryDataInterface(P)?new On(P.content,P.url):new On(P)}o(j,"jsNodeParamToBinaryData");function Y(P){return P}o(Y,"jsNodeParamToObject");let q=new Map([[b.Integer,m],[b.LongInteger,w],[b.Decimal,E],[b.Currency,E],[b.Text,T],[b.PhoneNumber,T],[b.Email,T],[b.Date,R],[b.DateTime,D],[b.Time,B],[b.Boolean,_],[b.Record,z],[b.RecordList,z],[b.BinaryData,j],[b.Object,Y]])})(oS||(oS={}));var Fd;(function(n){let e=new Map;function t(h,g,p){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,w=arguments.length>4?arguments[4]:void 0,E=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(!(m===!1&&!E&&Tr(h,p)))switch(g){case b.Time:return h.toISOTime();case b.Date:return h.toISODate();case b.DateTime:return w===!0?""+Math.floor(h.getTime()/1e3):h.toString().replace(/\.\d+/,"");case b.LongInteger:let _=h;return G.ensureNumberInsideBounds(_),_.toNumber();case b.Decimal:case b.Currency:let T=h;return G.ensureNumberPrecision(T),G.ensureNumberInsideBounds(T),T.toNumber();case b.Record:case b.RecordList:throw new TypeError("Records and Record lists are not basic types");case b.BinaryData:return typeof h=="string"?h:h.content;default:return h}}o(t,"serializeBasicType");function r(h){let{value:g,serializeDefaultValues:p=!0,useUnixDateFormat:m=!1,dataType:w=b.Record,defaultValue:E,enforceDefaultValueSerializationAtThisLevel:_=!1}=h;if(g!=null)return g instanceof Ke?i(g,p!=null?p:!1,m!=null?m:!1,_):g instanceof Yi?s(g,p!=null?p:!1,m!=null?m:!1,_):t(g,w,E!=null?E:Cn(w),p,m,_)}o(r,"to"),n.to=r;function i(h,g,p){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,w=h.getAttributes().reduce((E,_)=>{if(_.dataType===b.Record||_.dataType===b.RecordList){let T=r({value:h[_.attrName],serializeDefaultValues:g,useUnixDateFormat:p});T&&(E[_.nameForJson]=T)}else{let T=t(h[_.attrName],_.dataType,_.defaultValue,g,p);T!==void 0&&(E[_.nameForJson]=T)}return E},{});if(Object.keys(w).length!==0||m)return w}o(i,"serializeRecord");function s(h,g,p){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,w=[],E=h.constructor.getItemType();for(let _=0;_<h.length;_++)w.push(r({value:h.getItem(_),serializeDefaultValues:g,useUnixDateFormat:p,dataType:E,enforceDefaultValueSerializationAtThisLevel:!0}));if(w.length>0||g||m)return w}o(s,"serializeList");function a(h,g,p,m){if(JA(g)){let w=g,E=e.get(w);if(!E){let _=w.getAttributes();E=o((T,R)=>{T!=null||(T={});let D=_.reduce((B,z,j)=>(z.nameForJson!==""&&(z.dataType===b.Record||z.dataType===b.RecordList?B[z.attrName]=Ke.getData(a(T[z.nameForJson],_[j].complexType,R)):B[z.attrName]=u(T[z.nameForJson],_[j].dataType,_[j].defaultValue,R)),B),{});return new g(new g.RecordClass(D))},"converter"),e.set(w,E)}return E(h,p)}else if(ZA(g)||gk(g)){if(g.getItemType()===void 0||g.getItemType()===null)throw Error("A List can only be deserialized if its ItemType is defined.");let w=h;if(w==null&&(w=[]),w.constructor!==Array)throw new TypeError("Could not convert '"+w+"' to List");let E=g,_=new E;return _.pushAll(w.map(T=>a(T,g.getItemType(),p))),_}else return u(h,g,m===void 0?Cn(g):m,p)}o(a,"from"),n.from=a;function u(h,g,p,m){if(h==null)return p;switch(g){case b.Integer:return l(h);case b.LongInteger:return c(h);case b.Currency:case b.Decimal:return d(h);case b.DateTime:return f(h,m);default:return ec.from(h,g)}}o(u,"jsonToBasicType");function l(h){let g;if(k.FORMAT.numberFormat.getRegExpForInteger().test(h)?g=new Fe(h):k.FORMAT.numberFormat.getRegExpForJSNumber().test(h)&&(g=new Fe(+h)),g===void 0||!g.isInteger()||!Fv(g))throw new me.Exception("Could not convert '"+h+"' to Integer");return jM(g)}o(l,"jsonToInteger");function c(h){let g;if(k.FORMAT.numberFormat.getRegExpForInteger().test(h)?g=new Fe(h):k.FORMAT.numberFormat.getRegExpForJSNumber().test(h)&&(g=new Fe(+h)),g===void 0||!g.isInteger()||!tf(g))throw new me.Exception("Could not convert '"+h+"' to Long Integer");return WM(g)}o(c,"jsonToLongInteger");function d(h){let g;if(k.FORMAT.numberFormat.getRegExpForInteger().test(h)?g=new Fe(h):k.FORMAT.numberFormat.getRegExpForJSNumber().test(h)&&(g=new Fe(+h)),g===void 0||g.lt(k.MIN_DECIMAL_VALUE)||g.gt(k.MAX_DECIMAL_VALUE))throw new me.Exception("Could not convert '"+h+"' to Decimal");return g}o(d,"jsonToDecimal");function f(h,g){if(g){h instanceof Date&&(h=new he(h.getTime()));try{return new he(+h*1e3)}catch(p){throw new me.Exception("Could not convert '"+h+"' to DateTime")}}else{if(!Ws.isConvertibleTo(h,b.DateTime))throw new me.Exception("Could not convert '"+h+"' to DateTime");return ec.from(h,b.DateTime)}}o(f,"jsonToDateTime")})(Fd||(Fd={}));var aS;(function(n){n.typeDefaultValue=na,n.convertToModelDataType=Qu,n.typeDisplayName=XA;let e="1900-01-01 00:00:00",t=new Map;function r(h,g,p,m){var w;if(JA(g)){let E=h,_=g,T=p,R=t.get(_);if(!R){let D=_.getAttributes();R=o((B,z,j,Y)=>{let q={};return Y&&Y.length>0?(D.forEach(P=>{P.dataType!==b.RecordList&&(q[P.attrName]=null)}),Y.forEach(P=>{let Z=D.filter(oe=>oe.attrName===P)[0];Z.complexType?q[P]=r(B,Z.complexType,z):q[P]=j(B,z.value++,Z.name,Z.dataType)})):D.forEach((P,Z)=>{P.dataType!==b.RecordList&&(P.dataType===b.Record&&g.isAnonymousRecord()?q[P.attrName]=r(B,D[Z].complexType,z):q[P.attrName]=j(B,z.value++,D[Z].name,D[Z].dataType))}),new g.RecordClass(q)},"converter"),t.set(_,R)}return R(E,T,s(g),m)}else if(ZA(g)){if(g.getItemType()===void 0||g.getItemType()===null)throw Error("A List can only be deserialized if its ItemType is defined.");let E=h,_=g.getItemType(),T=p,R=g,D=new R,B=[];for(let z=0;z<E.length;z++)B.push(new _(T(null,E.item(z))));return D.pushAll(B),D}else{let E=g;throw new Error(`Unable to read data from Local Storage. Unknown type ${(w=E==null?void 0:E.name)!==null&&w!==void 0?w:E}`)}}o(r,"from"),n.from=r;function i(h){let g=hk[h];return g===void 0?re.UNKNOWN:g}o(i,"convertDataTypeToDBDataType");function s(h){return h.isAnonymousRecord()?u:a}o(s,"getAttributeReaderImplementation");function a(h,g,p,m){return n.deserializeFromDB(h["o"+g],i(m))}o(a,"attributeReaderImplementation");function u(h,g,p,m){return n.deserializeFromDB(h[p],i(m))}o(u,"namedAttributeReaderImplementation");function l(h,g){let p=g.length,m=h.toString();return g.substr(0,Math.max(0,p-m.length))+m}o(l,"maskValue");function c(h,g){if(g.isEntityReference&&Tr(h,n.typeDefaultValue(g.type)))return null;switch(g.type){case re.INTEGER:return h;case re.LONGINTEGER:let p=h;return p?p.toString():null;case re.DECIMAL:let m=h;return g.decimals?m.toFixed(g.decimals):m.toString();case re.TEXT:return h;case re.BOOLEAN:return h?1:0;case re.DATE_TIME:let E=h.toNative();return h.eq(he.defaultValue)?e:(E=h.toNative(),l(E.getUTCFullYear(),"0000")+"-"+l(E.getUTCMonth()+1,"00")+"-"+l(E.getUTCDate(),"00")+" "+l(E.getUTCHours(),"00")+":"+l(E.getUTCMinutes(),"00")+":"+l(E.getUTCSeconds(),"00"));case re.DATE:let _=h.toNative();return l(_.getFullYear(),"0000")+"-"+l(_.getMonth()+1,"00")+"-"+l(_.getDate(),"00");case re.TIME:let T=h.toNative();return"1900-01-01 "+l(T.getHours(),"00")+":"+l(T.getMinutes(),"00")+":"+l(T.getSeconds(),"00");case re.BINARY_DATA:let R=h;return R.content===void 0?null:R.content;default:throw new me.DataBaseException("",`Unable to serialize ${h} to a database value.`)}}o(c,"serializeToDB"),n.serializeToDB=c;function d(h,g){if(h===null)return n.typeDefaultValue(g);switch(g){case re.INTEGER:return h;case re.LONGINTEGER:return Tt.fromValue(h);case re.DECIMAL:let p=h;return new Fe(p);case re.TEXT:return h;case re.BOOLEAN:return h!==0;case re.DATE_TIME:case re.DATE:case re.TIME:let w=/^((\d{4})-(\d{2})-(\d{2}))?\s?((\d{2}):(\d{2}):(\d{2}))?$/,E=h,_=w.exec(E),T=new Date;switch(g){case re.DATE_TIME:if(h===e)return he.defaultValue;T.setUTCFullYear(parseInt(_[2],10),parseInt(_[3],10)-1,parseInt(_[4],10)),T.setUTCHours(parseInt(_[6],10)||0,parseInt(_[7],10)||0,parseInt(_[8],10)||0,0);break;case re.DATE:T.setFullYear(parseInt(_[2],10),parseInt(_[3],10)-1,parseInt(_[4],10)),T.setHours(0,0,0,0);break;case re.TIME:T.setFullYear(1900,0,1),T.setHours(parseInt(_[6],10)||0,parseInt(_[7],10)||0,parseInt(_[8],10)||0,0);break}return new he(T);case re.BINARY_DATA:return new On(h);default:throw new me.DataBaseException("","Unable to deserialize "+h+" to a runtime value.")}}o(d,"deserializeFromDB"),n.deserializeFromDB=d;function f(h){return new On(void 0,void 0,h)}o(f,"deserializeLazyBinaryFromDB"),n.deserializeLazyBinaryFromDB=f})(aS||(aS={}));var xoe=Object.freeze({__proto__:null,get JSConversions(){return Ws},get JSNodeParamConverter(){return oS},get JSONConverter(){return Fd},get LocalStorageConverter(){return aS},get ServerDataConverter(){return ec}});function Uoe(n,e,t,r){let i=Fd.to({value:n,serializeDefaultValues:e,useUnixDateFormat:t,dataType:r,enforceDefaultValueSerializationAtThisLevel:!0});return JSON.stringify(i,pk)}o(Uoe,"serializeToJSON");function Moe(n,e,t){try{let r;return n&&(r=mk(n)),Fd.from(r,e,t)}catch(r){throw"Failed to deserialize JSON to "+e.name+": "+r.message}}o(Moe,"deserializeFromJSON");function pk(n,e){if(e!==null)return e}o(pk,"filterJSONValues");function mk(n){let e=/(?:"([^\\"]|\\.)*")|(?:'([^\\']|\\.)*')|(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(\w+)\s*:/g,t=n.replace(e,function(r,i,s,a,u){return a?'"'+a+'"':s?'"'+r.substring(1,r.length-1)+'"':u?'"'+u+'":':r});return JSON.parse(t)}o(mk,"parseJSON");function xm(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;t=t!=null?t:koe,e=isNaN(+e)?1:e;let s=new WeakMap;function a(u,l,c,d,f){var h;return!u||typeof u!="object"?u:(f=s.has(u),s.set(u,!0),d=Array.isArray(u),f?c=(h=i==null?void 0:i(u))!==null&&h!==void 0?h:null:JSON.stringify(u,function(g,p){if(d||l>0){if(t&&(p=t(g,p)),!g)return d=Array.isArray(p),u=p;c=c||(d?[]:{}),c[g]=a(p,d?l:l-1)}}),c===void 0?d?[]:"(...)":c)}return o(a,"_build"),JSON.stringify(a(n,e),null,r)}o(xm,"serializeObjectForLog");function koe(n,e){if(n===""){if(Array.isArray(e)){let a=e;return a.length>=10&&(a=a.slice(0,9),a.push("(...)")),a}return Foe(e,10)}else if(typeof e=="string"){let s=e;return s.length>25?s.substring(0,19)+" (...)":s}return e}o(koe,"trimObject");function Foe(n,e){let t=0,r=!1,i=Object.keys(n).reduce(function(s,a){return t++,t<=e?s[a]=n[a]:r=!0,s},{});return r&&(i["..."]="(...)"),i}o(Foe,"cloneObjectWithPropLimit");var $oe=Object.freeze({__proto__:null,deserializeFromJSON:Moe,filterJSONValues:pk,parseJSON:mk,serializeObjectForLog:xm,serializeToJSON:Uoe}),Bv="BACKUP_",rf="OSSYS_ENTITY";function QA(n){return n&&n.toUpperCase()}o(QA,"formatObjectName");function Um(n,e){var t;return(t=n.attributes.filter(r=>(r==null?void 0:r.name)===e.name)[0])!==null&&t!==void 0?t:null}o(Um,"getMatchingColumn");function Vr(n){var e;return(e=$s(n)[0])!==null&&e!==void 0?e:null}o(Vr,"getIdentifierColumn");function $s(n){return n.attributes.filter(e=>e==null?void 0:e.isPrimaryKey)}o($s,"getIdentifierColumns");function eI(n){let e=$s(n);return e.length>0?e.map(t=>{var r;return(r=t==null?void 0:t.columnName)!==null&&r!==void 0?r:null}):null}o(eI,"getIdentifierColumnNames");function Wo(n,e){let t=Vr(n);return t&&e.getAttributes().filter(r=>r.name===t.name)[0]||null}o(Wo,"getIdentifierAttribute");function vk(n,e){let t=Vr(n);if(!t)return null;let r=e.getAttributes().filter(i=>i.name===t.name)[0];return r?e[r.attrName]:null}o(vk,"getIdentifierValue");function Boe(n,e){let t=Vr(n);if(!t)return!0;let r=e.getAttributes().filter(i=>i.name===t.name)[0];return r?Tr(e[r.attrName],Cn(r.dataType)):!0}o(Boe,"hasNullIdentifier");var Voe=Object.freeze({__proto__:null,BACKUP_TABLE_PREFIX:Bv,METADATA_TABLE_NAME:rf,formatObjectName:QA,getIdentifierAttribute:Wo,getIdentifierColumn:Vr,getIdentifierColumnNames:eI,getIdentifierColumns:$s,getIdentifierValue:vk,getMatchingColumn:Um,hasNullIdentifier:Boe}),ub="IndexedDBTransactionWithoutObjectStores",WI=class WI{constructor(e,t){this.allowTraces=e,this.database=t,this.allowTraces&&ee(ub,`Starting transaction ${this.transactionId} over ${t.objectStoreNames.length} store(s)`)}createTable(e){return new Promise(t=>{var r,i,s;this.debug(`Creating table '${e.tableName}'`);let a=eI(e),u=this.database.createObjectStore(e.tableName,{autoIncrement:!a,keyPath:a});this.debug(`Creating columns for '${e.tableName}' table`);for(let l=0;l<e.attributes.length;l++)this.debug(`Creating column '${(r=e.attributes[l])===null||r===void 0?void 0:r.name}'`),u.createIndex((i=e.attributes[l])===null||i===void 0?void 0:i.columnName,(s=e.attributes[l])===null||s===void 0?void 0:s.columnName);t()})}deleteTableIfExists(e){let t;return typeof e=="string"?t=e:t=e.tableName,new Promise((r,i)=>{if(this.debug(`Deleting table '${t}'`),!this.database.objectStoreNames.contains(t))return this.debug(`Table '${t}' does not exist`),r();try{this.database.deleteObjectStore(t),this.debug(`Table '${t}' deleted successfuly`)}catch(s){return this.warning(`Error deleting table '${t}'`,s),i(s)}r()})}existsTable(e){let t=typeof e=="string"?e:e.tableName;return Promise.resolve(this.database.objectStoreNames.contains(t))}renameTable(e,t){throw new Error("You can't execute this method on a database without object stores.")}addColumn(e,t){throw new Error("You can't execute this method on a database without object stores.")}existsColumn(e,t){return M(this,void 0,void 0,function*(){throw new Error("You can't execute this method on a database without object stores.")})}getRecord(e,t){throw new Error("You can't execute this method on a database without object stores.")}insertRecord(e,t){throw new Error("You can't execute this method on a database without object stores.")}updateRecord(e,t){throw new Error("You can't execute this method on a database without object stores.")}upsertRecord(e,t){throw new Error("You can't execute this method on a database without object stores.")}upsertAllRecords(e,t){throw new Error("You can't execute this method on a database without object stores.")}removeRecord(e,t){throw new Error("You can't execute this method on a database without object stores.")}removeAllRecords(e){throw new Error("You can't execute this method on a database without object stores.")}findRecords(e,t){throw new Error("You can't execute this method on a database without object stores.")}getAllRecords(e){throw new Error("You can't execute this method on a database without object stores.")}debug(e){this.allowTraces&&ee(ub,`${e} on transaction ${this.transactionId}`,Re.Client)}warning(e,t){it(ub,`${e} on transaction ${this.transactionId}${t?`: ${t.message}`:""}`,Re.Client)}};o(WI,"IndexedDBTransactionWithoutObjectStores");var Mm=WI;function Hoe(n){return n.value.charAt(n.value.length-1)==="."?n.value.substr(0,n.value.length-1):n.value.substr(1,n.value.length-2)}o(Hoe,"getEntityNameFromMatch$1");function joe(n,e){let t=Hoe(n),r=e.some(i=>i.toLowerCase()===t.toLowerCase())?t:"";if(r==="")throw new me.DataBaseException("",`'${t}' found in 'Order By' parameter is an invalid Entity`);return n.value.charAt(n.value.length-1)==="."?r+".":r}o(joe,"replaceEntityNameInOrderBy$1");function Woe(n,e){let t=n.trim();if(t!==""){let u=dm(t,"((((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)(( )*,( )*(((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)*",!0);if(u.length!==1||u[0].value!==t)throw new me.DataBaseException("","Invalid syntax in 'Order By' parameter.")}else return[];let r=o(u=>joe(u,e),"meReplaceEntityName"),i=o(u=>u.value.substr(1,u.value.length-2),"meReplaceAttributeName"),s=fm(t,"(\\{\\w+\\}|\\w+\\.)",!1,r);return s=fm(s,"(\\[\\w+\\])",!1,i),s.split(/, ?/).map(u=>{let l=u.trim().split(" "),c=l.length===2?l[1].toLowerCase()==="asc":!0;return{attributeParts:l[0].split("."),isAscending:c}})}o(Woe,"getDynamicSortList");function ri(n){n.stopPropagation(),n.preventDefault()}o(ri,"markEventAsHandled");function yk(n){return M(this,void 0,void 0,function*(){if(n instanceof Yi)for(let e=0;e<n.length;e++){let t=n.getItem(e);yield uS(t)}else n instanceof Ke&&(yield uS(n))})}o(yk,"loadBinaryDataContent");function uS(n){return M(this,void 0,void 0,function*(){let t=n.getAttributes().map(r=>M(this,void 0,void 0,function*(){let i=n[r.attrName];r.dataType===b.Record?yield uS(i):r.dataType===b.BinaryData&&(yield i.loadContent())}));yield Promise.all(t)})}o(uS,"loadItemContent");function Goe(n){return n.charAt(0).toLowerCase()+n.substr(1)+"Attr"}o(Goe,"toRuntimeName");function zoe(n,e){let t=Woe(n,e);return r=>t.map(i=>{let s=r;for(let a=0;a<i.attributeParts.length;a++){let u=Goe(i.attributeParts[a]).toLowerCase(),l=s.getAttributes().filter(c=>c.attrName.toLowerCase()===u);if(l.length===0)throw new me.DataBaseException("",`Invalid attribute in 'Order By' parameter: ${i.attributeParts.join(".")}`);s=s[l[0].attrName]}return{value:s,isAscending:i.isAscending}})}o(zoe,"getDynamicSortsObjGenerator");var qoe=Object.freeze({__proto__:null,getDynamicSortsObjGenerator:zoe,loadBinaryDataContent:yk,markEventAsHandled:ri}),Koe=1e12,GL="IndexedDBTransaction",ii=class ii extends Mm{set onComplete(e){this.transaction.oncomplete=()=>(this.allowTraces&&ee(GL,`Committing transaction ${this.transactionId}`),e())}set onAbort(e){this.transaction.onabort=()=>(it(GL,`Aborting transaction ${this.transactionId}: ${this.transaction.error}`),e(this.transaction.error))}executeQuery(e){return e(this.transaction)}constructor(e,t,r){super(e,r),this.transaction=t,ii.lastTransactionId=(ii.lastTransactionId+1)%Koe,this.transactionId=ii.lastTransactionId+1}renameTable(e,t){return M(this,void 0,void 0,function*(){let r=this.transaction.objectStore(e);r.name=t})}getRecord(e,t){return new Promise((r,i)=>{this.debug(`Getting record with keys '${t}' from table '${e.tableName}'`);let a=this.transaction.objectStore(e.tableName).get(ii.wrapKeyIfNeeded(t,e));a.onsuccess=()=>{this.debug(`Retrieved record with keys '${t}' from table '${e.tableName}' successfully`),r(a.result||null)},a.onerror=u=>{this.warning(`Error retrieving record with keys '${t}' from table '${e.tableName}'`,this.transaction.error),ri(u),i(this.transaction.error)}})}removeRecord(e,t){return new Promise((r,i)=>{this.debug(`Deleting record with key '${t}' from table '${e.tableName}'`);let a=this.transaction.objectStore(e.tableName).delete(ii.wrapKeyIfNeeded(t,e));a.onsuccess=()=>{this.debug(`Deleted record with key '${t}' from table '${e.tableName}' successfully`),r()},a.onerror=u=>{this.warning(`Error deleting record with key '${t}' from table '${e.tableName}'`,a.error),ri(u),i(a.error)}})}removeAllRecords(e){return new Promise((t,r)=>{this.debug(`Deleting all records from table '${e.tableName}'`);let s=this.transaction.objectStore(e.tableName).clear();s.onsuccess=()=>{this.debug(`Deleted all records from table '${e.tableName}' successfully`),t()},s.onerror=a=>{this.warning(`Error deleting all records from table '${e.tableName}'`,s.error),ri(a),r(s.error)}})}insertRecord(e,t){return new Promise((r,i)=>{this.debug(`Inserting record on table '${e.tableName}'`);let s=this.transaction.objectStore(e.tableName).add(t);s.onsuccess=()=>{this.debug(`Inserted record on table '${e.tableName}' successfully`),r(ii.unwrapKeyIfNeeded(s))},s.onerror=a=>{this.warning(`Error inserting record on table '${e.tableName}'`,s.error),ri(a),i(s.error)}})}upsertRecord(e,t){return new Promise((r,i)=>{this.debug(`Adding/Updating record on table '${e.tableName}'`);let s=this.transaction.objectStore(e.tableName).put(t);s.onsuccess=()=>{this.debug(`Added/Updated record on table '${e.tableName}' successfully`),r(ii.unwrapKeyIfNeeded(s))},s.onerror=a=>{this.warning(`Error adding/updating record on table '${e.tableName}'`,s.error),ri(a),i(s.error)}})}upsertAllRecords(e,t){return M(this,void 0,void 0,function*(){this.debug(`Adding/updating ${t==null?void 0:t.length} record(s) on table '${e.tableName}'`);try{for(let r of t)yield this.upsertRecord(e,r);this.debug(`Added/updated ${t==null?void 0:t.length} record(s) on table '${e.tableName}' successfully`)}catch(r){throw this.warning(`Error adding/updating ${t==null?void 0:t.length} record(s) on table '${e.tableName}'`,r),r}})}updateRecord(e,t){return M(this,void 0,void 0,function*(){return new Promise((r,i)=>{let s=eI(e);if((s==null?void 0:s.length)===0){let u=new Error(`Cannot perform an update on table '${e.tableName}' since it has no primary key column`);return this.warning(u.message),i(u)}this.debug(`Checking if record exists on table '${e.tableName}'`);let a=this.transaction.objectStore(e.tableName).get(s==null?void 0:s.map(u=>t[u]));a.onsuccess=()=>{try{if(!a.result){let l=new Error(`Record to update does not exist on table '${e.tableName}'`);return this.warning(l.message),i(l)}this.debug(`Updating record on table '${e.tableName}'`);let u=this.transaction.objectStore(e.tableName).put(t);u.onsuccess=()=>{this.debug(`Updated record on table '${e.tableName}' successfully`),r()},u.onerror=l=>{this.warning(`Error updating record on table '${e.tableName}'`,u.error),ri(l),i(u.error)}}catch(u){this.warning(`Error updating record on table '${e.tableName}'`,u),i(u)}},a.onerror=u=>{this.warning(`Error checking if record exists on table '${e.tableName}'`,a.error),ri(u),i(a.error)}})})}addColumn(e,t){return M(this,void 0,void 0,function*(){yield new Promise((i,s)=>{this.debug(`Adding column '${xm(t)}' on table '${e.tableName}'`);try{this.transaction.objectStore(e.tableName).createIndex(t.columnName,t.columnName),i()}catch(a){this.warning(`Error adding column '${xm(t)}' on table '${e.tableName}'`,a),s(a)}});let r=yield this.getAllRecords(e);for(let i of r)i[t.columnName]=t.serializedDefault,yield this.upsertRecord(e,i)})}existsColumn(e,t){return M(this,void 0,void 0,function*(){return new Promise((r,i)=>{this.debug(`Checking if column '${t}' exists on table '${e}'`);try{let s=this.transaction.objectStoreNames.contains(e)&&this.transaction.objectStore(e).indexNames.contains(t);r(s)}catch(s){this.warning(`Error checking if column '${t}' exists on table '${e}'`,s),i(s)}})})}findRecords(e,t){return new Promise((r,i)=>{this.debug(`Searching for all records on table '${e.tableName}' that match the specified criteria.`);let s=[],a=$s(e).length>0,l=this.transaction.objectStore(e.tableName).openCursor();l.onsuccess=()=>{let c=l.result;if(c){let d=c.value;a||(d=Object.assign(Object.assign({},d),{$KEY:c.primaryKey})),Object.keys(t).reduce((h,g)=>h&&t.hasOwnProperty(g)&&d[QA(g)]===t[g],!0)&&s.push(d),c.continue()}else this.debug(`Search on table '${e.tableName}' found ${s.length} record(s) matching the specified criteria.`),r(s)},l.onerror=c=>{this.warning(`Error searching for records on table '${e.tableName}'`,l.error),ri(c),i(l.error)}})}getAllRecords(e){return new Promise((t,r)=>{this.debug(`Getting all records from table '${e.tableName}'`);let s=this.transaction.objectStore(e.tableName).getAll();s.onsuccess=()=>{this.debug(`Retrieved all the records from table '${e.tableName}'`),t(s.result)},s.onerror=a=>{this.warning(`Error retrieving all the records from table '${e.tableName}'`,s.error),ri(a),r(s.error)}})}static wrapKeyIfNeeded(e,t){return $s(t).length>0?e instanceof Array?e:[e]:e}static unwrapKeyIfNeeded(e){return e.result instanceof Array?e.result[0]:e.result}};o(ii,"IndexedDBTransaction");var $d=ii;$d.lastTransactionId=0;var Yoe="Could not open database",xo="IndexedDBDatabase",Nu=class Nu extends hm{static asSafeDbName(e){return e||""}static executeTransactionPromiseWithRetry(e){return M(this,arguments,void 0,function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;return(function*(){let i=!0,s=0,a;for(;i;){s++;try{a=yield new Promise(t),i=!1}catch(u){let l=u;if(!/the transaction is inactive or finished/i.test(l.message)||s>=r)throw u}}return a})()})}static open(e,t){return e=this.asSafeDbName(e),new Promise((r,i)=>{if(this.cache[e])r(this.cache[e]);else{if(typeof window=="undefined")return i(new me.SystemException("Database is only available in the browser/web view"));if(!("indexedDB"in window))return ee(xo,"This browser doesn't support IndexedDB"),i(new me.SystemException("This browser doesn't support IndexedDB"));if(Vne(navigator.userAgent)&&Bne(window)){let a=`Your app requires native access to a Local Storage database that is not available in your browser while using an iframe.
Please test your app in your mobile device or use Google Chrome`;return alert(a),i(new me.SystemException(a))}ee(xo,`Opening database '${e}' on IndexedDB`);let s=window.indexedDB.open(e);s.onsuccess=()=>{ee(xo,`Database '${e}' opened successfully with version '${s.result.version}'`);let a=s.result;this.cache[e]=new Nu(e,a,t),r(this.cache[e])},s.onerror=()=>{it(xo,`Error opening database '${e}'`),i(new me.OpenDatabaseException(`${Yoe} '${e}'`))}}})}constructor(e,t,r){super(e,"IndexedDB"),this.databaseImplementation=t,this.onNewDatabaseVersionDetected=r,this.setOnVersionChangeEvent()}setOnVersionChangeEvent(){this.databaseImplementation.onversionchange=()=>{this.databaseImplementation.close(),this.onNewDatabaseVersionDetected&&this.onNewDatabaseVersionDetected()}}close(){return ee(xo,`Closing database ${this.name} with version '${this.databaseImplementation.version}'`),this.databaseImplementation.close(),delete Nu.cache[this.name],Promise.resolve()}testConnection(){return Promise.resolve()}executeQuery(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2?arguments[2]:void 0;return this.executeReadTransaction(i=>i.executeQuery(e),t,r)}executeTransaction(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2?arguments[2]:void 0;return this.innerExecuteDMLTransaction(e,t,"readwrite",r)}executeReadTransaction(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2?arguments[2]:void 0;return this.innerExecuteDMLTransaction(e,t,"readonly",r)}innerExecuteDMLTransaction(e,t,r,i){return this.databaseImplementation.objectStoreNames.length===0?this.innerExecuteIDBTransactionWithoutObjectStores(e,t):this.innerExecuteIDBTransaction(e,t,r,i)}innerExecuteIDBTransaction(e,t,r,i){let s=o((a,u)=>M(this,void 0,void 0,function*(){let l=null,c=null,d=i?i.map(g=>g.tableName):[];if(d.length===0)for(let g=0;g<this.databaseImplementation.objectStoreNames.length;g++)d.push(this.databaseImplementation.objectStoreNames.item(g));let f=this.databaseImplementation.transaction(d,r),h=new $d(t,f,this.databaseImplementation);h.onComplete=()=>M(this,void 0,void 0,function*(){yield yk(l),a(l)}),h.onAbort=g=>u(c!=null?c:g);try{l=yield e(h)}catch(g){c=g,f==null||f.abort()}}),"txBody");return Nu.executeTransactionPromiseWithRetry(s)}innerExecuteIDBTransactionWithoutObjectStores(e,t){let r=new Mm(t,this.databaseImplementation);return e(r)}executeUpgradeTransaction(e){return M(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){return new Promise((s,a)=>{let u=null,l=null,c=r.databaseImplementation.version;r.databaseImplementation.close();let d=window.indexedDB.open(r.name,c+1);d.onsuccess=()=>(r.debug(`Database '${r.name}' opened successfully with version '${c+1}'`,i),r.databaseImplementation=d.result,r.setOnVersionChangeEvent(),s(u)),d.onerror=()=>(it(xo,`Error opening '${r.name}' database with version '${c+1}'`),a(l!=null?l:d.error)),d.onupgradeneeded=()=>{r.debug(`Upgrading database '${r.name}' with version '${c+1}'`,i),r.databaseImplementation=d.result;let f=new $d(i,d.transaction,d.result);f.onAbort=h=>l=l!=null?l:h,t(f).then(h=>u=h).catch(h=>{var g;l=h,(g=d.transaction)===null||g===void 0||g.abort()})}})})()})}debug(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)&&ee(xo,e)}};o(Nu,"IndexedDBDatabase");var km=Nu;km.cache={};var cS;(function(n){n[n.No=0]="No",n[n.Yes=1]="Yes",n[n.YesIfEmpty=2]="YesIfEmpty"})(cS||(cS={}));var Sn=cS,lS;(function(n){n[n.Read=0]="Read",n[n.Write=1]="Write",n[n.Upgrade=2]="Upgrade"})(lS||(lS={}));var Wn=lS,Xoe=`\r
`,li=new Map;li.set(re.BINARY_DATA,"BLOB");li.set(re.BOOLEAN,"BOOLEAN");li.set(re.DATE,"DATE");li.set(re.DATE_TIME,"DATETIME");li.set(re.DECIMAL,"REAL");li.set(re.INTEGER,"INTEGER");li.set(re.LONGINTEGER,"BIGINT");li.set(re.TEXT,"TEXT");li.set(re.TIME,"TIME");function zL(n){var e;return(e=li.get(n))!==null&&e!==void 0?e:""}o(zL,"getType");var Joe=1e12,Tu="The transaction is read-only",Dp="The database is not running a version change transaction",cb="WebSQLTransaction",Tn=class Tn{get transactionId(){return this._transactionId}constructor(e,t,r){this.allowTraces=e,this.transaction=t,this.mode=r,Tn.lastTransactionId=(Tn.lastTransactionId+1)%Joe,this._transactionId=Tn.lastTransactionId+1,this.allowTraces&&ee(cb,`Starting transaction ${this.transactionId}`)}executeQuery(e){return e(this.transaction)}getColumnDeclaration(e,t){let r=`${zL(t.type)}`,i;if(t.isPrimaryKey){if(e.idIsAutoNumber===Sn.YesIfEmpty||e.idIsAutoNumber===Sn.Yes)return t.type===re.LONGINTEGER&&(r=`${zL(re.INTEGER)}`),r+=" PRIMARY KEY AUTOINCREMENT NOT NULL",{declaration:`"${t.columnName}" ${r}`};i=`"${t.columnName}"`}if(t.length&&(r+=`(${t.length}${t.decimals?","+t.decimals:""})`),t.serializedDefault!==void 0){let s=t.serializedDefault;typeof s=="string"&&(s=`'${s.replace("'","''")}'`),r+=` DEFAULT ${s}`}return{declaration:`"${t.columnName}" ${r}`,primaryKeyDeclaration:i}}createTable(e){return new Promise((t,r)=>{if(this.debug(`Creating table '${e.tableName}'`),this.mode<Wn.Upgrade){let c=new Error(Dp);return this.warning(`Error creating table '${e.tableName}'`,c),r(c)}let i=o((c,d)=>{this.debug(`Table '${e.tableName}' created with success`),t()},"successCallback"),s=o((c,d)=>{let f=new Error(d.message.toString());return this.warning(`Error creating table '${e.tableName}'`,f),r(f),!1},"errorCallback"),a=e.attributes.map(c=>this.getColumnDeclaration(e,c)),u=a.filter(c=>!!c.primaryKeyDeclaration).map(c=>c.primaryKeyDeclaration),l=a.map(c=>c.declaration);u.length>0&&l.push(`PRIMARY KEY (${u.join(",")})`),this.transaction.executeSql(`CREATE TABLE "${e.tableName}" (${l.join(",")})`,void 0,i,s)})}deleteTableIfExists(e){let t;return typeof e=="string"?t=e:t=e.tableName,new Promise((r,i)=>{if(this.debug(`Deleting table '${t}'`),this.mode<Wn.Upgrade){let u=new Error(Dp);return this.warning(`Error deleting table '${t}'`,u),i(u)}let s=o((u,l)=>{this.debug(`Table '${t}' deleted with success`),r()},"successCallback"),a=o((u,l)=>{let c=new Error(l.message.toString());return this.warning(`Error deleting table '${t}'`,c),i(c),!1},"errorCallback");this.transaction.executeSql(`DROP TABLE IF EXISTS "${t}"`,void 0,s,a)})}renameTable(e,t){return new Promise((r,i)=>M(this,void 0,void 0,function*(){if(this.debug(`Renaming table '${e}'`),this.mode<Wn.Upgrade){let u=new Error(Dp);return this.warning(`Error renaming table '${e}'`,u),i(u)}let s=o((u,l)=>{this.debug(`Table '${e}' renamed to '${t}' with success`),r()},"successCallback"),a=o((u,l)=>{let c=new Error(l.message.toString());return this.warning(`Error renaming table '${e}'`,c),i(c),!1},"errorCallback");this.transaction.executeSql(`ALTER TABLE "${e}" RENAME TO "${t}"`,void 0,s,a)}))}existsTable(e){let t;return typeof e=="string"?t=e:t=e.tableName,new Promise((r,i)=>{this.debug(`Checking if table '${t}' exists`);let s=o((u,l)=>{this.debug(`Table '${t}' checked with success`),r(l.rows.length>0)},"callback"),a=o((u,l)=>{let c=new Error(l.message.toString());return this.warning(`Error checking if table '${t}' exists`,c),i(c),!1},"callbackError");this.transaction.executeSql(`SELECT * FROM sqlite_master WHERE type = 'table' AND UPPER(name) = UPPER("${t}")`,void 0,s,a)})}addColumn(e,t){return new Promise((r,i)=>M(this,void 0,void 0,function*(){let s=xm(t);if(this.debug(`Adding column '${s}' on table '${e.tableName}'`),this.mode<Wn.Upgrade){let c=new Error(Dp);return this.warning(`Error adding column '${s}'`,c),i(c)}let a=o((c,d)=>{this.debug(`Column '${s}' added with success`),r()},"successCallback"),u=o((c,d)=>{let f=new Error(d.message.toString());return this.warning(`Error adding column '${s}'`,f),i(f),!1},"errorCallback"),l=o((c,d)=>{c.executeSql(`UPDATE "${e.tableName}" SET "${t.columnName}" = ?`,[t.serializedDefault],a,u)},"addColumnSuccessCallback");this.transaction.executeSql(`ALTER TABLE "${e.tableName}" ADD ${this.getColumnDeclaration(e,t).declaration}`,void 0,l,u)}))}existsColumn(e,t){return new Promise(r=>{this.debug(`Checking if column '${t}' exists on table '${e}'`);let i=o(()=>{this.debug(`Column '${t}' exists on table '${e}'`),r(!0)},"callback"),s=o(()=>(this.debug(`Column '${t}' does not exist on table '${e}'`),r(!1),!1),"callbackError");this.transaction.executeSql(`SELECT "${e}"."${t}" FROM "${e}" LIMIT 0`,void 0,i,s)})}getRecord(e,t){return new Promise((r,i)=>{this.debug(`Getting record with keys '${t}' from table '${e.tableName}'`);let s=Tn.wrapKeyIfNeeded(t),a=e.attributes.map(g=>`"${g==null?void 0:g.columnName}"`).join(", "),u=`"${e.tableName}"`,l=e.attributes.filter(g=>g==null?void 0:g.isPrimaryKey),c=[...s],d=l.map(g=>`"${g==null?void 0:g.columnName}" = ?`).join(" and "),f=o((g,p)=>{this.debug(`Retrieved record with keys '${t}' from table '${e.tableName}' successfully`);let m=Tn.convertSQLResultSetToDatabaseRecord(e,p);r(m.length>0?m[0]:null)},"onSuccess"),h=o((g,p)=>{let m=new Error(p.message.toString());return this.warning(`Error retrieving record with keys '${t}' from table '${e.tableName}'`,m),i(m),!1},"onError");this.transaction.executeSql(`SELECT ${a} FROM ${u} WHERE ${d}`,c,f,h)})}insertRecord(e,t){return new Promise((r,i)=>{if(this.debug(`Inserting record on table '${e.tableName}'`),this.mode<Wn.Write){let h=new Error(Tu);return this.warning(`Error inserting record on table '${e.tableName}'`,h),i(h)}let s=e.attributes.filter(h=>h==null?void 0:h.isPrimaryKey),a=e.attributes.map(h=>`"${h==null?void 0:h.columnName}"`).join(", "),u=Tn.concatenateMultipleTimes("?",e.attributes.length,", "),l=`"${e.tableName}"`,c=e.attributes.map(h=>t[h==null?void 0:h.columnName]===void 0?null:t[h==null?void 0:h.columnName]),d=o((h,g)=>{var p,m;this.debug(`Inserted record on table '${e.tableName}' successfully`);let w;e.idIsAutoNumber===Sn.No||e.idIsAutoNumber===Sn.YesIfEmpty&&t[(p=s[0])===null||p===void 0?void 0:p.columnName]!==null?w=t[(m=s[0])===null||m===void 0?void 0:m.columnName]:w=g.insertId,r(w)},"onSuccess"),f=o((h,g)=>{let p=new Error(g.message.toString());return this.warning(`Error inserting record on table '${e.tableName}'`,p),i(p),!1},"onError");this.transaction.executeSql(`INSERT INTO ${l} (${a}) VALUES (${u})`,c,d,f)})}updateRecord(e,t){return new Promise((r,i)=>{if(this.debug(`Updating record on table '${e.tableName}'`),this.mode<Wn.Write){let g=new Error(Tu);return this.warning(`Error updating record on table '${e.tableName}'`,g),i(g)}let s=e.attributes.filter(g=>!(g!=null&&g.isPrimaryKey)),a=e.attributes.filter(g=>g==null?void 0:g.isPrimaryKey),u=s.map(g=>`"${g==null?void 0:g.columnName}" = ?`).join(", "),l=a.map(g=>`"${g==null?void 0:g.columnName}" = ?`).join(" and "),c=`"${e.tableName}"`,d=[];s.forEach(g=>d.push(t[g==null?void 0:g.columnName])),a.forEach(g=>d.push(t[g==null?void 0:g.columnName]));let f=o((g,p)=>{p.rowsAffected===0?this.debug(`Record to update does not exist on table '${e.tableName}'`):this.debug(`Updated record on table '${e.tableName}' successfully`),r()},"onSuccess"),h=o((g,p)=>{let m=new Error(p.message.toString());return this.warning(`Error updating record on table '${e.tableName}'`,m),i(m),!1},"onError");this.transaction.executeSql(`UPDATE ${c} SET ${u} WHERE ${l}`,d,f,h)})}upsertRecord(e,t){return new Promise((r,i)=>{if(this.debug(`Adding/updating record on table '${e.tableName}'`),this.mode<Wn.Write){let h=new Error(Tu);return this.warning(`Error adding/updating record on table '${e.tableName}'`,h),i(h)}let s=e.attributes.filter(h=>h==null?void 0:h.isPrimaryKey),a=e.attributes.map(h=>`"${h==null?void 0:h.columnName}"`).join(", "),u=Tn.concatenateMultipleTimes("?",e.attributes.length,", "),l=`"${e.tableName}"`,c=e.attributes.map(h=>t[h==null?void 0:h.columnName]),d=o((h,g)=>{var p,m;this.debug(`Added/updated record on table '${e.tableName}' successfully`);let w;e.idIsAutoNumber===Sn.No||e.idIsAutoNumber===Sn.YesIfEmpty&&t[(p=s[0])===null||p===void 0?void 0:p.columnName]!==null?w=t[(m=s[0])===null||m===void 0?void 0:m.columnName]:w=g.insertId,r(w)},"onSuccess"),f=o((h,g)=>{let p=new Error(g.message.toString());return this.warning(`Error adding/updating record on table '${e.tableName}'`,p),i(p),!1},"onError");this.transaction.executeSql(`INSERT OR REPLACE INTO ${l} (${a}) VALUES (${u})`,c,d,f)})}upsertAllRecords(e,t){return M(this,void 0,void 0,function*(){if(this.debug(`Adding/updating ${t==null?void 0:t.length} record(s) on table '${e.tableName}'`),this.mode<Wn.Write){let r=new Error(Tu);throw this.warning(`Error adding/updating records on table '${e.tableName}'`,r),r}try{e.attributes.some(i=>(i==null?void 0:i.type)===re.BINARY_DATA)?yield this.innerUpsertAllSingle(e,t):yield this.innerUpsertAllBulk(e,t),this.debug(`Added/updated ${t==null?void 0:t.length} record(s) on table '${e.tableName}' successfully`)}catch(r){throw this.warning(`Error adding/updating ${t==null?void 0:t.length} record(s) on table '${e.tableName}'`,r),r}})}innerUpsertAllSingle(e,t){return M(this,void 0,void 0,function*(){this.debug(`Adding/updating ${t==null?void 0:t.length} record(s) on table '${e.tableName}' one by one`);for(let r of t)yield this.upsertRecord(e,r)})}innerUpsertAllBulk(e,t){return M(this,void 0,void 0,function*(){let r=Math.floor(Tn.MaxQueryParameters/e.attributes.length);if(r===0)return this.innerUpsertAllSingle(e,t);let i=[],s=Math.ceil(t.length/r);this.debug(`Adding/updating ${t==null?void 0:t.length} record(s) on table '${e.tableName}' in ${s} chunk(s) of ${r} record(s) each`);for(let u=0;u<s;u++){let l=[],c=0;for(;c<r;){let f=u*r+c;if(f===t.length)break;let h=t[f];e.attributes.forEach(g=>l.push(h[g==null?void 0:g.columnName])),c++}let d=this.createUpsertBulkQuery(e,c);i.push({query:d,argList:l})}let a=0;for(let u of i)this.debug(`Adding/updating chunk ${++a} of ${s} on table '${e.tableName}'`),yield this.wrapExecuteSqlOnPromise(u,e)})}wrapExecuteSqlOnPromise(e,t){return new Promise((r,i)=>{let s=o((u,l)=>{this.debug(`Added/Updated bulk of records on table '${t.tableName}' successfully`),r()},"onSuccess"),a=o((u,l)=>{let c=new Error(l.message.toString());return this.warning(`Error adding/updating bulk of records on table '${t.tableName}'`,c),i(c),!1},"onError");this.transaction.executeSql(e.query,e.argList,s,a)})}createUpsertBulkQuery(e,t){let r=e.attributes.map(u=>`"${u==null?void 0:u.columnName}"`).join(", "),i=`"${e.tableName}"`,s=`(${Tn.concatenateMultipleTimes("?",e.attributes.length,", ")})`,a=Tn.concatenateMultipleTimes(s,t,", ");return`INSERT OR REPLACE INTO ${i} (${r}) VALUES ${a}`}removeRecord(e,t){return new Promise((r,i)=>{if(this.debug(`Deleting record with key '${t}' from table '${e.tableName}'`),this.mode<Wn.Write){let h=new Error(Tu);return this.warning(`Error deleting record from table '${e.tableName}'`,h),i(h)}let s=Tn.wrapKeyIfNeeded(t),a=`"${e.tableName}"`,u=e.attributes.filter(h=>h==null?void 0:h.isPrimaryKey),l=[...s],c=u.map(h=>`"${h==null?void 0:h.columnName}" = ?`).join(" AND "),d=o((h,g)=>{this.debug(`Deleted record with key '${t}' from table '${e.tableName}' successfully`),r()},"onSuccess"),f=o((h,g)=>{let p=new Error(g.message.toString());return this.warning(`Error deleting record with key '${t}' from table '${e.tableName}'`,p),i(p),!1},"onError");this.transaction.executeSql(`DELETE FROM ${a} WHERE ${c===""?"ROWID = ?":c}`,l,d,f)})}removeAllRecords(e){return new Promise((t,r)=>{if(this.debug(`Deleting all records from table '${e.tableName}'`),this.mode<Wn.Write){let u=new Error(Tu);return this.warning(`Error deleting all records from table '${e.tableName}'`,u),r(u)}let i=`"${e.tableName}"`,s=o((u,l)=>{this.debug(`Deleted all records from table '${e.tableName}' successfully`),t()},"onSuccess"),a=o((u,l)=>{let c=new Error(l.message.toString());return this.warning(`Error deleting all records from table '${e.tableName}'`,c),r(c),!1},"onError");this.transaction.executeSql(`DELETE FROM ${i}`,void 0,s,a)})}findRecords(e,t){return new Promise((r,i)=>{this.debug(`Searching for all records on table '${e.tableName}' that match the specified criteria`);let a=($s(e).length>0?"":'"rowid" AS "ROWID", ')+e.attributes.map(h=>`"${h==null?void 0:h.columnName}"`).join(", "),u=`"${e.tableName}"`,l="",c=[];for(let h in t)if(t.hasOwnProperty(h)){let g=l.length>0?" AND ":"";l+=`${g}"${QA(h)}" = ?`,c.push(t[h])}let d=o((h,g)=>{this.debug(`Search on table '${e.tableName}' found ${g.rows.length} record(s) matching the specified criteria`);let p=Tn.convertSQLResultSetToDatabaseRecord(e,g);r(p)},"onSuccess"),f=o((h,g)=>{let p=new Error(g.message.toString());return this.warning(`Error searching for records on table '${e.tableName}'${Xoe}${p}`,p),i(p),!1},"onError");this.transaction.executeSql(`SELECT ${a} FROM ${u} WHERE ${l}`,c,d,f)})}getAllRecords(e){return new Promise((t,r)=>{this.debug(`Getting all records on table '${e.tableName}'`);let s=($s(e).length>0?"":'"rowid" AS "ROWID", ')+e.attributes.map(c=>`"${c==null?void 0:c.columnName}"`).join(", "),a=`"${e.tableName}"`,u=o((c,d)=>{this.debug(`Retrieved all records from table '${e.tableName}' successfully`);let f=Tn.convertSQLResultSetToDatabaseRecord(e,d);t(f)},"onSuccess"),l=o((c,d)=>{let f=new Error(d.message.toString());return this.warning(`Error retrieving all records from table '${e.tableName}'`,f),r(f),!1},"onError");this.transaction.executeSql(`SELECT ${s} FROM ${a}`,void 0,u,l)})}debug(e){this.allowTraces&&ee(cb,`${e} on transaction ${this.transactionId}`)}warning(e,t){it(cb,`${e} on transaction ${this.transactionId}${t?`: ${t.message}`:""}`,Re.Client)}static wrapKeyIfNeeded(e){return e instanceof Array?e:[e]}static convertSQLResultSetToDatabaseRecord(e,t){let r=$s(e).length>0,i=[];if(t.rows.length>0)for(let s=0;s<t.rows.length;s++){let a=t.rows.item(s),u={};r||(u.$KEY=a.ROWID),e.attributes.forEach(l=>{u[l==null?void 0:l.columnName]=a[l==null?void 0:l.columnName]}),i.push(u)}return i}static concatenateMultipleTimes(e,t,r){return Array.apply(null,new Array(t)).map(()=>e).join(`${r}`)}};o(Tn,"WebSQLTransaction");var Bd=Tn;Bd.MaxQueryParameters=500;Bd.lastTransactionId=0;var id="Could not open database",Zoe="Failed to execute canary query (probably due to zombie transaction)",Uo="WebSQLDatabase",xn=class xn extends hm{static open(e){return M(this,void 0,void 0,function*(){return this.cache[e]||(this.cache[e]=yield xn.innerOpen(e)),this.cache[e]})}static innerOpen(e){return M(this,void 0,void 0,function*(){if(typeof window=="undefined")throw new me.SystemException("Database is only available in the browser/web view");if(In())return xn.openPluginDatabase(e);if(xn.isWebSQLSupported())return xn.openWebSQLDatabase(e);xn.throwDatabaseRequiredError()})}static openPluginDatabase(e){return M(this,void 0,void 0,function*(){yield br();let t=window;if(t.sqlitePlugin)return ee(xn,`Opening database '${e}'`),new Promise((r,i)=>{try{t.sqlitePlugin.openDatabase({name:e,location:"default"},s=>{s?(ee(xn,`Database '${e}' opened successfully`),r(new xn(e,s))):(it(Uo,`Error opening database '${e}'`),i(new me.OpenDatabaseException(`${id} '${e}'`)))},s=>{it(Uo,`Error opening database '${e}' ${s.message}`),i(new me.OpenDatabaseException(`${id} '${e}': ${s.message.toString()}`))})}catch(s){i(new me.OpenDatabaseException(`${id} '${e}': ${s.message.toString()}`))}});throw new me.OpenDatabaseException("No database driver available")})}static openWebSQLDatabase(e){let t=window,r;try{ee(xn,`Opening database '${e}'`),r=t.openDatabase(e,"1.0",e,5*1024*1024)}catch(i){throw new me.OpenDatabaseException(`${id} '${e}': ${i.message.toString()}`)}if(r)return ee(xn,`Database '${e}' opened successfully`),new xn(e,r);throw it(Uo,`Error opening database '${e}'`),new me.OpenDatabaseException(`${id} '${e}'`)}static isWebSQLSupported(){return!!window.openDatabase}static throwDatabaseRequiredError(){let r=`Your app requires native access to a Local Storage database that is not available in your browser.

Please test your app in your mobile device`+(!!window.chrome?"":", or use Google Chrome web browser")+".";throw alert(r),new me.SystemException(r)}constructor(e,t){super(e,"WebSQL"),this.databaseImplementation=t}testConnection(){return M(this,void 0,void 0,function*(){let t=0;nr(Uo,"Starting to test on database connections. Performing #5 test queries.",Re.Internal),yield Promise.all(Array.apply(null,new Array(5)).map(()=>new Promise(r=>M(this,void 0,void 0,function*(){try{yield this.executeTransaction(i=>i.executeQuery(s=>new Promise((a,u)=>{s.executeSql("SELECT 1",void 0,()=>a(),(l,c)=>(u(new Error(c.message.toString())),!1))})))}catch(i){t++,De("WebSQLDatabase",Zoe,"OS-CLRT-60407",i)}finally{r()}})))),nr(Uo,`Finished tests on database connections. #${5-t} out of #5 successfull queries.`,Re.Internal)})}close(){return this.databaseImplementation=null,delete xn.cache[this.name],Promise.resolve()}executeQuery(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return this.executeReadTransaction(r=>r.executeQuery(e),t)}executeTransaction(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2?arguments[2]:void 0;return this.innerExecuteTransaction(e,Wn.Write,t,r)}executeReadTransaction(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2?arguments[2]:void 0;return this.innerExecuteTransaction(e,Wn.Read,t,r)}executeUpgradeTransaction(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return this.innerExecuteTransaction(e,Wn.Upgrade,t)}innerExecuteTransaction(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;return new Promise((s,a)=>{let u,l,c;this.innerExecuteTransactionInMode(t===Wn.Read,d=>M(this,void 0,void 0,function*(){u=new Bd(r,d,t);try{l=yield e(u)}catch(f){c=f,d.executeSql("ABORT_TRANSACTION",void 0,()=>{},()=>!0)}}),d=>{let f=c!=null?c:new Error(d.message.toString());r&&it(Uo,`Aborting transaction ${u==null?void 0:u.transactionId}: ${f}`,Re.Client),a(f)},()=>{this.debug(`Committing transaction ${u==null?void 0:u.transactionId}`,r),s(l)})})}innerExecuteTransactionInMode(e,t,r,i){var s,a;e?(s=this.databaseImplementation)===null||s===void 0||s.readTransaction(t,r,i):(a=this.databaseImplementation)===null||a===void 0||a.transaction(t,r,i)}debug(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)&&ee(Uo,e)}};o(xn,"WebSQLDatabase");var Fm=xn;Fm.cache={};var Vv=typeof __PERFORMANCE!="undefined";function yd(n){Vv&&__PERFORMANCE.start(n)}o(yd,"start");function $u(n){Vv&&__PERFORMANCE.end(n)}o($u,"end");function Qoe(){if(Vv)return __PERFORMANCE.dump()}o(Qoe,"dump");function eae(){if(Vv)return __PERFORMANCE.clear()}o(eae,"clear");var tae=Object.freeze({__proto__:null,clear:eae,dump:Qoe,end:$u,start:yd}),GI=class GI{setErrorHandler(e){this.errorHandler=e}loadModule(e,t,r){return M(this,void 0,void 0,function*(){var i;try{let s=e.map(u=>u()),a=yield Promise.all(s);t==null||t(...a)}catch(s){let a=new me.Exception(s.message,s.stack,"OS-CLRT-ESM-40000");(i=r!=null?r:this.errorHandler)===null||i===void 0||i(a)}})}};o(GI,"ESMRequireManager");var dS=GI,tI=new dS;function _k(n){tI.setErrorHandler(n)}o(_k,"setErrorHandler");function Hv(n,e,t){tI.loadModule(n,e,t)}o(Hv,"loadModule");function wk(n){return M(this,void 0,void 0,function*(){return new Promise((e,t)=>{tI.loadModule(n,function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e(i)},t)})})}o(wk,"loadModuleAsync");var nae=Object.freeze({__proto__:null,loadModule:Hv,loadModuleAsync:wk,setErrorHandler:_k}),tc;(function(n){n[n.TransitionStart=0]="TransitionStart",n[n.TransitionEnd=1]="TransitionEnd",n[n.NavigationStart=2]="NavigationStart"})(tc||(tc={}));var fS;(function(n){n[n.Success=0]="Success",n[n.Failure=1]="Failure"})(fS||(fS={}));var rae=0,lb=(()=>{let n=[],e=Object.keys(tc).length/2;for(let t=0;t<e;t++)n.push({});return n})(),Vd;(function(n){function e(){return"_"+rae++}o(e,"getNewId");function t(u,l){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=e();return lb[u][d]={listenOnce:c,callback:l},{type:u,id:d}}o(t,"listen"),n.listen=t;function r(u,l){return t(u,l,!0)}o(r,"listenOnce"),n.listenOnce=r;function i(u){return u&&s(u.type,u.id)}o(i,"unregister"),n.unregister=i;function s(u,l){return delete lb[u][l]}o(s,"innerUnregister");function a(u){let l,c=lb[u.type];for(let d in c){let f=c[d];f.listenOnce&&s(u.type,d);let h=f.callback(u.args);h!==void 0&&(l=h)}return l}o(a,"dispatch"),n.dispatch=a})(Vd||(Vd={}));var iae=Object.freeze({__proto__:null,get EventDispatcher(){return Vd},get EventType(){return tc},get TransitionEndResult(){return fS}}),zI=class zI extends Error{constructor(e){let{message:t,errorCode:r,category:i}=e;super(t),this.errorCode=r,this.category=i}};o(zI,"ClientRuntimeError");var hS=zI,qL=1e4,Ek="moduleservices",sae=`${Ek}/moduleinfo`,oae=`${Ek}/moduleversioninfo`,qI=class qI{constructor(){let{getBasePath:e=o(()=>Dt(),"getBasePath$1"),getMethod:t=Uv,prefetchedVersion:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.getBasePath=e!=null?e:()=>Dt(),this.getMethod=t,this.prefetchedVersion=r}init(){return M(this,void 0,void 0,function*(){try{this.prefetchedVersion=yield this.getLatestVersion()}catch(e){ee("ManifestLoader",`Failed to prefetch latest version. ${e}`)}})}getVersionTokenParameter(e){return e?`?${e}`:""}getPrefetchedVersion(){return this.prefetchedVersion}getLatestManifest(e,t){return this.getManifest(e,t)}getCachedManifest(e){return this.getManifest("cached",e)}getManifest(e){return M(this,arguments,void 0,function(t){var r=this;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pe.resolve(X.UnauthenticatedHttpClient);return(function*(){var s;let a=`${sae}${r.getVersionTokenParameter(t)}`;return(s=yield r.getMethod({url:a,timeout:qL,baseURL:r.getBasePath(),httpClient:i}))!==null&&s!==void 0?s:{}})()})}getLatestVersion(){return M(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date().getTime().toString(),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pe.resolve(X.HttpClient);return(function*(){var i;let s=`${oae}?${t}`;return(i=yield e.getMethod({url:s,timeout:qL,baseURL:e.getBasePath(),httpClient:r}))!==null&&i!==void 0?i:{}})()})}};o(qI,"ManifestLoader");var gS=qI;function aae(){return M(this,void 0,void 0,function*(){try{return yield br(),Iv(window)?window.OutSystemsNative.Prebundle:null}catch(n){return null}})}o(aae,"getPrebundlePlugin");function uae(){return M(this,void 0,void 0,function*(){let n=yield aae();return n?new Promise((e,t)=>{n.getManifest(e,t)}):null})}o(uae,"getManifest");var db="ResourceCache",KI=class KI{constructor(){this.isCaching=!1,this.errorMessages=[],this.onFinishListeners=[],this.onErrorListeners=[],this.onProgressListeners=[]}onFinish(){this.isCaching=!1,this.onFinishListeners.forEach(e=>e()),this.onFinishListeners=[],this.onErrorListeners=[],this.onProgressListeners=[]}onError(e){this.errorMessages.push(e),this.onErrorListeners.forEach(t=>t(e))}onProgress(e,t){this.onProgressListeners.forEach(r=>r(e,t))}listen(e,t,r){this.errorMessages.length>0&&t&&t(this.errorMessages.join(`
`)),!this.isCaching&&e&&e(),this.isCaching&&(e&&this.onFinishListeners.push(e),t&&this.onErrorListeners.push(t),r&&this.onProgressListeners.push(r))}start(e){return new Promise((t,r)=>{if(!this.isCaching)try{this.isCaching=!0,this.errorMessages=[],this.innerStart(e)}catch(s){this.onError(s.message),r(s.message);return}let i={finished:!1};this.listen(()=>{i.finished||(i.finished=!0,t())},s=>{i.finished||(i.finished=!0,r(s))},null)})}switch(e){this.innerSwitch(e)}};o(KI,"AbstractCacheHandler");var Hd=KI,bd=class bd extends Hd{constructor(){super(),this.isNativeReady=!1,this.isCacheAvailable=!1,br().then(()=>{if(this.isNativeReady=!0,this.isCacheAvailable=typeof OSCache!="undefined",!this.isCacheAvailable){console.error(db,bd.OSCacheNotFoundMessage);return}OSCache.addEventListener("onfinish",e=>this.onFinish()),OSCache.addEventListener("onerror",e=>this.onError(e.message)),OSCache.addEventListener("onprogress",e=>this.onProgress(e.loaded,e.total))},e=>{console.error(db,"OSCache was not initialized because Cordova was not loaded.",e)})}checkOSCacheAndDeferCall(e,t){if(this.isNativeReady){if(!this.isCacheAvailable)return e&&this.onError(bd.OSCacheNotFoundMessage),!1}else return br().then(t),!1;return!0}getCacheName(){return"Native Cache"}innerStart(e){if(!this.checkOSCacheAndDeferCall(!0,()=>this.innerStart(e)))return;let t=Dt(),r=`/${Gn()}/`,i=[];for(let s of Object.getOwnPropertyNames(e.urlVersions))i.push(Av(Sv(s,r,t),e.urlVersions[s]));OSCache.startCaching(e.versionToken,i,e.urlMappings,e.urlMappingsNoCache)}innerSwitch(e){if(this.checkOSCacheAndDeferCall(!1,()=>this.innerSwitch(e)))try{OSCache.switchToVersion(e)}catch(t){console.error(db,t)}}};o(bd,"NativeCacheHandler");var $m=bd;$m.OSCacheNotFoundMessage="OSCache not found (is a native plugin missing?)";var Sd=class Sd extends Hd{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Uv;super(),this.requested=0,this.resourceQueue=[],this.count=0,this.total=0,this.getMethod=e}getCacheName(){return"Preloader"}innerStart(e){if(this.isOngoing()||(this.count=this.requested=this.total=0,this.resources=e.urlVersions,!this.resources)||(this.resourceQueue=Object.getOwnPropertyNames(this.resources),this.total=this.resourceQueue.length,this.resourceQueue.length<=0))return;let t="",r=`/${Gn()}/`;for(let i=0;i<Sd.DefaultWindowSize;++i)this.prefetchNext(r,t)}innerSwitch(e){}isOngoing(){return this.requested>0||this.resourceQueue.length>0}request(e,t,r){return M(this,void 0,void 0,function*(){try{yield this.getMethod({url:e,timeout:Sd.DefaultResourceTimeout,responseType:"none"})}catch(i){this.onError&&this.onError(`Failed to load resource '${e}'.`)}this.onProgress&&this.onProgress(++this.count,this.total),this.requested--,this.resourceQueue.length===0&&this.requested===0?this.onFinish&&this.onFinish():this.resourceQueue.length>0&&this.prefetchNext(t,r)})}prefetchNext(e,t){let r=this.resourceQueue.pop();if(!r)throw new Error("No resource to fetch next.");let i=Av(Sv(r,e,t),this.resources[r]);this.request(i,e,t),this.requested++}};o(Sd,"PreloaderCacheHandler");var jd=Sd;jd.DefaultWindowSize=2;jd.DefaultResourceTimeout=2e4;var YI=class YI extends Hd{getCacheName(){return"Dummy"}innerStart(e){this.onFinish()}innerSwitch(e){}};o(YI,"DummyCacheHandler");var pS=YI;function cae(){return typeof document=="undefined"?new pS:In()?new $m:new jd}o(cae,"getResourcesCacheHandler");var zp=cae(),sn="VersionsManager",lae="index.html",Tk="__",KL;(function(n){n[n.Generic=0]="Generic",n[n.Resources=1]="Resources",n[n.DataModel=2]="DataModel"})(KL||(KL={}));var YL;(function(n){n[n.Idle=0]="Idle",n[n.Upgrading=1]="Upgrading",n[n.UpgradeSuccess=2]="UpgradeSuccess",n[n.UpgradeFailed=3]="UpgradeFailed"})(YL||(YL={}));var bu={applicationInfo:new Er(on.Persistent,"ApplicationInfo"),upgradeStatus:new Er(on.Session,"UpgradeStatus",0)},dae=o((n,e)=>{let t=n.replace(/(.*)(\?[^?]+)$/,"$1").replace(/(.*)(\.[^.]+)$/,"$1");return e&&(t=t.replace(/(.*)(__[^_]+)$/,"$1")),t},"removeFileHashAndExtension"),fae=o(n=>{let e=n.indexOf("?"),t=n.substring(0,e>=0?e:void 0);return t.substring(t.lastIndexOf("."))},"getFileExtension"),bk=o((n,e)=>n.startsWith(`/${e}/`)?n:`/${e}/${n}`,"getModuleBasedUrl"),mS=o((n,e,t)=>t?t[bk(n,e)]:void 0,"getResourceVersionTokenFromManifest"),Sk=o(function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=dae(n,t),i=qo(r),s=qo(fae(n)),a=qo(Tk),u=new RegExp(`${i}${a}.*${s}$`),l=e?Object.keys(e).find(c=>u.exec(c)):void 0;return l?{matchedUrlVersion:l,relativeUrlWithoutHashAndExtension:r}:t?{}:Sk(n,e,!0)},"matchUrl"),hae=o((n,e,t)=>{let{matchedUrlVersion:r,relativeUrlWithoutHashAndExtension:i}=Sk(n,e);if(t&&r&&i){let s=r.lastIndexOf(Tk),a=r.substring(s);return`${i}${a}`}else return n},"findResourceUrl"),gae=o(function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Gn,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Dt,s=r(),a=i(),u=hae(n,e,t),l=mS(u,s,e);if(l){let c=Av(bk(u,s),l!=null?l:""),d=`/${s}/`;return Sv(c,d,a)}return u},"getVersionedUrl"),XL=o(function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jo();var t,r;return(r=(t=e.document.querySelector('meta[name="indexVersionToken"]'))===null||t===void 0?void 0:t.getAttribute("content"))!==null&&r!==void 0?r:n==null?void 0:n.indexVersionToken},"getVersionFromGlobalContext"),Du=class Du{constructor(){let{manifestLoader:e=new gS}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.checkedCachedInfoConsistency=!1,this.manifestLoader=e}get cachedAppInfo(){let e=bu.applicationInfo.get();if(e&&!this.checkedCachedInfoConsistency){try{Du.validateApplicationInfo(e)}catch(t){e=void 0,bu.applicationInfo.remove()}this.checkedCachedInfoConsistency=!0}return e}set cachedAppInfo(e){bu.applicationInfo.set(e)}get currentAppInfo(){var e,t;return(t=(e=this.fetchedApplicationInfo)===null||e===void 0?void 0:e.manifest)!==null&&t!==void 0?t:this.cachedAppInfo}get upgradeStatus(){return bu.upgradeStatus.get()}set upgradeStatus(e){bu.upgradeStatus.set(e)}initializeManifestLoader(){return this.manifestLoader.init()}initialize(){return M(this,void 0,void 0,function*(){if(ee(sn,"Initializing VersionsManager"),this.initialUpgradeStatus=this.upgradeStatus,!Gn())return Promise.reject(Error("Home module not defined!"));this.enableBackgroundCheckForNewVersions(),this.fetchedApplicationInfo=yield this.fetchApplicationManifest()})}upgradeVersion(e,t){this.onVersionReady=t.onVersionReady||(()=>{}),this.onUpgradeFinished=t.onUpgradeFinished||(a=>{}),this.onNewVersionDetected=!this.isUpgradeDisabled&&t.onNewVersionDetected||(a=>Promise.resolve());let r=t.onAppInfoReady||(a=>{}),i=this.fetchedApplicationInfo.manifest,s=this.fetchedApplicationInfo.isFromPrebundle;if(r(i),this.isNewVersion(i.manifest,s)){if(!this.isUpgradeDisabled&&this.usingStaleIndex(i))return NU(!0),nr(sn,"Reloading application - index.html was changed in the server",Re.Internal),!1;this.upgrade(i,e)}else this.initDataModel(e);return!0}initDataModel(e){ee(sn,"Initializing data model"),e.then(t=>this.upgradeDataModel(t).then(()=>this.switchDataModel(t)).then(()=>{this.onVersionReady()})).then(()=>this.setUpgradeStatus(0)).catch(t=>this.handleInitError(t))}cacheResourcesInBackground(e){return ee(sn,"Caching resources in the background..."),this.fetchApplicationManifest(!1).then(t=>{let{manifest:r,isFromPrebundle:i}=t,s=this.usingStaleIndex(r);if(e&&e(s),SU(s),this.isNewVersion(r.manifest,i))return this.upgradeResources(r)}).catch(t=>it(sn,`Error caching resources for new version in the background: ${t}`))}getResourceVersionToken(e,t){if(this.currentAppInfo)return mS(e,t,this.currentAppInfo.manifest.urlVersions)}isNewVersion(e,t){let r=e.versionToken,i=this.getLastApplicationVersionToken();return r!==i}getLastApplicationVersionToken(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;var t;if(e&&(!((t=this.fetchedApplicationInfo)===null||t===void 0)&&t.manifest))return this.fetchedApplicationInfo.manifest.manifest.versionToken;let r=this.cachedAppInfo;return r?r.manifest.versionToken:""}getVersionToken(e,t){return this.getResourceVersionToken(e,t)}getVersionedUrl(e){var t,r;return gae(e,(t=this.currentAppInfo)===null||t===void 0?void 0:t.manifest.urlVersions,(r=this.currentAppInfo)===null||r===void 0?void 0:r.manifest.cdnUrlVersioning)}static getJSONParseErrorMessage(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return"Error parsing manifest JSON "+(e?`, missing or invalid field: ${e}.`:".")}static validateApplicationInfo(e){if(!e)throw Error(this.getJSONParseErrorMessage());if(!e.manifest)throw Error(this.getJSONParseErrorMessage("manifest"));let t=e.manifest;if(!t.versionToken||typeof t.versionToken!="string")throw Error(this.getJSONParseErrorMessage("manifest.versionToken"));if(!t.urlVersions||typeof t.urlVersions!="object")throw Error(this.getJSONParseErrorMessage("manifest.urlVersions"));if(!t.urlMappings||typeof t.urlMappings!="object")throw Error(this.getJSONParseErrorMessage("manifest.urlMappings"));if(!t.urlMappingsNoCache||typeof t.urlMappingsNoCache!="object")throw Error(this.getJSONParseErrorMessage("manifest.urlMappingsNoCache"));if(!e.data)throw Error(this.getJSONParseErrorMessage("data"));let r=e.data;if(!r.modules||typeof r.modules!="object")throw Error(this.getJSONParseErrorMessage("data.modules"))}getLatestVersionFromServer(){return M(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(function*(){let r=yield t&&e.manifestLoader.getPrefetchedVersion()||e.manifestLoader.getLatestVersion();return r.versionToken||De(sn,"Error retrieving version token from module version info.","OS-CLRT-60301"),r})()})}checkForNewVersion(){this.isUpgradeDisabled||this.isUpgradingVersion||!bu.applicationInfo.isDefined()||this.getLatestVersionFromServer(!1).then(e=>{this.getLastApplicationVersionToken()!==e.versionToken&&this.onNewVersionDetected(!1)},e=>{it(sn,`Error checking for new version: ${e}`)})}upgrade(e,t){return M(this,void 0,void 0,function*(){ee(sn,"New application version detected, starting upgrade..."),this.setUpgradeStatus(1);let r=this.supportsResourceCache().then(s=>s?this.upgradeResources(e).catch(a=>this.handleUpgradeError(a,1,Promise.resolve(void 0))):Promise.resolve()),i=t.then(s=>this.upgradeDataModel(s)).catch(s=>this.handleUpgradeError(s,2,r));yield Promise.all([r,i]).then(()=>{this.upgradeStatus===1&&this.commitNewVersion(e,t).then(s=>{s&&this.onVersionReady()})}).catch(s=>this.handleUpgradeError(s))})}supportsResourceCache(){return M(this,void 0,void 0,function*(){var e;if(Jd()){let t=!!(!((e=Ev())===null||e===void 0)&&e.splashScreenName);return ee(sn,`Web app - Resource pre-caching is ${t?"enabled":"disabled"}`),t}else{let t=yield this.serviceWorkerIsAvailable(),r=In()||!t;return ee(sn,`Mobile app - Pre-caching resources with ${r?"Resource Cache":"Service Worker"}`),r}})}serviceWorkerIsAvailable(){return M(this,void 0,void 0,function*(){try{return"serviceWorker"in navigator?(yield navigator.serviceWorker.getRegistrations())!==null:!1}catch(e){return!1}})}commitNewVersion(e,t){return t.then(r=>this.switchDataModel(r)).then(()=>this.switchResourcesVersion(e.manifest.versionToken)).then(()=>{let r=!this.cachedAppInfo;return this.cachedAppInfo=e,this.setUpgradeStatus(r?0:2),!0})}setManifestLoader(e){this.manifestLoader=e}upgradeResources(e){return yd("VersionsManager upgradeResources"),lm(()=>zp.start(e.manifest),()=>$u("VersionsManager upgradeResources"))}upgradeDataModel(e){return e?(yd("VersionsManager upgradeDataModel"),ee(sn,`Initializing data model on ${e.engineName} database.`),lm(()=>M(this,void 0,void 0,function*(){let t=yield this.getAllEntityModules(),r=pe.resolve(X.EntityService);for(let i of t)r.registerInitializer(i.getEntityInfos());yield e.initialize()}),()=>$u("VersionsManager upgradeDataModel"))):Promise.resolve()}getAllEntityModules(){let e=Ux();return e?(ee(sn,"Fetching entities module."),new Promise((t,r)=>{Hv([e],i=>t([i]),r)})):Promise.resolve([])}switchResourcesVersion(e){zp.switch(e)}switchDataModel(e){return e?(ee(sn,"Finishing initialization of data model on database."),e.initializerCleanup()):Promise.resolve()}handleInitError(e){let t=this.isUpgradeDisabled?"Upgrade failed and rollback isn't possible at this time":"Unable to load the data model";De(sn,t,"OS-CLRT-60303",e,Re.External),Us(e)}handleUpgradeError(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Promise.resolve(void 0);return jr(e,me.OpenDatabaseException)?(De(sn,"Upgrade failed - unable to open the database.","OS-CLRT-60302",e),Us(e),Promise.resolve(void 0)):!bA()&&this.initialUpgradeStatus!==3?(De(sn,"Upgrade failed - rolling back to previous application version.","OS-CLRT-60302",e,Re.External),this.rollBackApplicationVersion(t,r)):this.initialUpgradeStatus===3?(Us(e),Promise.resolve(void 0)):(it(sn,"Upgrade failed - ignoring error due to concurrent navigation."),this.upgradeStatus!==3&&this.setUpgradeStatus(0),Promise.resolve(void 0))}get isUpgradingVersion(){return this.upgradeStatus===1}setUpgradeStatus(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.upgradeStatus=e,ee(sn,"Upgrade status changed to: "+e),e===2)return this.onUpgradeFinished(!0);if(e===3)return this.onUpgradeFinished(!1,t)}rollBackApplicationVersion(e,t){return this.loadCachedManifest().then(r=>{let{manifest:i}=r;if(this.setUpgradeStatus(3,e),e!==1)return t.then(()=>zp.start(i.manifest))}).then(()=>{SA(!1)}).catch(r=>{Us(r)})}get isUpgradeDisabled(){return this.upgradeStatus===3}isRunningCachedIndex(){let e=XL(Jo().OSManifestLoader),t=this.getIndexVersion(this.cachedAppInfo);return!!t&&e===t}usingStaleIndex(e){if(OU())return!1;let t=XL(Jo().OSManifestLoader)||this.getIndexVersion(this.cachedAppInfo),r=this.getIndexVersion(e);return t!==r}getIndexVersion(e){if(!e)return"";let t=mS(lae,Gn(),e.manifest.urlVersions);return t?t.substr(1):""}loadCachedManifest(){return M(this,void 0,void 0,function*(){return{manifest:yield this.innerLoadCachedManifest(),isFromPrebundle:!1}})}innerLoadCachedManifest(){return M(this,void 0,void 0,function*(){if(yield this.ensureCachedManifest(),this.cachedAppInfo)return this.cachedAppInfo;{let e=yield this.manifestLoader.getCachedManifest();return Du.validateApplicationInfo(e),e}})}innerLoadPrebundledManifest(){return uae()}ensureCachedManifest(){if(In()||this.cachedAppInfo)return Promise.resolve(void 0);{this.setUpgradeStatus(0);let e=new hS({message:"No cached manifest found. It's not possible to rollback to a previous version.",errorCode:"OS-CLRT-60304"});return Promise.reject(e)}}getLatestManifestFromServer(e){return this.manifestLoader.getLatestManifest(e).then(t=>(Du.validateApplicationInfo(t),{manifest:t,isFromPrebundle:!1}))}fetchApplicationManifest(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return yd("VersionsManager fetchApplicationManifest"),this.isUpgradeDisabled?this.loadCachedManifest():this.getLatestVersionFromServer(e).then(t=>this.isNewVersion(t,!1)?this.getLatestManifestFromServer(t.versionToken):this.loadCachedManifest()).catch(()=>this.loadCachedManifest()).then(t=>($u("VersionsManager fetchApplicationManifest"),t))}enableBackgroundCheckForNewVersions(){let e=!1;Vd.listen(tc.NavigationStart,()=>e=!0),Vd.listen(tc.TransitionEnd,()=>{e=!1,setTimeout(()=>{e||this.checkForNewVersion()},1e3)})}};o(Du,"VersionsManager");var vS=Du,ci=new vS,kr="Application",pae="upgrade-required",mae="upgrade-success",vae="upgrade-error",qp={hasRenderedSplashInSession:new Er(on.Session,"HasRenderedSplashInSession",!1),pendingUpgradeFeedback:new Er(on.Session,"PendingUpgradeFeedback")},Kp=o((n,e,t)=>M(void 0,void 0,void 0,function*(){var r;if(t===void 0&&(t=(r=pe.resolve(X.Auth))===null||r===void 0?void 0:r.getInstance()),!!t)return yield t.getValidAccessToken(n,e)}),"getToken"),ju,Ak=(ju=class{constructor(){this.showingSplashScreen=!1,this.isApplicationReady=!1}setApplicationDefinition(e){Px(e),Mx(e.applicationKey),In()&&Ere({version:e.appVersion})}triggerApplicationReadyEvent(){return M(this,void 0,void 0,function*(){let e=Bx();if(e){let t=Gn();ee(kr,`Calling application ready event handler for ${t}`);try{let[r]=yield wk([e]);xre({applicationName:t,moduleController:r,syncConfiguration:pA()}),yield r.default.fireApplicationReady()}catch(r){this.handleError(r)}}})}initializeDatabase(){return M(this,void 0,void 0,function*(){ee(kr,"Initializing application database.");let e,t=Jd(),r=In();if(t)e=Promise.resolve(void 0);else{let i;r?(ee(kr,"Initializing WebSQL database service."),i=Fm.open(Pb())):(ee(kr,"Initializing IndexDB database service."),i=km.open(Pb(),()=>this.onNewVersionDetected(!0))),e=i.then(s=>M(this,void 0,void 0,function*(){return ee(kr,"Initializing entity service"),pe.resolve(X.EntityService).setDatabase(s),s}))}return e})}onDatabaseReady(e){e&&(pe.resolve(X.EntityService).setReady(),ee(kr,"Database initialized successfully"))}onNewVersionDetected(e){ee(kr,"New version detected, currentViewHasChanged = "+e);let t=!0,r=o(i=>{t=i},"appInfoCallback");if(e){this.disableDocument();let i=o(()=>Zi(Vs(),t,!0),"onClick"),s=o(a=>a.getApplicationUpgradeRequiredMessage(this.canLoseDataInUpgrade()),"getMessage");this.showFeedbackMessage(s,2,pae,i).then(()=>cM(!1))}return ci.cacheResourcesInBackground(r)}onAppInfoReady(e){try{yd("Application onAppInfoReady"),this.updateServerRequestTimeoutOverrideInSeconds(e),this.updateApplicationInfo(e),this.updateClientInfo()}finally{$u("Application onAppInfoReady")}}updateServerRequestTimeoutOverrideInSeconds(e){var t;jx((t=e.data)===null||t===void 0?void 0:t.serverRequestTimeoutOverrideInSeconds)}updateApplicationInfo(e){var t;Nx((t=e.data)===null||t===void 0?void 0:t.modules)}updateClientInfo(){br().then(()=>Tne()).catch(e=>it(kr,`Client info update failed: ${e}`))}shouldRenderSplashScreen(){let e=Ev();return e!=null&&e.splashScreenName&&e.splashScreenName.length>0?!qp.hasRenderedSplashInSession.get():!1}disableDocument(){let e=document.createElement("div");e.classList.add("background-backdrop"),document.body.classList.add("disable-scroll"),document.body.appendChild(e)}canLoseDataInUpgrade(){return document.getElementsByTagName("form").length>0}onUpgradeFinished(e,t){e?ee(kr,"Upgrade finished successfully"):it(kr,`Upgrade failed with reason: ${t}`);let r={success:e,failReason:t};e&&!this.isShowingSplashScreen?this.showUpgradeFeedback(r):qp.pendingUpgradeFeedback.set(r)}waitForAppReady(){return this.isApplicationReady?Promise.resolve(void 0):(this.appReadyPromise||(this.appReadyPromise=new Promise(e=>{this.onReady=()=>e()})),this.appReadyPromise)}onApplicationReady(){ee(kr,"Application ready"),$u("Application ready"),cA(),this.isApplicationReady=!0,this.onReady&&(this.onReady(),this.onReady=null)}showUpgradeFeedback(e){let t,r,i;if(e.success)r=0,t=o(s=>s.getApplicationUpgradeCompleteMessage(),"getMessage"),i=mae;else switch(r=2,i=vae,e.failReason){case 1:t=o(s=>s.getApplicationUpgradeFailedOnResourcesMessage(),"getMessage");break;case 2:t=o(s=>s.getApplicationUpgradeFailedOnDataModelMessage(),"getMessage");break;default:t=o(s=>s.getApplicationUpgradeFailedUnknownMessage(),"getMessage");break}this.showFeedbackMessage(t,r,i)}showFeedbackMessage(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",i=arguments.length>3?arguments[3]:void 0;return new Promise(s=>{let a=Vx();Hv([a],u=>{let l=e(u);l&&xA(l,t,!0,r,!0,i),s()})})}get isReady(){return this.isApplicationReady}get isShowingSplashScreen(){return this.showingSplashScreen}set isShowingSplashScreen(e){e&&qp.hasRenderedSplashInSession.set(!0),this.showingSplashScreen=e}handleError(e,t){Us(e,t)}exit(){return In()?mU():!0}registerDefaultErrorHandler(e){return pe.register(X.GlobalExceptionHandler,e)}},o(ju,"Application"),ju),pc=new Ak;Ku.setUrlVersionProvider(ci.getVersionedUrl.bind(ci));var yae=Object.freeze({__proto__:null,Application:Ak,ApplicationStorage:qp,default:pc,getToken:Kp}),yS;(function(n){n.LogLevel="LogLevel",n.EnvironmentKey="EnvironmentKey",n.TenantID="TenantID",n.LoggingTagID="LoggingTagID",n.LoggerSchedulerTimeInterval="LoggerSchedulerTimeInterval",n.EnableOpenTelemetryTraces="EnableOpenTelemetryTraces",n.EnableSpanAggregation="EnableSpanAggregation",n.HealthCheckInterval="HealthCheckInterval"})(yS||(yS={}));var Ik={HealthCheckInterval:"1800",LogLevel:"Information"},mc="cognito",JL="DEV_";function _ae(n){return Object.entries(n).reduce((e,t)=>{let[r,i]=t;return r.startsWith(JL)&&typeof i=="string"&&(e[r.replace(JL,"")]=i),e},{})}o(_ae,"loadSettingsFromStorage");function fb(n,e){let t=_ae(e);return Object.assign(Object.assign({},n),t)}o(fb,"mergeWithStoredSettings");var Yp,Mo="SettingsManager",wae="-clientsettings",Eae="/moduleservices/clientsettingsinfo",ZL="",QL=0,ex=!1,Ck={Debug:Je.Debug,Information:Je.Info,Warning:Je.Warning,Error:Je.Error},XI=class XI{constructor(){let{getBasePath:e,httpClient:t=pe.resolve(X.UnauthenticatedHttpClient),getAppKey:r=zs,initialSettings:i=Ik,settingsHash:s="",overrideStorage:a=sessionStorage,cacheName:u=`${r()}${wae}`,cacheStorage:l=localStorage,onSettingsUpdated:c}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Yp.set(this,void 0),this.getBasePath=e!=null?e:()=>Dt(),this.httpClient=t,this.settingsValue=fb(i,a),this.settingsHash=s,this.overrideStorage=a,this.cacheName=u,this.cacheStorage=l,lt(this,Yp,c,"f")}update(e){return M(this,void 0,void 0,function*(){var t,r;try{if(!e||this.settingsHash!==e){let i=yield this.httpClient.get({url:Eae,baseURL:(t=this.getBasePath)===null||t===void 0?void 0:t.call(this)});if(i){let{clientSettingsHash:s,clientSettings:a}=i;this.settingsHash=s;let u=fb(a,this.overrideStorage);this.settingsValue=Object.assign(Object.assign({},this.settingsValue),u),this.cacheSettings(a),(r=ie(this,Yp,"f"))===null||r===void 0||r.call(this,this)}else this.fetchCachedSettings()}}catch(i){De(Mo,`Error retrieving settings from endpoint: ${i.message}`,"OS-CLRT-61001"),this.fetchCachedSettings()}})}settingExists(e){return Object.keys(this.settingsValue).includes(e)}cacheSettings(e){this.cacheStorage.setItem(this.cacheName,JSON.stringify(e))}fetchCachedSettings(){try{let e=this.cacheStorage.getItem(this.cacheName);if(e){ee(Mo,"Loading client settings from cache");let t=JSON.parse(e),r=fb(t,this.overrideStorage);this.settingsValue=Object.assign(Object.assign({},this.settingsValue),r)}else it(Mo,"No settings stored in cache, keeping previous values")}catch(e){De(Mo,"Error retrieving settings from cache, keeping previous values","OS-CLRT-61000",e)}}readString(e){var t;return this.settingExists(e)?(t=this.settingsValue[e])!==null&&t!==void 0?t:ZL:(ee(Mo,`Value for setting ${e} was not found.`),ZL)}readNumber(e){return this.settingExists(e)?Number(this.settingsValue[e])||QL:(ee(Mo,`Value for setting ${e} was not found.`),QL)}readBool(e){var t;return this.settingExists(e)?((t=this.settingsValue[e])!==null&&t!==void 0?t:`${ex}`).toLowerCase()==="true":(ee(Mo,`Value for setting ${e} was not found.`),ex)}readLogLevel(){let e=this.settingsValue.LogLevel,t=e?Ck[e]:void 0;return t!=null?t:Je.Info}};o(XI,"SettingsManager");var _S=XI;Yp=new WeakMap;var Tae=o((n,e,t)=>({"enduser.id":n,"outsystems.client.runtime.core.version":o(()=>{var r;return(r=e({packageKey:"client-runtime-core"}))!==null&&r!==void 0?r:""},"outsystems.client.runtime.core.version"),"outsystems.client.runtime.widgets.version":o(()=>{var r;return(r=e({packageKey:"client-runtime-widgets"}))!==null&&r!==void 0?r:""},"outsystems.client.runtime.widgets.version"),"outsystems.client.runtime.reactview.version":o(()=>{var r;return(r=e({packageKey:"client-runtime-view-framework-react"}))!==null&&r!==void 0?r:""},"outsystems.client.runtime.reactview.version"),"outsystems.compiler.version":o(()=>{var r;return(r=t())!==null&&r!==void 0?r:""},"outsystems.compiler.version")}),"getCommonAttributes"),Rk=o(function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return M(void 0,[...e],void 0,function(){let{isRunningOnNative:r=In(),basePath:i=Dt,frontendBuildWorkerVersion:s=Gx,getUserId:a=Ko,getLibVersion:u=yx,getHttpScheme:l=dU,getUserAgent:c=Hne,getCurrentUrl:d=lU,getNativeLogger:f=vU,getDatabaseSuffix:h=zs,isOnlineMethod:g=UA,httpClient:p=pe.resolve(X.LoggerHttpClient)}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){try{let m=Object.assign(Object.assign({},Tae(a,u,s)),{"http.scheme":l,"http.url":d,"http.user_agent":c}),w=new gg({databaseNameSuffix:h(),isOnline:g,baseLogAttributes:m,baseSpanAttributes:m,staticSpanAttributes:["http.scheme","http.user_agent","outsystems.client.runtime.core.version","outsystems.client.runtime.widgets.version","outsystems.client.runtime.reactview.version","outsystems.compiler.version"]});pe.register(X.InstrumentationFactory,()=>w),yield w.init();let E=Ck[Ik.LogLevel];if(r){let _=yield f();_&&w.useNativeLoggerTransport({plugin:_,logTypeBaseline:E})}else w.useOpenTelemetryLoggerTransport({resourceAttributes:{},logTypeBaseline:E,collectorBaseUrl:i(),tagId:"",httpClient:p});w.useConsoleLoggerTransport(E)}catch(m){console.error("Error while initializing the logger.",m)}})()})},"registerInstrumentationFactory"),bae=o(n=>M(void 0,void 0,void 0,function*(){var e,{version:t,getCurrentScreenName:r=o(()=>"","getCurrentScreenName"),applicationName:i=wv,applicationKey:s=zs,clientRuntimeVersion:a=zx,basePath:u=Dt,getAppVersionMethod:l=qx,isWebApplication:c=Jd,usePwaServiceWorkerTracer:d=or.isEnabled(Rr.ServiceWorkerTraces),serviceWorkerContainer:f=(e=navigator.serviceWorker)===null||e===void 0?void 0:e.controller,settingsManager:h=pe.resolve(X.SettingsManager),instrumentationFactory:g=pe.resolve(X.InstrumentationFactory),httpClient:p=pe.resolve(X.LoggerHttpClient)}=n;try{g||(yield Rk(),g=pe.resolve(X.InstrumentationFactory)),g.setAggregateSpansStatus(h==null?void 0:h.readBool("EnableSpanAggregation")),g.setLogLevel(h==null?void 0:h.readLogLevel());let m=h==null?void 0:h.readString("LoggingTagID");g.setTagId(m),g.getTracer().addBaseSpanAttributes({"outsystems.runtime.screen":r});let w={"service.name":"ClientRuntime","service.version":a(),"outsystems.app.name":i(),"outsystems.app.versiontoken":t,"outsystems.app.key":s(),"outsystems.env.key":h==null?void 0:h.readString("EnvironmentKey"),"outsystems.tenant.key":h==null?void 0:h.readString("TenantID"),"outsystems.app.version":l()};g.setResourceAttributes(w),c()&&(h!=null&&h.readBool("EnableOpenTelemetryTraces"))&&(d&&f?g.useServiceWorkerTracerTransport({resourceAttributes:w,collectorBaseUrl:u(),tagId:m,enabled:!0,aggregateSpans:h==null?void 0:h.readBool("EnableSpanAggregation")}):g.useOpenTelemetryTracerTransport({resourceAttributes:w,collectorBaseUrl:u(),tagId:m,enabled:!0,httpClient:p}));let E=h==null?void 0:h.readNumber("LoggerSchedulerTimeInterval");E>0&&Ok(E,g)}catch(m){console.error("Error while updating the logger configurations.",m)}}),"updateInstrumentationFactory"),Ok=o(function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pe.resolve(X.InstrumentationFactory);e==null||e.setSchedulerTimerInterval(n)},"setSchedulerTimerInterval"),wS,ko,_d,Pk,JI=class JI{constructor(){wS.add(this),ko.set(this,0),_d.set(this,new Map)}create(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Kf;return lt(this,ko,ie(this,ko,"f")+1,"f"),ie(this,_d,"f").set(ie(this,ko,"f"),e),{ref:ie(this,ko,"f"),abortRequest:e}}abortPendingRequests(e){for(let[t,r]of ie(this,_d,"f"))t<e&&(r.abort(),ie(this,wS,"m",Pk).call(this,t))}shouldAbort(e){return e!==ie(this,ko,"f")}};o(JI,"LinearTracker");var ES=JI;ko=new WeakMap,_d=new WeakMap,wS=new WeakSet,Pk=o(function(e){ie(this,_d,"f").delete(e)},"_LinearTracker_deleteCommand");var TS,Xp,Nk;function Sae(n,e,t){let{responseHandler:r}=t,i=o(function(){n.shouldAbort(e)||r==null||r(...arguments)},"watcher");t.responseHandler=i}o(Sae,"watchResponseHandler");function Aae(n,e,t,r){return i=>M(this,void 0,void 0,function*(){Sae(n,e,i);let s=Object.assign(Object.assign({},i),{abortCommand:r});try{if(n.shouldAbort(e))return{completed:!1};n.abortPendingRequests(e);let a=yield t(s);return n.shouldAbort(e)?{completed:!1}:{completed:!0,data:a}}catch(a){if(n.shouldAbort(e))return{completed:!1};throw a}})}o(Aae,"createPostAction");var ZI=class ZI{constructor(){TS.add(this),Xp.set(this,new Map)}create(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:BA,r=arguments.length>2?arguments[2]:void 0,i=ie(this,TS,"m",Nk).call(this,e),{ref:s,abortRequest:a}=i.create(r);return{ref:s,post:Aae(i,s,t,a)}}};o(ZI,"LinearRequest");var bS=ZI;Xp=new WeakMap,TS=new WeakSet,Nk=o(function(e){let t=ie(this,Xp,"f").get(e);return t||(t=new ES,ie(this,Xp,"f").set(e,t)),t},"_LinearRequest_getTracker");var Dk=o(()=>{let n=Ar.activeScreen;if(n){let e=Lx(kx());if(e)return dA(e,n.viewName)}return null},"getCurrentScreenDefinition"),Iae=o(()=>{var n;let e=Dk();return(n=e==null?void 0:e.screenName.split(".").pop())!==null&&n!==void 0?n:""},"getCurrentScreenName");function tx(n,e){nr("Public",`'${n}' is deprecated and will be removed on the next version. Consider using '${e}' instead.`)}o(tx,"emitDeprecatedWarning");function Cae(){return Ar.activeScreen?Ar.activeScreen.modelContext:{viewName:"",navigatedFromHistory:!1,viewWasRestoredFromCache:!1}}o(Cae,"getCurrentModelContext");var Rae=YA,Go;(function(n){n[n.Info=0]="Info",n[n.Success=1]="Success",n[n.Warning=2]="Warning",n[n.Error=3]="Error"})(Go||(Go={}));var Bm;(function(n){function e(i){switch(i){case Go.Info:return 0;case Go.Success:return 1;case Go.Warning:return 2;case Go.Error:return 3;default:throw new Error("Don't know how to convert "+i)}}o(e,"convertFeedbackMessageTypeToInternalEnum");function t(i,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,c=arguments.length>5?arguments[5]:void 0;return xA(i,e(s),a,u,l,c)}o(t,"showFeedbackMessage$1"),n.showFeedbackMessage=t;function r(){return lM()}o(r,"closeFeedbackMessage$1"),n.closeFeedbackMessage=r})(Bm||(Bm={}));var Wu,Lk=(Wu=class{constructor(e){this._model=e}setWidgetAsInvalid(e,t){var r;let i=(r=this._model)===null||r===void 0?void 0:r.widgets.get(e);i.validAttr=!1,i.validationMessageAttr=t}setWidgetAsValid(e){var t;let r=(t=this._model)===null||t===void 0?void 0:t.widgets.get(e);r.validAttr=!0,r.validationMessageAttr=""}isWidgetValid(e){var t;return((t=this._model)===null||t===void 0?void 0:t.widgets.get(e)).validAttr===!0}},o(Wu,"Validation"),Wu),Vm;(function(n){function e(){return wA()}o(e,"whenReady"),n.whenReady=e})(Vm||(Vm={}));var nc;(function(n){let e="ApplicationLifecycle";function t(){return ci.isUpgradingVersion}o(t,"isUpgradingVersion"),n.isUpgradingVersion=t;function r(i){ee(e,"Registering listeners for the application load process."),i&&(i.onLoadComplete&&pc.waitForAppReady().then(()=>{var s;return(s=i.onLoadComplete)===null||s===void 0?void 0:s.call(i)}),i.onUpgradeProgress&&zp.listen(null,null,(s,a)=>{var u;return(u=i.onUpgradeProgress)===null||u===void 0?void 0:u.call(i,s,a)}))}o(r,"listen"),n.listen=r})(nc||(nc={}));var QI=class QI{constructor(e){this._context=e}navigateTo(e,t,r){Pv(e,this.getTransitionObject(t,Xd),this._context,!1,r)}navigateBack(e){MU(this.getTransitionObject(e),this._context,!1)}navigateForward(e){kU(this.getTransitionObject(e),this._context,!1)}navigatedFromHistory(){return Cae().navigatedFromHistory}registerBackNavigationHandler(e){return DU(e)}unregisterBackNavigationHandler(e){LU(e)}registerNavigationHandler(e){return xU(e)}getTransitionObject(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return _v(e,t)}};o(QI,"Navigation");var Hm=QI,jm;(function(n){function e(r,i){nr(r,i,Re.Client)}o(e,"log"),n.log=e;function t(r,i,s){De(r,i,void 0,s,Re.Client)}o(t,"error$1"),n.error=t})(jm||(jm={}));var fv=class fv{constructor(e){this._model=e}static get ActiveScreenCssClass(){return"active-screen"}getCurrentScreenRootElement(){return document.querySelector("."+fv.ActiveScreenCssClass)}render(){return new Promise(e=>{requestAnimationFrame(()=>{setTimeout(e,1)})})}wasCurrentViewRestoredFromCache(){return this._model?this._model.context.viewWasRestoredFromCache:!1}registerDeviceClassGetter(e){return uA(X.DeviceHelperClassProvider,()=>e)}};o(fv,"View");var Wm=fv,eC=class eC{static getCurrentContext(){let e=Dk();return{applicationKey:zs()||"",applicationName:wv()||"",screenKey:e?e.screenKey:"",screenName:e?e.screenName:"",isReady:pc.isReady}}};o(eC,"ApplicationContext");var Gm=eC,hv=class hv{static get Instance(){return hv}static get isUpgradingVersion(){return tx("ApplicationLoad.isUpgradingVersion","ApplicationLifecycle.isUpgradingVersion()"),nc.isUpgradingVersion()}static listen(e){tx("ApplicationLoad.listen()","ApplicationLifecycle.listen()"),nc.listen(e)}};o(hv,"ApplicationLoad");var zm=hv,Oae=Object.freeze({__proto__:null,ApplicationContext:Gm,get ApplicationLifecycle(){return nc},ApplicationLoad:zm,BuiltinFunctions:Rae,get Device(){return Vm},get FeedbackMessage(){return Bm},get FeedbackMessageType(){return Go},get Logger(){return jm},Navigation:Hm,Validation:Lk,View:Wm}),tC=class tC{constructor(e,t){this._model=e,this._navigationContext=t}get BuiltinFunctions(){return YA}get Validation(){return this._validation||(this._validation=new Lk(this._model)),this._validation}get FeedbackMessage(){return Bm}get Device(){return Vm}get ApplicationLifecycle(){return nc}get ApplicationContext(){return Gm}get ApplicationLoad(){return zm}get Navigation(){return this._navigation||(this._navigation=new Hm(this._navigationContext)),this._navigation}get Logger(){return jm}get View(){return this._view||(this._view=new Wm(this._model)),this._view}};o(tC,"PublicApiHelper");var rc=tC,Bu;(function(n){n[n.Block=0]="Block",n[n.IteratorItem=1]="IteratorItem",n[n.None=2]="None"})(Bu||(Bu={}));var Lp="-",nC=class nC{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bu.None,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;switch(this._ownerService=e,r){case Bu.Block:this._namespace="b";break;case Bu.IteratorItem:this._namespace="l";break;default:this._namespace="";break}if(this._namespace+=t,e){let s=i?i+Lp:"";this._namespace=e.namespace+this._namespace+Lp+s}else this._namespace&&(this._namespace=this._namespace+Lp)}getId(e){return e?this.namespace+e:null}static nameFromId(e){return e.substring(e.lastIndexOf(Lp)+1)}get namespace(){return this._namespace}get ownerService(){return this._ownerService}};o(nC,"WidgetIdService");var ic=nC,Pae=Object.freeze({__proto__:null,get NamespaceKind(){return Bu},WidgetIdService:ic}),sd="",rC=class rC{constructor(e,t){this.model=e,this.messagesProvider=t,this.updatingValidations=!1,this.disposed=!1,e.hasValidationWidgets&&(this.widgets={},this.widgetChildren={},this.oldModelWidgets=this.model.widgets,this.model.subscribeWrites(()=>{!this.updatingValidations&&this.oldModelWidgets!==this.model.widgets&&this.recalculateAggregatorsState(sd),this.oldModelWidgets=this.model.widgets},!0))}getWidgetRecord(e){return this.model.widgets.get(e)}updateWidgetValidationsProperties(e,t,r){let i=this.updatingValidations;this.updatingValidations=!0;try{if(e.isWebBlockInstance){let s=e;s.valid=t}else{let s=this.getWidgetRecord(e.getId());s.validAttr!==t&&(s.validAttr=t),r!==void 0&&s.validationMessageAttr!==r&&(s.validationMessageAttr=r)}}finally{this.updatingValidations=i}}validateWidget(e){let t=!0;for(let i in this.widgetChildren[e])this.validateWidget(i)!==!0&&(t=!1);let r=this.widgets[e];if(r){let i;r.isValidationAggregator?i=new Km(t):r.validate&&(i=r.validate()),i&&(this.updateWidgetValidationsProperties(r,i.valid,i.validationMessage),i.valid||(t=!1))}return t}recalculateAggregatorsState(e){let t=!0;for(let i in this.widgetChildren[e])this.recalculateAggregatorsState(i)||(t=!1);let r=this.widgets[e];if(r){if(r.isWebBlockInstance)return r.valid;if(r.isValidationAggregator)this.updateWidgetValidationsProperties(r,t);else return this.getWidgetRecord(e).validAttr}return t}register(e){if(this.model.hasValidationWidgets&&e){let t=e.getId();if(t){this.widgets[t]=e;let r=e.validationParentId||sd,i=this.widgetChildren[r];if(i||(i={},this.widgetChildren[r]=i),i[t]=1,!e.isWebBlockInstance){let s=e,a=this.model.widgets.create(t);a.generationNode=s.generationNode,this.model.widgets.add(a)}}}}unregister(e){if(!e||this.disposed||!this.model.hasValidationWidgets)return;let t=this.widgets[e],r=(t?t.validationParentId:null)||sd;delete this.widgets[e],delete this.widgetChildren[r][e],t&&this.model.widgets.remove(e)}isRegistered(e){return!!this.widgets&&this.widgets[e]!==void 0}validate(e){if(!this.model.hasValidationWidgets)return!0;let t=this.validateWidget(e||sd);return e&&(t=this.recalculateAggregatorsState(sd)),this.model.flush(),t}getMandatoryValueMessage(){return this.messagesProvider.getMandatoryValueMessage()}getInvalidValueMessage(e){return this.messagesProvider.getInvalidValueMessage(e)}getNameById(e){return ic.nameFromId(e)}getWidgetChildren(){return this.widgetChildren}dispose(){this.disposed=!0}};o(rC,"ValidationService");var qm=rC,iC=class iC{constructor(e,t){this.valid=e,this.validationMessage=t}get valid(){return this._valid}set valid(e){this._valid=e!=null?e:!0}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e||""}};o(iC,"ValidationResult");var Km=iC,Nae=Object.freeze({__proto__:null,ValidationResult:Km,ValidationService:qm}),Ps,Jp,xk,Uk,Mk,kk,Fk,$k,Ym=o(()=>{},"NOOP"),Dae="*",Lae="Controller",Ad=class Ad{constructor(e,t){this.controllerClass=e,this.messagesProvider=t}create(e,t){return new this.controllerClass(e,this.messagesProvider,t)}static executeWithNavigationCallbacks(e,t,r){return TU(t),lm(e,o(()=>{t.dispose(r),bU()},"dispose"))}initialize(e,t,r,i,s,a){return M(this,void 0,void 0,function*(){let u=Ar.activeScreen,l=u?u.callContext():r.callContext();try{JU()&&(yield new Promise(g=>{new rc(null,null).ApplicationLifecycle.listen({onLoadComplete:g})}),yield RA()),this.controllerClass.checkPermissions()}catch(g){let p={permissionsOk:!1};return Ad.executeWithNavigationCallbacks(()=>r.handleError(g,l),i,l).then(()=>p,m=>p)}let c=t.create(e),d=this.create(c,new ic(null));d.setAsActiveScreen();let f=Ad.executeWithNavigationCallbacks(()=>d.fireInitialize({rootSpan:a}),s,d.callContext()),h={permissionsOk:!0,controller:d,model:c};return f.then(()=>h,g=>jr(g,me.UnhandledOrIgnoredErrorInEventException)&&g.handleErrorResult===Pd?{permissionsOk:!0}:h)})}get activeScreenController(){return Ar.activeScreen}};o(Ad,"ControllerFactory");var SS=Ad,Id=class Id{constructor(){this._iterationContext=new Xm,this._id=++Id.currentId}get id(){return this._id}get viewName(){return this._viewName}get timeout(){return this._timeout}get iterationContext(){return this._iterationContext}set iterationContext(e){this._iterationContext=e}withViewName(e){return this._viewName!==e?this.innerClone({_viewName:{value:e}}):this}withTimeout(e){return this._timeout!==e?this.innerClone({_timeout:{value:e}}):this}clone(){let e=this.innerClone();return e._id=++Id.currentId,e}innerClone(e){let t=Object.create(this,e!=null?e:{});return t.iterationContext=this.iterationContext.clone(),t}get isOutOfContext(){return!!Ar.activeScreen&&this.viewName!==Ar.activeScreen.viewName}};o(Id,"CallContext");var Wd=Id;Wd.currentId=0;var gv=class gv{getCurrentRowNumber(e){let t=this.getIterator(e);return t?t.currentRowNumber:0}setCurrentRowNumber(e,t){let r=this.getIteratorForSet(e);r.currentRowNumber=t}isBeingIterated(e){let t=this.getIterator(e);return t?t.isBeingIterated:!1}registerIterationStart(e){let t=this.getIteratorForSet(e);if(t.isBeingIterated)throw new Error("List is already being iterated in this context");t.currentRowNumber=e.length-1,t.isBeingIterated=!0}registerIterationEnd(e){let t=this.getIteratorForSet(e);if(!t.isBeingIterated)throw new Error("List was redefined while being iterated");t.isBeingIterated=!1}getIterator(e){return this.iterators?this.iterators.get(e.modelId):null}getIteratorForSet(e){this.iterators||(this.iterators=new Map);let t=this.getIterator(e);return t||(t={currentRowNumber:0,isBeingIterated:!1},this.iterators.set(e.modelId,t)),t}clone(){let e=new gv;return this.iterators&&(e.iterators=xae(this.iterators,t=>Object.create(t))),e}};o(gv,"IterationContext");var Xm=gv;function xae(n,e){let t=new Map;return n.forEach((r,i)=>{let s=e(r);t.set(i,s)}),t}o(xae,"cloneMap");var nx=new xd,Uae=new Xi("Data","dataOut"),Mae=new Xi("List","listOut",[{name:"Count",attrName:"countOut",mandatory:!0,dataType:b.LongInteger,defaultValue:o(()=>Tt.defaultValue,"defaultValue")}]),hb="BaseController",Cd=class Cd{constructor(e){if(this.isExecutingJSNode=!1,this.localeChangeHandler=t=>{var r;let i=pe.resolve(X.TranslationsService),s=pe.resolve(X.LocaleService);i&&((r=t.localeFamily)!==null&&r!==void 0?r:[t.localeCode]).forEach(u=>{var l,c;this.translationResources[u]?(ee(hb,`Adding translations for ${u} locale.`),i.add((l=this.translationResources[u].translations)!==null&&l!==void 0?l:{}),s.setCurrentLocaleRTL((c=this.translationResources[u].isRTL)!==null&&c!==void 0?c:!1)):ee(hb,`No translations found for ${u} locale.`)})},this.translationResources=e!=null?e:this.translationResources,this.translationResources){let t=pe.resolve(X.LocaleService);if(t){let r=t.getCurrentLocale(),i=t.getCurrentLocaleFamily();this.localeChangeHandler({localeCode:r,localeFamily:i}),ee(hb,"Subscribing handler for locale service."),t.subscribe(this.localeChangeHandler)}}}get publicApiHelper(){return this._publicApiHelper||(this._publicApiHelper=this.createPublicApiHelper()),this._publicApiHelper}getDefaultTimeout(){throw new Error("Controllers must implement getDefaultTimeout")}createPublicApiHelper(){return new rc(null,this.callContext())}get default(){return this}get controller(){return this}callContext(){return arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Wd}safeExecuteJSNode(e,t,r,i,s,a,u){let l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,c=o(h=>{let g=`Check the JavaScript node '${t}' of the action '${r}'.`;throw h=h||new Error(g),(h instanceof me.NumberOverflowException||h instanceof me.InvalidJavascriptType)&&(h.message=h.message+" "+g),h},"handleException"),d=this.isExecutingJSNode,f=(i?[i]:[]).concat(a,u,this.publicApiHelper);e=e.bind(null,...f);try{if(this.isExecutingJSNode=!0,l)return e().then(()=>s(i)).catch(c);try{return e(),s(i)}catch(h){c(h)}}finally{this.isExecutingJSNode=d}}safeExecuteAsyncJSNode(e,t,r,i,s,a,u){return this.safeExecuteJSNode(e,t,r,i,s,a,u,!0)}executeActionInsideJSNode(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ym,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ym,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",a=o(u=>{if(!DA(u,t))throw u},"handleException");try{if(s)try{this.ensureControllerAlive(s)}catch(l){throw De("Controller",`Invalid call of action '${s}'`,"OS-CLRT-60801",l,Re.External),l}let u=e(t);return u instanceof Promise?u.then(l=>(i(),r(l))).catch(l=>{i(),a(l)}):r(u)}catch(u){a(u)}finally{this.isExecutingJSNode||i()}}getInitialPayloadObject(e,t){return{versionInfo:{moduleVersion:ci.getLastApplicationVersionToken(!0),apiVersion:t},viewName:e.viewName?e.viewName:Dae}}getEffectiveTimeoutForServerCall(e){let t=Hx();return(e!=null?e:0)||(t!=null?t:0)||this.getDefaultTimeout()}callServerAction(e,t,r,i,s,a,u){let l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;return this.innerCallServerAction(e,t,r,i,s,a,u,l)}innerCallServerAction(e,t,r,i,s,a,u){let l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,c=this.getEffectiveTimeoutForServerCall(s.timeout),d=this.getInitialPayloadObject(s,r);d.inputParameters=i;let f="The timeout of "+c+"s was reached while executing this server action.",h=o(()=>{throw it(e,f),new me.CommunicationException(f,e)},"onTimeout");return BA({url:t,payload:d,timeout:c,timeoutHandler:o(()=>Promise.resolve(h()),"timeoutHandler"),responseHandler:Cd.createPostResponseHandler(u),headers:a,useLocaleInfo:l,actionOrAggregateName:e}).then(g=>g||{}).catch(g=>{throw g.extraStack=e,g})}static checkPermissions(){throw new Error("Screen Controllers must implement checkPermissions")}static handlePostResponse(e){let t=pe.resolve(X.ClientVariablesService);t&&t.checkSessionExpires();let r=pe.resolve(X.SettingsManager);if(r&&e.clientSettingsHash!==void 0&&e.clientSettingsHash!==null){r.update(e.clientSettingsHash),Ax(r.readLogLevel());let i=r.readNumber("LoggerSchedulerTimeInterval");i>0&&Ok(i)}}static createPostResponseHandler(e){return t=>{let{data:r,responseHeaders:i}=t;Cd.handlePostResponse(r),e&&e(r,i)}}executeClientAggregate(e,t){return wr(()=>e()).then(r=>{let i=t();i.listOut=r.list,i.countOut=r.count})}ensureControllerAlive(e){}static getJSONDeserializeOutputType(e){return Uae.getType(e)}static getAggregateOutputType(e){return Mae.getType(e)}static registerVariableGroupType(e,t){nx.registerTypeDefinition(e,t)}static getVariableGroupType(e){return nx.getType(e)}};o(Cd,"BaseController");var sc=Cd,sC=class sC extends sc{constructor(e){super(e),this.fireApplicationResumeSingletonCallback=this.fireApplicationResume.bind(this)}registerEventHandler(e,t,r){r(()=>new Promise((i,s)=>{Hv([e],i,s)}).then(()=>{let i=this[t],s=o(()=>Promise.resolve().then(()=>i.call(this)),"newEventHandler");return r(s),s()}))}registerOnApplicationReadyHandler(e,t){this.registerEventHandler(e,t,r=>this.onApplicationReadyHandler=r)}registerOnApplicationResumeHandler(e,t){this.registerEventHandler(e,t,r=>this.onApplicationResumeHandler=r)}fireApplicationReady(){return this.onApplicationReadyHandler?this.onApplicationReadyHandler().then(()=>this.setupOnApplicationResumeListener()):(this.setupOnApplicationResumeListener(),Promise.resolve(void 0))}setupOnApplicationResumeListener(){this.onApplicationResumeHandler&&$b("resume",this.fireApplicationResumeSingletonCallback),this.setupSyncOnResume()}setupSyncOnResume(){let{syncQueue:e=pe.resolve(X.OfflineDataSync),syncConfigs:t=pA()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;let i=o(()=>e.startSync(""),"startSync");this.onSyncHandler&&(t!=null&&t.syncOnResume)&&(!((r=window.matchMedia)===null||r===void 0)&&r.call(window,"(display-mode: standalone)").matches?window.addEventListener("focus",i):$b("resume",i))}fireApplicationResume(){return this.onApplicationResumeHandler?this.onApplicationResumeHandler():Promise.resolve(void 0)}};o(sC,"BaseModuleController");var AS=sC,Au="BaseViewController",Lu=class Lu extends sc{fireEvent(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return wr(()=>{if(e)return e.call(this,...r,this.callContext())}).then(s=>{if(uM(s))throw me.UnhandledOrIgnoredErrorInEventException.create(s)})}fireEventAndForget(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.fireEvent(e,...r).catch(me.UnhandledOrIgnoredErrorInEventException.ignore)}constructor(e,t,r,i){super(i),Ps.add(this),this.model=e,this.messagesProvider=t,this._idService=r,this.instanceId=Lu.globalInstanceId++,this.isDisposed=!1,this.shouldSendClientVarsToDataSources=!1,this.fetchReadySources=a=>{let u=[];(a===void 0?this.dataFetchActionNames:this.dataFetchDependentsGraph[a]).forEach(c=>{a&&this.dataFetchDependencies[c]--,this.dataFetchDependencies[c]===0&&u.push(c)}),u.forEach(c=>{this.remainingFetchesCount++,this.dataFetchDependencies[c]=-1,this.executeDataFetchAction(c).then(()=>this.fetchReadySources(c))})},this.clientVariablesHandler=a=>{this.model.clientVariablesGeneration++,this.model.scheduleFlush()},this.localeDependencyHandler=a=>{this.model.currentLocale=a.localeCode,this.model.scheduleFlush()},Jp.set(this,a=>{var u;switch(a.type){case"SyncStart":return ie(this,Ps,"m",kk).call(this,a.context);case"SyncComplete":return ie(this,Ps,"m",Fk).call(this,a.context);case"SyncError":return ie(this,Ps,"m",$k).call(this,a.context,(u=a.message)!==null&&u!==void 0?u:"");default:return ie(this,Ps,"m",xk).call(this,a)}});let s=pe.resolve(X.LocaleService);this.linearRequest=new bS,s&&this.translationResources&&(this.model.currentLocale=s.getCurrentLocale()),this.validationServiceInstance=new qm(e,t),ie(this,Ps,"m",Uk).call(this)}createPublicApiHelper(){return new rc(this.model,this.callContext())}static get activeScreen(){return Lu.activeScreenInstance}setAsActiveScreen(){Lu.activeScreenInstance=this}callContext(e){return super.callContext(e).withViewName(this.viewName)}get validationService(){return this.validationServiceInstance}get viewName(){var e;return(e=this.modelContext)===null||e===void 0?void 0:e.viewName}fetchData(){let e=!1;ee(Au,"Using Improved data fetching with dependencies"),e=this.innerFetchDataWithDependencies(),e&&this.model.flush()}executeDataFetchAction(e){return ee(Au,"Fetching "+e),wr(()=>this[e]()).then(()=>{this.remainingFetchesCount--,clearTimeout(this.flushTimeoutHandle),ee(Au,"Fetched "+e),this.remainingFetchesCount>0?this.flushTimeoutHandle=window.setTimeout(()=>this.model.flush(),50):this.model.flush()},t=>{this.remainingFetchesCount--,this.model.flush(),this.handleError(t)})}innerFetchDataWithDependencies(){return!this.dataFetchActionNames||this.dataFetchActionNames.length===0?!1:(this.dataFetchDependencies=Object.assign({},this.dataFetchDependenciesOriginal),this.flushTimeoutHandle=0,this.remainingFetchesCount=0,this.fetchReadySources(),!0)}get idService(){return this._idService}fireInitialize(){return M(this,arguments,void 0,function(){var e=this;let{rootSpan:t,startActiveSpan:r=Ix,setAttributeToSpan:i=this.setAttributesToSpan}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){let s=pe.resolve(X.ClientVariablesService);s&&s.subscribe(e.clientVariablesHandler);let a=pe.resolve(X.LocaleService);if(a&&a.subscribe(e.localeDependencyHandler),!t){yield e.fireEvent(e.onInitializeEventHandler),e.fetchData();return}let u=t.getContext().attributes;yield r(`${t.getSpanInformation().name}__initialize`,l=>M(e,void 0,void 0,function*(){try{i(l,u),yield this.fireEvent(this.onInitializeEventHandler)}finally{l==null||l.end()}this.fetchData()}),Re.Internal,t)})()})}setAttributesToSpan(e,t){var r,i,s;e&&t&&(e.setAttribute("code.function",t["code.function"]),e.setAttribute("outsystems.function.key",(r=t["outsystems.function.key"])!==null&&r!==void 0?r:""),e.setAttribute("outsystems.function.owner.name",(i=t["outsystems.function.owner.name"])!==null&&i!==void 0?i:""),e.setAttribute("outsystems.function.owner.key",(s=t["outsystems.function.owner.key"])!==null&&s!==void 0?s:""),e.setAttribute("outsystems.function.type",t["outsystems.function.type"]),t.screen&&e.setAttribute("outsystems.runtime.screen",t["outsystems.runtime.screen"]))}fireAfterViewReady(){this.fireEvent(this.onReadyEventHandler).then(()=>this.fireEvent(this.onRenderEventHandler)).catch(me.UnhandledOrIgnoredErrorInEventException.ignore)}fireAfterInputsChanged(){this.fireEventAndForget(this.onParametersChangedEventHandler)}fireAfterViewRender(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.onRenderEventHandler)return this.fireEvent(t=>{if(e){De("View",`Render loop avoided. This is likely due to the model of the screen/block '${this.viewName}' being changed inside its 'On Render' client action. Avoid changes to the model inside 'On Render' client actions.`,"OS-CLRT-60800",void 0,Re.External);return}return this.onRenderEventHandler(t)})}fireAfterViewDestroy(){let{clientVariablesService:e=pe.resolve(X.ClientVariablesService),localeService:t=pe.resolve(X.LocaleService)}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e&&e.unsubscribe(this.clientVariablesHandler),t&&t.unsubscribe(this.localeDependencyHandler),this.fireEventAndForget(this.onDestroyEventHandler)}registerClientAction(e,t){this[e]=t}innerCallAggregate(e,t,r,i,s,a,u,l,c,d,f,h){let g=arguments.length>12&&arguments[12]!==void 0?arguments[12]:!1,p=this.getEffectiveTimeoutForServerCall(l);return ee(Au,`Calling ${e} aggregate with start index endpoint`),this.callServerDataSource(e,t,r,a,u,m=>{m.inputParameters={StartIndex:s,MaxRecords:i}},p,c,d,f,h,g)}callAggregateWithStartIndexAndClientVars(e,t,r,i,s,a,u,l,c,d,f,h){let g=arguments.length>12&&arguments[12]!==void 0?arguments[12]:!1;return this.innerCallAggregate(e,t,r,i,s,a,u,l,c,d,f,h,g)}callAggregateWithStartIndex(e,t,r,i,s,a,u,l,c,d,f){return this.innerCallAggregate(e,t,r,i,s,a,u,l,c,d,f)}callAggregate(e,t,r,i,s,a,u,l,c,d){return this.innerCallAggregate(e,t,r,i,0,s,a,u,l,c,d)}callDataAction(e,t,r,i,s,a,u,l,c,d){let f=arguments.length>10&&arguments[10]!==void 0?arguments[10]:!1;return this.innerCallDataAction(e,t,r,i,s,a,u,l,c,d,f)}innerCallDataAction(e,t,r,i,s,a,u,l,c,d){let f=arguments.length>10&&arguments[10]!==void 0?arguments[10]:!1,h=this.getEffectiveTimeoutForServerCall(a);return this.callServerDataSource(e,t,r,i,s,void 0,h,u,l,c,d,f)}callServerDataSource(e,t,r,i,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:void 0,u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,l=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,d=arguments.length>9?arguments[9]:void 0,f=arguments.length>10?arguments[10]:void 0,h=arguments.length>11&&arguments[11]!==void 0?arguments[11]:!1,g=this.getInitialPayloadObject(this.callContext(),r);ee(Au,`Calling ${e} data source with optimized on payload`),g.screenData={variables:ec.to(this.model.variables,d,!0)},a&&a(g),this.shouldSendClientVarsToDataSources&&f&&(g.clientVariables=f.serialize()),i(0);let p=o(()=>{let m=`The timeout of ${u}s was reached while fetching this screen data.`;throw it(e,m),new me.Exception(m)},"onTimeout");return aU((m,w)=>this.linearRequest.create(e).post({url:t,payload:g,timeout:u,timeoutHandler:o(()=>Promise.resolve(p()),"timeoutHandler"),responseHandler:sc.createPostResponseHandler(c),headers:l,useLocaleInfo:h}).then(E=>this.handleServerDataSourceResponse({res:E,reject:w,resolve:m,setDataFromJS:s,setDataFetchStatus:i})).catch(E=>{let _=jr(E,me.ViewHasChangedException)||jr(E,me.AbortedRequestException);if(!this.isDisposed)return _||i(2),w(E)}))}handleServerDataSourceResponse(e){let{res:t,reject:r,resolve:i,setDataFromJS:s,setDataFetchStatus:a}=e;if(!this.isDisposed)if(t.completed){let u=t.data;return s(u),a(1),i()}else return r(new me.AbortedRequestException)}handleError(e){throw new Error("@abstract")}safeExecuteAsyncJSNode(e,t,r,i,s,a,u){return this.model.flush(),super.safeExecuteAsyncJSNode(e,t,r,i,s,a,u)}executeActionInsideJSNode(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ym,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ym,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"UNKNOWN";return super.executeActionInsideJSNode(e,t,r,()=>{i(),this.model.flush()},s)}dispose(){this.validationService.dispose(),ie(this,Ps,"m",Mk).call(this),this.isDisposed=!0}ensureControllerAlive(e){if(this.isDisposed){let t=new me.ControllerDisposedException(`Invalid call of the '${e}' client action of the '${this.viewName}' since the latter is not currently active. This is likely due to a platform's client action being used as an event handler or in a setTimeout function. Consider removing this call by using the 'On Destroy' event of the screen/block or moving your logic to a global client action.`);throw it(Lae,t.message),t}}safeExecuteClientAction(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return bv(()=>e.apply(this,i.concat(this.callContext(t))),a=>this.handleError(a),()=>this.model.flush())}get modelContext(){return this.model.context}executeScreenClientAggregate(e,t,r){return wr(()=>(t().dataFetchStatusAttr=0,e())).then(i=>{if(!this.isDisposed)return t().bulkSet(i.list,1,i.count),wr(r)},i=>{if(!this.isDisposed)throw t().dataFetchStatusAttr=2,i})}static downloadBinary(e,t){let r=e.toBlob()||new Blob([]),i=document.createElement("a");i.style.display="none",document.body.appendChild(i),r.type&&(i.type=r.type);let s=window.URL.createObjectURL(r);i.href=s,i.download=t,i.click(),setTimeout(()=>window.URL.revokeObjectURL(s),500),i.remove()}};o(Lu,"BaseViewController");var Ar=Lu;Jp=new WeakMap,Ps=new WeakSet,xk=o(function(e){nr(Au,`Received sync queue message of unknown type '${e.type}' in '${this.viewName}'`,Re.Internal)},"_BaseViewController_handleUnknownSyncQueueMessage"),Uk=o(function(){let e=pe.resolve(X.OfflineDataSync);e&&e.subscribe(ie(this,Jp,"f"))},"_BaseViewController_subscribeToSyncQueueMessages"),Mk=o(function(){let e=pe.resolve(X.OfflineDataSync);e&&e.unsubscribe(ie(this,Jp,"f"))},"_BaseViewController_unsubscribeFromSyncQueueMessages"),kk=o(function(e){this.fireEventAndForget(this.onSyncStartEventHandler,e)},"_BaseViewController_fireOnSyncStart"),Fk=o(function(e){this.fireEventAndForget(this.onSyncCompleteEventHandler,e)},"_BaseViewController_fireOnSyncComplete"),$k=o(function(e,t){this.fireEventAndForget(this.onSyncErrorEventHandler,e,t)},"_BaseViewController_fireOnSyncError");Ar.globalInstanceId=0;var kae=Object.freeze({__proto__:null,BaseController:sc,BaseModuleController:AS,BaseViewController:Ar,CallContext:Wd,ControllerFactory:SS,IterationContext:Xm}),gb="1900-01-01 00:00:00",Fae="0000",$ae="00",pb="Serializer",gn=class gn{static get NULLDATE_IN_DB(){return gb}static maskValue(e,t){let r=t.length,i=e.toString();return t.substr(0,Math.max(0,r-i.length))+i}static maskFourZeroes(e){return gn.maskValue(e,Fae)}static maskTwoZeroes(e){return gn.maskValue(e,$ae)}constructor(){this.serializers=new Map,this.deserializers=new Map,this.serializers.set(re.BINARY_DATA,(e,t)=>this.serializeBinaryData(e,t)),this.serializers.set(re.BOOLEAN,(e,t)=>this.serializeBoolean(e,t)),this.serializers.set(re.DATE,(e,t)=>this.serializeDate(e,t)),this.serializers.set(re.DATE_TIME,(e,t)=>this.serializeDateTime(e,t)),this.serializers.set(re.DECIMAL,(e,t)=>this.serializeDecimal(e,t)),this.serializers.set(re.INTEGER,(e,t)=>this.serializeInteger(e,t)),this.serializers.set(re.LONGINTEGER,(e,t)=>this.serializeLongInteger(e,t)),this.serializers.set(re.TEXT,(e,t)=>this.serializeText(e,t)),this.serializers.set(re.TIME,(e,t)=>this.serializeTime(e,t)),this.deserializers.set(re.BINARY_DATA,(e,t)=>this.deserializeBinaryData(e,t)),this.deserializers.set(re.BOOLEAN,(e,t)=>this.deserializeBoolean(e,t)),this.deserializers.set(re.DATE,(e,t)=>this.deserializeDate(e,t)),this.deserializers.set(re.DATE_TIME,(e,t)=>this.deserializeDateTime(e,t)),this.deserializers.set(re.DECIMAL,(e,t)=>this.deserializeDecimal(e,t)),this.deserializers.set(re.INTEGER,(e,t)=>this.deserializeInteger(e,t)),this.deserializers.set(re.LONGINTEGER,(e,t)=>this.deserializeLongInteger(e,t)),this.deserializers.set(re.TEXT,(e,t)=>this.deserializeText(e,t)),this.deserializers.set(re.TIME,(e,t)=>this.deserializeTime(e,t))}serialize(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Sn.No;return e instanceof Ke?this.serializeRecord(e,t):this.serializeBasicType(e,t,r)}serializeRecord(e,t){ee(pb,"Starting to serialize a record");let r={};return e.getAttributes().forEach(i=>{let s=Um(t,i);r[s.columnName]=this.serializeBasicType(e[i.attrName],s,s.isPrimaryKey?t.idIsAutoNumber:Sn.No)}),ee(pb,"Finished serializing a record"),r}serializeInteger(e,t){return e!=null?e:0}serializeText(e,t){return e!=null?e:""}serializeBoolean(e,t){return e?1:0}serializeLongInteger(e,t){return e?e.toString():"0"}serializeDecimal(e,t){return t.decimals?e.toFixed(t.decimals):e.toString()}serializeDate(e,t){let r=e.toNative();return gn.maskFourZeroes(r.getFullYear())+"-"+gn.maskTwoZeroes(r.getMonth()+1)+"-"+gn.maskTwoZeroes(r.getDate())}serializeTime(e,t){let r=e.toNative();return gn.maskTwoZeroes(r.getHours())+":"+gn.maskTwoZeroes(r.getMinutes())+":"+gn.maskTwoZeroes(r.getSeconds())}serializeDateTime(e,t){if(e.eq(he.defaultValue))return gb;let r=e.toNative();return gn.maskFourZeroes(r.getUTCFullYear())+"-"+gn.maskTwoZeroes(r.getUTCMonth()+1)+"-"+gn.maskTwoZeroes(r.getUTCDate())+" "+gn.maskTwoZeroes(r.getUTCHours())+":"+gn.maskTwoZeroes(r.getUTCMinutes())+":"+gn.maskTwoZeroes(r.getUTCSeconds())}innerSerializeBasicType(e,t,r){}serializeBasicType(e,t,r){if(ee(pb,`Serializing a value of type ${t.type}`),!this.serializers.has(t.type))throw new me.DataBaseException("",`Unable to serialize ${t.type} to a database value.`);let i=this.innerSerializeBasicType(e,t,r);return i!==void 0?i:this.serializers.get(t.type)(e,t)}deserialize(e,t,r){return r?this.deserializeRecord(e,t,r):this.deserializeBasicType(e,t)}deserializeRecord(e,t,r){let i=new r;return r.getAttributes().forEach(s=>{let a=Um(t,s);i[s.attrName]=this.deserializeBasicType(e[a.columnName],a)}),i}deserializeInteger(e,t){return e}deserializeLongInteger(e,t){return Tt.fromValue(e)}deserializeDecimal(e,t){return new Fe(e)}deserializeText(e,t){return e}deserializeBoolean(e,t){return e!==0}deserializeDateTime(e,t){if(e===gb)return he.defaultValue;let i=/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/.exec(e),s=new Date;return s.setUTCFullYear(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10)),s.setUTCHours(parseInt(i[4],10)||0,parseInt(i[5],10)||0,parseInt(i[6],10)||0,0),new he(s)}deserializeDate(e,t){let i=/^(\d{4})-(\d{2})-(\d{2})$/.exec(e),s=new Date;return s.setFullYear(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10)),s.setHours(0,0,0,0),new he(s)}deserializeTime(e,t){let i=/^(\d{2}):(\d{2}):(\d{2})$/.exec(e),s=new Date;return s.setFullYear(1900,0,1),s.setHours(parseInt(i[1],10)||0,parseInt(i[2],10)||0,parseInt(i[3],10)||0,0),new he(s)}innerDeserializeBasicType(e,t){}deserializeBasicType(e,t){if(!this.deserializers.has(t.type))throw new me.DataBaseException("",`Unable to deserialize ${t} to a runtime value.`);let r=this.innerDeserializeBasicType(e,t);return r!==void 0?r:e===null?na(t.type):this.deserializers.get(t.type)(e,t)}};o(gn,"Serializer");var vr=gn,Bae="WebSQLSerializer",oC=class oC extends vr{constructor(){super(...arguments),this.fromMethodCache=new Map,this.attributeReaderImplementation=(e,t,r,i)=>{let s={type:WL(i)};return this.deserialize(e["o"+t],s)},this.namedAttributeReaderImplementation=(e,t,r,i)=>{let s={type:WL(i)};return this.deserialize(e[r],s)},this.deserializeAggregate=(e,t,r,i)=>{var s;if(this.isGenericRecordType(t)){let a=e,u=t,l=r,c=this.fromMethodCache.get(u);if(!c){let d=u.getAttributes();c=this.makeConverterFunction({attributes:d,fromLocalStorage:this.deserializeAggregate,dataType:t}),this.fromMethodCache.set(u,c)}return c(a,l,this.getAttributeReaderImplementation(t),i)}else if(this.isGenericRecordListType(t)){let a=new t,u=e,l=r,c=[];for(let d=0;d<u.length;d++)c.push(a.newItem(l(null,u.item(d))));return a.pushAll(c),a}else{let a=t;throw new Error(`Unable to read data from Local Storage. Unknown type ${(s=a==null?void 0:a.name)!==null&&s!==void 0?s:a}`)}}}isGenericRecordType(e){return!!e.isGenericRecordType}isGenericRecordListType(e){return!!e.isGenericRecordListType}getAttributeReaderImplementation(e){return e.isAnonymousRecord()?this.namedAttributeReaderImplementation:this.attributeReaderImplementation}makeAttributesDeclaration(e,t){t.forEach(r=>{r.dataType!==b.RecordList&&(e[r.attrName]=null)})}makeDeserializerForEachAttribute(e){let{data:t,attributes:r,dataType:i,row:s,indexRef:a,readerImplementation:u,fromLocalStorage:l}=e;r.forEach((c,d)=>{c.dataType!==b.RecordList&&(c.dataType===b.Record&&i.isAnonymousRecord()?t[c.attrName]=l(s,c.complexType,a):t[c.attrName]=u(s,a.value++,r[d].name,r[d].dataType))})}makeConverterFunction(e){let{attributes:t,fromLocalStorage:r,dataType:i}=e;return(s,a,u,l)=>{let c={};return l&&l.length>0?(this.makeAttributesDeclaration(c,t),l.forEach(d=>{let f=t.filter(function(h){return h.attrName===d})[0];f.complexType?c[d]=r(s,f.complexType,a):c[d]=u(s,a.value++,f.name,f.dataType)})):this.makeDeserializerForEachAttribute({data:c,attributes:t,dataType:i,row:s,indexRef:a,readerImplementation:u,fromLocalStorage:r}),new i.RecordClass(c)}}serializeDateTime(e,t){if(e.eq(he.defaultValue))return vr.NULLDATE_IN_DB;let r=e.toNative();return vr.maskFourZeroes(r.getUTCFullYear())+"-"+vr.maskTwoZeroes(r.getUTCMonth()+1)+"-"+vr.maskTwoZeroes(r.getUTCDate())+" "+vr.maskTwoZeroes(r.getUTCHours())+":"+vr.maskTwoZeroes(r.getUTCMinutes())+":"+vr.maskTwoZeroes(r.getUTCSeconds())}serializeBinaryData(e,t){return e.content===void 0?null:e.content}deserializeDateTime(e,t){if(e===vr.NULLDATE_IN_DB)return he.defaultValue;let i=/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/.exec(e),s=new Date;return s.setUTCFullYear(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10)),s.setUTCHours(parseInt(i[4],10)||0,parseInt(i[5],10)||0,parseInt(i[6],10)||0,0),new he(s)}deserializeBinaryData(e,t){return new On(e)}isConversionNeeded(e,t){return this.isConversionNeededBetweenDBDataTypes(e.type,t.type)||!!e.isEntityReference!=!!t.isEntityReference?!0:e.length!==void 0&&t.length!==void 0?e.decimals!==void 0&&t.decimals!==void 0?e.length-e.decimals>t.length-t.decimals:e.length>t.length:!1}isConversionNeededBetweenDBDataTypes(e,t){if(e===void 0)return!0;if(e===t)return!1;switch(e){case re.BOOLEAN:return t!==re.INTEGER&&t!==re.LONGINTEGER;case re.INTEGER:return t!==re.LONGINTEGER&&t!==re.TEXT;case re.LONGINTEGER:return t!==re.TEXT;default:return!0}}innerSerializeBasicType(e,t,r){if(ee(Bae,`WebSQL serializing a value of type ${t.type}`),t.isPrimaryKey&&r===Sn.YesIfEmpty&&Tr(e,na(t.type))||t.isEntityReference&&Tr(e,na(t.type)))return null}};o(oC,"WebSQLSerializer");var Gd=oC,Vae=Object.freeze({__proto__:null,default:Gd}),aC=class aC{constructor(e,t){this.storage=e,this.info=t}getStorage(){return this.storage}getInfo(){return this.info}create(e){return this.storage.create(this.info,e)}createOrUpdate(e){return this.storage.createOrUpdate(this.info,e)}createOrUpdateAll(e){return this.storage.createOrUpdateAll(this.info,e)}update(e){return this.storage.update(this.info,e)}get(e){return this.storage.get(this.info,e)}delete(e){return this.storage.delete(this.info,e)}deleteAll(){return this.storage.deleteAll(this.info)}};o(aC,"Entity");var IS=aC,Hae=new Gd,uC=class uC{constructor(e){this.skipConversion=e,this.argumentList=[],this.existingArguments={}}add(e,t,r,i,s,a){if(!this.existingArguments[e])if(this.existingArguments[e]=!0,r===void 0)this.argumentList.push(null);else{let u;this.skipConversion?u=r:u=Hae.serialize(r,{type:t,length:i,decimals:s,isEntityReference:a,name:"",columnName:""}),this.argumentList.push(u)}}toArray(){return this.argumentList}};o(uC,"QueryArgumentsList");var CS=uC,jae=Object.freeze({__proto__:null,Entity:IS,QueryArgumentsList:CS}),Wae="There was an error processing your request.",Gae="",zae="RELOAD",qae="#error-screen-message-text",Kae="#error-screen-message-text-extra",Bk="#error-screen-message-reload-button",Yae="#error-screen-spinner",Xae="#exception-detail",Vk="#error-screen-show-detail-button",Jae="#error-screen-exception-message",Zae="#error-screen-exception-stack",Qae="#exception-detail-text";function eue(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Hk;var t;e(n.errorPageConfig);try{let r=oi.errorPageExceptionInfo.get(),i=r?r.message:oi.errorPageMessage.get();De("ErrorScreen",`${i}`,(t=r==null?void 0:r.errorCode)!==null&&t!==void 0?t:"OS-CLRT-00000",void 0,Re.Client)}catch(r){De("ErrorScreen","Unable to retrieve error details","OS-CLRT-00000")}cA()}o(eue,"renderErrorScreen");function Hk(n){var e,t,r;let i=oi.errorPageMessage.get(),s=oi.errorPageExtraMessage.get(),a=oi.errorPageExceptionInfo.get();if(a){let u=a.message,l=Ki(a);if(l&&(u+=`
`+l),console.error(u),typeof document!="undefined"&&document.querySelector){let c=document.querySelector(Jae);c.innerHTML=(e=a.message)!==null&&e!==void 0?e:"";let d=document.querySelector(Zae);if(d.innerHTML=l,document.querySelector(Vk).addEventListener("click",()=>Wk()),n!=null&&n.showExceptionStack){let h=document.querySelector(Xae);h.style.display="block"}}}if(typeof document!="undefined"&&document.querySelector){let u=(t=n==null?void 0:n.messages)===null||t===void 0?void 0:t.defaultMessage,l=n==null?void 0:n.extraMessage,c=document.querySelector(qae);c.innerHTML=i||u||Wae;let d=document.querySelector(Kae);d.innerHTML=s||l||Gae;let f=document.querySelector(Bk);f.innerHTML=(r=n==null?void 0:n.reloadLabel)!==null&&r!==void 0?r:zae,f.addEventListener("click",()=>jk())}}o(Hk,"setErrorPageMessages");function jk(){if(typeof document!="undefined"&&document.querySelector){let n=document.querySelector(Bk);n.style.display="none";let e=document.querySelector(Yae);e.style.display="inline-block"}setTimeout(()=>{SA()},2e3)}o(jk,"reloadApplication");function Wk(){if(typeof document!="undefined"&&document.querySelector){let n=document.querySelector(Vk),e=document.querySelector(Qae);e.hidden?(n.innerHTML="Hide Detail",e.hidden=!1):(n.innerHTML="Show Detail",e.hidden=!0)}}o(Wk,"toggleExceptionInfo");var tue=Object.freeze({__proto__:null,reloadApplication:jk,renderErrorScreen:eue,setErrorPageMessages:Hk,toggleExceptionInfo:Wk}),RS;(function(n){(function(e){e[e.Full=0]="Full",e[e.Minimal=1]="Minimal"})(n.InitializationType||(n.InitializationType={}))})(RS||(RS={}));var OS;(function(n){(function(e){e[e.Fetching=0]="Fetching",e[e.Fetched=1]="Fetched",e[e.Error=2]="Error"})(n.DataFetchStatus||(n.DataFetchStatus={}))})(OS||(OS={}));var PS;(function(n){(function(e){e[e.Info=0]="Info",e[e.Success=1]="Success",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(n.FeedbackMessageType||(n.FeedbackMessageType={}))})(PS||(PS={}));var nue=Object.freeze({__proto__:null,get Application(){return RS},get FeedbackMessage(){return PS},get Model(){return OS}}),mb="BaseMessagesProvider",Br;(function(n){n.MandatoryValue="Validation.Mandatory",n.InvalidValuePrefix="Validation.",n.UpgradeComplete="UpgradeComplete",n.UpgradeRequiredDataLoss="UpgradeRequiredDataLoss",n.UpgradeRequired="UpgradeRequired",n.UpgradeFailedOnResources="AppInitError.Resources",n.UpgradeFailedOnDataModel="AppInitError.DataModel",n.UpgradeFailed="AppInitError.Generic"})(Br||(Br={}));var cC=class cC{constructor(e){if(this.messages={},this.localeChangeHandler=t=>{var r;let i=pe.resolve(X.TranslationsService),s=pe.resolve(X.LocaleService);i&&((r=t.localeFamily)!==null&&r!==void 0?r:[t.localeCode]).forEach(u=>{var l,c;this.translationResources[u]?(ee(mb,`Adding translations for ${u} locale.`),i.add((l=this.translationResources[u].translations)!==null&&l!==void 0?l:{}),s.setCurrentLocaleRTL((c=this.translationResources[u].isRTL)!==null&&c!==void 0?c:!1)):ee(mb,`No translations found for ${u} locale.`)})},this.translationResources=e!=null?e:this.translationResources,this.translationResources){let t=pe.resolve(X.LocaleService);if(t){let r=t.getCurrentLocale(),i=t.getCurrentLocaleFamily();this.localeChangeHandler({localeCode:r,localeFamily:i}),ee(mb,"Subscribing handler for locale service."),t.subscribe(this.localeChangeHandler)}}}getMandatoryValueMessage(){return this.getMessage(Br.MandatoryValue,"Required Value!")}getInvalidValueMessage(e){return this.getMessage(Br.InvalidValuePrefix+b[e],"Invalid Value!")}getApplicationUpgradeCompleteMessage(){return this.getMessage(Br.UpgradeComplete,"")}getApplicationUpgradeRequiredMessage(e){return e?this.getMessage(Br.UpgradeRequiredDataLoss,""):this.getMessage(Br.UpgradeRequired,"")}getApplicationUpgradeFailedOnResourcesMessage(){return this.getMessage(Br.UpgradeFailedOnResources,"")}getApplicationUpgradeFailedOnDataModelMessage(){return this.getMessage(Br.UpgradeFailedOnDataModel,"")}getApplicationUpgradeFailedUnknownMessage(){return this.getMessage(Br.UpgradeFailed,"")}getMessage(e,t){var r;let i=(r=this.messages[e])!==null&&r!==void 0?r:t,s=pe.resolve(X.TranslationsService);return s?s.getMessage(e,i):i}setMessage(e,t){this.messages[e]=t}};o(cC,"BaseMessagesProvider");var NS=cC,rue=Object.freeze({__proto__:null,BaseMessagesProvider:NS,get ModuleMessageKeys(){return Br}}),DS="idAttr",LS="nameAttr",Zp="validAttr",Qp="validationMessageAttr",lC=class lC{constructor(e,t,r,i){this.type=e,this._value=t,this.setter=r,this.model=i}get value(){return this._value}set value(e){let t=Ws.convertTo(e,this.type);this.setter(t),this.model.flush()}isAcceptable(e){return Ws.isConvertibleTo(e,this.type)}fastEquals(e){return e&&this.constructor===e.constructor&&this.value===e.value}equals(e){return e&&this.constructor===e.constructor&&Tr(this.value,e.value)}};o(lC,"Variable");var Jm=lC,Rd=class Rd extends an{constructor(e){super(e)}get idAttr(){return this.getBasicProperty(DS)}set idAttr(e){this.setBasicProperty(DS,e,b.Text)}get nameAttr(){return this.getBasicProperty(LS)}set nameAttr(e){this.setBasicProperty(LS,e,b.Text)}get generationNode(){return this.getBasicProperty(Rd.WidgetGenerationNodeAttributeName)}set generationNode(e){this.setBasicProperty(Rd.WidgetGenerationNodeAttributeName,e,b.Object)}asReadOnly(){return{idAttr:this.idAttr,nameAttr:this.nameAttr}}refreshGeneration(){this.generationNode&&(this.generationNode.generation=uc.currentGeneration)}};o(Rd,"WidgetRecord");var Ji=Rd;Ji.WidgetGenerationNodeAttributeName="widgetGenerationNode";Ji.RecordClass=an.defineRecordClass({idAttr:"",nameAttr:"",widgetGenerationNode:null});function iue(n){return{idAttr:n.get(DS),nameAttr:n.get(LS),validAttr:n.get(Zp),validationMessageAttr:n.get(Qp)}}o(iue,"validationWidgetRecordAsReadOnly");var dC=class dC extends Ji{constructor(e){super(e)}get validAttr(){return this.getBasicProperty(Zp)}set validAttr(e){this.setBasicProperty(Zp,e,b.Boolean)}get validationMessageAttr(){return this.getBasicProperty(Qp)}set validationMessageAttr(e){this.setBasicProperty(Qp,e,b.Text)}onPropertyValueChanged(e){(e===Zp||e===Qp)&&this.refreshGeneration()}asReadOnly(){return iue(this.data)}};o(dC,"ValidationWidgetRecord");var oc=dC;oc.RecordClass=(()=>{let n=new Ji.RecordClass().toJS();return n.validAttr=!0,n.validationMessageAttr="",an.defineRecordClass(n)})();var Ho=class Ho extends an{constructor(e){super(e),this.widgetsIdToRecord=this.data.get(Ho.WidgetRecordsAttribute),this.widgetsIdToRecordDataCache=this.data.get(Ho.WidgetRecordsDataCacheAttribute)}static createDefaultData(){return new Ho.RecordClass({records:new Map,recordsCache:new Map})}static getWidgetsType(){return{}}getWidgetsType(){return this.constructor.getWidgetsType()}getWidgetRecordType(e){return this.getWidgetsType()[e]||Ji}get(e){let t=this.widgetsIdToRecord.get(e);return t||(t=this.create(e),this.add(t),t)}set(e,t){this.widgetsIdToRecord.set(e,t),this.widgetsIdToRecordDataCache.delete(e),this.writePropagate(this.data,null)}internalSet(e,t){this.widgetsIdToRecord.delete(e),this.widgetsIdToRecordDataCache.set(e,t),this.writePropagate(this.data,null)}create(e){let t=ic.nameFromId(e),r=this.getWidgetRecordType(t),i=this.widgetsIdToRecordDataCache.get(e),s=new r(i);return s.idAttr=e,s.nameAttr=t,s}add(e){Ho.setPropagationHandler(e,this,e.idAttr,this.internalSet),this.widgetsIdToRecordDataCache.delete(e.idAttr),this.widgetsIdToRecord.set(e.idAttr,e)}remove(e){this.widgetsIdToRecord.delete(e),this.widgetsIdToRecordDataCache.delete(e),this.writePropagate(this.data,null)}};o(Ho,"BaseWidgetRecordMap");var ac=Ho;ac.WidgetRecordsAttribute="records";ac.WidgetRecordsDataCacheAttribute="recordsCache";ac.RecordClass=an.defineRecordClass({records:null,recordsCache:null});var xu=class xu extends Ke{get dataFetchStatusAttr(){return this.getBasicProperty(xu.DataFetchStatusAttributeName)}set dataFetchStatusAttr(e){this.setBasicProperty(xu.DataFetchStatusAttributeName,e,b.Integer)}get isDataFetchedAttr(){return this.dataFetchStatusAttr===1}get hasFetchErrorAttr(){return this.dataFetchStatusAttr===2}static attributesToDeclare(){return[Ke.attr("DataFetchStatus",xu.DataFetchStatusAttributeName,"",!0,!1,b.Integer,()=>0)].concat(super.attributesToDeclare())}replaceWith(e){let t=new this.constructor(an.getData(e));t.dataFetchStatusAttr=this.dataFetchStatusAttr,this.writePropagate(an.getData(t),new Ju)}};o(xu,"DataSourceRecord");var Gs=xu;Gs.DataFetchStatusAttributeName="dataFetchStatusAttr";var $r=class $r extends Gs{get listOut(){return this.getComplexProperty($r.ListOutAttributeName,this.getRecordListType())}set listOut(e){this.setComplexProperty($r.ListOutAttributeName,e,b.RecordList,this.getRecordListType())}get countOut(){return this.getBasicProperty($r.CountOutAttributeName)}set countOut(e){this.setBasicProperty($r.CountOutAttributeName,e,b.LongInteger)}bulkSet(e,t,r){let i=[{name:$r.ListOutAttributeName,value:e,isBasicType:!1},{name:Gs.DataFetchStatusAttributeName,value:t,isBasicType:!0}];r!==void 0&&i.push({name:$r.CountOutAttributeName,value:r,isBasicType:!0}),this.setProperties(i)}getRecordListType(){return this.constructor.RecordListType}static attributesToDeclare(){return[Ke.attr("List",$r.ListOutAttributeName,"List",!0,!1,b.RecordList,()=>!1,!0,this.RecordListType),Ke.attr("Count",$r.CountOutAttributeName,"Count",!0,!1,b.LongInteger,()=>Tt.defaultValue)].concat(super.attributesToDeclare())}static init(){if(!this.RecordListType)throw new TypeError("AggregateRecords must define a RecordListType");super.init()}};o($r,"AggregateRecord");var zd=$r;zd.ListOutAttributeName="listOut";zd.CountOutAttributeName="countOut";var sue="BaseViewModel",Un=class Un extends an{constructor(e){super(),this._context=e,this.writeSubscriptions=[],this.cachedValues={},this.modified=!1}static createDefaultData(){let e=this.newVariablesRecord(),t=this.newWidgetsRecord();return new Un.RecordClass({variables:an.getData(e),widgets:an.getData(t),clientVariablesGeneration:0,currentLocale:null})}onDefaultWritePropagate(e){super.onDefaultWritePropagate(e),this.modified=!0,this.innerFlush(!0)}cloneCache(){return this.cache}get isModified(){return this.modified}scheduleFlush(){this.pendingFlush||(this.pendingFlush=window.setTimeout(()=>this.flush(),0))}flush(){this.pendingFlush&&(clearTimeout(this.pendingFlush),this.pendingFlush=void 0),this.modified&&(this.modified=!1,uc.currentGeneration++,this.innerFlush(!1),ee(sue,"Flushing model"))}innerFlush(e){for(let t=0;t<this.writeSubscriptions.length;t++){let r=this.writeSubscriptions[t];r.immediate===e&&r.handler(this)}}subscribeWrites(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(this.hasVariables||this.hasValidationWidgets||this.currentLocale!==null||this.currentLocale!==void 0)&&e?(this.writeSubscriptions.push({handler:e,immediate:t}),!0):!1}unsubscribeWrites(e){if(e){let t=-1;for(let r=0,i=this.writeSubscriptions.length;r<i;r++)if(this.writeSubscriptions[r].handler===e){t=r;break}if(t>=0)return this.writeSubscriptions.splice(t,1),!0}return!1}clearSubscriptions(){this.writeSubscriptions=[]}static get hasVariables(){return!0}get hasVariables(){return this.constructor.hasVariables}static getVariablesRecordConstructor(){throw new Error("@abstract")}static newVariablesRecord(e){if(this.hasVariables)return new(this.getVariablesRecordConstructor())(e)}getVariables(){let e=this.constructor;if(this.hasVariables)return this.getComplexProperty(Un.VariablesPropertyName,e.getVariablesRecordConstructor());throw new Error("Model does not contain variables")}get variables(){return this.getVariables()}set variables(e){let t=this.constructor;this.setComplexProperty(Un.VariablesPropertyName,e,b.Record,t.getVariablesRecordConstructor())}get clientVariablesGeneration(){return this.getBasicProperty(Un.ClientVariablesGenerationPropertyName)}set clientVariablesGeneration(e){this.setBasicProperty(Un.ClientVariablesGenerationPropertyName,e,b.Integer)}static get hasValidationWidgets(){return!0}get hasValidationWidgets(){return this.constructor.hasValidationWidgets}get currentLocale(){return this.getBasicProperty(Un.CurrentLocalePropertyName)}set currentLocale(e){this.currentLocale!==e&&this.clearCachedValues(),this.setBasicProperty(Un.CurrentLocalePropertyName,e,b.Text)}static getWidgetsRecordConstructor(){throw new Error("@abstract")}static newWidgetsRecord(e){if(this.hasValidationWidgets)return new(this.getWidgetsRecordConstructor())(e)}getWidgets(){let e=this.constructor;if(this.hasValidationWidgets)return this.getComplexProperty(Un.WidgetsPropertyName,e.getWidgetsRecordConstructor());throw new Error("Model does not contain validation widgets")}get widgets(){return this.getWidgets()}set widgets(e){this.setComplexProperty(Un.WidgetsPropertyName,e,b.Object)}hasCachedValue(e){return this.cachedValues.hasOwnProperty(e)}getCachedValue(e,t){let r=this.cachedValues[e];for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];let u=s.map((c,d)=>{try{return c()}catch(f){return Un.InvalidValue}});return r!==void 0&&s.length===r.args.length&&u.every((c,d)=>c===r.args[d])||(r={args:u,value:t()},this.cachedValues[e]=r),r.value}clearCachedValues(){this.cachedValues={}}createVariable(e,t,r){return new Jm(e,t,r,this)}fromOther(e){this.fromImmutableData(e.data)}toImmutableData(){return this.data}fromImmutableData(e){this.data=e,this.writePropagate(this.data,this.cache),this.cache.invalidate()}setInputs(e){throw new Error("@abstract")}get widgetsGenerationsTree(){return this._widgetsGenerationsTree||(this._widgetsGenerationsTree=new uc),this._widgetsGenerationsTree}getReadOnlyWidgetRecord(e){return this.widgets.get(e).asReadOnly()}get context(){return this._context}sanitize(e){let t=e;if(this.hasVariables){if(e.constructor!==this.data.constructor)throw new Error("Expected data to be the same type of this model data");let r=this.variables.getNonSerializableAttributes();if(r.length>0){let i=t.get(Un.VariablesPropertyName);r.forEach(s=>i=i.set(s,null)),t=t.set(Un.VariablesPropertyName,i)}}return t}};o(Un,"BaseViewModel");var Wr=Un;Wr.VariablesPropertyName="variables";Wr.WidgetsPropertyName="widgets";Wr.ClientVariablesGenerationPropertyName="clientVariablesGeneration";Wr.CurrentLocalePropertyName="currentLocale";Wr.InvalidValue=new Object;Wr.RecordClass=an.defineRecordClass({variables:null,widgets:null,clientVariablesGeneration:0,currentLocale:null});function oue(){let n=1;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(let i of t)switch(i){case 2:return 2;case 0:n=0;break}return n}o(oue,"calculateDataFetchStatus");var fC=class fC extends Wr{static get hasVariables(){return!1}setInputs(){}};o(fC,"VariablelessViewModel");var xS=fC,pv=class pv extends Wr{static get hasVariables(){return!1}static get hasValidationWidgets(){return!1}setInputs(){}static create(e,t,r){return new pv({viewName:e,navigatedFromHistory:t,viewWasRestoredFromCache:r})}};o(pv,"DummyViewModel");var Zm=pv,hC=class hC{constructor(e){this.modelClass=e}create(e){return!this.modelClass.hasVariables&&!this.modelClass.hasValidationWidgets?new Zm(e):new this.modelClass(e)}get hasValidationWidgets(){return this.modelClass.hasValidationWidgets}};o(hC,"ModelFactory");var US=hC,mv=class mv{constructor(e){this._parent=e,this._generation=e?e.generation:0}get parent(){return this._parent}get generation(){return this._generation}set generation(e){this.generation<e&&(this._generation=e,this.parent&&(this.parent.generation=e))}addChild(){return new mv(this)}};o(mv,"GenerationNode");var MS=mv,jo=class jo{constructor(){this._root=new MS(null),this._root.generation=jo.currentGeneration,jo.currentGeneration++}get root(){return this._root}static get currentGeneration(){return jo.generation}static set currentGeneration(e){jo.generation=e}};o(jo,"GenerationsTree");var uc=jo;uc.generation=0;var aue=Object.freeze({__proto__:null,AggregateRecord:zd,BaseViewModel:Wr,BaseWidgetRecordMap:ac,DataSourceRecord:Gs,DummyViewModel:Zm,ModelFactory:US,ValidationWidgetRecord:oc,Variable:Jm,VariablelessViewModel:xS,WidgetRecord:Ji,calculateDataFetchStatus:oue}),gC=class gC extends vr{serializeBinaryData(e,t){return e.toArrayBuffer()||null}deserializeBinaryData(e,t){let r=e instanceof ArrayBuffer?new Blob([e]):e;return new On(r)}isConversionNeeded(e,t){return this.isConversionNeededBetweenDBDataTypes(e.type,t.type)||!!e.isEntityReference!=!!t.isEntityReference?!0:e.length!==void 0&&t.length!==void 0?e.decimals!==void 0&&t.decimals!==void 0?e.length-e.decimals>t.length-t.decimals:e.length>t.length:!1}isConversionNeededBetweenDBDataTypes(e,t){if(e===void 0)return!0;if(e===t)return!1;switch(e){case re.BOOLEAN:return t!==re.INTEGER;case re.LONGINTEGER:return t!==re.TEXT;default:return!0}}};o(gC,"IndexedDBSerializer");var Qm=gC,uue=Object.freeze({__proto__:null,default:Qm});function cue(n,e,t){let r='(^|\\s|\\.)(\\[|"|)(ossys_|osltm_|oslog_|osevt_|osusr_|osext_)',i="((((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)(( )*,( )*(((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)*";n=n.trim();let s=dm(n,r,!0);if(s.length>0){let c=s[0];throw new me.DataBaseException("",`'${c.groups[2]+c.groups[3]}' found in 'Order By' parameter is a reserved prefix`)}if(n!==""&&(s=dm(n,i,!0),s.length!==1||s[0].value!==n))throw new me.DataBaseException("","Invalid syntax in 'Order By' parameter.");let a=o(c=>lue(c,e,t),"meReplaceEntityName"),u=o(c=>due(c),"meReplaceAttributeName"),l=fm(n,"(\\{\\w+\\}|\\w+\\.)",!1,a);return l=fm(l,"(\\[\\w+\\])",!1,u),l}o(cue,"replaceEntityReferencesInOrderBy");function lue(n,e,t){let r="",i=fue(n),s=!1;for(let a=0;a<e.length;a++)if(e[a].toLowerCase()===i.toLowerCase()){s=!0,r='"'+t[a]+'"';break}if(!s)throw new me.DataBaseException("",`'${i}' found in 'Order By' parameter is an invalid Entity`);return n.value.charAt(n.value.length-1)==="."?r+".":r}o(lue,"replaceEntityNameInOrderBy");function due(n){let e=n.value.substr(1,n.value.length-2);return e?(e.charAt(0)==='"'?"":'"')+e+(e.charAt(e.length-1)==='"'?"":'"'):""}o(due,"replaceAttributeName");function fue(n){return n.value.charAt(n.value.length-1)==="."?n.value.substr(0,n.value.length-1):n.value.substr(1,n.value.length-2)}o(fue,"getEntityNameFromMatch");function hue(n){return gue(n).join(", ")}o(hue,"getOrderByColumnsWithoutDuplicates");function gue(n){let e=[],t={};return n.forEach(r=>{let i=r.trim();if(i!==""){let s=i.replace(new RegExp("\\b((ASC)|(DESC))$","im"),"").replace('"',"").replace("[","").replace("]","").trim().toLowerCase();t[s]!==!0&&(e.push(i),t[s]=!0)}}),e}o(gue,"filterDuplicateOrderByColumns");function pue(n,e){return e.forEach(t=>{let r=Gk(t);for(let i=0;i<n.length;i++)if(n[i].attributes.some(a=>a.name.toLowerCase()===r.toLowerCase()))return!0;throw new me.DataBaseException("",`Invalid attribute in 'Order By' parameter: ${t}`)}),!0}o(pue,"validateQueryOrderBy");function Gk(n){let t=n.trim().split(" ")[0].split(".");return t[t.length-1].replace(/["]+/g,"")}o(Gk,"getAttributeFromOrderBy");var mue=Object.freeze({__proto__:null,getAttributeFromOrderBy:Gk,getOrderByColumnsWithoutDuplicates:hue,replaceEntityReferencesInOrderBy:cue,validateQueryOrderBy:pue});function vue(){return!0}o(vue,"defaultShouldCompareProp");function yue(n){let e=0,t=n.length;if(t===0)return e;for(let r=0;r<t;r++){let i=n.charCodeAt(r);e=(e<<5)-e+i,e|=0}return e}o(yue,"getHashCode");function _ue(n){return G.isBasicType(n)&&!((n==null?void 0:n.equals)instanceof Function)}o(_ue,"isBasicType");function zk(n,e){return!n||!e||_ue(n)?n===e:n.fastEquals instanceof Function?n.fastEquals(e):Tr(n,e)}o(zk,"innerShallowEquals");function wue(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vue;if(n===e)return!0;if(n===null||e===null||typeof n!="object"||typeof e!="object")return!1;let r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;let s=Object.prototype.hasOwnProperty.bind(e);for(let a=0;a<r.length;a++){let u=r[a];if(t(n,u)&&(!s(u)||!zk(n[u],e[u])))return!1}return!0}o(wue,"shallowEquals");function Eue(n,e){if(n===e)return!0;if(n===null||e===null||!(n instanceof Array)||!(e instanceof Array)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!zk(n[t],e[t]))return!1;return!0}o(Eue,"arrayShallowEquals");function Tue(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return Object.assign(n,...t)}o(Tue,"assign");function bue(n){return!n||Object.keys(n).length===0}o(bue,"isEmptyObject");function Sue(n){let e=[],t=[n],r=0;for(;t.length;){let i=t.pop();switch(typeof i){case"boolean":r+=4;break;case"number":r+=8;break;case"string":r+=2*i.length;break;case"object":if(e.indexOf(i)!==-1)continue;e.push(i),Array.isArray(i)||(r+=2*Object.keys(i).length);for(let s in i){let a=null;try{a=i[s]}catch(u){}a&&t.push(a)}break}}return r}o(Sue,"roughSizeOf");function Aue(n,e,t){return n+e.repeat(t)}o(Aue,"concatenateMultipleTimes");var Iue=Object.freeze({__proto__:null,arrayShallowEquals:Eue,assign:Tue,concatenateMultipleTimes:Aue,getHashCode:yue,isEmptyObject:bue,roughSizeOf:Sue,shallowEquals:wue}),ud,em,cd,qk,Kk,Yk,pC=class pC{constructor(){ud.add(this),em.set(this,new Map),cd.set(this,new Map)}getGenericList(e){let t=ie(this,em,"f").get(e);if(t)return t;let i=class i extends Zu{static getItemType(){return e}};o(i,"GeneratedList");let r=i;return ie(this,em,"f").set(e,r),r}getImplicitRecord(e,t){let r=ie(this,ud,"m",qk).call(this,t),i=ie(this,ud,"m",Kk).call(this,e,r);if(i)return i;let a=class a extends Ke{static attributesToDeclare(){return[this.attr(t.name,t.attrName,t.nameForJson,!1,!1,b.Record,function(){return Sr.getData(new e)},!0,e)].concat(Ke.attributesToDeclare.call(this))}static fromStructure(l){return new a(new a.RecordClass({[t.attrName]:Sr.getData(l)}))}static get _isAnonymousRecord(){return!0}static get UniqueId(){return t.uniqueId}};o(a,"GeneratedRecord");let s=a;return s.init(),ie(this,ud,"m",Yk).call(this,s,e,r),s}};o(pC,"GenericTypeCache");var kS=pC;em=new WeakMap,cd=new WeakMap,ud=new WeakSet,qk=o(function(e){let{name:t,attrName:r,nameForJson:i,uniqueId:s}=e;return`${t}.${r}.${i}.${s}`},"_GenericTypeCache_calcSignature"),Kk=o(function(e,t){var r;return(r=ie(this,cd,"f").get(e))===null||r===void 0?void 0:r.get(t)},"_GenericTypeCache_getImplicitRecordFromCache"),Yk=o(function(e,t,r){var i;let s=(i=ie(this,cd,"f").get(t))!==null&&i!==void 0?i:new Map;s.set(r,e),ie(this,cd,"f").set(t,s)},"_GenericTypeCache_setImplicitRecordOnCache");var nI=new kS;function Cue(n){return Xk(n)+"Attr"}o(Cue,"getAttrName");function Xk(n){return n.charAt(0).toLowerCase()+n.slice(1)}o(Xk,"getNameInJson");function qn(n,e,t){return r=>i=>{var s,a,u,l,c,d,f,h;let g=(s=r==null?void 0:r.attrName)!==null&&s!==void 0?s:Cue(i),p=(a=r==null?void 0:r.nameForJson)!==null&&a!==void 0?a:Xk(i),m=(u=r==null?void 0:r.mandatory)!==null&&u!==void 0?u:!1,w=(l=r==null?void 0:r.ignoreForServer)!==null&&l!==void 0?l:!1,E=(c=r==null?void 0:r.optimizeList)!==null&&c!==void 0?c:!0,_=(d=r==null?void 0:r.complexType)!==null&&d!==void 0?d:t,T=(h=(f=r==null?void 0:r.defaultValue)!==null&&f!==void 0?f:e)!==null&&h!==void 0?h:()=>Cn(n);return VA({name:i,attrName:g,nameForJson:p,mandatory:m,ignoreForServer:w,dataType:n,defaultValue:T,optimizeList:E,complexType:_})}}o(qn,"createDeclarator");var Jk=qn(b.Integer),Yo=qn(b.LongInteger);qn(b.Decimal);qn(b.Currency);var Mt=qn(b.Text);qn(b.PhoneNumber);var Rue=qn(b.Email),$e=qn(b.Boolean);qn(b.Date);var Oue=qn(b.DateTime);qn(b.Time);var Pue=qn(b.BinaryData);function Ks(n,e){return qn(b.Record,()=>Sr.getData(new n),n)(e)}o(Ks,"RecordAttr");function Zk(n){return nI.getGenericList(n)}o(Zk,"getRecordListType");function Nue(n,e){let t=Zk(n);return qn(b.RecordList,()=>Sr.getData(new t),t)(e)}o(Nue,"RecordListAttr");function bt(n,e){let r=class r extends Ke{constructor(s,a){super(s,a)}static attributesToDeclare(){return Object.entries(n).map(s=>{let[a,u]=s;return u(a)}).concat(super.attributesToDeclare())}};o(r,"Rec");let t=r;return e&&Object.defineProperty(t,"$runtimeName",{get:o(()=>e,"get")}),t.init(),t}o(bt,"declareRecord");function es(n,e,t){let r=`${n.charAt(0).toLowerCase()+n.slice(1)}Out`,i=VA({name:n,attrName:r,nameForJson:r,dataType:b.Record,defaultValue:o(()=>new e,"defaultValue"),ignoreForServer:!0,mandatory:!1,optimizeList:!0,complexType:e}),a=class a extends Ke{constructor(l,c){super(l,c)}static attributesToDeclare(){return[i].concat(super.attributesToDeclare())}};o(a,"RecOutput");let s=a;return s.init(),s}o(es,"declareRecordOutput");var Qk=bt({PasswordComplexityPolicyFailed:$e({mandatory:!0}),InvalidCredentials:$e({mandatory:!0}),TooManyFailedAttempts:$e({mandatory:!0})}),eF=bt({Success:$e({mandatory:!0}),ChangePasswordFailureReason:Ks(Qk,{mandatory:!0})}),tF=bt({PasswordComplexityPolicyFailed:$e({mandatory:!0}),InvalidVerificationCode:$e({mandatory:!0}),InvalidEmail:$e({mandatory:!0})}),nF=bt({InvalidCredentials:$e({mandatory:!0}),InvalidName:$e({mandatory:!0}),InvalidPhotoURL:$e({mandatory:!0})}),Due=bt({Success:$e({mandatory:!0}),UpdateUserFailureReason:Ks(nF,{mandatory:!0})}),rF=bt({MinimumLength:Jk({mandatory:!0}),UpperCaseLetterRequired:$e({mandatory:!0}),LowerCaseLetterRequired:$e({mandatory:!0}),NumberRequired:$e({mandatory:!0}),SpecialCharacterRequired:$e({mandatory:!0})}),iF=bt({IsValid:$e({mandatory:!0}),MissingMinimumLength:$e({mandatory:!0}),MissingUpperCaseLetter:$e({mandatory:!0}),MissingLowerCaseLetter:$e({mandatory:!0}),MissingNumber:$e({mandatory:!0}),MissingSpecialCharacter:$e({mandatory:!0})}),sF=bt({Success:$e({mandatory:!0}),UserId:Mt({mandatory:!0}),FinishUserRegistrationFailureReason:Ks(tF,{mandatory:!0})}),oF=bt({Email:Rue({mandatory:!0}),Username:Mt({mandatory:!0}),Name:Mt({mandatory:!0}),PhotoURL:Mt({mandatory:!0})}),aF=bt({InvalidCredentials:$e({mandatory:!0}),TooManyFailedLoginAttempts:$e({mandatory:!0})}),uF=bt({Success:$e({mandatory:!0}),UserId:Mt({mandatory:!0}),UserLoginFailureReason:Ks(aF,{mandatory:!0}),RetryAfterSeconds:Jk({mandatory:!0})}),cF=bt({InvalidEmail:$e({mandatory:!0}),InvalidName:$e({mandatory:!0}),UsernameAlreadyExists:$e({mandatory:!0}),UserAlreadyRegistered:$e({mandatory:!0})}),Lue=bt({Success:$e({mandatory:!0}),StartUserRegistrationFailureReason:Ks(cF,{mandatory:!0}),TemporaryPassword:Mt({mandatory:!0}),UserId:Mt({mandatory:!0}),VerificationCode:Mt({mandatory:!0})}),xue=bt({Name:Mt({mandatory:!0}),PhotoURL:Mt({mandatory:!0})}),Gu,FS=(Gu=class extends Ke{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("HasRole","hasRoleOut","hasRole",!0,!1,b.Boolean,()=>Cn(b.Boolean))].concat(super.attributesToDeclare())}},o(Gu,"HasRoleResultRec"),Gu);FS=fc([ia()],FS);var lF=bt({PasswordComplexityPolicyFailed:$e({mandatory:!0}),InvalidVerificationCode:$e({mandatory:!0}),InvalidEmail:$e({mandatory:!0})}),dF=bt({Success:$e({mandatory:!0}),FinishResetPasswordFailureReason:Ks(lF,{mandatory:!0})}),Uue=bt({Success:$e({mandatory:!0}),VerificationCode:Mt({mandatory:!0})}),fF=bt({InvalidVerificationCode:$e()}),hF=bt({Success:$e(),FinishUpdateEmailFailureReason:Ks(fF)}),gF=bt({InvalidEmail:$e({mandatory:!0})}),Mue=bt({Success:$e({mandatory:!0}),VerificationCode:Mt({mandatory:!0}),StartUpdateEmailFailureReason:Ks(gF,{mandatory:!0})}),kue=bt({Id:Yo({mandatory:!0}),Name:Mt({mandatory:!1})},"ENAIRoleEntityRecord"),Fue=bt({Id:Yo({mandatory:!0}),Name:Mt({mandatory:!1})},"ENAIContentTypeEntityRecord"),$ue=bt({ResponseTokens:Yo(),InputTokens:Yo(),TotalTokens:Yo()}),pF=bt({ContentType:Yo({mandatory:!0}),ContentText:Mt(),ContentUrl:Mt(),ContentBinaryData:Pue(),FileFormat:Mt()}),Bue=bt({Content:Nue(pF,{mandatory:!0}),CreatedOn:Oue(),Role:Yo({mandatory:!0}),ActionName:Mt(),ActionParameters:Mt(),ActionId:Mt()}),rI=bt({Key:Mt({mandatory:!0}),Name:Mt({mandatory:!0})}),ev,zu,cc=(zu=class extends Ke{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("FileName","fileNameAttr","FileName",!1,!1,b.Text,()=>Cn(b.Text)),this.attr("FileContent","fileContentAttr","FileContent",!1,!1,b.BinaryData,()=>Cn(b.BinaryData)),this.attr("MimeType","mimeTypeAttr","MimeType",!1,!1,b.Text,()=>Cn(b.Text))].concat(super.attributesToDeclare())}},o(zu,"AttachmentRec"),zu);cc=fc([ia()],cc);var qu,lc=ev=(qu=class extends Ke{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("Attachment","attachmentAttr","Attachment",!1,!1,b.Record,()=>Sr.getData(new cc),cc)].concat(Ke.attributesToDeclare())}},o(qu,"AttachmentRecord"),qu);lc._isAnonymousRecord=!0;lc.fromStructure=function(n){return new ev(new ev.RecordClass({attachmentAttr:Sr.getData(n)}))};lc=ev=fc([ia()],lc);var mC=class mC extends Zu{constructor(e){super(e)}};o(mC,"RLAttachmentList");var tv=mC;tv.itemType=cc;var vC=class vC extends Zu{constructor(e){super(e)}};o(vC,"AttachmentRecordList");var nv=vC;nv.itemType=lc;var Vue=Object.freeze({__proto__:null,AIItemRec:pF,AIMessageRec:Bue,AIModelUsageRec:$ue,get AttachmentRec(){return cc},get AttachmentRecord(){return lc},AttachmentRecordList:nv,ChangePasswordFailureReasonRec:Qk,ChangePasswordResultRec:eF,ENAIContentTypeEntityRecord:Fue,ENAIRoleEntityRecord:kue,ExternalIdentityProviderRec:rI,FinishResetPasswordFailureReasonRec:lF,FinishResetPasswordResultRec:dF,FinishUpdateEmailFailureReasonRec:fF,FinishUpdateEmailResultRec:hF,FinishUserRegistrationFailureReasonRec:tF,FinishUserRegistrationResultRec:sF,get HasRoleResultRec(){return FS},PasswordComplexityPolicyRec:rF,PasswordValidationResultRec:iF,RLAttachmentList:tv,StartResetPasswordResultRec:Uue,StartUpdateEmailFailureReasonRec:gF,StartUpdateEmailResultRec:Mue,StartUserRegistrationFailureReasonRec:cF,StartUserRegistrationResultRec:Lue,UpdateUserFailureReasonRec:nF,UpdateUserResultRec:Due,UserInfoRec:oF,UserLoginFailureReasonRec:aF,UserLoginResultRec:uF,UserUpdateInfoRec:xue}),Od=class Od{static addKey(e){this.cache[e]={components:{}},this.cacheKeys.push(e);let t=this.cacheKeys.length-Od.MaxCacheSize;if(t>0)for(let r=0;r<t;r++)this.removeKey(this.cacheKeys[r])}static removeKey(e){delete this.cache[e],this.cacheKeys.splice(this.cacheKeys.indexOf(e),1)}static save(e,t,r,i){this.cache[e]||this.addKey(e),this.cache[e].components[t]={state:r,customProperties:i}}static load(e,t){let r=Od.loadScreenCache(e);return r?r.components[t]:null}static loadScreenCache(e){return this.cache[e]||void 0}static clear(e){e?this.cache[e]&&this.removeKey(e):(this.cache={},this.cacheKeys=[])}};o(Od,"ScreenStateCache");var ra=Od;ra.MaxCacheSize=20;ra.cache={};ra.cacheKeys=[];var Hue=Object.freeze({__proto__:null,ScreenStateCache:ra}),$S="data-os-finished",jue="ScriptsManager",tm=new Map,rx=!1,Fo=null;function Wue(){tm.clear(),Fo=null}o(Wue,"clearScripts");function mF(n){return n.replace(/.*\//,"").replace(/(.*)__.*/,"$1")}o(mF,"getScriptName");function vF(n,e){let t=mF(n),r=lA(t,void 0,e);r==null||r.setAttribute("code.function",t),r==null||r.setAttribute("outsystems.function.type","REQUIRED_SCRIPT");let i=e==null?void 0:e.getContext().attributes["outsystems.function.key"];i&&(r==null||r.setAttribute("outsystems.function.owner.key",i));let s=e==null?void 0:e.getContext().attributes["code.function"];return s&&(r==null||r.setAttribute("outsystems.function.owner.name",s)),r}o(vF,"createScriptSpan");function iI(n){let{parentSpan:e,dom:t=document}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};vb("Adding script",n),Gue();let r=tm.get(n);if(r)return vb("Script already added",n),r.promise;let i=vF(n,e),s=t.createElement("script");s.async=!1,s.setAttribute("src",n),s.setAttribute($S,"false");let a=new Promise((u,l)=>{let c=o(()=>{s.setAttribute($S,"true"),i==null||i.end()},"onFinish");s.onerror=s.onabort=d=>{c(),l(`Error adding script '${n}' to document '${t.baseURI}'`)},s.onload=d=>{vb("Script added",n),c(),u(d)}});return Fo!=null&&Fo.domElement.parentNode?Fo.domElement.parentNode.insertBefore(s,Fo.domElement.nextSibling):t.head.appendChild(s),i==null||i.activate(),tm.set(n,{promise:a,domElement:s}),Fo=tm.get(n),a}o(iI,"addScript");function vb(n,e){let t=Zd(document.baseURI);ee(jue,`${n} '${e}' : document '${t}'`)}o(vb,"debug");function Gue(){rx||(rx=!0,Object.defineProperty(define,"amd",{get:zue.bind(this,define.amd),configurable:!0}))}o(Gue,"initialize");function zue(n){let e=document.currentScript;if(!(e!=null&&e.hasAttribute($S)))return n}o(zue,"hideRequireDependingOnCaller");function que(n,e){let{parentSpan:t,dom:r=document}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Promise.all(n.map(i=>iI(i,{parentSpan:t,dom:r}).catch(e)))}o(que,"scheduleCustomJsLoading");var Kue=Object.freeze({__proto__:null,addScript:iI,clearScripts:Wue,createScriptSpan:vF,getScriptName:mF,scheduleCustomJsLoading:que});function mn(n,e,t){let r=n instanceof Error?n.message:n,i=`Error in ${e}: ${typeof r=="string"?r:"Unknown error"}`,s=`Error in ${e}`;gc({category:"SystemAction",clientMessage:i,internalMessage:s,errorCode:t!=null?t:"OS-CLRT-00000",errorObj:n instanceof Error?n:void 0})}o(mn,"logSystemActionError");function ht(n,e,t){let r=lA(n,Re.External);r==null||r.setAttribute("code.function",n),r==null||r.setAttribute("outsystems.function.key",e),r==null||r.setAttribute("outsystems.function.owner.name","(System)"),r==null||r.setAttribute("outsystems.function.owner.key","478870b9-2d60-4f73-9eb3-7cd8b994a737"),r==null||r.setAttribute("outsystems.function.type","CLIENT_SYSTEM_ACTION");try{return t(r)}finally{r==null||r.end()}}o(ht,"wrapActionInSpan");var Yue="e72200b8-ab6b-40b2-923d-b25c63640662",Xue=es("FinishUpdateEmailResult",hF);function Jue(n,e){return M(this,arguments,void 0,function(t,r){var i=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sM,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:mn;return(function*(){return ht("FinishUpdateEmail",Yue,()=>M(i,void 0,void 0,function*(){let u=new Xue;if(!t)return u.finishUpdateEmailResultOut.successAttr=!1,u.finishUpdateEmailResultOut.finishUpdateEmailFailureReasonAttr.invalidVerificationCodeAttr=!0,a(new Error("Invalid verification code"),"FinishUpdateEmail"),u;try{let l=yield s({code:t});u.finishUpdateEmailResultOut.successAttr=l.success===!0,u.finishUpdateEmailResultOut.successAttr||(u.finishUpdateEmailResultOut.finishUpdateEmailFailureReasonAttr.invalidVerificationCodeAttr=!0,l.errorMessage&&a(l.errorMessage,"FinishUpdateEmail",l.errorCode))}catch(l){u.finishUpdateEmailResultOut.successAttr=!1,u.finishUpdateEmailResultOut.finishUpdateEmailFailureReasonAttr.invalidVerificationCodeAttr=!0,a(l,"FinishUpdateEmail")}return u}))})()})}o(Jue,"finishUpdateEmail");var Zue=10,Que=new Xi("DuplicatedList","duplicatedListOut"),ece=new Xi("FilteredList","filteredListOut"),tce=new Xi("DistinctList","distinctListOut"),nce=new js("ExternalLoginURL","externalLoginURLOut"),rce=new js("ExternalLogoutURL","externalLogoutURLOut"),ice=new js("IsExternalUser","isExternalUserOut"),yC=class yC{constructor(){}getCurrentRowNumber(e){return 0}setCurrentRowNumber(e,t){}isBeingIterated(e){return!1}registerIterationStart(e){}registerIterationEnd(e){}getIterator(e){return null}clone(){return this}};o(yC,"NullIterationContext");var BS=yC;function sa(n,e,t){if(e.isBeingIterated(n))throw new Error("List is being iterated: "+t+" is not allowed")}o(sa,"validateIterationState");function vc(n,e,t,r){sa(n,e,t);try{return e.registerIterationStart(n),r()}finally{e.registerIterationEnd(n)}}o(vc,"wrapInIteration");function Ir(n){return n?n.iterationContext:new BS}o(Ir,"getIterationContextOrDefault");function sce(n,e,t){return ht("ListAppend","aa5b021e-e937-4b80-a2b3-c95b4339a11d",()=>{try{let r=Ir(t);sa(n,r,"append"),n.append(e)}catch(r){throw mn(r,"listAppend"),r}})}o(sce,"listAppend");function oce(n,e){return ht("ListClear","c534e5bd-7032-4d4c-97e1-abbf1dee3fbf",()=>{try{let t=Ir(e);sa(n,t,"clear"),n.clear(),t.setCurrentRowNumber(n,0)}catch(t){throw mn(t,"listClear"),t}})}o(oce,"listClear");function ace(n,e,t,r){return ht("ListInsert","6c6663d0-5b99-492d-80a5-284def1ceb8c",()=>{try{let i=Ir(r);sa(n,i,"insert"),n.insert(t,e);let s=i.getCurrentRowNumber(n);n.length>1&&t<=s&&i.setCurrentRowNumber(n,s+1)}catch(i){throw mn(i,"listInsert"),i}})}o(ace,"listInsert");function uce(n,e,t){return ht("ListRemove","9a0ebe10-cdee-4774-9179-e3c439bb0d3a",()=>{try{let r=Ir(t);sa(n,r,"remove");let i=n.length===1,s;i&&(s=n.getItem(0)),n.remove(e),i&&(n.emptyListItem=s);let a=r.getCurrentRowNumber(n);e<a?r.setCurrentRowNumber(n,a-1):e===n.length&&r.setCurrentRowNumber(n,Math.max(0,n.length-1))}catch(r){throw mn(r,"listRemove"),r}})}o(uce,"listRemove");function cce(n,e,t){return ht("ListAppendAll","cfed0293-97ed-42f7-8d5a-5a2582ecb1da",()=>{try{let r=Ir(t);sa(n,r,"appendAll"),n.appendAll(e)}catch(r){throw mn(r,"listAppendAll"),r}})}o(cce,"listAppendAll");function lce(n,e){return ht("ListDuplicate","dbe15950-87da-4517-88b4-14c83bbe7d94",()=>{try{let t=Ir(e);sa(n,t,"duplicate");let r=new(Que.getType(n.constructor));return r.duplicatedListOut=n.clone(),r}catch(t){throw mn(t,"listDuplicate"),t}})}o(lce,"listDuplicate");function dce(n,e){return ht("ListDistinct","b54c6849-3ce4-455a-af15-ad7a37c9899f",()=>{try{let t=Ir(e);return vc(n,t,"distinct",()=>{let r=new(tce.getType(n.constructor));return r.distinctListOut=n.distinct(),r})}catch(t){throw mn(t,"listDistinct"),t}})}o(dce,"listDistinct");var _C=class _C extends Ke{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("Result","resultOut","resultOut",!0,!0,b.Boolean,()=>{})].concat(super.attributesToDeclare())}};o(_C,"ListOperationBooleanResultRecord");var dc=_C;dc._constructor=(()=>{dc.init()})();function fce(n,e,t){return ht("ListAll","22f2c626-25d5-4457-bbe7-94261470862e",()=>{try{let r=Ir(t);return vc(n,r,"all",()=>{let i=new dc;return i.resultOut=n.all(e),i})}catch(r){throw mn(r,"listAll"),r}})}o(fce,"listAll");function hce(n,e,t){return ht("ListAny","d562e8a9-e680-48d3-8274-1e7e5437e4f8",()=>{try{let r=Ir(t);return vc(n,r,"any",()=>{let i=new dc;return i.resultOut=n.any(e),i})}catch(r){throw mn(r,"listAny"),r}})}o(hce,"listAny");function gce(n,e,t){return ht("ListFilter","5137c152-4d59-48f6-b86e-b6b8e7b1e160",()=>{try{let r=Ir(t);return vc(n,r,"filter",()=>{let i=new(ece.getType(n.constructor));return i.filteredListOut=n.filter(e),i})}catch(r){throw mn(r,"listFilter"),r}})}o(gce,"listFilter");function pce(n,e,t,r){return ht("ListSort","c7db4ad0-51cc-44e5-aa36-50546face388",()=>{try{let i=Ir(r);return vc(n,i,"sort",()=>{n.sort(e,t)})}catch(i){throw mn(i,"listSort"),i}})}o(pce,"listSort");var wC=class wC extends Ke{constructor(e,t){super(e,t)}static attributesToDeclare(){return[this.attr("Position","positionOut","positionOut",!0,!0,b.Integer,()=>{})].concat(super.attributesToDeclare())}};o(wC,"ListOperationNumberResultRecord");var qd=wC;qd._constructor=(()=>{qd.init()})();function mce(n,e,t){return ht("ListIndexOf","763a5d96-a42e-49b6-8129-b46525912667",()=>{try{let r=Ir(t);return vc(n,r,"indexOf",()=>{let i=new qd;return i.positionOut=n.indexOf(e),i})}catch(r){throw mn(r,"listIndexOf"),r}})}o(mce,"listIndexOf");function vce(n,e){return ht("RequireScript","388d4655-dd1c-4c5c-8d46-f420d0fe02a1",t=>{try{let r=Ku.getVersionedUrl(n);return iI(r,{parentSpan:t})}catch(r){throw mn(r,"requireScript"),r}})}o(vce,"requireScript");function yce(n,e,t){return ht("LogMessage","8c126211-5b78-442b-8a4d-fc2f72d10ef2",()=>{nr(e,n,Re.Client)})}o(yce,"logMessage");function _ce(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pe;return ht("SetCurrentLocale","f2708145-60c0-49dc-9a1a-8b0f1fae5dce",()=>{try{let r=t.resolve(X.LocaleService);if(!r){let i=new Error("Undefined locale service: can't set current locale.");throw mn(i,"setCurrentLocale"),i}r.setCurrentLocale(n)}catch(r){throw mn(r,"setCurrentLocale"),r}})}o(_ce,"setCurrentLocale");function wce(n,e,t){return M(this,arguments,void 0,function(r,i,s){var a=this;let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:GU,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:pe.resolve(X.AuthConfigsManager);return(function*(){return ht("GetExternalLoginURL","da6adf2c-ff63-4d63-a90e-a58819b503eb",()=>M(a,void 0,void 0,function*(){let c=r===""?void 0:r,d=new(nce.getType(b.Text)),[f]=l.readAuthConfigs(i);if(!f){let h=new Error(`The given identity provider '${i}' does not exist.`);throw mn(h,"getExternalLoginURL"),h}return d.externalLoginURLOut=yield u({callbackUrl:c,authConfigs:i?Object.assign(Object.assign({},f.configs),{identityProvider:f.kc_hint}):void 0}),d}))})()})}o(wce,"getExternalLoginURL");var Ece=es("UserLoginResult",uF);function Tce(n,e,t,r){return M(this,arguments,void 0,function(i,s,a,u){var l=this;let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:qU;return(function*(){return ht("Login","477c9f29-36c5-42a9-b910-3e5d70c7427e",()=>M(l,void 0,void 0,function*(){let d=new Ece;try{d.userLoginResultOut.userIdAttr=yield c({username:i,password:s,persistLogin:a}),d.userLoginResultOut.successAttr=!0}catch(f){let h=f;if(d.userLoginResultOut.userIdAttr="",d.userLoginResultOut.successAttr=!1,d.userLoginResultOut.retryAfterSecondsAttr=Zue,h.name===Qe.InvalidCredentials)d.userLoginResultOut.userLoginFailureReasonAttr.invalidCredentialsAttr=!0;else if(h.name===Qe.TooManyFailedAttempts)d.userLoginResultOut.userLoginFailureReasonAttr.tooManyFailedLoginAttemptsAttr=!0;else throw bce(h)}return d}))})()})}o(Tce,"login");function bce(n){let e=Ki(n),t=Zd(n.message);switch(De("Login SystemAction",t,n.errorCode,n,Re.Internal),n.errorCode){case"OS-CLRT-40109":return new me.InvalidLoginException("Identity provider configurations missing.",e);case"OS-ID-BIZ-40021":return new me.InvalidLoginException("Error retrieving token from identity provider.",e);default:return new me.InvalidLoginException("Login Failed.",e)}}o(bce,"processLoginException");function Sce(n){return M(this,arguments,void 0,function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:KU;return(function*(){return ht("Logout","41ac3c1a-dffd-4b4f-acc0-fa439a975601",()=>t())})()})}o(Sce,"logout");function Ace(n,e){return M(this,arguments,void 0,function(t,r){var i=this;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:YU;return(function*(){return ht("GetExternalLogoutURL","c5bd52b6-817c-4268-9d9b-7d2bfe7228fe",()=>M(i,void 0,void 0,function*(){let a=t===""?void 0:t,u=new(rce.getType(b.Text));return u.externalLogoutURLOut=yield s({callbackUrl:a}),u}))})()})}o(Ace,"getExternalLogoutURL");var Ice=es("PasswordComplexityPolicy",rF);function Cce(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ZU;return ht("GetPasswordComplexityPolicy","dc6941b3-7f13-4266-92a7-afc438918f3f",()=>{let t=new Ice,r=e();return t.passwordComplexityPolicyOut.minimumLengthAttr=r.minimumLength,t.passwordComplexityPolicyOut.lowerCaseLetterRequiredAttr=r.lowerCaseLetterRequired,t.passwordComplexityPolicyOut.upperCaseLetterRequiredAttr=r.upperCaseLetterRequired,t.passwordComplexityPolicyOut.numberRequiredAttr=r.numberRequired,t.passwordComplexityPolicyOut.specialCharacterRequiredAttr=r.specialCharacterRequired,t})}o(Cce,"getPasswordComplexityPolicy");var Rce=es("PasswordValidationResult",iF);function Oce(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:QU;return ht("ValidatePasswordComplexity","e11739ec-bce8-4f6c-a952-886e102ecac5",()=>{let r=new Rce,i=t({password:n});return r.passwordValidationResultOut.isValidAttr=i.isValid,r.passwordValidationResultOut.missingMinimumLengthAttr=i.missingMinimumLength,r.passwordValidationResultOut.missingUpperCaseLetterAttr=i.missingUpperCaseLetter,r.passwordValidationResultOut.missingLowerCaseLetterAttr=i.missingLowerCaseLetter,r.passwordValidationResultOut.missingNumberAttr=i.missingNumber,r.passwordValidationResultOut.missingSpecialCharacterAttr=i.missingSpecialCharacter,r})}o(Oce,"validatePasswordComplexity");var Pce=es("FinishResetPasswordResult",dF);function Nce(n,e,t,r){return M(this,arguments,void 0,function(i,s,a,u){var l=this;let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:eM;return(function*(){return ht("FinishResetPassword","4c9a2d55-1e48-4a73-b6dd-197773173c84",()=>M(l,void 0,void 0,function*(){let d=new Pce;if(!s)return d.finishResetPasswordResultOut.successAttr=!1,d.finishResetPasswordResultOut.finishResetPasswordFailureReasonAttr.invalidVerificationCodeAttr=!0,d;if(!i)return d.finishResetPasswordResultOut.successAttr=!1,d.finishResetPasswordResultOut.finishResetPasswordFailureReasonAttr.invalidEmailAttr=!0,d;try{yield c({username:i,resetToken:s,newPassword:a}),d.finishResetPasswordResultOut.successAttr=!0}catch(f){let h=f;d.finishResetPasswordResultOut.successAttr=!1;let g=d.finishResetPasswordResultOut.finishResetPasswordFailureReasonAttr;h.name===Qe.PasswordComplexityPolicyFailed?g.passwordComplexityPolicyFailedAttr=!0:h.name===Qe.InvalidToken?g.invalidVerificationCodeAttr=!0:h.name===Qe.InvalidCredentials&&(g.invalidEmailAttr=!0)}return d}))})()})}o(Nce,"finishResetPassword");function Dce(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tM;return ht("IsExternalUser","5365bc0e-70f6-4e7f-90bf-6c6e12da81bb",()=>{let t=new(ice.getType(b.Boolean));return t.isExternalUserOut=e(),t})}o(Dce,"isExternalUser");var Lce=es("RegistrationResult",sF);function xce(n,e,t,r){return M(this,arguments,void 0,function(i,s,a,u){var l=this;let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:nM,d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Ko;return(function*(){return ht("FinishUserRegistration","44a8850b-2e2d-4f19-9ea4-e5f40a050b5b",()=>M(l,void 0,void 0,function*(){let f=new Lce;if(!a)return f.registrationResultOut.successAttr=!1,f.registrationResultOut.finishUserRegistrationFailureReasonAttr.invalidVerificationCodeAttr=!0,f;if(!i)return f.registrationResultOut.successAttr=!1,f.registrationResultOut.finishUserRegistrationFailureReasonAttr.invalidEmailAttr=!0,f;try{yield c({username:i,password:s,temporaryPassword:a}),f.registrationResultOut.successAttr=!0,f.registrationResultOut.userIdAttr=d()}catch(h){let g=h;f.registrationResultOut.successAttr=!1,g.name===Qe.PasswordComplexityPolicyFailed?f.registrationResultOut.finishUserRegistrationFailureReasonAttr.passwordComplexityPolicyFailedAttr=!0:g.name===Qe.InvalidToken?f.registrationResultOut.finishUserRegistrationFailureReasonAttr.invalidVerificationCodeAttr=!0:g.name===Qe.InvalidCredentials&&(f.registrationResultOut.finishUserRegistrationFailureReasonAttr.invalidEmailAttr=!0)}return f}))})()})}o(xce,"finishUserRegistration");var Uce=es("ChangePasswordResult",eF);function Mce(n,e,t,r){return M(this,arguments,void 0,function(i,s,a,u){var l=this;let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:rM;return(function*(){return ht("ChangePassword","b17b5077-e564-4145-b640-9fcb359cbb07",()=>M(l,void 0,void 0,function*(){let d=new Uce;try{yield c({username:i,oldPassword:a,newPassword:s}),d.changePasswordResultOut.successAttr=!0}catch(f){let h=f;d.changePasswordResultOut.successAttr=!1,h.name===Qe.PasswordComplexityPolicyFailed?d.changePasswordResultOut.changePasswordFailureReasonAttr.passwordComplexityPolicyFailedAttr=!0:h.name===Qe.InvalidCredentials?d.changePasswordResultOut.changePasswordFailureReasonAttr.invalidCredentialsAttr=!0:h.name===Qe.TooManyFailedAttempts&&(d.changePasswordResultOut.changePasswordFailureReasonAttr.tooManyFailedAttemptsAttr=!0)}return d}))})()})}o(Mce,"changePassword");var kce=es("UserInfo",oF);function Fce(n){return M(this,arguments,void 0,function(e){var t=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:RA;return(function*(){return ht("GetUserProfile","a4d7f4ef-399a-4294-8ab4-cf1437699fe3",()=>M(t,void 0,void 0,function*(){let i=new kce,s=yield r();return i.userInfoOut.emailAttr=s.email,i.userInfoOut.usernameAttr=s.username,i.userInfoOut.nameAttr=s.name,i.userInfoOut.photoURLAttr=s.pictureUrl,i}))})()})}o(Fce,"getUserProfile");var yF=Zk(rI),$ce=es("ExternalIdentityProviders",yF);function Bce(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pe.resolve(X.AuthConfigsManager),t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nI;return ht("GetExternalIdentityProviders","de70fbce-fe4c-4c40-8764-797d4df2da8b",()=>{let r=new yF,i=e.readAuthConfigs(void 0,{suppressExternalWarnings:!0});for(let a of i)if(a.type!==mc){let u=new rI;u.keyAttr=a.kc_hint,u.nameAttr=a.type,r.append(u)}let s=new $ce;return s.externalIdentityProvidersOut=r,s})}o(Bce,"getExternalIdentityProviders");var Vce=new js("IsActive","isActiveOut");function Hce(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pe.resolve(X.AuthConfigsManager);return ht("IsBuiltinIdentityProviderActive","18764866-65bd-44d0-b166-439b5eba5112",()=>{let t=e.readAuthConfigs(mc,{suppressExternalWarnings:!0}).length>0,r=new(Vce.getType(b.Boolean));return r.isActiveOut=t,r})}o(Hce,"isBuiltinIdentityProviderActive");var jce=Object.freeze({__proto__:null,changePassword:Mce,finishResetPassword:Nce,finishUpdateEmail:Jue,finishUserRegistration:xce,getExternalIdentityProviders:Bce,getExternalLoginURL:wce,getExternalLogoutURL:Ace,getPasswordComplexityPolicy:Cce,getUserProfile:Fce,isBuiltinIdentityProviderActive:Hce,isExternalUser:Dce,listAll:fce,listAny:hce,listAppend:sce,listAppendAll:cce,listClear:oce,listDistinct:dce,listDuplicate:lce,listFilter:gce,listIndexOf:mce,listInsert:ace,listRemove:uce,listSort:pce,logMessage:yce,login:Tce,logout:Sce,requireScript:vce,setCurrentLocale:_ce,validatePasswordComplexity:Oce}),EC=class EC{static safeParseInt(e){let t=e;return e&&!isNaN(Number(e))&&(t=parseInt(e,10)),t}};o(EC,"StringUtils");var VS=EC,Wce=Object.freeze({__proto__:null,StringUtils:VS}),Gce=Object.freeze({__proto__:null}),Wi;(function(n){n[n.Normal=0]="Normal",n[n.AtFunctionReturn=1]="AtFunctionReturn",n[n.BetweenAssignments=2]="BetweenAssignments"})(Wi||(Wi={}));var Su={CallContextId:"ccid",DebugStop:"dbg-stop",DebugBreakpointId:"dbg-bkp"},jt;(function(n){n[n.StepOver=0]="StepOver",n[n.StepInto=1]="StepInto",n[n.StepOut=2]="StepOut",n[n.Continue=3]="Continue",n[n.ContinueToHere=4]="ContinueToHere",n[n.None=5]="None"})(jt||(jt={}));var Gi;(function(n){n[n.Unprepared=0]="Unprepared",n[n.WaitingForClient=1]="WaitingForClient",n[n.Prepared=2]="Prepared"})(Gi||(Gi={}));var Bi=class Bi{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.moduleKey=e,this.objectKey=t,this.compoundKey=r,this.debuggerHash=i}init(e){if(!e)return;let t=e.split(Bi.SeparatorChar);this.moduleKey=t[0],this.objectKey=t[1],this.compoundKey=t.length>2&&t[2]?t[2]:null,this.debuggerHash=t.length>3&&t[3]?t[3]:null}static parse(e){if(!e)return null;try{let t=new Bi;return t.init(e),t}catch(t){return null}}equals(e){return e?e.moduleKey===this.moduleKey&&e.objectKey===this.objectKey:!1}toString(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;var t;return e?this.moduleKey+Bi.SeparatorChar+(this.objectKey||"")+Bi.SeparatorChar+(this.compoundKey||"")+Bi.SeparatorChar+(this.debuggerHash||""):this.moduleKey+Bi.SeparatorChar+((t=this.objectKey)!==null&&t!==void 0?t:"")}};o(Bi,"BreakpointId");var yr=Bi;yr.SeparatorChar=":";var TC=class TC{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jt.None,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;this._commandType=e,this._stackLevel=t}resetCommandState(){this._commandType=jt.None,this._stackLevel=-1}get commandType(){return this._commandType}set commandType(e){this._commandType=e}get stackLevel(){return this._stackLevel}set stackLevel(e){this._stackLevel=e}};o(TC,"DebugCommand");var rv=TC,bC=class bC{constructor(e,t,r,i,s){this.elementKey=e,this.moduleName=t,this.elementName=r,this.elementType=i,this.varBag=s,this.currentBreakpoint=null,this.previousBreakpoint=null,this.breakpointType=null,this.extraInfo=null,this.functionLeft=""}refreshLocalState(e,t,r){this.previousBreakpoint=this.currentBreakpoint,this.currentBreakpoint=e,this.breakpointType=t,this.extraInfo=r}};o(bC,"LocalState");var iv=bC,SC=class SC{constructor(){this.callStack=new Array,this._command=new rv,this._continueToHereBreakpoint=void 0,this._stopImmediately=!1}pushCallOnStack(e,t,r,i,s){this.callStack.push(new iv(e,t,r,i,s))}popCallOnStack(){let e=this.callStack.pop(),t=this.peekLastCallOnStack();return this.callStack.length>0&&t&&(t.functionLeft=e==null?void 0:e.elementName),e}peekLastCallOnStack(){if(!(this.callStack.length<=0))return this.callStack[this.callStack.length-1]}getCallOnStack(e){if(e<0||e>=this.callStack.length){je("The received stack level is not valid. Received '"+e+"', current thread stack length '"+this.callStack.length+"'");return}return this.callStack[e]}refreshLastCallOnStack(e,t,r){var i;(i=this.peekLastCallOnStack())===null||i===void 0||i.refreshLocalState(e,t,r)}set command(e){this._command=e}get command(){return this._command}get stackLevel(){return this.callStack.length}get stopImmediately(){return this._stopImmediately}set stopImmediately(e){this._stopImmediately=e||!1}get continueToBreakpoint(){return this._continueToHereBreakpoint}set continueToBreakpoint(e){this._continueToHereBreakpoint=e}get threadStartName(){return this._threadStartName||""}set threadStartName(e){this._threadStartName=e}getThreadStack(){return this.callStack.map(e=>{var t;return{currentBreakpoint:e.currentBreakpoint!==null&&e.currentBreakpoint!==void 0?e.currentBreakpoint.toString(!0):null,previousBreakpoint:e.previousBreakpoint!==null&&e.previousBreakpoint!==void 0?e.previousBreakpoint.toString(!0):null,breakpointType:(t=e.breakpointType)!==null&&t!==void 0?t:Wi.Normal,extraInfo:e.extraInfo,elementKey:e.elementKey!==null&&e.elementKey!==void 0?e.elementKey.toString(!0):null,elementName:e.elementName,elementType:e.elementType,functionLeft:e.functionLeft,moduleName:e.moduleName}})}};o(SC,"ThreadState");var sv=SC;function je(n,e){ee("Debugger",n,e)}o(je,"debugMessage");var zce=/^([0-9]+)$/,ix=/\[[^\]]*[^0-9\]]+[^\]]*\]/,qce="$return",AC=class AC{constructor(){this.isInSession=!1,this.breakpoints=new Map,this.callContexts=new Map,this.initializationStatus=Gi.Unprepared,this._pauseOnAllExceptions=!1,this.exceptionsMap=new Map,this.pausedOnAnException=!1,this.allowedModules=new Map}get BreakpointType(){return Wi}isPausedOnException(){return this.pausedOnAnException}get version(){return 3}isSessionActive(){return this.isInSession}startSession(){if(this.isInSession){je("Debugger is already in session");return}this.pendingInitializationHandler&&(this.initializationStatus=Gi.Prepared,this.pendingInitializationHandler(),this.pendingInitializationHandler=null),this.isInSession=!0;let e=pe.resolve(X.DebuggerHttpClient);e&&pe.register(X.HttpClient,()=>e)}endSession(){if(!this.isInSession){je("Can't end an nonexisting session");return}this.isInSession=!1;let e=pe.resolve(X.NonDebuggerHttpClient);e&&pe.register(X.HttpClient,()=>e)}addBreakpoint(e){if(yr.parse(e)===null){je(`Cannot convert '${e}' to a BreakpointId`);return}if(this.breakpoints.get(e)){je(`Breakpoint with id '${e}' already registered`);return}this.breakpoints.set(e,!0)}addBreakpoints(e){e.forEach(t=>this.addBreakpoint(t))}allowBreakpointsFromModule(e){if(this.allowedModules.get(e)){je(`Application with key '${e}' is already allowed`);return}this.allowedModules.set(e,!0)}removeBreakpoint(e){if(yr.parse(e)===null){je(`Cannot convert '${e}' to a BreakpointId`);return}this.breakpoints.delete(e)||je(`Breakpoint with id '${e}'  isn't registered`)}clearBreakpoints(){this.breakpoints.clear()}push(e,t,r,i,s,a){if(!this.isInSession)return;let u=yr.parse(e);if(!u){je(`Error when parsing breakpointId '${e}'`);return}let l=this.callContexts.get(s);l||(l=new sv,this.callContexts.set(s,l)),l.pushCallOnStack(u,t,r,i,a)}pop(e,t){if(!this.isInSession)return;let r=yr.parse(e);if(!r){je(`Error when parsing breakpointId '${e}'`);return}let i=this.callContexts.get(t);if(!i){je(`There is no action to end to callContextId '${t.toString()}'`);return}let s=i.peekLastCallOnStack();if(!(s!=null&&s.elementKey.equals(r))){je(`Action to end didn't match to current running action. Running action key: '${s==null?void 0:s.elementKey.toString()}', tried to end: '${r.toString()}'`);return}i.popCallOnStack(),i.stackLevel<=0&&(this.callContexts.delete(t),this.exceptionsMap.delete(t))}stepInto(e){this.fillCommandByCallContextId(e,jt.StepInto)}stepOver(e){this.fillCommandByCallContextId(e,jt.StepOver)}stepOut(e){this.fillCommandByCallContextId(e,jt.StepOut)}continue(e){this.fillCommandByCallContextId(e,jt.Continue)}continueToHere(e,t){let r=yr.parse(e);if(!r){je(`Error when parsing breakpointId '${e}'`);return}this.fillCommandByCallContextId(t,jt.ContinueToHere);let i=this.callContexts.get(t);i&&(i.continueToBreakpoint=r)}pauseOnAllExceptions(e){this._pauseOnAllExceptions=e}fillCommandByCallContextId(e,t){if(!this.isInSession){je("Cannot preform debug actions out of a session context");return}let r=this.callContexts.get(e);if(!r){je(`No match for callContextId '${e}'`);return}r.command.commandType=t,r.command.stackLevel=r.stackLevel}handleFunctionCall(e,t,r){var i;let s=e();if(!this.isInSession)return s;let a=this.callContexts.get(r);if(!a)return je(`There is no callContext registered with Id '${r}'`),s;let u=a.getCallOnStack(a.stackLevel-1),l=(i=u==null?void 0:u.currentBreakpoint)!==null&&i!==void 0?i:u==null?void 0:u.elementKey;return l&&this.handleBreakpoint(l.toString(!0),r,Wi.AtFunctionReturn,Kd.to(s,u==null?void 0:u.varBag.callContext,null,null,t)),s}handleBreakpoint(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wi.Normal,i=arguments.length>3?arguments[3]:void 0;if(!this.isInSession)return!0;let s=yr.parse(e);if(!s)return je(`Error when parsing breakpointId '${e}'`),!0;let a=this.callContexts.get(t);if(!a)return je(`Trying to handle breakpoint with id '${e}', 
                but there is no callContext registered with Id '${t}'`),!0;if(a.refreshLastCallOnStack(s,r,i),!this.allowedModules.get(s.moduleKey))return ee("Debugger",`Skipping breakpoint '${e}' because breakpoints from app with key '${s.moduleKey}' are to be ignored.`),!0;if(a.stopImmediately||this.breakpoints.get(e)&&a.command.commandType!==jt.ContinueToHere&&r===Wi.Normal)return a.stopImmediately=!1,this.resetStateAndCallDebugger(a,t),!0;switch(a.command.commandType){case jt.StepInto:this.resetStateAndCallDebugger(a,t);break;case jt.StepOut:a.stackLevel<a.command.stackLevel&&this.resetStateAndCallDebugger(a,t);break;case jt.StepOver:a.stackLevel<=a.command.stackLevel&&r===Wi.Normal&&this.resetStateAndCallDebugger(a,t);break;case jt.ContinueToHere:s.equals(a.continueToBreakpoint)&&r===Wi.Normal&&(a.continueToBreakpoint=void 0,this.resetStateAndCallDebugger(a,t));break}return!0}resetStateAndCallDebugger(e,t){e.command.resetCommandState(),this.callDebugger(t)}handleException(e,t){if(!this.isInSession||sA(e))return;let r=this.callContexts.get(t),i=Bs(e);if(!r){je(`Trying to handle Exception with message '${i}', but there is no callContext registered with Id '${t}'`,Re.Client);return}let s=this.exceptionsMap.get(t);if(e!==s&&(this.exceptionsMap.set(t,e),this._pauseOnAllExceptions)){this.pausedOnAnException=!0;try{this.callDebugger(t)}finally{this.pausedOnAnException=!1}}}getExceptionMessage(e){if(!this.getThreadState(e))return;let r=this.exceptionsMap.get(e);if(r===void 0){je(`There is no Exception associated to callContext with Id '${e}'`);return}return Bs(r)}getThreadState(e){if(!this.isInSession){je("Cannot perform debug actions out of a session context");return}let t=this.callContexts.get(e);if(!t){je(`There is no callContext registered with Id '${e}'`);return}return t}getThreadStack(e){let t=this.getThreadState(e);if(t)return t.getThreadStack()}parse(e){return yr.parse(e)}initialize(e){switch(this.initializationStatus){case Gi.WaitingForClient:return Promise.reject("Debugger already waiting for client initialization");case Gi.Prepared:return Promise.reject("Debugger already initialized")}return e===void 0&&(e=!!AU("_waitForClient")),pe.register(X.Debugger,()=>this),new Promise((t,r)=>{e&&!this.isInSession?(this.initializationStatus=Gi.WaitingForClient,this.pendingInitializationHandler=t):(this.initializationStatus=Gi.Prepared,t())})}registerMetaInfo(e){this.metaInfoMap||(this.metaInfoMap=new Map);for(let t in e)e.hasOwnProperty(t)&&!this.metaInfoMap.get(t)&&this.metaInfoMap.set(t,e[t])}getRuntimeExpression(e,t){if(!this.metaInfoMap){je("MetaInfo not registered yet.");return}let r=this.metaInfoMap.get(e);if(!r){je(`There is no mapping defined for variable with the key '${e}', that was evaluated in the context of the action with the key '${t}'.`);return}return r}innerEvaluateVariable(e,t,r,i){let s=this.getThreadState(e);if(!s)return;let a=s.getCallOnStack(t);if(!a)return;let u=this.getRuntimeExpression(i,r);if(!u){je(`Failed to get runtime variable expression. CallContextId '${e}', stackLevel '${t}'`);return}let l;try{l=u.getter(a.varBag,a.varBag.idService)}catch(c){}finally{l===void 0&&je(`Couldn't evaluate variable with key '${i}', that was evaluated in the context of the action with key: '${r}' stackLevel: '${t}' callContextId: '${e}'.`)}return l}splitPath(e){if(e!=null&&!ix.test(e))return e?e.split(/[.\[\]]/).filter(t=>t!=="").slice(1):void 0}evaluateVariable(e,t,r,i,s,a){if(i===""&&s===qce){let h=this.getThreadState(e);if(!h)return;let g=h.getCallOnStack(t);return g?g.extraInfo:void 0}let u=this.innerEvaluateVariable(e,t,r,i);if(u===void 0||ix.test(s))return;let l=this.callContexts.get(e),c=l==null?void 0:l.getCallOnStack(t),d=this.getRuntimeExpression(i,r),f=this.splitPath(s);return Kd.to(u,c==null?void 0:c.varBag.callContext,f,a,d==null?void 0:d.dataType)}getRequestHeaders(e){if(!this.isInSession)return;let t=this.callContexts.get(e);if(!t){je(`There is no callContext registered with Id '${e}'`);return}let r={};r[Su.CallContextId]=String(e);let i=t.command;return i&&i.commandType===jt.StepInto?r[Su.DebugStop]="true":t.continueToBreakpoint&&i.commandType===jt.ContinueToHere&&(r[Su.DebugBreakpointId]=String(t.continueToBreakpoint)),r}lookupCaseInsensitive(e,t){let r=t.toLowerCase(),i=Object.keys(e).find(s=>s.toLowerCase()===r);return i?e[i]:void 0}processResponseHeaders(e,t){if(!this.isInSession)return;let r=this.getThreadState(e);if(t&&r)if((this.lookupCaseInsensitive(t,Su.DebugStop)||"").toLowerCase()==="true")r.stopImmediately=!0;else if(this.lookupCaseInsensitive(t,Su.DebugBreakpointId)){let i=this.lookupCaseInsensitive(t,Su.DebugBreakpointId);r.command.commandType=jt.ContinueToHere,r.continueToBreakpoint=yr.parse(i)}else r.command.commandType===jt.StepInto&&(r.command.commandType=jt.Continue)}getThreadStartName(e){var t;return(t=this.getThreadState(e))===null||t===void 0?void 0:t.threadStartName}setThreadStartName(e,t){if(!this.isInSession)return;if(!this.callContexts){je("No call context dictionary initialized yet");return}if(!this.callContexts.get(e)){je("No thread state for this context id");return}let r=this.callContexts.get(e);r&&(r.threadStartName=t)}};o(AC,"DebuggerBase");var ov=AC,IC=class IC extends ov{callDebugger(e){let t=Jo(),r=t.callContextId;try{t.callContextId=e;debugger}finally{t.callContextId=r}}};o(IC,"RuntimeDebugger");var HS=IC,Kd;(function(n){let e="DataFetchStatus",t="IsDataFetched",r="HasFetchError";function i(f,h,g,p,m){let w=f.getAttributes();if(g&&g.length>0){let _=g[0];if(g=g.slice(1),f instanceof Gs){let T=f;if(_==="HasFetchError")return l(T.hasFetchErrorAttr,h,g,p,b.Boolean);if(_==="IsDataFetched")return l(T.isDataFetchedAttr,h,g,p,b.Boolean)}if(w=w.filter(T=>T.name===_),w.length===0){je(`No attribute matching the given path '${_}'.`);return}else{let T=w[0];return l(f[T.attrName],h,g,p,T.dataType)}}if(p===0)return d(null,b.Record);let E={};for(let _ of w)E[_.name]=l(f[_.attrName],h,g,m,_.dataType);if(f instanceof Gs){let _=f;delete E[e],E[t]=l(_.isDataFetchedAttr,h,g,p,b.Boolean),E[r]=l(_.hasFetchErrorAttr,h,g,p,b.Boolean)}return d(E,b.Record)}o(i,"genericRecordTo");function s(f,h,g,p,m,w){let E=m[0];if(m=m.slice(1),E==="CurrentRowNumber")return l(g,p,m,w,b.Integer);if(E==="Current")return l(f.isEmpty?f.emptyListItem:f.getItem(g),p,m,w,h);if(E==="Empty")return l(f.isEmpty,p,m,w,b.Boolean);if(E==="Length")return l(f.length,p,m,w,b.Integer);{let _=zce.exec(E);if(_){let T=parseInt(_[1],10);if(T>=0&&T<f.length)return l(f.getItem(T),p,m,w,h);je(`Index out of bounds '${T}'.`);return}else{je(`No '${E}' attribute on Type 'List'.`);return}}}o(s,"listPathTo");function a(f,h,g,p,m){var w,E;let _=(E=(w=f.constructor).getItemType)===null||E===void 0?void 0:E.call(w),R=h.iterationContext.getCurrentRowNumber(f);if(g&&g.length>0)return s(f,_,R,h,g,p);if(p===0)return d(null,b.RecordList);let D={CurrentRowNumber:l(R,h,g,m,b.Integer),Current:l(f.isEmpty?f.emptyListItem:f.getItem(R),h,g,m,_),Empty:l(f.isEmpty,h,g,m,b.Boolean),Length:l(f.length,h,g,m,b.Integer)};for(let B=0;B<f.length;B++)D["["+B+"]"]=l(f.getItem(B),h,g,m,_);return d(D,b.RecordList)}o(a,"listTo");function u(f,h,g,p,m){if(p===0)return d(null,b.Record);if(g&&g.length>0){let E=g[0];if(g=g.slice(1),E==="Id")return l(f.idAttr,h,g,p,b.Text);if(f instanceof oc){if(E==="Valid")return l(f.validAttr,h,g,p,b.Boolean);if(E==="ValidationMessage")return l(f.validationMessageAttr,h,g,p,b.Text)}je(`No attribute matching the given path '${E}'.`);return}let w={Id:l(f.idAttr,h,g,m,b.Text)};return f instanceof oc&&(w.Valid=l(f.validAttr,h,g,m,b.Boolean),w.ValidationMessage=l(f.validationMessageAttr,h,g,m,b.Text)),d(w,b.Record)}o(u,"widgetRecordTo");function l(f,h,g){let p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,m=arguments.length>4?arguments[4]:void 0,w=Math.max(-1,(p!=null?p:0)-1);if(f instanceof Ke)return i(f,h,g,p,w);if(f instanceof Yi)return a(f,h,g,p,w);if(f instanceof Ji)return u(f,h,g,p,w);if(m!==void 0){if(g&&g.length>0){je(`Cannot perform a inner evaluation to a Basic Type. Trying to evaluate '${g[0]}' for a variable of type '${b[m]}'.`);return}return c(f,m)}else{je(`Variable Type didn't match any case. ${typeof f}`);return}}o(l,"to"),n.to=l;function c(f,h){switch(h){case b.Integer:case b.Text:case b.PhoneNumber:case b.Email:case b.Boolean:return d(f,h);case b.LongInteger:case b.Decimal:case b.Currency:return d(f.toString(),h);case b.Date:return d(f.toISODate(),h);case b.DateTime:return d(f.toString(),h);case b.Time:return d(f.toISOTime(),h);case b.BinaryData:return d(f.length,h);case b.Object:return d(null,h);case b.Record:je("Record is not a basic type");return;case b.RecordList:je("RecordList is not a basic type");return;default:je(`Unknown data type ${h}`);return}}o(c,"basicTypeToDebuggerData");function d(f,h){return f===void 0&&(f=null),{value:f,type:b[h]}}o(d,"buildValueTypeObject")})(Kd||(Kd={}));var _F="6.54.6";iA("client-runtime-core",_F);var Kce=typeof window!="undefined"?window:global;Kce.OutSystemsDebugger=new HS;var Yce=Object.freeze({__proto__:null,BreakpointId:yr,get CommandType(){return jt},DebugCommand:rv,DebuggerBase:ov,get DebuggerDataConverter(){return Kd},get InitializationStatus(){return Gi},LocalState:iv,ThreadState:sv,Version:_F}),Xce=Object.freeze({__proto__:null}),Jce=Object.freeze({__proto__:null}),sx="en-US",ox="-",yb=!1,Zce="Locale Service",Qce="CurrentLocale",ele=/^[A-z]{2,3}([_-]([A-z]{4}|[\d]{3}))?([_-]([A-z]{2}|[\d]{3}))?$/,CC=class CC{constructor(e){this.currentLocaleStorage=new Er(on.Persistent,Qce,void 0,fA),this.publisher=new Dd(Zce,e)}subscribe(e){return this.publisher.subscribe(e)}unsubscribe(e){return this.publisher.unsubscribe(e)}getCurrentLocale(){var e,t;return(t=(e=this.currentLocaleStorage.get())===null||e===void 0?void 0:e.localeCode)!==null&&t!==void 0?t:sx}setCurrentLocale(e){let t=hc(X.TranslationsService);if(t&&t.clear(),this.isValidLocale(e)){let i={localeCode:e,isRTL:yb};this.currentLocaleStorage.set(i)}else throw new Error(`Value '${e}' isn't a valid locale.`);let r=this.getCurrentLocaleFamily();this.publisher.publish({localeCode:e,localeFamily:r})}getCurrentLocaleFamily(){var e;let t=[],r=(e=this.getCurrentLocale())!==null&&e!==void 0?e:"";return r.indexOf(ox)>0&&t.push(r.split(ox)[0]),t.push(r),t}isValidLocale(e){return ele.test(e)}isCurrentLocaleRTL(){var e,t;return(t=(e=this.currentLocaleStorage.get())===null||e===void 0?void 0:e.isRTL)!==null&&t!==void 0?t:yb}setCurrentLocaleRTL(e){var t;let r=(t=this.currentLocaleStorage.get())!==null&&t!==void 0?t:{localeCode:sx,isRTL:yb};r.isRTL=e,this.currentLocaleStorage.set(r)}};o(CC,"LocaleService");var av=CC,tle=Object.freeze({__proto__:null,default:av});function sI(){return M(this,void 0,void 0,function*(){try{return yield br(),Iv(window)?window.OutSystemsNative.Http:null}catch(n){return null}})}o(sI,"getNativeHttpPlugin");function wF(){return M(this,void 0,void 0,function*(){return!!(yield sI())})}o(wF,"isNativeHttpPluginAvailable");function ax(){var n;if(!pe.resolve(X.SettingsManager).readBool("EnableOpenTelemetryTraces"))return;let t=pe.resolve(X.InstrumentationFactory);if(!t)return;let r=t.getActiveSpan();if(!r)return;let i=r.getContext();if(!i)return;let s=Object.keys((n=i.attributes)!==null&&n!==void 0?n:{}).reduce((a,u)=>{var l;return typeof((l=i.attributes[u])===null||l===void 0?void 0:l.toString)=="function"&&(a[u]=i.attributes[u].toString()),a},{});return{spanId:i.spanId,traceId:i.traceId,attributes:s,sampled:i.sampled}}o(ax,"getHttpTrace");var _b=$A+"locale";function wb(){let n=hc(X.LocaleService);if(n)return n.getCurrentLocale()}o(wb,"getLocaleValue");function Eb(n){let e=hc(X.LocaleService);e&&e.setCurrentLocale(n)}o(Eb,"setLocaleValue");var nle="HttpClientFactory",rle={isHealthy:!0,healthCheckIntervalInSeconds:Number.POSITIVE_INFINITY,healthCheckEndpoint:"/moduleservices/ping",healingTimeoutDelayInSeconds:30},ux=o((n,e,t)=>{let r=e?new Yf({acceptionRules:[e,/^[^/]/],rejectionRules:[/^[a-z0-9]+:\/\//i]}):void 0;return new Ea(n,Object.assign(Object.assign({},rle),{healthCheckNeededPathFilter:r,logger:t}))},"wrapInHealthChecker"),ile=o(n=>M(void 0,void 0,void 0,function*(){let e=yield Ou.build({withHealthCheck:!0,healthCheckPathScope:Dt()});n.register(X.UnauthenticatedHttpClient,()=>e);let t=yield Ou.build({baseUrl:Dt(),getToken:Kp,getLocale:o(()=>{var i;return(i=wb())!==null&&i!==void 0?i:null},"getLocale"),setLocale:o(i=>Eb(i),"setLocale"),localeHeader:_b,withHealthCheck:!0,healthCheckPathScope:Dt()});if(n.register(X.HttpClient,()=>t),Fx()&&$x()){let i=Ou.buildWithDebugger({alternateHttpClient:t,appUrl:gA(),getToken:Kp,getLocale:o(()=>{var a;return(a=wb())!==null&&a!==void 0?a:null},"getLocale"),setLocale:o(a=>Eb(a),"setLocale"),localeHeader:_b,withHealthCheck:!0});n.register(X.DebuggerHttpClient,()=>i),n.register(X.NonDebuggerHttpClient,()=>t);let s=n.resolve(X.Debugger);s!=null&&s.isSessionActive()&&n.register(X.HttpClient,()=>n.resolve(X.DebuggerHttpClient))}let r=Ou.buildLoggerHttpClient({baseUrl:Dt(),getToken:o(i=>Kp(i,!1),"getToken"),getLocale:o(()=>{var i;return(i=wb())!==null&&i!==void 0?i:null},"getLocale"),setLocale:o(i=>Eb(i),"setLocale"),localeHeader:_b});n.register(X.LoggerHttpClient,()=>r)}),"registerHttpClients"),RC=class RC{static getHttpClientLogger(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rx;return{setActiveSpanAsNonAggregable:o(()=>e.setActiveSpanAsNonAggregable(),"setActiveSpanAsNonAggregable"),debug:o(t=>{let{category:r,message:i}=t;return e.debug(r!=null?r:"",i!=null?i:"")},"debug"),error:o(t=>{let{category:r,message:i,errorCode:s,error:a}=t;return e.error(r!=null?r:"",i!=null?i:"",s!=null?s:Ve.Communication_Default,a,Re.Internal)},"error"),clientError:o(t=>{let{category:r,clientMessage:i,internalMessage:s,errorCode:a,error:u}=t;return e.clientError({category:r!=null?r:"",clientMessage:i!=null?i:"",internalMessage:s!=null?s:"",errorCode:a!=null?a:Ve.Communication_Default,errorObj:u})},"clientError"),startActiveClientSpan:o((t,r)=>e.startActiveSpan(t,r,Re.Internal,void 0,pg.Client),"startActiveClientSpan")}}static build(){return M(this,arguments,void 0,function(){let{baseUrl:e,headers:t,localeHeader:r,getLocale:i,setLocale:s,logger:a=this.getHttpClientLogger(),usesNativeHttpPlugin:u=wF,getNativeHttpPluginInstance:l=sI,loadTrace:c=ax,getToken:d,withHealthCheck:f=!1,healthCheckPathScope:h}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){let g;if(!or.isEnabled(Rr.WebHttpClientForNative)&&(yield u())){let p=yield l();if(!p){let m=new Error("Unable to get native http plugin instance.");throw a==null||a.error({category:nle,message:m.message,error:m}),m}g=new $f({baseUrl:e,headers:t,localeHeader:r,getLocale:i,setLocale:s,logger:a,httpClientInstance:p,loadTrace:c,getToken:d})}else g=new vi({baseUrl:e,headers:t,localeHeader:r,getLocale:i,setLocale:s,logger:a,loadTrace:c,getToken:d});return f?ux(g,h,a):g})()})}static buildWithDebugger(e){let{alternateHttpClient:t,appUrl:r,localeHeader:i,getLocale:s,setLocale:a,logger:u={setActiveSpanAsNonAggregable:o(()=>Cx(),"setActiveSpanAsNonAggregable"),debug:o(f=>{let{category:h,message:g}=f;return ee(h!=null?h:"",g!=null?g:"")},"debug"),error:o(f=>{let{category:h,message:g,error:p}=f;return De(h!=null?h:"",g!=null?g:"","OS-CLRT-00000",p)},"error")},getToken:l,withHealthCheck:c=!1,healthCheckPathScope:d}=e;if(r){let f=new Wf({appUrl:r,localeHeader:i,getLocale:s,setLocale:a,logger:u,alternateHttpClientInstance:t,getToken:l});return c?ux(f,d,u):f}return t}static buildLoggerHttpClient(){let{baseUrl:e,headers:t,localeHeader:r,getLocale:i,setLocale:s,loadTrace:a=ax,getToken:u}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new xf({baseUrl:e,headers:t,localeHeader:r,getLocale:i,setLocale:s,loadTrace:a,getToken:u})}static updateHealthCheckConfig(e){let{healthCheckIntervalInSeconds:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e instanceof Ea){let r=t===void 0||t<0?Number.POSITIVE_INFINITY:t;e.setHealthCheckInterval(r)}}};o(RC,"HttpClientFactory");var Ou=RC,sle=o((n,e)=>M(void 0,[n,e],void 0,function(t,r){let{applicationDefinition:i,application:s=pc}=r;return(function*(){$U(),s.setApplicationDefinition(i),yield Rk(),yield ile(t)})()}),"runPreInitialization"),ole=o(function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return M(void 0,[...e],void 0,function(){let{application:r=pc,initType:i=0,executeRequiredScripts:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){if(yield bae({version:ci.getLastApplicationVersionToken(),getCurrentScreenName:Iae}),i===1)return!0;let a=r.initializeDatabase(),u=!1,l=o(()=>{u=!0},"onVersionManagerDone"),c=new Promise(p=>{if(u)p();else{let m=l;l=o(()=>{m(),p()},"onVersionManagerDone")}}),d=c.then(()=>r.triggerApplicationReadyEvent()),f=o(()=>a.then(p=>r.onDatabaseReady(p)).then(()=>c).then(()=>d).then(()=>r.onApplicationReady()),"onVersionReady"),h={onVersionReady:o(()=>void f(),"onVersionReady"),onUpgradeFinished:o((p,m)=>r.onUpgradeFinished(p,m),"onUpgradeFinished"),onNewVersionDetected:o(p=>r.onNewVersionDetected(p),"onNewVersionDetected"),onAppInfoReady:o(p=>r.onAppInfoReady(p),"onAppInfoReady")},g=ci.upgradeVersion(a,h);return g&&(yield s==null?void 0:s(),l()),g})()})},"runPostInitialization"),ale=o((n,e,t)=>{let r=n.getItem(e);r&&(n.setItem(t,r),n.removeItem(e))},"swapCurrentConfigs"),EF=o(n=>n.map(e=>{var t,r,i,s,a,u,l,c,d,f,h,g,p,m;return{key:e.key,type:e.type,kc_hint:(t=e.kc_hint)!==null&&t!==void 0?t:"cognito",configs:{identityProvider:(r=e.kc_hint)!==null&&r!==void 0?r:e.type,scope:"openid",clientId:(s=(i=e.configs.amplifyClientId)!==null&&i!==void 0?i:e.configs.clientId)!==null&&s!==void 0?s:"",poolId:e.configs.poolId,region:e.configs.region,tenantId:e.configs.tenantId,passwordComplexityPolicy:{minimumLength:(u=(a=e.configs.passwordPolicy)===null||a===void 0?void 0:a.minimumLength)!==null&&u!==void 0?u:12,lowerCaseLetterRequired:(c=(l=e.configs.passwordPolicy)===null||l===void 0?void 0:l.requireLowercase)!==null&&c!==void 0?c:!0,upperCaseLetterRequired:(f=(d=e.configs.passwordPolicy)===null||d===void 0?void 0:d.requireUppercase)!==null&&f!==void 0?f:!0,numberRequired:(g=(h=e.configs.passwordPolicy)===null||h===void 0?void 0:h.requireNumbers)!==null&&g!==void 0?g:!0,specialCharacterRequired:(m=(p=e.configs.passwordPolicy)===null||p===void 0?void 0:p.requireSymbols)!==null&&m!==void 0?m:!0}}}}),"mapToIdentityProviderConfig"),cx="/moduleservices/auth/configs",xp="AuthConfigsManager",ule="os-builtin-authconfigs",lx="os-runtime-authconfigs",OC=class OC{constructor(){let{httpClient:e=pe.resolve(X.UnauthenticatedHttpClient),initialConfigs:t,getBasePath:r=o(()=>Dt(),"getBasePath$1"),cacheName:i=ule,cacheStorage:s=localStorage}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var a;this.isOnlineListenerRegistered=!1,this.httpClient=e,this.getBasePath=r,this.cacheStorage=s,ale(this.cacheStorage,i,lx),this.cacheName=lx,this.authConfigs=(a=t!=null?t:this.fetchCachedConfigs())!==null&&a!==void 0?a:[]}cacheConfigs(e){this.cacheStorage.setItem(this.cacheName,JSON.stringify(e))}fetchCachedConfigs(){try{let e=this.cacheStorage.getItem(this.cacheName);if(e)return JSON.parse(e);it(xp,"No auth configs stored in cache")}catch(e){De(xp,"Error retrieving auth configs from cache","OS-CLRT-40100",e)}}update(){return M(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dM,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pe.resolve(X.Auth);return(function*(){var i;try{let s=yield e.httpClient.get({url:cx,baseURL:e.getBasePath()}),a=s==null?void 0:s.authConfigurations;if(!Array.isArray(a))throw new Error("Did not receive an array of configurations");if(e.authConfigs=a,e.cacheConfigs(e.authConfigs),!(!((i=r.getInstance())===null||i===void 0)&&i.isAuthenticated())){let[u]=e.readAuthConfigs(mc,{suppressExternalWarnings:!0});u&&r.updateConfig(u.configs)}}catch(s){De(xp,"Error while fetching auth configs","OS-CLRT-40100",s),e.isOnlineListenerRegistered||(t(()=>M(e,void 0,void 0,function*(){return this.update()})),e.isOnlineListenerRegistered=!0)}})()})}readAuthConfigs(e){let{suppressExternalWarnings:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};try{let r=e?[...this.authConfigs.filter(i=>i.type===e),...this.authConfigs.filter(i=>i.kc_hint===e)]:this.authConfigs;if(r.length<1){let i=e?` for type "${e}"`:"";return it(cx,`No identity provider configurations found${i}.`,t?Re.Internal:Re.External),[]}return EF(r)}catch(r){return it(xp,"Couldn't read auth configurations"),[]}}};o(OC,"AuthConfigsManager");var jS=OC,cle={info:o(n=>{let{category:e,message:t}=n;return void nr(e!=null?e:"",t!=null?t:"",Re.Internal)},"info"),error:o(n=>{let{category:e,message:t,error:r,code:i,visibility:s}=n;var a;return void De(e!=null?e:"",t!=null?t:"",(a=i)!==null&&a!==void 0?a:"OS-CLRT-40100",r,s)},"error"),warning:o(n=>{let{category:e,message:t}=n;return void it(e!=null?e:"",t!=null?t:"")},"warning"),debug:o(n=>{let{category:e,message:t}=n;return void ee(e!=null?e:"",t!=null?t:"")},"debug")},TF=o((n,e)=>{n.register(X.Auth,()=>{var t,r,i,s,a,u;return new yp({appKey:zs(),appUrl:Dt(),region:(t=e==null?void 0:e.configs)===null||t===void 0?void 0:t.region,poolId:(r=e==null?void 0:e.configs)===null||r===void 0?void 0:r.poolId,clientId:(i=e==null?void 0:e.configs)===null||i===void 0?void 0:i.clientId,scope:"openid",identityProvider:(a=(s=e==null?void 0:e.kc_hint)!==null&&s!==void 0?s:e==null?void 0:e.type)!==null&&a!==void 0?a:mc,passwordComplexityPolicy:(u=e==null?void 0:e.configs)===null||u===void 0?void 0:u.passwordComplexityPolicy,logger:cle,httpClient:n.resolve(X.UnauthenticatedHttpClient),isOnline:o(()=>UA(),"isOnline")})})},"registerAuthFactory"),lle=o(n=>M(void 0,void 0,void 0,function*(){if(or.isEnabled(Rr.ReadAuthConfigsFromSettings))return;n.register(X.AuthConfigsManager,()=>new jS);let t=n.resolve(X.AuthConfigsManager),[r]=t.readAuthConfigs(mc,{suppressExternalWarnings:!0});TF(n,r),yield t.update()}),"useAuthConfigsManager"),dx="IdentityProviders",Tb="AuthConfigManager",PC=class PC{get settingsManager(){return pe.resolve(X.SettingsManager)}update(){return M(this,void 0,void 0,function*(){return this.settingsManager.update()})}readAuthConfigs(e){let{suppressExternalWarnings:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.settingsManager.readString(dx);if(!r)return De(Tb,"Identity provider configurations not found.","OS-CLRT-40100"),[];try{let i=JSON.parse(r);if(!Array.isArray(i))throw new TypeError("Deserialized value is not an array.");let s=e?i.filter(a=>a.type===e||a.kc_hint===e):i;if(s.length<1){let a=e?` for type "${e}"`:"";return it(Tb,`No identity provider configurations found${a}.`,t?Re.Internal:Re.External),[]}return EF(s)}catch(i){return De(Tb,`Error deserializing "${dx}" from settings.`,void 0,i),[]}}};o(PC,"SettingsAuthConfigManager");var WS=PC,dle=o(function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return M(void 0,[n,...t],void 0,function(i){let{onSettingsUpdated:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){if(i.register(X.SettingsManager,()=>new _S({onSettingsUpdated:s})),yield i.resolve(X.SettingsManager).update(),or.isEnabled(Rr.ReadAuthConfigsFromSettings)){i.register(X.AuthConfigsManager,()=>new WS);let l=i.resolve(X.AuthConfigsManager),[c]=l.readAuthConfigs(mc,{suppressExternalWarnings:!0});TF(i,c)}})()})},"useSettingsManager"),fle=o(function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return M(void 0,[...e],void 0,function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ci;return(function*(){yield r.initializeManifestLoader(),yield r.initialize()})()})},"useVersionsManager"),wd="ServiceWorker",hle=o(function(){let{serviceWorker:n=navigator.serviceWorker,loggerMethods:e={debug:ee,info:nr,warning:it,error:De}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n?n.addEventListener("message",t=>{if(!ple(t.origin)){ee(wd,"The received message is not from a secure Service Worker and will be ignored");return}gle(t.data)&&mle({log:t.data,loggerMethods:e})}):it(wd,"Service Worker API is not available")},"listenToServiceWorkerLogs"),gle=o(n=>n.kind==="log","isServiceWorkerLog"),ple=o(n=>window.location.origin===n,"isSecureOrigin"),mle=o(n=>{let{log:e,loggerMethods:t}=n;if(e.severity==="error")t.error(wd,e.message,e.errorCode,e.error,Re.External);else if(e.severity==="info")t.info(wd,e.message,Re.External);else{let r=t[e.severity];r(wd,e.message)}},"processLog"),bF="true",SF="false";function Bo(n){return`Unsupported data type (${n}) for client variable`}o(Bo,"unsupportedTypeMessage");function vle(n,e){switch(e){case b.Integer:return G.isValidInteger(n);case b.LongInteger:return G.isValidLongInteger(n);case b.Decimal:case b.Currency:return G.isValidDecimal(n);case b.Boolean:return G.isBoolean(n);case b.Text:case b.PhoneNumber:case b.Email:return G.isText(n);case b.Date:return G.isValidDate(n);case b.DateTime:return G.isValidDateTime(n);case b.Time:return G.isValidTime(n);default:let t=HA(e),r=Bo(t);throw new TypeError(r)}}o(vle,"isValueMatchingType");function yle(n,e){if(n==null)throw new TypeError(`Value ${n} is not a valid value for a client variable.`);if(!vle(n,e)){let t=HA(e);throw new TypeError(`Value ${n} is not a valid value for a client variable of the specified type (${t}).`)}switch(e){case b.Integer:case b.LongInteger:case b.Decimal:case b.Currency:return n.toString();case b.Boolean:return n?bF:SF;case b.Text:case b.PhoneNumber:case b.Email:return n;case b.Date:return n.toISODate();case b.DateTime:return n.toString();case b.Time:return n.toISOTime();default:throw new TypeError(Bo(`${e}`))}}o(yle,"serialize");function _le(n,e){switch(e){case b.Integer:let t=Number(n);return G.isValidInteger(t)&&G.isWithinIntegerRange(t)?t:k.DEFAULT_INTEGER;case b.LongInteger:if(!n)return k.DEFAULT_LONGINTEGER;let r=Tt.fromString(n);return G.isValidLongInteger(r)?r:k.DEFAULT_LONGINTEGER;case b.Decimal:if(!n)return k.DEFAULT_DECIMAL;let i=new Fe(n);return G.isValidDecimal(i)&&G.isWithinDecimalRange(i)?i:k.DEFAULT_DECIMAL;case b.Currency:if(!n)return k.DEFAULT_CURRENCY;let s=new Fe(n);return G.isValidDecimal(s)&&G.isWithinDecimalRange(s)?s:k.DEFAULT_CURRENCY;case b.Boolean:return n===bF?!0:n===SF?!1:k.DEFAULT_BOOLEAN;case b.Text:return G.isText(n)?n:k.DEFAULT_TEXT;case b.PhoneNumber:return G.isText(n)?n:k.DEFAULT_PHONENUMBER;case b.Email:return G.isText(n)?n:k.DEFAULT_EMAIL;case b.Date:let a=he.fromISODate(n);return G.isValidDate(a)?a:k.DEFAULT_DATE;case b.DateTime:let u=he.fromISODateTime(n);return G.isValidDateTime(u)?u:k.DEFAULT_DATETIME;case b.Time:let l=he.fromISOTime(n);return G.isValidTime(l)?l:k.DEFAULT_TIME;case b.Record:throw new TypeError(Bo("Record"));case b.RecordList:throw new TypeError(Bo("List"));case b.BinaryData:throw new TypeError(Bo("Binary Data"));case b.Object:throw new TypeError(Bo("Object"));default:throw new TypeError(Bo(`Unknown: ${n}`))}}o(_le,"deserialize");var Up="Client Variables",bb="$SESSION_USER_ID";function fx(n){return n==null}o(fx,"isNullOrUndefined");var NC=class NC{constructor(e){this.namespace=e,this.publisher=new Dd(Up,e),this.fullKeyMatcher=new RegExp(`^${qo(om)}${qo(this.namespace)}\\$[^$]*\\$ClientVars\\$`),this.checkSessionExpires(),this.innerSetVariable(bb,"",b.Text,Ko())}subscribe(e){return this.publisher.subscribe(e)}unsubscribe(e){return this.publisher.unsubscribe(e)}getFullKey(e,t){return`${om}${this.namespace}$${t}$ClientVars$${e}`}getVariable(e,t,r,i){return this.checkSessionExpires(),this.innerGetVariable(e,t,r,i)}innerGetVariable(e,t,r,i){let s=window.localStorage.getItem(this.getFullKey(e,t));return ee(Up,`Reading Client Variable ${e} of module ${t} for ${this.namespace}`),fx(s)?fx(i)?Cn(r):i:_le(s,r)}setVariable(e,t,r,i){this.checkSessionExpires(),this.innerSetVariable(e,t,r,i),this.publisher.publish({key:e,module:t,value:i})}innerSetVariable(e,t,r,i){window.localStorage.setItem(this.getFullKey(e,t),yle(i,r)),ee(Up,`Set Client Variable ${e} of module ${t} for ${this.namespace}`)}removeAllVariables(){let e=[];for(let t=0;t<window.localStorage.length;t++){let r=window.localStorage.key(t);r&&this.fullKeyMatcher.test(r)&&e.push(r)}if(e.length>0){for(let t of e)window.localStorage.removeItem(t);this.publisher.publish()}}checkSessionExpires(){let e=this.innerGetVariable(bb,"",b.Text);Ko()!==e&&(e!==""&&(ee(Up,`Removing all Client Variables for user provider ${this.namespace}`),this.removeAllVariables()),this.innerSetVariable(bb,"",b.Text,Ko()))}};o(NC,"LocalStorageClientVariablesService");var GS=NC,nm,uv,Iu,rm,Ds,cv,im,Cu,zo,zS,DC=class DC{constructor(e){let{ttl:t=120*1e3,runInterval:r=10*1e3,maxSize:i=50*1024*1024,cleanup:s,create:a,buildKey:u}=e;nm.add(this),uv.set(this,void 0),Iu.set(this,void 0),rm.set(this,void 0),Ds.set(this,new Map),cv.set(this,void 0),im.set(this,void 0),Cu.set(this,void 0),zo.set(this,0),lt(this,uv,t,"f"),lt(this,rm,i,"f"),lt(this,cv,s,"f"),lt(this,im,a,"f"),lt(this,Cu,u,"f"),this.setAutoRun(r)}setAutoRun(e){ie(this,Iu,"f")&&(clearInterval(ie(this,Iu,"f")),lt(this,Iu,void 0,"f")),e>0&&lt(this,Iu,setInterval(()=>this.run(),e),"f")}getGCItem(e){return ie(this,Ds,"f").get(ie(this,Cu,"f").call(this,e))}getItem(e){let t=ie(this,Cu,"f").call(this,e),r=ie(this,Ds,"f").get(t);if(r)return r.refCount++,r.lastUsed=Date.now(),r.instance;let i=ie(this,im,"f").call(this,e);return ie(this,Ds,"f").set(t,{refCount:1,lastUsed:Date.now(),instance:i.instance,size:i.size}),lt(this,zo,ie(this,zo,"f")+i.size,"f"),i.instance}releaseItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=ie(this,Cu,"f").call(this,e),i=ie(this,Ds,"f").get(r);i&&(i.refCount--,ie(this,nm,"m",zS).call(this,r,i))}run(){let e=ie(this,zo,"f")>=ie(this,rm,"f");for(let[t,r]of ie(this,Ds,"f").entries())ie(this,nm,"m",zS).call(this,t,r,e)}};o(DC,"GarbageCollector");var qS=DC;uv=new WeakMap,Iu=new WeakMap,rm=new WeakMap,Ds=new WeakMap,cv=new WeakMap,im=new WeakMap,Cu=new WeakMap,zo=new WeakMap,nm=new WeakSet,zS=o(function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=Date.now()-t.lastUsed>ie(this,uv,"f");t.refCount<=0&&(i||r)&&(ie(this,cv,"f").call(this,t.instance),lt(this,zo,ie(this,zo,"f")-t.size,"f"),ie(this,Ds,"f").delete(e))},"_GarbageCollector_cleanItem");var ld,Uu=class Uu{constructor(){let{gc:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ld.set(this,void 0),lt(this,ld,e!=null?e:new qS({create:Uu.createBlobUrl,cleanup:Uu.cleanupBlobUrl,buildKey:Uu.buildBinaryKey}),"f")}getUrl(e){return ie(this,ld,"f").getItem(e)}releaseUrl(e){ie(this,ld,"f").releaseItem(e)}static buildBinaryKey(e){return e.content||e.url||""}static createBlobUrl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:URL,r=e.toBlob();return r?{instance:t.createObjectURL(r),size:r.size}:{instance:"",size:1}}static cleanupBlobUrl(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:URL).revokeObjectURL(e)}};o(Uu,"BinaryUrlCache");var KS=Uu;ld=new WeakMap;var ut={tableName:rf,idIsAutoNumber:Sn.No,attributes:[{name:"Key",columnName:"KEY",type:re.TEXT,isPrimaryKey:!0},{name:"ModuleKey",columnName:"MODULEKEY",type:re.TEXT,isPrimaryKey:!0},{name:"UpgradeStatus",columnName:"UPGRADESTATUS",type:re.INTEGER},{name:"Name",columnName:"NAME",type:re.TEXT},{name:"TableName",columnName:"TABLENAME",type:re.TEXT},{name:"Hash",columnName:"HASH",type:re.TEXT},{name:"ExtraInfo",columnName:"EXTRAINFO",type:re.TEXT}]},qi=Object.assign(Object.assign({},ut),{tableName:`${Bv}${rf}`}),hx="MetadataTableInitializer",wle={isNeeded:o(n=>M(void 0,void 0,void 0,function*(){return!(yield n.existsTable(ut))}),"isNeeded"),run:o(n=>M(void 0,void 0,void 0,function*(){ee(hx,"Running initializer for entity meta info table."),yield n.createTable(ut),yield n.createTable(qi),ee(hx,"Initializer for entity meta info table ran successfully.")}),"run")},YS;(function(n){n[n.Unchanged=0]="Unchanged",n[n.Deleted=1]="Deleted",n[n.Recreated=2]="Recreated",n[n.New=3]="New"})(YS||(YS={}));var rr=YS;function Mp(n,e,t){for(let r of e.getAttributes())AF(e[r.attrName],Um(n,r),`${t} '${n.tableName}.${r.name}'`)}o(Mp,"validateRecordForCreateOrUpdate");function AF(n,e,t){if(e.type===re.TEXT&&e.length!==void 0){if(!n)return;let i=n.length-e.length;if(i>0)throw new me.DataBaseException("",`Unable to ${t} because it exceeds the maximum allowed length by ${i} characters.`)}else if(e.type===re.DECIMAL&&e.length!==void 0&&e.decimals!==void 0){let i=n.trunc().abs().toString().length-(e.length-e.decimals);if(i>0)throw new me.DataBaseException("",`Unable to ${t} because it exceeds the maximum allowed length by ${i} characters.`)}}o(AF,"validateValueForCreateOrUpdate");var An="EntityModelUtils";function _r(n){return n[0]}o(_r,"getFirstItem");function gx(n,e){return M(this,void 0,void 0,function*(){return yield n.findRecords(ut,{MODULEKEY:e})})}o(gx,"loadStoredMetadata");function Ele(n,e,t,r){return M(this,void 0,void 0,function*(){var i;ee(An,`Checking the status of table ${e.tableName} (${e.name})`);let s,a={};if(t&&(s=t.HASH,a=JSON.parse((i=t.EXTRAINFO)!==null&&i!==void 0?i:"{}")),!s)ee(An,`Table ${e.tableName} (${e.name}) does not exist and will be created`),yield RF(n,e,r),yield Nle(n,e);else{if(s!==e.hash)return $le(e,a)?(ee(An,`Table ${e.tableName} (${e.name}) exists and will be fully upgraded`),Dle(n,e,a,r)):(ee(An,`Table ${e.tableName} (${e.name}) exists and will be incrementally upgraded`),Lle(n,e,a,r));ee(An,`Table ${e.tableName} (${e.name}) exists and is up to date`)}})}o(Ele,"createOrUpgradeTable");function Tle(n,e,t){return M(this,void 0,void 0,function*(){return jv(n,r=>(ee(An,`Recovering table ${r} from backup`),i=>ble(i,r)),t,r=>r.UPGRADESTATUS!==rr.Unchanged)})}o(Tle,"recoverBackupTables");function ble(n,e){return M(this,void 0,void 0,function*(){yield Wv(n,e),(yield n.existsTable(Yd(e)))&&(yield CF(n,Yd(e),e,e,rr.Unchanged)),yield PF(n,e,!0)})}o(ble,"recoverBackupTable");function Sle(n,e,t){return M(this,void 0,void 0,function*(){return jv(n,r=>(ee(An,`Dropping inconsistent table ${r} (same key, different physical table name)`),i=>Ale(i,r)),t,r=>{let i=r.UPGRADESTATUS===rr.Unchanged,s=e.some(l=>l.key===r.KEY),a=!e.some(l=>l.tableName===r.TABLENAME),u=e.length===0?!0:s&&a;return i&&u})})}o(Sle,"dropInconsistentTables");function Ale(n,e){return M(this,void 0,void 0,function*(){yield Wv(n,e);let t=_r(yield n.findRecords(ut,{TABLENAME:e}));t&&(yield n.removeRecord(ut,[t.KEY,t.MODULEKEY]))})}o(Ale,"dropInconsistentTable");function Ile(n,e){return jv(n,t=>(ee(An,`Dropping backup table for ${t}`),r=>Rle(r,t)),e,t=>t.UPGRADESTATUS!==rr.Unchanged)}o(Ile,"dropBackupTables");function Cle(n,e,t){return M(this,void 0,void 0,function*(){return jv(n,r=>(ee(An,`Backing up table ${r} before deletion`),i=>IF(i,r,rr.Deleted)),t,r=>r.UPGRADESTATUS===rr.Unchanged&&!e.some(i=>i.tableName===r.TABLENAME))})}o(Cle,"backupDeletedTables");function jv(n,e,t,r){return M(this,void 0,void 0,function*(){let i=yield n.findRecords(ut,{MODULEKEY:t}),s=[];if(r)for(let a of i)r(a)&&s.push(a);else s=i;for(let a of s)yield e(a.TABLENAME)(n)})}o(jv,"doForEachTable");function IF(n,e,t){return M(this,void 0,void 0,function*(){return ee(An,`Backing up table '${e}'`),yield PF(n,e,!1),yield Wv(n,Yd(e)),CF(n,e,Yd(e),e,t)})}o(IF,"backupTable");function Wv(n,e){return n.deleteTableIfExists(e)}o(Wv,"dropTableIfExists");function Rle(n,e){return M(this,void 0,void 0,function*(){yield Wv(n,Yd(e));let t=_r(yield n.findRecords(ut,{TABLENAME:e}));t&&(t.UPGRADESTATUS===rr.Deleted?yield n.removeRecord(ut,[t.KEY,t.MODULEKEY]):(t.UPGRADESTATUS=rr.Unchanged,yield n.updateRecord(ut,t)));let r=_r(yield n.findRecords(qi,{TABLENAME:e}));r&&(yield n.removeRecord(qi,[r.KEY,r.MODULEKEY]))})}o(Rle,"dropBackupTable");function CF(n,e,t,r,i){return M(this,void 0,void 0,function*(){return ee(An,`Renaming table '${e}' to '${t}' and setting status to ${rr[i]}`),yield Ole(n,e,t),Ple(n,r,i)})}o(CF,"renameTableAndSetStatus");function Ole(n,e,t){return n.renameTable(e,t)}o(Ole,"renameTable");function Ple(n,e,t){return M(this,void 0,void 0,function*(){let r=_r(yield n.findRecords(ut,{TABLENAME:e}));return r.UPGRADESTATUS=t,n.updateRecord(ut,r)})}o(Ple,"setTableUpgradeStatus");function Yd(n){return`${Bv}${n}`}o(Yd,"getBackupTableName");function RF(n,e,t){return M(this,void 0,void 0,function*(){return ee(An,`Creating table ${e.tableName} (${e.name})`),n.createTable(Object.assign(Object.assign({},e),{attributes:[...e.attributes.map(r=>{var i;return Object.assign(Object.assign({},r),{serializedDefault:t.serialize((i=r.default)!==null&&i!==void 0?i:na(r.type),r)})})]}))})}o(RF,"createTable");function Nle(n,e){return M(this,void 0,void 0,function*(){let t=NF(e);t.UPGRADESTATUS=rr.New,ee(An,`Creating metadata for table ${e.tableName} (${e.name})`),yield n.insertRecord(ut,t)})}o(Nle,"insertTableMetadata");function OF(n,e){return M(this,void 0,void 0,function*(){ee(An,`Updating metadata for table ${e.tableName} (${e.name})`);let t=yield n.getRecord(ut,[e.key,e.moduleKey]),r=NF(e);r.UPGRADESTATUS=t.UPGRADESTATUS,r.LASTIDENTIFIER=t.LASTIDENTIFIER,yield n.updateRecord(ut,r)})}o(OF,"updateTableMetadata");function Dle(n,e,t,r){return M(this,void 0,void 0,function*(){try{let i=yield n.getAllRecords(e);yield IF(n,e.tableName,rr.Recreated),yield RF(n,e,r);for(let s of i){let a=xle(s,e,t,r);yield n.insertRecord(e,a)}yield OF(n,e)}catch(i){let s=`Unable to upgrade the definition of entity '${e.name}':
${Bs(i)}`;throw it(An,s),new me.DataBaseException("",s)}})}o(Dle,"recreateTable");function Lle(n,e,t,r){return M(this,void 0,void 0,function*(){var i;let s=e.attributes.filter(a=>{var u;return!Object.keys((u=t.attrs)!==null&&u!==void 0?u:{}).some(l=>l===a.columnName)});ee(An,`Upgrading table ${e.tableName} (${e.name}) with new attributes (${JSON.stringify(s)}) and new hash (${e.hash})`);for(let a of s){let u=r.serialize((i=a.default)!==null&&i!==void 0?i:na(a.type),a);yield n.addColumn(e,Object.assign(Object.assign({},a),{serializedDefault:u}))}yield OF(n,e)})}o(Lle,"upgradeTable");function xle(n,e,t,r){let i={};for(let s of e.attributes)try{let a=s.columnName,u=n[a];i[a]=Mle(u,s,t,r)}catch(a){throw new me.DataBaseException("",`Unable to upgrade attribute '${s.name}' data type to '${XA(s.type)}':
${Bs(a)}`)}return Ule(i,e,r),i}o(xle,"upgradeDbRecord");function Ule(n,e,t){var r;for(let i of e.attributes){let s=i.columnName;if(n[s]===void 0){let a=(r=i.default)!==null&&r!==void 0?r:na(i.type);n[s]=t.serialize(a,i)}}}o(Ule,"fillWithDefaults");function Mle(n,e,t,r){var i;let s=(i=t.attrs)===null||i===void 0?void 0:i[e.columnName];return s?kle(n,s,e,r):n}o(Mle,"convertRecordAttribute");function kle(n,e,t,r){if(r.isConversionNeeded(e,t)){let i=r.deserialize(n,e),s=Qu(t.type),a=Fle(e,t);if(Ws.isConvertibleTo(i,s)){let u=Ws.convertTo(i,s);return AF(u,t,a),r.serialize(u,t)}else throw new me.DataBaseException("",`Unable to ${a}.`)}else return n}o(kle,"upgradeDbValue");function Fle(n,e){let t=b[Qu(n.type)],r=b[Qu(e.type)];return`convert column '${e.name}' from type ${t} to ${r}`}o(Fle,"createOperationLabel");function $le(n,e){return e.idIsAutoNumber!==n.idIsAutoNumber?!0:Ble(n,e).some(r=>r.entityAttr?r.metadataAttr?Vle(r.entityAttr,r.metadataAttr):r.entityAttr.isPrimaryKey:!0)}o($le,"requiresFullUpgrade");function Ble(n,e){var t,r;let i={};for(let s of n.attributes){let a=s.columnName;i[a]={},i[a].entityAttr=s}for(let s of Object.keys((t=e.attrs)!==null&&t!==void 0?t:{}))i[s]=i[s]||{},i[s].metadataAttr=(r=e.attrs)===null||r===void 0?void 0:r[s];return Object.keys(i).map(s=>i[s])}o(Ble,"getAttributeInfoSummary");function Vle(n,e){return Hle(n,e)||!e.isPrimaryKey!=!n.isPrimaryKey}o(Vle,"columnDefinitionHasChanged");function Hle(n,e){return n.type!==e.type||e.length!==n.length||e.decimals!==n.decimals||!!e.isEntityReference!=!!n.isEntityReference&&!n.isPrimaryKey}o(Hle,"typeDefinitionHasChanged");function PF(n,e,t){return M(this,void 0,void 0,function*(){let r=t?qi:ut,i=t?ut:qi,s=_r(yield n.findRecords(i,{TABLENAME:e}));s&&(yield n.removeRecord(i,[s.KEY,s.MODULEKEY]));let a=_r(yield n.findRecords(r,{TABLENAME:e}));if(a&&(yield n.insertRecord(i,a)),t){let u=_r(yield n.findRecords(r,{TABLENAME:e}));u&&(yield n.removeRecord(r,[u.KEY,u.MODULEKEY]))}})}o(PF,"copyMetadata");function NF(n){let e=jle(n),t=Vr(n),r=(t==null?void 0:t.type)===re.INTEGER?0:"0";return{KEY:n.key,MODULEKEY:n.moduleKey,UPGRADESTATUS:rr.Unchanged,NAME:n.name,TABLENAME:n.tableName,HASH:n.hash,LASTIDENTIFIER:t&&n.idIsAutoNumber!==Sn.No?r:void 0,EXTRAINFO:JSON.stringify(e)}}o(NF,"makeMetadataRecord");function jle(n){let e={};return n.attributes.forEach(t=>{e[t.columnName]={type:t.type,isPrimaryKey:t.isPrimaryKey,length:t.length,decimals:t.decimals,isEntityReference:t.isEntityReference}}),{v:2,idIsAutoNumber:n.idIsAutoNumber,attrs:e}}o(jle,"makeExtraInfoMetadata");var kp="EntityModelInitializer",LC=class LC{constructor(e,t){this.entityInfos=e,this.serializer=t}isNeeded(e){return M(this,void 0,void 0,function*(){if(this.hasEntityInfos()){if(!(yield e.existsTable(ut)))return!0;let r=_r(this.entityInfos).moduleKey,i=yield gx(e,r);for(let s of this.entityInfos){let a=_r(i.filter(u=>u.KEY===s.key));if(!a||a.HASH!==s.hash||a.UPGRADESTATUS!==rr.Unchanged||a.TABLENAME!==s.tableName)return!0}for(let s of i)if(!this.entityInfos.some(a=>a.key===s.KEY))return!0}return!1})}run(e){return M(this,void 0,void 0,function*(){if(!this.hasEntityInfos())return;let t=_r(this.entityInfos).moduleKey;ee(kp,`Running initializer for entities of module '${t}'.`),yield Tle(e,this.entityInfos,t),this.entityInfos.length>0&&(yield Sle(e,this.entityInfos,t)),yield Cle(e,this.entityInfos,t);let r=yield gx(e,t);for(let i of this.entityInfos){let s=i,a=_r(r.filter(u=>u.KEY===s.key));yield Ele(e,s,a,this.serializer)}ee(kp,`Initializer for entities of module '${t}' ran successfully.`)})}cleanup(e){return M(this,void 0,void 0,function*(){if(!this.hasEntityInfos())return;let t=_r(this.entityInfos).moduleKey;ee(kp,`Running initializer cleanup for entities of module '${t}'.`),yield Ile(e,t),ee(kp,`Initializer cleanup for entities of module '${t}' ran successfully.`)})}hasEntityInfos(){return this.entityInfos&&this.entityInfos.length>0}};o(LC,"EntityModelInitializer");var XS=LC,px=new js("Id","idOut"),Wle=new Xi("Record","recordOut"),Sb="EntityService",Vi=class Vi{constructor(e){this._serializer=e}get database(){return this._database}get serializer(){return this._serializer}setDatabase(e){ee(Sb,"Registering initializer for entity meta info table."),this._database=e,this._database.registerInitializer(wle)}getDatabase(){return this.databasePromise||(this.databasePromise=new Promise(e=>{this.releaseDatabaseForUse=()=>e(this.database)})),this.databasePromise}registerInitializer(e){if(e&&e.length>0){ee(Sb,`Registering initializer for entities of module '${e[0].moduleKey}'.`);let t=new XS(e,this.serializer);this.database.registerInitializer(t)}}setReady(){ee(Sb,"Releasing the database as ready for use."),this.databasePromise?this.releaseDatabaseForUse():this.databasePromise=Promise.resolve(this.database)}static wrap(e,t){let r=t.getAttributes()[0],i=new t;return i[r.attrName]=e,i}static unwrap(e){let t=e.getAttributes()[0];return e[t.attrName]}static getWrappedType(e){return e.getAttributes()[0].complexType}create(e,t){return M(this,void 0,void 0,function*(){let r=yield this.getDatabase(),i=Vi.unwrap(t);Mp(e,i,"create");let s;try{s=yield r.executeTransaction(l=>this.innerCreate(l,e,i),!0,[ut,e])}catch(l){throw new me.DataBaseException("",l.message,l.stack)}if(s===null)return null;let a=Wo(e,i),u=new(px.getType(a.dataType));return u.idOut=s,u})}innerCreate(e,t,r){return M(this,void 0,void 0,function*(){let i=yield e.insertRecord(t,this.serializer.serialize(r,t)),s=Vr(t);return s?this.serializer.deserialize(i,s):null})}update(e,t){return M(this,void 0,void 0,function*(){let r=yield this.getDatabase(),i=Vi.unwrap(t);Mp(e,i,"update");try{yield r.executeTransaction(s=>this.innerUpdate(s,e,i),!0,[ut,e])}catch(s){throw new me.DataBaseException("",s.message,s.stack)}})}innerUpdate(e,t,r){return M(this,void 0,void 0,function*(){return e.updateRecord(t,this.serializer.serialize(r,t))})}createOrUpdate(e,t){return M(this,void 0,void 0,function*(){let r=yield this.getDatabase(),i=Vi.unwrap(t);Mp(e,i,"create or update");let s;try{s=yield r.executeTransaction(l=>this.innerCreateOrUpdate(l,e,i),!0,[ut,e])}catch(l){throw new me.DataBaseException("",l.message,l.stack)}let a=Wo(e,i),u=new(px.getType(a.dataType));return u.idOut=s,u})}innerCreateOrUpdate(e,t,r){return M(this,void 0,void 0,function*(){let i=yield e.upsertRecord(t,this.serializer.serialize(r,t)),s=Vr(t);return s?this.serializer.deserialize(i,s):null})}createOrUpdateAll(e,t){return M(this,void 0,void 0,function*(){let r=yield this.getDatabase(),i=[];for(let s=0;s<t.length;s++){let a=t.getItem(s),u=Vi.unwrap(a);Mp(e,u,"create or update"),i.push(u)}try{yield r.executeTransaction(s=>M(this,void 0,void 0,function*(){return this.innerCreateOrUpdateAll(s,e,i)}),!0,[ut,e])}catch(s){throw new me.DataBaseException("",s.message,s.stack)}})}innerCreateOrUpdateAll(e,t,r){return M(this,void 0,void 0,function*(){return e.upsertAllRecords(t,r.map(i=>this.serializer.serialize(i,t)))})}get(e,t){return M(this,void 0,void 0,function*(){let r=yield this.getDatabase(),i=null;try{i=yield r.executeReadTransaction(s=>M(this,void 0,void 0,function*(){return this.innerGet(s,e,t)}),!0,[e])}catch(s){throw new me.DataBaseException("",s.message,s.stack)}if(i){let s=new(Wle.getType(e.implicitAnonymousType));return s.recordOut=Vi.wrap(i,e.implicitAnonymousType),s}else throw new me.DataBaseException("",`${e.tableName} with id ${t} was not found`)})}innerGet(e,t,r){return M(this,void 0,void 0,function*(){let i=Vr(t),s=yield e.getRecord(t,this.serializer.serialize(r,i));return s?this.serializer.deserialize(s,t,Vi.getWrappedType(t.implicitAnonymousType)):null})}delete(e,t){return M(this,void 0,void 0,function*(){let r=yield this.getDatabase();try{yield r.executeTransaction(i=>this.innerDelete(i,e,t),!0,[ut,e])}catch(i){throw new me.DataBaseException("",i.message,i.stack)}})}innerDelete(e,t,r){return M(this,void 0,void 0,function*(){let i=Vr(t);return e.removeRecord(t,this.serializer.serialize(r,i))})}deleteAll(e){return M(this,void 0,void 0,function*(){let t=yield this.getDatabase();try{yield t.executeTransaction(r=>this.innerDeleteAll(r,e),!0,[ut,e])}catch(r){throw new me.DataBaseException("",r.message,r.stack)}})}innerDeleteAll(e,t){return M(this,void 0,void 0,function*(){return e.removeAllRecords(t)})}};o(Vi,"EntityService");var lv=Vi,xC=class xC extends lv{constructor(){super(new Qm)}executeAggregate(e,t){return M(this,void 0,void 0,function*(){let r=yield this.getDatabase();try{return yield r.executeQuery(e,!0,t)}catch(i){throw new me.DataBaseException("",i.message,i.stack)}})}innerCreate(e,t,r){return M(this,void 0,void 0,function*(){let i=yield this.getMetadataRecord(e,t),s=Wo(t,r),a=r.clone();if(t.idIsAutoNumber===Sn.YesIfEmpty){let u=this.getRecordIdAndUpdateLastIdentifier(i,t,r);yield this.updateMetadataTable(e,i),a[s.attrName]=u}return yield e.insertRecord(t,this.serializer.serialize(a,t)),s?a[s.attrName]:null})}getRecordIdAndUpdateLastIdentifier(e,t,r){let i=Vr(t),s=Wo(t,r),a=vk(t,r);if(t.idIsAutoNumber===Sn.YesIfEmpty){let u=e.LASTIDENTIFIER!==void 0?this.serializer.deserialize(e.LASTIDENTIFIER,i):Cn(s.dataType);Tr(a,Cn(s.dataType))?(u instanceof Tt?u=u.add(1):typeof u=="number"&&(u=u+1),a=u,e.LASTIDENTIFIER=this.serializer.serialize(a,i)):Mv(a,u)>0&&(e.LASTIDENTIFIER=this.serializer.serialize(a,i))}return a}innerCreateOrUpdate(e,t,r){return M(this,void 0,void 0,function*(){let i=r.clone();if(t.idIsAutoNumber===Sn.YesIfEmpty){let u=yield this.getMetadataRecord(e,t),l=this.getRecordIdAndUpdateLastIdentifier(u,t,r);yield this.updateMetadataTable(e,u);let c=Wo(t,r);i[c.attrName]=l}let s=yield e.upsertRecord(t,this.serializer.serialize(i,t)),a=Vr(t);return a?this.serializer.deserialize(s,a):null})}innerCreateOrUpdateAll(e,t,r){return M(this,void 0,void 0,function*(){let i=yield this.getMetadataRecord(e,t),s,a=r.map(u=>{s=s!=null?s:Wo(t,u);let l=u.clone();if(t.idIsAutoNumber===Sn.YesIfEmpty){let c=this.getRecordIdAndUpdateLastIdentifier(i,t,u);l[s.attrName]=c}return this.serializer.serialize(l,t)});return yield this.updateMetadataTable(e,i),e.upsertAllRecords(t,a)})}getMetadataRecord(e,t){return M(this,void 0,void 0,function*(){let r=yield e.getRecord(ut,[t.key,t.moduleKey]);if(!r)throw new Error(`Unable to fetch record with key ${t.key} and moduleKey ${t.moduleKey} from 
                metadata table ${ut.tableName}.`);return r})}updateMetadataTable(e,t){return M(this,void 0,void 0,function*(){if(t.LASTIDENTIFIER!==void 0)return e.updateRecord(ut,t)})}};o(xC,"IndexedDBEntityService");var JS=xC,Vo={tableName:rf,idIsAutoNumber:Sn.No,attributes:[{name:"SS_Key",columnName:"SS_Key",type:re.TEXT},{name:"Module_SS_Key",columnName:"Module_SS_Key",type:re.TEXT},{name:"Name",columnName:"Name",type:re.TEXT},{name:"Physical_Table_name",columnName:"Physical_Table_name",type:re.TEXT},{name:"Hash",columnName:"Hash",type:re.TEXT},{name:"Extra_Info",columnName:"Extra_Info",type:re.TEXT},{name:"Upgrade_Status",columnName:"Upgrade_Status",type:re.INTEGER}]},ZS=Object.assign(Object.assign({},Vo),{tableName:`${Bv}${rf}`});function Gle(n){let e=JSON.parse(n.Extra_Info),t={v:2,idIsAutoNumber:e.idIsAutoNumber,attrs:Object.keys(e.attrs).reduce((r,i)=>(r[i.toUpperCase()]=e.attrs[i],r),{})};return{KEY:n.SS_Key,MODULEKEY:n.Module_SS_Key,UPGRADESTATUS:n.Upgrade_Status,NAME:n.Name,TABLENAME:n.Physical_Table_name,HASH:n.Hash,EXTRAINFO:JSON.stringify(t)}}o(Gle,"convertV0ToV2");function zle(n){let e=JSON.parse(n.EXTRAINFO),t={v:0,idIsAutoNumber:e.idIsAutoNumber,attrs:Object.keys(e.attrs).reduce((r,i)=>(r[i.toLowerCase()]=e.attrs[i],r),{})};return{SS_Key:n.KEY,Module_SS_Key:n.MODULEKEY,Name:n.NAME,Physical_Table_name:n.TABLENAME,Hash:n.HASH,Extra_Info:JSON.stringify(t),Upgrade_Status:n.UPGRADESTATUS}}o(zle,"convertV2ToV0");function qle(n,e,t){return M(this,void 0,void 0,function*(){let i=(yield n.getAllRecords(e)).map(s=>Gle(s));yield n.deleteTableIfExists(e),yield n.createTable(t),yield n.upsertAllRecords(t,i)})}o(qle,"migrateToV2");function Kle(n,e,t){return new Promise(r=>{n.executeSql(`SELECT "${e}"."${t}" FROM "${e}" LIMIT 1`,void 0,()=>{r(!0)},()=>(r(!1),!1))})}o(Kle,"checkIfColumnExists");var DF={isNeeded:o(n=>M(void 0,void 0,void 0,function*(){let e=n,t=!1;return(yield n.existsTable(Vo))&&(t=yield e.executeQuery(i=>{var s;return Kle(i,Vo.tableName,(s=Vo.attributes[0])===null||s===void 0?void 0:s.columnName)})),t}),"isNeeded"),run:o(n=>M(void 0,void 0,void 0,function*(){let e=[{v0TableInfo:Vo,v2TableInfo:ut},{v0TableInfo:ZS,v2TableInfo:qi}].map(t=>{let{v0TableInfo:r,v2TableInfo:i}=t;return qle(n,r,i)});yield Promise.all(e)}),"run"),cleanup:o(n=>M(void 0,void 0,void 0,function*(){yield n.deleteTableIfExists(Vo),yield n.deleteTableIfExists(ZS),yield n.renameTable(`${ut.tableName}_V2`,ut.tableName),yield n.renameTable(`${qi.tableName}_V2`,qi.tableName)}),"cleanup")},Mu=class Mu{constructor(){Mu.lastUpgraderRegistered=this}isNeeded(e){return M(this,void 0,void 0,function*(){let t=!1;return Mu.lastUpgraderRegistered===this&&(t=yield DF.isNeeded(e)),t})}run(e){return M(this,void 0,void 0,function*(){let t=[{v2TableInfo:ut,v0TableInfo:Vo},{v2TableInfo:qi,v0TableInfo:ZS}].map(r=>{let{v2TableInfo:i,v0TableInfo:s}=r;return this.migrateToV0(e,i,s)});yield Promise.all(t)})}migrateToV0(e,t,r){return M(this,void 0,void 0,function*(){let s=(yield e.getAllRecords(t)).map(a=>zle(a));yield e.deleteTableIfExists(`${t.tableName}_V2`),yield e.renameTable(t.tableName,`${t.tableName}_V2`),yield e.createTable(r),yield e.upsertAllRecords(r,s)})}cleanup(){return M(this,void 0,void 0,function*(){Mu.lastUpgraderRegistered=null})}};o(Mu,"WebSQLMetadataV2UpgraderStep2");var QS=Mu,UC=class UC extends lv{constructor(){super(new Gd),this.isMetadataV2UpgraderRegistered=!1}registerInitializer(e){this.isMetadataV2UpgraderRegistered||(this.database.registerInitializer(DF),this.isMetadataV2UpgraderRegistered=!0),super.registerInitializer(e),this.database.registerInitializer(new QS)}executeAggregate(e){return M(this,void 0,void 0,function*(){let t=yield this.getDatabase();try{return yield t.executeQuery(e)}catch(r){throw new me.DataBaseException("",r.message,r.stack)}})}};o(UC,"WebSQLEntityService");var eA=UC,Yle="LifecycleHandlers",MC=class MC{constructor(){let{onNewVersionHandler:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.onNewVersionHandler=e}setOnNewVersionHandler(e){this.onNewVersionHandler=e}onNewVersion(e){return M(this,void 0,void 0,function*(){this.onNewVersionHandler?this.onNewVersionHandler(e):it(Yle,"onNewVersion triggered without handler defined.")})}};o(MC,"LifecycleEventsManager");var tA=MC,Fp="MappingWithDefaultService",kC=class kC{constructor(){this.messages={}}getMessage(e,t){ee(Fp,`Getting message for key ${e} with default message ${t}`);let r=this.messages[e];return r!=null?r:t}setMessage(e,t){ee(Fp,`Setting message for key ${e} with value ${t}`),this.messages[e]=t}add(e){if(!e)throw new Error("Messages cannot either null or undefined");let t=Object.keys(e);ee(Fp,`Adding ${t.length} messages`),t.forEach(r=>this.setMessage(r,e[r]))}clear(){ee(Fp,"Clearing cached messages"),this.messages={}}};o(kC,"MappingWithDefaultService");var nA=kC,mx="Application",Xle=o(function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return M(void 0,[n,...t],void 0,function(i){let{dateTimeFormat:s,numberFormat:a,application:u=pc}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){Jx(zs());let l=Qle();hle(),ee(mx,"Initializing Application"),i.register(X.LifecycleEventsManager,()=>new tA({onNewVersionHandler:o(c=>u.onNewVersionDetected(c),"onNewVersionHandler")})),_k(c=>{if(ci.isUpgradingVersion&&!sA(c)){it(mx,"Error during upgrade, treating as an upgrade error."),ci.handleUpgradeError(c,1);return}Us(c)}),ra.clear(),Ox(Wx()),Jle(s,a),yield l,i.register(X.ClientVariablesService,()=>new GS(fA())),ede(i),i.register(X.TranslationsService,()=>new nA),i.register(X.LocaleService,()=>new av(Gn())),i.register(X.BinaryUrlCache,()=>new KS),Zle()})()})},"useBaseApplication"),Jle=o((n,e)=>{n&&(k.FORMAT.dateTimeFormat=n),e&&(k.FORMAT.numberFormat=e)},"setFormats"),Zle=o(()=>{let n=Jo();n&&(Object.defineProperty(n,"OutSystemsApp",{value:{get public(){var e;return new rc(null,(e=Ar.activeScreen)===null||e===void 0?void 0:e.callContext())}},configurable:!0}),n.dispatchEvent(new Event("ospublicapiready")))},"defineGlobalPublicApiHelper"),Qle=o(()=>M(void 0,void 0,void 0,function*(){(yield wF())&&(yield sI())}),"initializeCookiesManager"),ede=o(n=>{In()?n.register(X.EntityService,()=>new eA):n.register(X.EntityService,()=>new JS)},"registerEntityService"),tde=o((n,e)=>{n instanceof Ea&&n.setHealthCheckInterval(e)},"updateHealthCheckInterval"),nde=o(function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ene,t=n.readNumber("HealthCheckInterval"),r=t===void 0||t<0?Number.POSITIVE_INFINITY:t;[e.resolve(X.HttpClient),e.resolve(X.UnauthenticatedHttpClient),e.resolve(X.DebuggerHttpClient),e.resolve(X.NonDebuggerHttpClient)].forEach(s=>tde(s,r))},"settingsUpdatedHandler"),LF="6.54.6";iA("client-runtime-core",LF);export{o as a,ide as b,sde as c,pt as d,Zte as e,pe as f,X as g,Rx as h,dne as i,mne as j,wne as k,$ne as l,jne as m,qne as n,_re as o,Ore as p,Nre as q,Lre as r,Uie as s,Kie as t,YA as u,xoe as v,tae as w,nae as x,iae as y,yae as z,Oae as A,Pae as B,Nae as C,kae as D,tue as E,nue as F,aue as G,Iue as H,Hue as I,Kue as J,Wce as K,sle as L,ole as M,lle as N,dle as O,fle as P,Xle as Q,nde as R,rde as S};
/**
* @license Angular v<unknown>
* (c) 2010-2024 Google LLC. https://angular.io/
* License: MIT
*/
/*!
* cookie
* Copyright(c) 2012-2014 Roman Shtylman
* Copyright(c) 2015 Douglas Christopher Wilson
* MIT Licensed
*/
/*!
* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <http://feross.org>
* @license  MIT
*/
/*!
* JavaScript Cookie v2.2.1
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/
/*! https://mths.be/punycode v1.3.2 by @mathias */
/*!
*  decimal.js v10.6.0
*  An arbitrary-precision Decimal type for JavaScript.
*  https://github.com/MikeMcl/decimal.js
*  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
*  MIT Licence
*/
